{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock, createTextVNode as _createTextVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"dashboard-container\"\n};\nconst _hoisted_2 = {\n  class: \"header-content\"\n};\nconst _hoisted_3 = {\n  class: \"header-left\"\n};\nconst _hoisted_4 = {\n  class: \"filter-content\"\n};\nconst _hoisted_5 = {\n  class: \"summary-grid mb-4\"\n};\nconst _hoisted_6 = {\n  class: \"summary-content\"\n};\nconst _hoisted_7 = {\n  class: \"summary-info\"\n};\nconst _hoisted_8 = {\n  class: \"summary-content\"\n};\nconst _hoisted_9 = {\n  class: \"summary-info\"\n};\nconst _hoisted_10 = {\n  class: \"summary-content\"\n};\nconst _hoisted_11 = {\n  class: \"summary-info\"\n};\nconst _hoisted_12 = {\n  class: \"summary-content\"\n};\nconst _hoisted_13 = {\n  class: \"summary-info\"\n};\nconst _hoisted_14 = {\n  class: \"summary-content\"\n};\nconst _hoisted_15 = {\n  class: \"summary-info\"\n};\nconst _hoisted_16 = {\n  class: \"summary-content\"\n};\nconst _hoisted_17 = {\n  class: \"summary-info\"\n};\nconst _hoisted_18 = {\n  class: \"summary-content\"\n};\nconst _hoisted_19 = {\n  class: \"summary-info\"\n};\nconst _hoisted_20 = {\n  class: \"summary-content\"\n};\nconst _hoisted_21 = {\n  class: \"summary-info\"\n};\nconst _hoisted_22 = {\n  class: \"charts-grid mb-4\"\n};\nconst _hoisted_23 = {\n  ref: \"leaveChart\"\n};\nconst _hoisted_24 = {\n  ref: \"taskChart\"\n};\nconst _hoisted_25 = {\n  class: \"mb-3\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Toast = _resolveComponent(\"Toast\");\n  const _component_Button = _resolveComponent(\"Button\");\n  const _component_Card = _resolveComponent(\"Card\");\n  const _component_Calendar = _resolveComponent(\"Calendar\");\n  const _component_Column = _resolveComponent(\"Column\");\n  const _component_DataTable = _resolveComponent(\"DataTable\");\n  const _component_Badge = _resolveComponent(\"Badge\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_Toast), _createCommentVNode(\" Header \"), _createVNode(_component_Card, {\n    class: \"header-card mb-4\"\n  }, {\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_Button, {\n      icon: \"pi pi-arrow-left\",\n      onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.go(-1)),\n      text: \"\",\n      class: \"back-btn\"\n    }), _cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n      class: \"header-title\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-chart-bar header-icon\"\n    }), _createElementVNode(\"h1\", null, \"Dashboard\")], -1 /* CACHED */))])])]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" Filter \"), _createVNode(_component_Card, {\n    class: \"filter-card mb-4\"\n  }, {\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_Calendar, {\n      modelValue: _ctx.selectedDate,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.selectedDate = $event),\n      dateFormat: \"dd/mm/yy\",\n      placeholder: \"เลือกวันที่\",\n      showIcon: \"\",\n      manualInput: false\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_Button, {\n      label: \"ตกลง\",\n      icon: \"pi pi-check\",\n      onClick: $setup.loadData,\n      loading: $setup.loading\n    }, null, 8 /* PROPS */, [\"loading\"]), _createVNode(_component_Button, {\n      label: \"รีเฟรช\",\n      icon: \"pi pi-refresh\",\n      onClick: $setup.loadData,\n      loading: $setup.loading,\n      severity: \"secondary\"\n    }, null, 8 /* PROPS */, [\"loading\"])])]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" Summary Cards \"), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_Card, {\n    class: \"summary-card\"\n  }, {\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_6, [_cache[4] || (_cache[4] = _createElementVNode(\"i\", {\n      class: \"pi pi-users summary-icon\",\n      style: {\n        \"color\": \"#4A90E2\"\n      }\n    }, null, -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"h3\", null, _toDisplayString($setup.stats.totalUsers), 1 /* TEXT */), _cache[3] || (_cache[3] = _createElementVNode(\"p\", null, \"ผู้ใช้งานทั้งหมด\", -1 /* CACHED */))])])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_Card, {\n    class: \"summary-card\"\n  }, {\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_8, [_cache[6] || (_cache[6] = _createElementVNode(\"i\", {\n      class: \"pi pi-user-plus summary-icon\",\n      style: {\n        \"color\": \"#10b981\"\n      }\n    }, null, -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"h3\", null, _toDisplayString($setup.stats.workingToday), 1 /* TEXT */), _cache[5] || (_cache[5] = _createElementVNode(\"p\", null, \"พนักงานทำงานวันนี้\", -1 /* CACHED */))])])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_Card, {\n    class: \"summary-card\"\n  }, {\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_10, [_cache[8] || (_cache[8] = _createElementVNode(\"i\", {\n      class: \"pi pi-calendar-times summary-icon\",\n      style: {\n        \"color\": \"#f59e0b\"\n      }\n    }, null, -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"h3\", null, _toDisplayString($setup.stats.todayLeaves), 1 /* TEXT */), _cache[7] || (_cache[7] = _createElementVNode(\"p\", null, \"ลางานวันนี้\", -1 /* CACHED */))])])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_Card, {\n    class: \"summary-card\"\n  }, {\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_12, [_cache[10] || (_cache[10] = _createElementVNode(\"i\", {\n      class: \"pi pi-car summary-icon\",\n      style: {\n        \"color\": \"#06b6d4\"\n      }\n    }, null, -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"h3\", null, _toDisplayString($setup.stats.activeCars), 1 /* TEXT */), _cache[9] || (_cache[9] = _createElementVNode(\"p\", null, \"รถกำลังใช้งาน\", -1 /* CACHED */))])])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_Card, {\n    class: \"summary-card\"\n  }, {\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_14, [_cache[12] || (_cache[12] = _createElementVNode(\"i\", {\n      class: \"pi pi-clock summary-icon\",\n      style: {\n        \"color\": \"#3b82f6\"\n      }\n    }, null, -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"h3\", null, _toDisplayString($setup.stats.dueSoon), 1 /* TEXT */), _cache[11] || (_cache[11] = _createElementVNode(\"p\", null, \"งานครบกำหนดสัปดาห์นี้\", -1 /* CACHED */))])])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_Card, {\n    class: \"summary-card\"\n  }, {\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_16, [_cache[14] || (_cache[14] = _createElementVNode(\"i\", {\n      class: \"pi pi-exclamation-triangle summary-icon\",\n      style: {\n        \"color\": \"#ef4444\"\n      }\n    }, null, -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"h3\", null, _toDisplayString($setup.stats.overdue), 1 /* TEXT */), _cache[13] || (_cache[13] = _createElementVNode(\"p\", null, \"งานเลยกำหนด\", -1 /* CACHED */))])])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_Card, {\n    class: \"summary-card\"\n  }, {\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_18, [_cache[16] || (_cache[16] = _createElementVNode(\"i\", {\n      class: \"pi pi-briefcase summary-icon\",\n      style: {\n        \"color\": \"#8b5cf6\"\n      }\n    }, null, -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"h3\", null, _toDisplayString($setup.stats.activeTasks), 1 /* TEXT */), _cache[15] || (_cache[15] = _createElementVNode(\"p\", null, \"งานกำลังดำเนินการ\", -1 /* CACHED */))])])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_Card, {\n    class: \"summary-card\"\n  }, {\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_20, [_cache[18] || (_cache[18] = _createElementVNode(\"i\", {\n      class: \"pi pi-check-circle summary-icon\",\n      style: {\n        \"color\": \"#22c55e\"\n      }\n    }, null, -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_21, [_createElementVNode(\"h3\", null, _toDisplayString($setup.stats.completedTasks), 1 /* TEXT */), _cache[17] || (_cache[17] = _createElementVNode(\"p\", null, \"งานเสร็จสิ้น\", -1 /* CACHED */))])])]),\n    _: 1 /* STABLE */\n  })]), _createCommentVNode(\" Charts \"), _createElementVNode(\"div\", _hoisted_22, [_createVNode(_component_Card, {\n    class: \"chart-card\"\n  }, {\n    content: _withCtx(() => [_cache[19] || (_cache[19] = _createElementVNode(\"h3\", null, \"การลางานรายเดือน\", -1 /* CACHED */)), _createElementVNode(\"canvas\", _hoisted_23, null, 512 /* NEED_PATCH */)]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_Card, {\n    class: \"chart-card\"\n  }, {\n    content: _withCtx(() => [_cache[20] || (_cache[20] = _createElementVNode(\"h3\", null, \"สถานะงาน\", -1 /* CACHED */)), _createElementVNode(\"canvas\", _hoisted_24, null, 512 /* NEED_PATCH */)]),\n    _: 1 /* STABLE */\n  })]), _createCommentVNode(\" พนักงานที่ลงงานวันที่เลือก \"), _ctx.selectedDate ? (_openBlock(), _createBlock(_component_Card, {\n    key: 0,\n    class: \"mb-4\"\n  }, {\n    content: _withCtx(() => [_createElementVNode(\"h3\", _hoisted_25, \"พนักงานที่ลงงานวันที่ \" + _toDisplayString(_ctx.formatSelectedDate()), 1 /* TEXT */), _createVNode(_component_DataTable, {\n      value: _ctx.workingEmployees,\n      loading: $setup.loading,\n      paginator: \"\",\n      rows: 10,\n      showGridlines: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_Column, {\n        field: \"employee_id\",\n        header: \"รหัสพนักงาน\",\n        sortable: \"\"\n      }), _createVNode(_component_Column, {\n        field: \"name\",\n        header: \"ชื่อ-นามสกุล\",\n        sortable: \"\"\n      }), _createVNode(_component_Column, {\n        field: \"department\",\n        header: \"แผนก\",\n        sortable: \"\"\n      }), _createVNode(_component_Column, {\n        field: \"position\",\n        header: \"ตำแหน่ง\",\n        sortable: \"\"\n      }), _createVNode(_component_Column, {\n        field: \"work_count\",\n        header: \"จำนวนงาน\",\n        sortable: \"\"\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"value\", \"loading\"])]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Recent Activities \"), _createVNode(_component_Card, null, {\n    content: _withCtx(() => [_cache[21] || (_cache[21] = _createElementVNode(\"h3\", {\n      class: \"mb-3\"\n    }, \"กิจกรรมล่าสุด\", -1 /* CACHED */)), _createVNode(_component_DataTable, {\n      value: $setup.recentActivities,\n      loading: $setup.loading,\n      paginator: \"\",\n      rows: 10\n    }, {\n      default: _withCtx(() => [_createVNode(_component_Column, {\n        field: \"type\",\n        header: \"ประเภท\"\n      }, {\n        body: _withCtx(({\n          data\n        }) => [_createVNode(_component_Badge, {\n          value: data.type,\n          severity: $setup.getTypeSeverity(data.type)\n        }, null, 8 /* PROPS */, [\"value\", \"severity\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_Column, {\n        field: \"user\",\n        header: \"ผู้ใช้\"\n      }), _createVNode(_component_Column, {\n        field: \"action\",\n        header: \"กิจกรรม\"\n      }), _createVNode(_component_Column, {\n        field: \"date\",\n        header: \"วันที่\"\n      }, {\n        body: _withCtx(({\n          data\n        }) => [_createTextVNode(_toDisplayString($setup.formatDate(data.date)), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"value\", \"loading\"])]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","ref","_createElementBlock","_hoisted_1","_createVNode","_component_Toast","_createCommentVNode","_component_Card","content","_withCtx","_createElementVNode","_hoisted_2","_hoisted_3","_component_Button","icon","onClick","_cache","$event","_ctx","$router","go","text","_hoisted_4","_component_Calendar","selectedDate","dateFormat","placeholder","showIcon","manualInput","label","$setup","loadData","loading","severity","_hoisted_5","_hoisted_6","style","_hoisted_7","_toDisplayString","stats","totalUsers","_hoisted_8","_hoisted_9","workingToday","_hoisted_10","_hoisted_11","todayLeaves","_hoisted_12","_hoisted_13","activeCars","_hoisted_14","_hoisted_15","dueSoon","_hoisted_16","_hoisted_17","overdue","_hoisted_18","_hoisted_19","activeTasks","_hoisted_20","_hoisted_21","completedTasks","_hoisted_22","_hoisted_23","_hoisted_24","_createBlock","_hoisted_25","formatSelectedDate","_component_DataTable","value","workingEmployees","paginator","rows","showGridlines","_component_Column","field","header","sortable","recentActivities","body","data","_component_Badge","type","getTypeSeverity","formatDate","date"],"sources":["D:\\frontend_cem\\src\\views\\management\\Dashboard.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div class=\"dashboard-container\">\n    <Toast />\n    \n    <!-- Header -->\n    <Card class=\"header-card mb-4\">\n      <template #content>\n        <div class=\"header-content\">\n          <div class=\"header-left\">\n            <Button icon=\"pi pi-arrow-left\" @click=\"$router.go(-1)\" text class=\"back-btn\" />\n            <div class=\"header-title\">\n              <i class=\"pi pi-chart-bar header-icon\"></i>\n              <h1>Dashboard</h1>\n            </div>\n          </div>\n        </div>\n      </template>\n    </Card>\n\n    <!-- Filter -->\n    <Card class=\"filter-card mb-4\">\n      <template #content>\n        <div class=\"filter-content\">\n          <Calendar v-model=\"selectedDate\" dateFormat=\"dd/mm/yy\" placeholder=\"เลือกวันที่\" showIcon :manualInput=\"false\" />\n          <Button label=\"ตกลง\" icon=\"pi pi-check\" @click=\"loadData\" :loading=\"loading\" />\n          <Button label=\"รีเฟรช\" icon=\"pi pi-refresh\" @click=\"loadData\" :loading=\"loading\" severity=\"secondary\" />\n        </div>\n      </template>\n    </Card>\n\n    <!-- Summary Cards -->\n    <div class=\"summary-grid mb-4\">\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-users summary-icon\" style=\"color: #4A90E2\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.totalUsers }}</h3>\n              <p>ผู้ใช้งานทั้งหมด</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-user-plus summary-icon\" style=\"color: #10b981\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.workingToday }}</h3>\n              <p>พนักงานทำงานวันนี้</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-calendar-times summary-icon\" style=\"color: #f59e0b\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.todayLeaves }}</h3>\n              <p>ลางานวันนี้</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-car summary-icon\" style=\"color: #06b6d4\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.activeCars }}</h3>\n              <p>รถกำลังใช้งาน</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-clock summary-icon\" style=\"color: #3b82f6\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.dueSoon }}</h3>\n              <p>งานครบกำหนดสัปดาห์นี้</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-exclamation-triangle summary-icon\" style=\"color: #ef4444\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.overdue }}</h3>\n              <p>งานเลยกำหนด</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-briefcase summary-icon\" style=\"color: #8b5cf6\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.activeTasks }}</h3>\n              <p>งานกำลังดำเนินการ</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-check-circle summary-icon\" style=\"color: #22c55e\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.completedTasks }}</h3>\n              <p>งานเสร็จสิ้น</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n    </div>\n\n    <!-- Charts -->\n    <div class=\"charts-grid mb-4\">\n      <Card class=\"chart-card\">\n        <template #content>\n          <h3>การลางานรายเดือน</h3>\n          <canvas ref=\"leaveChart\"></canvas>\n        </template>\n      </Card>\n\n      <Card class=\"chart-card\">\n        <template #content>\n          <h3>สถานะงาน</h3>\n          <canvas ref=\"taskChart\"></canvas>\n        </template>\n      </Card>\n    </div>\n\n    <!-- พนักงานที่ลงงานวันที่เลือก -->\n    <Card class=\"mb-4\" v-if=\"selectedDate\">\n      <template #content>\n        <h3 class=\"mb-3\">พนักงานที่ลงงานวันที่ {{ formatSelectedDate() }}</h3>\n        <DataTable :value=\"workingEmployees\" :loading=\"loading\" paginator :rows=\"10\" showGridlines>\n          <Column field=\"employee_id\" header=\"รหัสพนักงาน\" sortable />\n          <Column field=\"name\" header=\"ชื่อ-นามสกุล\" sortable />\n          <Column field=\"department\" header=\"แผนก\" sortable />\n          <Column field=\"position\" header=\"ตำแหน่ง\" sortable />\n          <Column field=\"work_count\" header=\"จำนวนงาน\" sortable />\n        </DataTable>\n      </template>\n    </Card>\n\n    <!-- Recent Activities -->\n    <Card>\n      <template #content>\n        <h3 class=\"mb-3\">กิจกรรมล่าสุด</h3>\n        <DataTable :value=\"recentActivities\" :loading=\"loading\" paginator :rows=\"10\">\n          <Column field=\"type\" header=\"ประเภท\">\n            <template #body=\"{ data }\">\n              <Badge :value=\"data.type\" :severity=\"getTypeSeverity(data.type)\" />\n            </template>\n          </Column>\n          <Column field=\"user\" header=\"ผู้ใช้\" />\n          <Column field=\"action\" header=\"กิจกรรม\" />\n          <Column field=\"date\" header=\"วันที่\">\n            <template #body=\"{ data }\">\n              {{ formatDate(data.date) }}\n            </template>\n          </Column>\n        </DataTable>\n      </template>\n    </Card>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, nextTick } from 'vue'\nimport { useToast } from 'primevue/usetoast'\nimport { Chart } from 'chart.js/auto'\nimport axios from 'axios'\n\nconst toast = useToast()\nconst loading = ref(false)\nconst dateRange = ref([new Date(new Date().setDate(1)), new Date()])\n\nconst stats = ref({\n  totalUsers: 0,\n  workingToday: 0,\n  todayLeaves: 0,\n  activeCars: 0,\n  activeTasks: 0,\n  completedTasks: 0,\n  dueSoon: 0,\n  overdue: 0\n})\n\nconst recentActivities = ref([])\nconst leaveChart = ref(null)\nconst taskChart = ref(null)\nlet leaveChartInstance = null\nlet taskChartInstance = null\n\nonMounted(() => {\n  loadData()\n})\n\nconst loadData = async () => {\n  loading.value = true\n  try {\n    const [users, leaves, cars, tasks, dailyWork] = await Promise.all([\n      axios.get('/api/users'),\n      axios.get('/api/leave'),\n      axios.get('/api/car-booking'),\n      axios.get('/api/tasks'),\n      axios.get('/api/daily-work')\n    ])\n\n    // Filter ข้อมูลตาม date range\n    let filteredLeaves = leaves.data\n    let filteredCars = cars.data\n    let filteredTasks = tasks.data\n    let filteredDailyWork = dailyWork.data\n\n    if (dateRange.value && dateRange.value[0] && dateRange.value[1]) {\n      const startDate = new Date(dateRange.value[0])\n      startDate.setHours(0, 0, 0, 0)\n      const endDate = new Date(dateRange.value[1])\n      endDate.setHours(23, 59, 59, 999)\n\n      filteredLeaves = leaves.data.filter(l => {\n        const date = new Date(l.created_at || l.start_datetime)\n        return date >= startDate && date <= endDate\n      })\n\n      filteredCars = cars.data.filter(c => {\n        const date = new Date(c.created_at || c.start_datetime)\n        return date >= startDate && date <= endDate\n      })\n\n      filteredTasks = tasks.data.filter(t => {\n        const date = new Date(t.created_at)\n        return date >= startDate && date <= endDate\n      })\n\n      filteredDailyWork = dailyWork.data.filter(w => {\n        const date = new Date(w.work_date)\n        return date >= startDate && date <= endDate\n      })\n    }\n\n    // Calculate stats\n    const activeUsers = users.data.filter(u => u.is_active)\n    stats.value.totalUsers = activeUsers.length\n    \n    const today = new Date().toISOString().split('T')[0]\n    const todayDate = new Date(today + 'T00:00:00') // Local midnight\n    const weekFromNow = new Date(todayDate)\n    weekFromNow.setDate(weekFromNow.getDate() + 7)\n    \n    // Helper function to parse date as local\n    const parseLocalDate = (dateStr) => {\n      if (!dateStr) return null\n      const datePart = dateStr.split('T')[0]\n      return new Date(datePart + 'T00:00:00')\n    }\n    \n    // Get unique user IDs who have approved leave today\n    const todayLeavesUsers = filteredLeaves.filter(l => {\n      if (l.status !== 'approved') return false\n      const startDate = l.start_datetime?.split('T')[0]\n      const endDate = l.end_datetime?.split('T')[0]\n      return startDate <= today && endDate >= today\n    })\n    \n    // Count unique users (DISTINCT user_id)\n    const uniqueUserIds = [...new Set(todayLeavesUsers.map(l => l.user_id))]\n    stats.value.todayLeaves = uniqueUserIds.length\n    \n    // พนักงานที่ทำงานวันนี้ = คนที่ลงงานรายวันวันนี้\n    const todayWorkUsers = filteredDailyWork.filter(w => {\n      const workDate = w.work_date?.split('T')[0]\n      return workDate === today\n    })\n    const uniqueWorkUserIds = [...new Set(todayWorkUsers.map(w => w.user_id))]\n    stats.value.workingToday = uniqueWorkUserIds.length\n    \n    stats.value.activeCars = filteredCars.filter(c => c.status === 'active').length\n    stats.value.activeTasks = filteredTasks.filter(t => t.status !== 'completed' && t.status !== 'done').length\n    stats.value.completedTasks = filteredTasks.filter(t => t.status === 'completed' || t.status === 'done').length\n    \n    // งานที่ครบกำหนดสัปดาห์นี้\n    stats.value.dueSoon = filteredTasks.filter(t => {\n      if (!t.project_end_date) return false\n      const endDate = parseLocalDate(t.project_end_date)\n      return endDate >= todayDate && endDate <= weekFromNow && (t.status !== 'completed' && t.status !== 'done')\n    }).length\n    \n    // งานที่เลยกำหนด\n    stats.value.overdue = filteredTasks.filter(t => {\n      if (!t.project_end_date) return false\n      const endDate = parseLocalDate(t.project_end_date)\n      return endDate < todayDate && (t.status !== 'completed' && t.status !== 'done')\n    }).length\n\n    // Recent activities\n    recentActivities.value = [\n      ...filteredLeaves.slice(0, 5).map(l => ({\n        type: 'ลางาน',\n        user: l.user_name || 'N/A',\n        action: `ลา${l.leave_type}`,\n        date: l.created_at\n      })),\n      ...filteredCars.slice(0, 5).map(c => ({\n        type: 'จองรถ',\n        user: c.name || 'N/A',\n        action: `จองรถ ${c.license}`,\n        date: c.created_at\n      }))\n    ].sort((a, b) => new Date(b.date) - new Date(a.date)).slice(0, 10)\n\n    await nextTick()\n    renderCharts(filteredLeaves, filteredTasks)\n  } catch (error) {\n    toast.add({ severity: 'error', summary: 'เกิดข้อผิดพลาด', detail: 'ไม่สามารถโหลดข้อมูลได้', life: 3000 })\n  } finally {\n    loading.value = false\n  }\n}\n\nconst renderCharts = (leaves, tasks) => {\n  // Leave Chart\n  if (leaveChartInstance) leaveChartInstance.destroy()\n  \n  const leaveTypes = {}\n  leaves.forEach(l => {\n    leaveTypes[l.leave_type] = (leaveTypes[l.leave_type] || 0) + 1\n  })\n\n  leaveChartInstance = new Chart(leaveChart.value, {\n    type: 'bar',\n    data: {\n      labels: Object.keys(leaveTypes),\n      datasets: [{\n        label: 'จำนวนการลา',\n        data: Object.values(leaveTypes),\n        backgroundColor: '#4A90E2'\n      }]\n    },\n    options: {\n      responsive: true,\n      maintainAspectRatio: false\n    }\n  })\n\n  // Task Chart\n  if (taskChartInstance) taskChartInstance.destroy()\n  \n  const taskStatus = {}\n  tasks.forEach(t => {\n    taskStatus[t.status || 'pending'] = (taskStatus[t.status || 'pending'] || 0) + 1\n  })\n\n  taskChartInstance = new Chart(taskChart.value, {\n    type: 'doughnut',\n    data: {\n      labels: Object.keys(taskStatus),\n      datasets: [{\n        data: Object.values(taskStatus),\n        backgroundColor: ['#f59e0b', '#4A90E2', '#10b981', '#ef4444']\n      }]\n    },\n    options: {\n      responsive: true,\n      maintainAspectRatio: false\n    }\n  })\n}\n\nconst formatDate = (date) => {\n  return new Date(date).toLocaleString('th-TH', { \n    year: 'numeric', \n    month: 'short', \n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  })\n}\n\nconst getTypeSeverity = (type) => {\n  const map = { 'ลางาน': 'warning', 'จองรถ': 'info', 'งาน': 'success' }\n  return map[type] || 'secondary'\n}\n</script>\n\n<style scoped>\n.dashboard-container {\n  padding: 1rem;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.header-card {\n  background: linear-gradient(135deg, #4A90E2, #D73527);\n  color: white;\n  border: none;\n}\n\n.header-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.header-title {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n.header-icon {\n  font-size: 1.5rem;\n}\n\n.header-title h1 {\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 600;\n}\n\n.back-btn {\n  color: white !important;\n  background: rgba(255, 255, 255, 0.2) !important;\n  border: 1px solid rgba(255, 255, 255, 0.3) !important;\n  border-radius: 8px !important;\n  padding: 0.5rem !important;\n}\n\n.back-btn:hover {\n  background: rgba(255, 255, 255, 0.3) !important;\n}\n\n.filter-card {\n  border: 1px solid #e9ecef;\n}\n\n.filter-content {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n  flex-wrap: wrap;\n}\n\n.summary-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\n  gap: 1rem;\n}\n\n.summary-card {\n  border: 1px solid #e9ecef;\n  transition: all 0.3s;\n}\n\n.summary-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 20px rgba(0,0,0,0.1);\n}\n\n.summary-content {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.summary-icon {\n  font-size: 2.5rem;\n}\n\n.summary-info h3 {\n  margin: 0;\n  font-size: 2rem;\n  font-weight: 600;\n}\n\n.summary-info p {\n  margin: 0;\n  color: #6c757d;\n  font-size: 0.9rem;\n}\n\n.charts-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n  gap: 1rem;\n}\n\n.chart-card {\n  border: 1px solid #e9ecef;\n  min-height: 350px;\n}\n\n.chart-card h3 {\n  margin: 0 0 1rem 0;\n  font-size: 1.1rem;\n  color: #2c3e50;\n}\n\ncanvas {\n  max-height: 300px;\n}\n\n@media (max-width: 768px) {\n  .summary-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .charts-grid {\n    grid-template-columns: 1fr;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}