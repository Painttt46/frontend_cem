{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"app-container\"\n};\nconst _hoisted_2 = {\n  class: \"main-tabs\"\n};\nconst _hoisted_3 = {\n  class: \"tabs-header\"\n};\nconst _hoisted_4 = {\n  class: \"tab-header\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"action-buttons-header\"\n};\nconst _hoisted_6 = {\n  class: \"tab-content-area\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"tab-content\"\n};\nconst _hoisted_8 = {\n  key: 1,\n  class: \"tab-content\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"no-images-state\"\n};\nconst _hoisted_10 = {\n  key: 1,\n  class: \"image-viewer\"\n};\nconst _hoisted_11 = {\n  class: \"section-header\"\n};\nconst _hoisted_12 = {\n  class: \"images-grid\"\n};\nconst _hoisted_13 = [\"src\", \"onClick\"];\nconst _hoisted_14 = {\n  key: 2,\n  class: \"upload-section\"\n};\nconst _hoisted_15 = {\n  class: \"upload-controls\"\n};\nconst _hoisted_16 = {\n  key: 0,\n  class: \"no-image-placeholder\"\n};\nconst _hoisted_17 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_TabPanel = _resolveComponent(\"TabPanel\");\n  const _component_Badge = _resolveComponent(\"Badge\");\n  const _component_TabView = _resolveComponent(\"TabView\");\n  const _component_Button = _resolveComponent(\"Button\");\n  const _component_Calendar = _resolveComponent(\"Calendar\");\n  const _component_History = _resolveComponent(\"History\");\n  const _component_BookingForm = _resolveComponent(\"BookingForm\");\n  const _component_Divider = _resolveComponent(\"Divider\");\n  const _component_Dialog = _resolveComponent(\"Dialog\");\n  const _component_Toast = _resolveComponent(\"Toast\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[11] || (_cache[11] = _createElementVNode(\"div\", {\n    class: \"header-title\"\n  }, [_createElementVNode(\"i\", {\n    class: \"pi pi-car\"\n  }), _createElementVNode(\"h1\", null, \"ระบบแจ้งใช้รถ/แจ้งคืนรถ\")], -1)), _createVNode(_component_TabView, {\n    activeIndex: $data.activeTabIndex,\n    \"onUpdate:activeIndex\": _cache[0] || (_cache[0] = $event => $data.activeTabIndex = $event),\n    class: \"tab-navigation\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_TabPanel, null, {\n      header: _withCtx(() => [...(_cache[6] || (_cache[6] = [_createElementVNode(\"div\", {\n        class: \"tab-header\"\n      }, [_createElementVNode(\"i\", {\n        class: \"pi pi-calendar\"\n      }), _createElementVNode(\"span\", null, \"ปฏิทิน\")], -1)]))]),\n      _: 1\n    }), _createVNode(_component_TabPanel, null, {\n      header: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_cache[7] || (_cache[7] = _createElementVNode(\"i\", {\n        class: \"pi pi-history\"\n      }, null, -1)), _cache[8] || (_cache[8] = _createElementVNode(\"span\", null, \"ประวัติการใช้รถ\", -1)), $options.borrowRecordsCount > 0 ? (_openBlock(), _createBlock(_component_Badge, {\n        key: 0,\n        value: $options.borrowRecordsCount,\n        severity: \"info\"\n      }, null, 8, [\"value\"])) : _createCommentVNode(\"\", true)])]),\n      _: 1\n    })]),\n    _: 1\n  }, 8, [\"activeIndex\"]), $data.activeTabIndex === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createVNode(_component_Button, {\n    onClick: $options.showReturnForm,\n    disabled: $options.availableBorrows.length === 0,\n    severity: \"warning\",\n    icon: \"pi pi-upload\",\n    raised: \"\"\n  }, {\n    default: _withCtx(() => [$options.availableBorrows.length > 0 ? (_openBlock(), _createBlock(_component_Badge, {\n      key: 0,\n      value: $options.availableBorrows.length,\n      severity: \"warning\"\n    }, null, 8, [\"value\"])) : _createCommentVNode(\"\", true), _cache[9] || (_cache[9] = _createTextVNode(\" แจ้งคืนรถ \", -1))]),\n    _: 1\n  }, 8, [\"onClick\", \"disabled\"]), _createVNode(_component_Button, {\n    onClick: $options.showCancelForm,\n    disabled: $options.pendingBorrows.length === 0,\n    severity: \"danger\",\n    icon: \"pi pi-times-circle\",\n    raised: \"\"\n  }, {\n    default: _withCtx(() => [_cache[10] || (_cache[10] = _createTextVNode(\" ยกเลิกการจอง \", -1)), $options.pendingBorrows.length > 0 ? (_openBlock(), _createBlock(_component_Badge, {\n      key: 0,\n      value: $options.pendingBorrows.length,\n      style: {\n        backgroundColor: 'white',\n        color: 'black',\n        fontSize: '0.75rem',\n        width: '1.2rem',\n        height: '1.2rem',\n        borderRadius: '50%',\n        display: 'inline-flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        lineHeight: '1',\n        fontWeight: 'bold',\n        border: '2px solid white'\n      }\n    }, null, 8, [\"value\"])) : _createCommentVNode(\"\", true)]),\n    _: 1\n  }, 8, [\"onClick\", \"disabled\"])])) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", _hoisted_6, [$data.activeTabIndex === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createVNode(_component_Calendar, {\n    records: $data.records,\n    \"available-borrows\": $options.availableBorrows,\n    \"pending-borrows\": $options.pendingBorrows,\n    \"has-active-borrow\": $options.hasActiveBorrow,\n    onSelectDate: $options.selectDate,\n    onShowReturnForm: $options.showReturnForm,\n    onShowCancelForm: $options.showCancelForm\n  }, null, 8, [\"records\", \"available-borrows\", \"pending-borrows\", \"has-active-borrow\", \"onSelectDate\", \"onShowReturnForm\", \"onShowCancelForm\"])])) : _createCommentVNode(\"\", true), $data.activeTabIndex === 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createVNode(_component_History, {\n    records: $data.records,\n    onViewImages: $options.viewImages,\n    onUploadImages: $options.handleAdditionalImageUploadFromHistory\n  }, null, 8, [\"records\", \"onViewImages\", \"onUploadImages\"])])) : _createCommentVNode(\"\", true)])]), $data.showForm ? (_openBlock(), _createBlock(_component_BookingForm, {\n    key: 0,\n    ref: \"bookingForm\",\n    \"show-form\": $data.showForm,\n    \"selected-date\": $data.selectedDate,\n    \"active-form\": $data.activeForm,\n    \"borrow-form\": $data.borrowForm,\n    \"return-form\": $data.returnForm,\n    \"cancel-form\": $data.cancelForm,\n    \"available-borrows\": $options.availableBorrows,\n    \"pending-borrows\": $options.pendingBorrows,\n    \"current-return-time\": $options.currentReturnTime,\n    \"selected-borrow-project\": $options.selectedBorrowProject,\n    \"selected-borrow-description\": $options.selectedBorrowDescription,\n    onCloseForm: $options.closeForm,\n    onSubmitBorrow: $options.submitBorrow,\n    onSubmitReturn: $options.submitReturn,\n    onSubmitCancel: $options.submitCancel,\n    onHandleImageUpload: $options.handleImageUpload,\n    onUpdateBorrowForm: $options.updateBorrowForm,\n    onUpdateReturnForm: $options.updateReturnForm,\n    onUpdateCancelForm: $options.updateCancelForm\n  }, null, 8, [\"show-form\", \"selected-date\", \"active-form\", \"borrow-form\", \"return-form\", \"cancel-form\", \"available-borrows\", \"pending-borrows\", \"current-return-time\", \"selected-borrow-project\", \"selected-borrow-description\", \"onCloseForm\", \"onSubmitBorrow\", \"onSubmitReturn\", \"onSubmitCancel\", \"onHandleImageUpload\", \"onUpdateBorrowForm\", \"onUpdateReturnForm\", \"onUpdateCancelForm\"])) : _createCommentVNode(\"\", true), _createVNode(_component_Dialog, {\n    visible: $data.showImageModal,\n    \"onUpdate:visible\": _cache[2] || (_cache[2] = $event => $data.showImageModal = $event),\n    modal: \"\",\n    header: \"รูปภาพ\",\n    style: {\n      width: '80vw'\n    },\n    draggable: false\n  }, {\n    default: _withCtx(() => [$data.selectedImages.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [...(_cache[12] || (_cache[12] = [_createElementVNode(\"i\", {\n      class: \"pi pi-image\",\n      style: {\n        \"font-size\": \"4rem\",\n        \"color\": \"#ccc\"\n      }\n    }, null, -1), _createElementVNode(\"p\", null, \"ไม่มีรูปภาพ\", -1)]))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.groupedImages, imageType => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: imageType.type,\n        class: _normalizeClass(['image-section', imageType.type === 'ใช้' ? 'borrow-section' : 'return-section'])\n      }, [_createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"i\", {\n        class: _normalizeClass(imageType.type === 'ใช้' ? 'pi pi-download' : 'pi pi-upload')\n      }, null, 2), _createTextVNode(\" รูปภาพตอน\" + _toDisplayString(imageType.type), 1)]), _createElementVNode(\"div\", _hoisted_12, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(imageType.images, (image, index) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: index,\n          class: \"image-container\"\n        }, [_createElementVNode(\"img\", {\n          src: image.src?.src || image.src,\n          class: \"grid-image\",\n          onClick: $event => $options.viewFullImage(image),\n          alt: \"รูปภาพ\"\n        }, null, 8, _hoisted_13)]);\n      }), 128))])], 2);\n    }), 128))])), $data.currentBookingData && $options.canUploadForBooking($data.currentBookingData) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [_createVNode(_component_Divider), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"input\", {\n      type: \"file\",\n      id: \"modal-upload\",\n      onChange: _cache[1] || (_cache[1] = (...args) => $options.handleModalImageUpload && $options.handleModalImageUpload(...args)),\n      accept: \"image/*\",\n      multiple: \"\",\n      style: {\n        \"display\": \"none\"\n      }\n    }, null, 32), _createVNode(_component_Button, {\n      label: \"อัปโหลดรูปเพิ่ม\",\n      icon: \"pi pi-camera\",\n      onClick: $options.triggerFileUpload,\n      severity: \"secondary\"\n    }, null, 8, [\"onClick\"])])])) : _createCommentVNode(\"\", true)]),\n    _: 1\n  }, 8, [\"visible\"]), _createVNode(_component_Dialog, {\n    visible: $data.showFullImageModal,\n    \"onUpdate:visible\": _cache[5] || (_cache[5] = $event => $data.showFullImageModal = $event),\n    modal: \"\",\n    header: \"รูปภาพขนาดใหญ่\",\n    style: {\n      width: '90vw'\n    },\n    draggable: false\n  }, {\n    default: _withCtx(() => [!$data.fullSizeImage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [...(_cache[13] || (_cache[13] = [_createElementVNode(\"p\", null, \"ไม่สามารถโหลดรูปภาพได้\", -1)]))])) : (_openBlock(), _createElementBlock(\"img\", {\n      key: 1,\n      src: typeof $data.fullSizeImage === 'string' ? $data.fullSizeImage : $data.fullSizeImage.src,\n      class: \"full-size-image\",\n      onError: _cache[3] || (_cache[3] = (...args) => $options.handleImageError && $options.handleImageError(...args)),\n      onLoad: _cache[4] || (_cache[4] = (...args) => $options.handleImageLoad && $options.handleImageLoad(...args))\n    }, null, 40, _hoisted_17))]),\n    _: 1\n  }, 8, [\"visible\"]), _createVNode(_component_Toast)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_TabView","activeIndex","$data","activeTabIndex","$event","_component_TabPanel","header","_withCtx","_cache","_hoisted_4","$options","borrowRecordsCount","_createBlock","_component_Badge","value","severity","_hoisted_5","_component_Button","onClick","showReturnForm","disabled","availableBorrows","length","icon","raised","showCancelForm","pendingBorrows","style","backgroundColor","color","fontSize","_hoisted_6","_hoisted_7","_component_Calendar","records","hasActiveBorrow","onSelectDate","selectDate","onShowReturnForm","onShowCancelForm","_hoisted_8","_component_History","onViewImages","viewImages","onUploadImages","handleAdditionalImageUploadFromHistory","showForm","_component_BookingForm","ref","selectedDate","activeForm","borrowForm","returnForm","cancelForm","currentReturnTime","selectedBorrowProject","selectedBorrowDescription","onCloseForm","closeForm","onSubmitBorrow","submitBorrow","onSubmitReturn","submitReturn","onSubmitCancel","submitCancel","onHandleImageUpload","handleImageUpload","onUpdateBorrowForm","updateBorrowForm","onUpdateReturnForm","updateReturnForm","onUpdateCancelForm","updateCancelForm","_component_Dialog","visible","showImageModal","modal","width","draggable","selectedImages","_hoisted_9","_hoisted_10","_Fragment","_renderList","groupedImages","imageType","key","type","_normalizeClass","_hoisted_11","_toDisplayString","_hoisted_12","images","image","index","src","viewFullImage","alt","currentBookingData","canUploadForBooking","_hoisted_14","_component_Divider","_hoisted_15","id","onChange","args","handleModalImageUpload","accept","multiple","label","triggerFileUpload","showFullImageModal","fullSizeImage","_hoisted_16","onError","handleImageError","onLoad","handleImageLoad","_component_Toast"],"sources":["D:\\frontend_cem\\src\\views\\car_booking\\car_booking.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <div class=\"main-tabs\">\r\n      <div class=\"tabs-header\">\r\n        <div class=\"header-title\">\r\n          <i class=\"pi pi-car\"></i>\r\n          <h1>ระบบแจ้งใช้รถ/แจ้งคืนรถ</h1>\r\n        </div>\r\n        \r\n        <TabView v-model:activeIndex=\"activeTabIndex\" class=\"tab-navigation\">\r\n          <TabPanel>\r\n            <template #header>\r\n              <div class=\"tab-header\">\r\n                <i class=\"pi pi-calendar\"></i>\r\n                <span>ปฏิทิน</span>\r\n              </div>\r\n            </template>\r\n          </TabPanel>\r\n\r\n          <TabPanel>\r\n            <template #header>\r\n              <div class=\"tab-header\">\r\n                <i class=\"pi pi-history\"></i>\r\n                <span>ประวัติการใช้รถ</span>\r\n                <Badge v-if=\"borrowRecordsCount > 0\" :value=\"borrowRecordsCount\" severity=\"info\" />\r\n              </div>\r\n            </template>\r\n          </TabPanel>\r\n        </TabView>\r\n\r\n        <div v-if=\"activeTabIndex === 0\" class=\"action-buttons-header\">\r\n          <Button @click=\"showReturnForm\" :disabled=\"availableBorrows.length === 0\" severity=\"warning\"\r\n            icon=\"pi pi-upload\" raised>\r\n            <Badge v-if=\"availableBorrows.length > 0\" :value=\"availableBorrows.length\" severity=\"warning\" />\r\n            แจ้งคืนรถ\r\n          </Button>\r\n\r\n          <Button @click=\"showCancelForm\" :disabled=\"pendingBorrows.length === 0\" severity=\"danger\"\r\n            icon=\"pi pi-times-circle\" raised>\r\n            ยกเลิกการจอง\r\n            <Badge v-if=\"pendingBorrows.length > 0\" :value=\"pendingBorrows.length\" \r\n                   :style=\"{ backgroundColor: 'white', color: 'black', fontSize: '0.75rem', \r\n                            width: '1.2rem', height: '1.2rem', borderRadius: '50%',\r\n                            display: 'inline-flex', alignItems: 'center', justifyContent: 'center',\r\n                            lineHeight: '1', fontWeight: 'bold', border: '2px solid white' }\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"tab-content-area\">\r\n        <div v-if=\"activeTabIndex === 0\" class=\"tab-content\">\r\n          <Calendar :records=\"records\" :available-borrows=\"availableBorrows\" :pending-borrows=\"pendingBorrows\"\r\n            :has-active-borrow=\"hasActiveBorrow\" @select-date=\"selectDate\" @show-return-form=\"showReturnForm\"\r\n            @show-cancel-form=\"showCancelForm\" />\r\n        </div>\r\n\r\n        <div v-if=\"activeTabIndex === 1\" class=\"tab-content\">\r\n          <History :records=\"records\" @view-images=\"viewImages\"\r\n            @upload-images=\"handleAdditionalImageUploadFromHistory\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Form Modal -->\r\n    <BookingForm ref=\"bookingForm\" v-if=\"showForm\" :show-form=\"showForm\" :selected-date=\"selectedDate\"\r\n      :active-form=\"activeForm\" :borrow-form=\"borrowForm\" :return-form=\"returnForm\" :cancel-form=\"cancelForm\"\r\n      :available-borrows=\"availableBorrows\" :pending-borrows=\"pendingBorrows\" :current-return-time=\"currentReturnTime\"\r\n      :selected-borrow-project=\"selectedBorrowProject\" :selected-borrow-description=\"selectedBorrowDescription\" @close-form=\"closeForm\" @submit-borrow=\"submitBorrow\"\r\n      @submit-return=\"submitReturn\" @submit-cancel=\"submitCancel\" @handle-image-upload=\"handleImageUpload\"\r\n      @update-borrow-form=\"updateBorrowForm\" @updateReturnForm=\"updateReturnForm\"\r\n      @update-cancel-form=\"updateCancelForm\" />\r\n\r\n    <!-- Image Modal -->\r\n    <Dialog v-model:visible=\"showImageModal\" modal header=\"รูปภาพ\" :style=\"{ width: '80vw' }\" :draggable=\"false\">\r\n      <div v-if=\"selectedImages.length === 0\" class=\"no-images-state\">\r\n        <i class=\"pi pi-image\" style=\"font-size: 4rem; color: #ccc;\"></i>\r\n        <p>ไม่มีรูปภาพ</p>\r\n      </div>\r\n\r\n      <div v-else class=\"image-viewer\">\r\n        <div v-for=\"imageType in groupedImages\" :key=\"imageType.type\"\r\n          :class=\"['image-section', imageType.type === 'ใช้' ? 'borrow-section' : 'return-section']\">\r\n          <div class=\"section-header\">\r\n            <i :class=\"imageType.type === 'ใช้' ? 'pi pi-download' : 'pi pi-upload'\"></i>\r\n            รูปภาพตอน{{ imageType.type }}\r\n          </div>\r\n          <div class=\"images-grid\">\r\n            <div v-for=\"(image, index) in imageType.images\" :key=\"index\" class=\"image-container\">\r\n              <img :src=\"image.src?.src || image.src\" class=\"grid-image\" @click=\"viewFullImage(image)\" alt=\"รูปภาพ\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Upload section -->\r\n      <div v-if=\"currentBookingData && canUploadForBooking(currentBookingData)\" class=\"upload-section\">\r\n        <Divider />\r\n        <div class=\"upload-controls\">\r\n          <input type=\"file\" id=\"modal-upload\" @change=\"handleModalImageUpload\" accept=\"image/*\" multiple\r\n            style=\"display: none\" />\r\n          <Button label=\"อัปโหลดรูปเพิ่ม\" icon=\"pi pi-camera\" @click=\"triggerFileUpload\" severity=\"secondary\" />\r\n        </div>\r\n      </div>\r\n\r\n    </Dialog>\r\n    <!-- Full Size Image Modal -->\r\n    <Dialog v-model:visible=\"showFullImageModal\" modal header=\"รูปภาพขนาดใหญ่\" :style=\"{ width: '90vw' }\"\r\n      :draggable=\"false\">\r\n      <div v-if=\"!fullSizeImage\" class=\"no-image-placeholder\">\r\n        <p>ไม่สามารถโหลดรูปภาพได้</p>\r\n      </div>\r\n      <img v-else :src=\"typeof fullSizeImage === 'string' ? fullSizeImage : fullSizeImage.src\" class=\"full-size-image\"\r\n        @error=\"handleImageError\" @load=\"handleImageLoad\" />\r\n    </Dialog>\r\n\r\n    <!-- Toast for notifications -->\r\n    <Toast />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Calendar from './Calendar.vue'\r\nimport History from './History.vue'\r\nimport BookingFormPrime from './BookingFormPrime.vue'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  components: {\r\n    Calendar,\r\n    History,\r\n    BookingForm: BookingFormPrime\r\n  },\r\n  data() {\r\n    return {\r\n      activeTabIndex: 0,\r\n      selectedDate: null,\r\n      showForm: false,\r\n      activeForm: 'borrow',\r\n      borrowForm: {\r\n        license: 'FXAG-2032',\r\n        time: '',\r\n        location: '',\r\n        project: '',\r\n        discription: '',\r\n        colleagues: [],\r\n        images: []\r\n      },\r\n      returnForm: {\r\n        borrowId: '',\r\n        license: 'FXAG-2032',\r\n        location: '',\r\n        discription: '',\r\n        images: []\r\n      },\r\n      cancelForm: {\r\n        borrowId: '',\r\n        reason: ''\r\n      },\r\n      records: [],\r\n      currentTime: new Date(),\r\n      serverTimeOffset: 0,\r\n      currentBookingData: null,\r\n      showImageModal: false,\r\n      selectedImages: [],\r\n      showFullImageModal: false,\r\n      fullSizeImage: '',\r\n      teamsWebhookUrl: 'YOUR_TEAMS_WEBHOOK_URL_HERE',\r\n      notifiedActiveBookings: new Set()\r\n    }\r\n  },\r\n  computed: {\r\n    currentDateTime() {\r\n      return this.currentTime.toLocaleString('th-TH', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        second: '2-digit'\r\n      })\r\n    },\r\n    hasActiveBorrow() {\r\n      return this.records.some(r => r.status === 'active')\r\n    },\r\n    availableBorrows() {\r\n      const currentUserName = this.getCurrentUserName()\r\n      \r\n      return this.records.filter(r => {\r\n        // Must be active status (past borrow time, not returned)\r\n        if (r.status !== 'active') return false\r\n\r\n        // Check if current user is authorized to return this booking\r\n        const isBorrower = r.name === currentUserName\r\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) &&\r\n          r.colleagues.some(colleague => {\r\n            const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name\r\n            return colleagueName === currentUserName\r\n          })\r\n\r\n        return isBorrower || isColleague\r\n      })\r\n    },\r\n    pendingBorrows() {\r\n      const currentUserName = this.getCurrentUserName()\r\n\r\n      return this.records.filter(r => {\r\n        // Must be pending status (future booking, not started yet)\r\n        if (r.status !== 'pending') return false\r\n\r\n        // Check if current user is authorized to cancel this booking\r\n        const isBorrower = r.name === currentUserName\r\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) &&\r\n          r.colleagues.some(colleague => {\r\n            const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name\r\n            return colleagueName === currentUserName\r\n          })\r\n\r\n        return isBorrower || isColleague\r\n      })\r\n    },\r\n    currentReturnTime() {\r\n      return this.currentTime.toLocaleTimeString('th-TH', {\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      })\r\n    },\r\n    selectedBorrowProject() {\r\n      if (!this.returnForm.borrowId) return ''\r\n      const selectedBorrow = this.records.find(r => r.id == this.returnForm.borrowId)\r\n      return selectedBorrow ? selectedBorrow.project : ''\r\n    },\r\n    selectedBorrowDescription() {\r\n      if (!this.returnForm.borrowId) return ''\r\n      const selectedBorrow = this.records.find(r => r.id == this.returnForm.borrowId)\r\n      return selectedBorrow ? selectedBorrow.discription : ''\r\n    },\r\n    borrowRecordsCount() {\r\n      return this.records.filter(r => r.status !== 'returned').length\r\n    },\r\n    bookingsAllowingImageUpload() {\r\n      const currentUserName = this.getCurrentUserName()\r\n      \r\n      return this.records.filter(r => {\r\n        // Must be active status and user is authorized\r\n        if (r.status !== 'active') return false\r\n\r\n        const isBorrower = r.name === currentUserName\r\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) &&\r\n          r.colleagues.some(colleague => {\r\n            const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name\r\n            return colleagueName === currentUserName\r\n          })\r\n\r\n        return isBorrower || isColleague\r\n      })\r\n    },\r\n    groupedImages() {\r\n      const groups = {}\r\n      this.selectedImages.forEach(image => {\r\n        if (!groups[image.type]) {\r\n          groups[image.type] = []\r\n        }\r\n        groups[image.type].push(image)\r\n      })\r\n      return Object.keys(groups).map(type => ({\r\n        type,\r\n        images: groups[type]\r\n      }))\r\n    }\r\n  },\r\n  mounted() {\r\n    this.syncServerTime()\r\n    \r\n    setInterval(() => {\r\n      this.currentTime = new Date(Date.now() + this.serverTimeOffset)\r\n    }, 1000)\r\n    \r\n    setInterval(() => {\r\n      this.loadRecords()\r\n    }, 30000)\r\n    \r\n    setInterval(() => {\r\n      this.syncServerTime()\r\n    }, 300000)\r\n  },\r\n  created() {\r\n    this.$http = axios.create({\r\n      baseURL: '',\r\n      headers: {\r\n        'X-Timezone': 'Asia/Bangkok'\r\n      }\r\n    })\r\n    this.loadRecords()\r\n  },\r\n  methods: {\r\n    async syncServerTime() {\r\n      try {\r\n        const response = await axios.get('/api/server-time')\r\n        const serverTime = new Date(response.data.serverTime)\r\n        const clientTime = new Date()\r\n        this.serverTimeOffset = serverTime.getTime() - clientTime.getTime()\r\n        this.currentTime = new Date(Date.now() + this.serverTimeOffset)\r\n        console.log('[Time Sync] Server time:', serverTime.toLocaleString('th-TH'))\r\n        console.log('[Time Sync] Offset:', this.serverTimeOffset, 'ms')\r\n      } catch (error) {\r\n        console.error('Failed to sync server time:', error)\r\n      }\r\n    },\r\n    getCurrentUserName() {\r\n      const firstName = localStorage.getItem('soc_firstname') || ''\r\n      const lastName = localStorage.getItem('soc_lastname') || ''\r\n      return `${firstName} ${lastName}`.trim()\r\n    },\r\n    async loadRecords() {\r\n      try {\r\n        const response = await axios.get('/api/car-booking')\r\n        this.records = response.data\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: 'error',\r\n          summary: 'เกิดข้อผิดพลาด',\r\n          detail: 'ไม่สามารถโหลดข้อมูลการจองรถได้',\r\n          life: 3000\r\n        })\r\n      }\r\n    },\r\n    triggerFileUpload() {\r\n      document.getElementById('modal-upload').click()\r\n    },\r\n    selectDate(date) {\r\n      this.selectedDate = date\r\n      this.showForm = true\r\n      this.activeForm = 'borrow'\r\n    },\r\n    showReturnForm() {\r\n      this.selectedDate = new Date(Date.now() + this.serverTimeOffset)\r\n      this.showForm = true\r\n      this.activeForm = 'return'\r\n    },\r\n    showCancelForm() {\r\n      this.selectedDate = new Date(Date.now() + this.serverTimeOffset)\r\n      this.showForm = true\r\n      this.activeForm = 'cancel'\r\n    },\r\n    closeForm() {\r\n      this.showForm = false\r\n      this.selectedDate = null\r\n      this.resetForms()\r\n    },\r\n    handleImageUpload(event, formType) {\r\n      const files = Array.from(event.target.files)\r\n      const images = []\r\n      files.forEach(file => {\r\n        const reader = new FileReader()\r\n        reader.onload = (e) => {\r\n          images.push(e.target.result)\r\n          if (images.length === files.length) {\r\n            if (formType === 'borrow') {\r\n              this.borrowForm.images = images\r\n            } else {\r\n              this.returnForm.images = images\r\n            }\r\n          }\r\n        }\r\n        reader.readAsDataURL(file)\r\n      })\r\n    },\r\n    openImageModal(imageSrc) {\r\n      this.selectedImages = [{ src: imageSrc, type: 'รูปภาพ' }]\r\n      this.showImageModal = true\r\n    },\r\n    calculateUsageDuration(borrowDate, borrowTime, returnDate) {\r\n      const borrowDateTime = new Date(borrowDate)\r\n      const [hour, minute] = borrowTime.split(':').map(Number)\r\n      borrowDateTime.setHours(hour, minute, 0, 0)\r\n\r\n      const diffMs = returnDate - borrowDateTime\r\n      const diffHours = Math.floor(diffMs / (1000 * 60 * 60))\r\n      const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60))\r\n\r\n      if (diffHours > 0) {\r\n        return `${diffHours} ชั่วโมง ${diffMinutes} นาที`\r\n      } else {\r\n        return `${diffMinutes} นาที`\r\n      }\r\n    },\r\n    viewImages(images, bookingData = null) {\r\n      this.selectedImages = images\r\n      this.currentBookingData = bookingData\r\n      this.showImageModal = true\r\n    },\r\n    handleImageError() {\r\n      this.$toast.add({\r\n        severity: 'error',\r\n        summary: 'เกิดข้อผิดพลาด',\r\n        detail: 'ไม่สามารถโหลดรูปภาพได้',\r\n        life: 3000\r\n      })\r\n    },\r\n    handleImageLoad() {\r\n    },\r\n    viewFullImage(imageSrc) {\r\n      // Handle nested proxy objects\r\n      let imageUrl = imageSrc\r\n      if (typeof imageSrc === 'object' && imageSrc.src) {\r\n        imageUrl = typeof imageSrc.src === 'string' ? imageSrc.src : imageSrc.src.src\r\n      }\r\n      this.fullSizeImage = imageUrl\r\n      this.showFullImageModal = true\r\n    },\r\n    formatDateForDB(date) {\r\n      const d = new Date(date)\r\n      // Convert to Bangkok timezone\r\n      const bangkokTime = new Date(d.toLocaleString('en-US', { timeZone: 'Asia/Bangkok' }))\r\n      const year = bangkokTime.getFullYear()\r\n      const month = String(bangkokTime.getMonth() + 1).padStart(2, '0')\r\n      const day = String(bangkokTime.getDate()).padStart(2, '0')\r\n      return `${year}-${month}-${day}`\r\n    },\r\n    async handleAdditionalImageUpload(event, bookingId) {\r\n      const files = Array.from(event.target.files)\r\n      if (files.length === 0) return\r\n\r\n      try {\r\n        // Find the booking record\r\n        const booking = this.records.find(r => r.id === bookingId)\r\n        if (!booking) return\r\n\r\n        // Convert files to base64\r\n        const newImages = []\r\n        for (const file of files) {\r\n          const reader = new FileReader()\r\n          const base64 = await new Promise((resolve) => {\r\n            reader.onload = () => resolve(reader.result)\r\n            reader.readAsDataURL(file)\r\n          })\r\n          newImages.push({\r\n            name: file.name,\r\n            src: base64,\r\n            type: 'เพิ่มเติม',\r\n            timestamp: new Date(Date.now() + this.serverTimeOffset).toLocaleString('th-TH')\r\n          })\r\n        }\r\n\r\n        // Update booking with new images\r\n        const currentImages = booking.images || []\r\n        const updatedImages = [...currentImages, ...newImages]\r\n\r\n        // Update in database via API (need to add PUT endpoint)\r\n        await this.$http.put(`/api/car-booking/${bookingId}`, {\r\n          images: updatedImages\r\n        })\r\n\r\n        await this.loadRecords()\r\n\r\n        this.$toast.add({\r\n          severity: 'success',\r\n          summary: 'สำเร็จ',\r\n          detail: `อัปโหลดรูปภาพ ${files.length} ไฟล์เรียบร้อย`,\r\n          life: 3000\r\n        })\r\n\r\n        // Clear file input\r\n        event.target.value = ''\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: 'error',\r\n          summary: 'เกิดข้อผิดพลาด',\r\n          detail: 'ไม่สามารถอัปโหลดรูปภาพได้',\r\n          life: 3000\r\n        })\r\n      }\r\n    },\r\n    async submitBorrow() {\r\n      try {\r\n        const borrowData = {\r\n          type: 'borrow',\r\n          location: this.borrowForm.location,\r\n          project: this.borrowForm.project,\r\n          description: this.borrowForm.discription,\r\n          selected_date: this.formatDateForDB(this.selectedDate),\r\n          time: this.borrowForm.time,\r\n          license: 'FXAG-2032',\r\n          colleagues: this.borrowForm.colleagues || [],\r\n          images: this.borrowForm.images || [],\r\n          user_id: localStorage.getItem('soc_user_id')\r\n        }\r\n\r\n        await this.$http.post('/api/car-booking', borrowData)\r\n\r\n\r\n        await this.loadRecords()\r\n        this.closeForm()\r\n\r\n        this.$toast.add({\r\n          severity: 'success',\r\n          summary: 'สำเร็จ',\r\n          detail: 'บันทึกการจองรถเรียบร้อยแล้ว',\r\n          life: 3000\r\n        })\r\n      } catch (error) {\r\n        \r\n        // Handle conflict error (409)\r\n        if (error.response?.status === 409) {\r\n          this.$toast.add({\r\n            severity: 'warn',\r\n            summary: 'ไม่สามารถจองได้',\r\n            detail: error.response.data.details || error.response.data.error,\r\n            life: 5000\r\n          })\r\n        } else {\r\n          this.$toast.add({\r\n            severity: 'error',\r\n            summary: 'เกิดข้อผิดพลาด',\r\n            detail: 'ไม่สามารถบันทึกการจองได้',\r\n            life: 3000\r\n          })\r\n        }\r\n      }\r\n    },\r\n    async submitReturn() {\r\n      const borrowId = this.returnForm.borrowId || this.$refs.bookingForm?.selectedReturnBorrow\r\n\r\n      if (!borrowId) {\r\n        this.$toast.add({ severity: 'error', summary: 'ข้อผิดพลาด', detail: 'กรุณาเลือกการแจ้งใช้รถที่ต้องการคืน', life: 3000 })\r\n        return\r\n      }\r\n\r\n      try {\r\n        const firstName = localStorage.getItem('soc_firstname') || ''\r\n        const lastName = localStorage.getItem('soc_lastname') || ''\r\n        const currentUserName = `${firstName} ${lastName}`.trim()\r\n\r\n        const bangkokTime = new Date(Date.now() + this.serverTimeOffset)\r\n        const currentTime = bangkokTime.toLocaleTimeString('th-TH', {\r\n          hour: '2-digit',\r\n          minute: '2-digit',\r\n          hour12: false\r\n        })\r\n\r\n        const returnData = {\r\n          return_name: currentUserName,\r\n          return_location: this.returnForm.location,\r\n          return_description: this.returnForm.discription,\r\n          return_time: currentTime,\r\n          return_date: this.formatDateForDB(bangkokTime)\r\n        }\r\n\r\n        await axios.put(`/api/car-booking/${borrowId}`, returnData)\r\n\r\n        await this.loadRecords()\r\n        this.closeForm()\r\n\r\n        this.$toast.add({\r\n          severity: 'success',\r\n          summary: 'สำเร็จ',\r\n          detail: 'บันทึกการคืนรถเรียบร้อยแล้ว',\r\n          life: 3000\r\n        })\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: 'error',\r\n          summary: 'เกิดข้อผิดพลาด',\r\n          detail: 'ไม่สามารถบันทึกการคืนรถได้',\r\n          life: 3000\r\n        })\r\n      }\r\n    },\r\n    async submitCancel() {\r\n\r\n      if (!this.cancelForm.borrowId) {\r\n        this.$toast.add({ severity: 'error', summary: 'ข้อผิดพลาด', detail: 'กรุณาเลือกการจองที่ต้องการยกเลิก', life: 3000 })\r\n        return\r\n      }\r\n\r\n      try {\r\n        await this.$http.delete(`/api/car-booking/${this.cancelForm.borrowId}`)\r\n\r\n        await this.loadRecords()\r\n        this.closeForm()\r\n\r\n        this.$toast.add({\r\n          severity: 'success',\r\n          summary: 'สำเร็จ',\r\n          detail: 'ยกเลิกการจองเรียบร้อยแล้ว',\r\n          life: 3000\r\n        })\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: 'error',\r\n          summary: 'เกิดข้อผิดพลาด',\r\n          detail: 'ไม่สามารถยกเลิกการจองได้',\r\n          life: 3000\r\n        })\r\n      }\r\n    },\r\n    updateBorrowForm({ field, value }) {\r\n      this.borrowForm[field] = value\r\n    },\r\n    updateReturnForm(field, value) {\r\n      this.returnForm[field] = value\r\n    },\r\n    updateCancelForm({ field, value }) {\r\n      this.cancelForm[field] = value\r\n    },\r\n    async handleAdditionalImageUploadFromHistory({ files, bookingId }) {\r\n      if (files.length === 0) return\r\n\r\n      try {\r\n        // Find the booking record\r\n        const booking = this.records.find(r => r.id === bookingId)\r\n        if (!booking) return\r\n\r\n        // Convert files to base64\r\n        const newImages = []\r\n        for (const file of files) {\r\n          const reader = new FileReader()\r\n          const base64 = await new Promise((resolve) => {\r\n            reader.onload = () => resolve(reader.result)\r\n            reader.readAsDataURL(file)\r\n          })\r\n          newImages.push({\r\n            name: file.name,\r\n            src: base64,\r\n            type: 'เพิ่มเติม',\r\n            timestamp: new Date(Date.now() + this.serverTimeOffset).toLocaleString('th-TH')\r\n          })\r\n        }\r\n\r\n        // Update booking with new images\r\n        const currentImages = booking.images || []\r\n        const updatedImages = [...currentImages, ...newImages]\r\n\r\n        // Update in database via API\r\n        await this.$http.put(`/api/car-booking/${bookingId}`, {\r\n          images: updatedImages\r\n        })\r\n\r\n        await this.loadRecords()\r\n\r\n        this.$toast.add({\r\n          severity: 'success',\r\n          summary: 'สำเร็จ',\r\n          detail: `อัปโหลดรูปภาพ ${files.length} ไฟล์เรียบร้อย`,\r\n          life: 3000\r\n        })\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: 'error',\r\n          summary: 'เกิดข้อผิดพลาด',\r\n          detail: 'ไม่สามารถอัปโหลดรูปภาพได้',\r\n          life: 3000\r\n        })\r\n      }\r\n    },\r\n    resetForms() {\r\n      this.borrowForm = {\r\n        license: 'FXAG-2032',\r\n        time: '',\r\n        location: '',\r\n        project: '',\r\n        discription: '',\r\n        colleagues: [],\r\n        images: []\r\n      }\r\n      this.returnForm = {\r\n        borrowId: '',\r\n        license: 'FXAG-2032',\r\n        location: '',\r\n        discription: '',\r\n        images: []\r\n      }\r\n      this.cancelForm = {\r\n        borrowId: '',\r\n        reason: ''\r\n      }\r\n    },\r\n    canUploadForBooking(bookingData) {\r\n      if (!bookingData) return false\r\n      \r\n      // Find the actual record from this.records\r\n      const record = this.records.find(r => r.id === bookingData.id)\r\n      if (!record) return false\r\n      \r\n      // Can upload if status is active\r\n      return record.status === 'active'\r\n    },\r\n    async handleModalImageUpload(event) {\r\n      if (!this.currentBookingData) return\r\n\r\n      const files = Array.from(event.target.files)\r\n      if (files.length === 0) return\r\n\r\n      await this.handleAdditionalImageUploadFromHistory({\r\n        files,\r\n        bookingId: this.currentBookingData.id\r\n      })\r\n\r\n      // Clear file input and close modal\r\n      event.target.value = ''\r\n      this.showImageModal = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.calendar-card {\r\n  width: 100%;\r\n  margin: 0;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\r\n  border: 1px solid #e9ecef;\r\n}\r\n\r\n.app-container {\r\n  padding: 1.5rem;\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n  background: #f8f9fa;\r\n  min-height: 100vh;\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n}\r\n\r\n.main-tabs {\r\n  margin-top: 1.5rem;\r\n  box-shadow: 0 4px 20px rgba(74, 144, 226, 0.15);\r\n  border-radius: 15px;\r\n  overflow: hidden;\r\n  border: 1px solid rgba(74, 144, 226, 0.2);\r\n  background: white;\r\n}\r\n\r\n.tabs-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0.75rem 1.5rem;\r\n  background: linear-gradient(135deg, #4A90E2, #D73527);\r\n  position: relative;\r\n  flex-wrap: wrap;\r\n  gap: 1rem;\r\n}\r\n\r\n.header-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n  color: white;\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  z-index: 2;\r\n}\r\n\r\n.header-title h1 {\r\n  margin: 0;\r\n  font-size: 1.8rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.header-title i {\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.tab-navigation {\r\n  background: transparent;\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n  margin-right: auto;\r\n}\r\n\r\n.tab-navigation :deep(.p-tabview-nav) {\r\n  background: transparent;\r\n  border: none;\r\n  margin: 0;\r\n  padding: 0;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n}\r\n\r\n.tab-navigation :deep(.p-tabview-nav-link) {\r\n  color: white;\r\n  border: none;\r\n  font-weight: 500;\r\n  padding: 0.75rem 1rem;\r\n  font-size: 0.9rem;\r\n  transition: all 0.3s ease;\r\n  border-radius: 8px;\r\n  margin: 0.25rem;\r\n  white-space: nowrap;\r\n}\r\n\r\n.tab-navigation :deep(.p-tabview-nav li.p-highlight .p-tabview-nav-link) {\r\n  background: rgba(255, 255, 255, 0.25);\r\n  color: white;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n  transform: translateY(-2px);\r\n  border-bottom: none !important;\r\n}\r\n\r\n.tab-navigation :deep(.p-tabview-nav-link:hover) {\r\n  background: rgba(255, 255, 255, 0.15);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.tab-navigation :deep(.p-tabview-ink-bar) {\r\n  display: none !important;\r\n}\r\n\r\n.tab-navigation :deep(.p-tabview-panels) {\r\n  display: none;\r\n}\r\n\r\n.action-buttons-header {\r\n  display: flex;\r\n  gap: 1rem;\r\n  flex-shrink: 0;\r\n  z-index: 1;\r\n  margin-left: auto;\r\n}\r\n\r\n.action-buttons-header .p-button {\r\n  font-weight: 700;\r\n  padding: 0.75rem 1.25rem;\r\n  font-size: 0.95rem;\r\n  border-radius: 8px;\r\n  min-width: 140px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n  border: 3px solid white;\r\n}\r\n\r\n.action-buttons-header .p-button:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n  border: 3px solid white;\r\n}\r\n\r\n.tab-content-area {\r\n  background: white;\r\n}\r\n\r\n.tab-content {\r\n  padding: 0;\r\n}\r\n\r\n.main-tabs :deep(.p-tabview-nav) {\r\n  background: transparent;\r\n  border: none;\r\n  margin: 0;\r\n  padding: 0.5rem;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.main-tabs :deep(.p-tabview-nav-link) {\r\n  color: black !important;\r\n  border: none;\r\n  font-weight: 800 !important;\r\n  padding: 1rem 1.5rem;\r\n  font-size: 1rem;\r\n  transition: all 0.3s ease;\r\n  border-radius: 8px;\r\n  margin: 0 0.25rem;\r\n  background: rgba(255, 255, 255, 0.4\r\n  )\r\n}\r\n\r\n.tab-header {\r\n  font-weight: 800 !important;\r\n  color: black !important;\r\n}\r\n\r\n.tab-header span {\r\n  font-weight: 800 !important;\r\n  color: black !important;\r\n}\r\n\r\n.tab-header i {\r\n  font-size: 1.2rem;\r\n  font-weight: 900;\r\n}\r\n\r\n.main-tabs :deep(.p-tabview-nav li.p-highlight .p-tabview-nav-link) {\r\n  background: white;\r\n  color: #4A90E2;\r\n  box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);\r\n  transform: translateY(-2px);\r\n  border-bottom: none !important;\r\n  font-weight: 700;\r\n  border-radius: 8px;\r\n}\r\n\r\n.main-tabs :deep(.p-tabview-nav-link:hover) {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  transform: translateY(-1px);\r\n  border-radius: 8px;\r\n}\r\n\r\n.main-tabs :deep(.p-tabview-ink-bar) {\r\n  display: none !important;\r\n}\r\n\r\n.main-tabs :deep(.p-tabview-panels) {\r\n  background: white;\r\n  padding: 0;\r\n  border-radius: 0 0 15px 15px;\r\n}\r\n\r\n.main-tabs :deep(.p-tabview-panel) {\r\n  padding: 0;\r\n}\r\n\r\n.tab-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.tab-header i {\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.tab-content {\r\n  padding: 0;\r\n}\r\n\r\n.image-viewer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2rem;\r\n}\r\n\r\n.image-section {\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n.borrow-section {\r\n  border: 2px solid #28a745;\r\n}\r\n\r\n.borrow-section .section-header {\r\n  background: #d4edda;\r\n  color: #155724;\r\n  border-bottom: 1px solid #c3e6cb;\r\n}\r\n\r\n.return-section {\r\n  border: 2px solid #ffc107;\r\n}\r\n\r\n.return-section .section-header {\r\n  background: #fff3cd;\r\n  color: #856404;\r\n  border-bottom: 1px solid #ffeaa7;\r\n}\r\n\r\n.section-header {\r\n  background: #f8f9fa;\r\n  padding: 1rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  border-bottom: 1px solid #e9ecef;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.images-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n  padding: 1rem;\r\n}\r\n\r\n.image-container {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 200px;\r\n}\r\n\r\n.grid-image {\r\n  width: 100%;\r\n  height: 200px;\r\n  object-fit: cover;\r\n  border-radius: 6px;\r\n  border: 1px solid #e9ecef;\r\n  cursor: pointer;\r\n  transition: transform 0.2s ease;\r\n}\r\n\r\n.image-placeholder {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: 200px;\r\n  background: #f8f9fa;\r\n  border: 1px dashed #dee2e6;\r\n  border-radius: 6px;\r\n  color: #6c757d;\r\n}\r\n\r\n.grid-image:hover {\r\n  transform: scale(1.05);\r\n}\r\n\r\n.full-size-image {\r\n  max-width: 100%;\r\n  max-height: 80vh;\r\n  object-fit: contain;\r\n  border-radius: 8px;\r\n  display: block;\r\n  margin: 0 auto;\r\n}\r\n\r\n.no-images-state {\r\n  text-align: center;\r\n  padding: 3rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.no-images-state p {\r\n  margin-top: 1rem;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.upload-section {\r\n  margin-top: 1rem;\r\n}\r\n\r\n.upload-controls {\r\n  text-align: center;\r\n  padding: 1rem;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .app-container {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .main-header {\r\n    flex-direction: column;\r\n    text-align: center;\r\n    padding: 1.5rem;\r\n  }\r\n\r\n  .main-header h1 {\r\n    font-size: 1.5rem;\r\n  }\r\n\r\n  .car-status {\r\n    margin-bottom: 1rem !important;\r\n  }\r\n\r\n  .status-card {\r\n    min-width: 100%;\r\n    max-width: 100%;\r\n  }\r\n\r\n  .status-content {\r\n    padding: 1rem;\r\n    gap: 1rem;\r\n    flex-direction: column;\r\n    text-align: center;\r\n  }\r\n\r\n  .status-icon {\r\n    font-size: 2rem;\r\n  }\r\n\r\n  .status-text {\r\n    align-items: center;\r\n  }\r\n\r\n  .tabs-header {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n    padding: 1rem;\r\n    text-align: center;\r\n  }\r\n\r\n  .header-title {\r\n    order: 1;\r\n    position: static;\r\n    transform: none;\r\n    justify-content: center;\r\n    width: 100%;\r\n  }\r\n\r\n  .tab-navigation {\r\n    order: 2;\r\n    width: 100%;\r\n    margin-right: 0;\r\n  }\r\n\r\n  .tab-navigation :deep(.p-tabview-nav) {\r\n    flex-direction: column;\r\n    gap: 0.5rem;\r\n    padding: 0.5rem;\r\n  }\r\n\r\n  .tab-navigation :deep(.p-tabview-nav-link) {\r\n    padding: 0.75rem 1rem;\r\n    font-size: 0.85rem;\r\n    margin: 0;\r\n    width: 100%;\r\n    text-align: center;\r\n  }\r\n\r\n  .action-buttons-header {\r\n    order: 3;\r\n    width: 100%;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n  }\r\n\r\n  .action-buttons-header {\r\n    width: 100%;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n  }\r\n\r\n  .action-buttons-header .p-button {\r\n    flex: 1;\r\n    font-size: 0.9rem;\r\n    padding: 0.75rem 1rem;\r\n    min-width: auto;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .app-container {\r\n    padding: 0.5rem;\r\n  }\r\n\r\n  .main-header h1 {\r\n    font-size: 1.25rem;\r\n  }\r\n\r\n  .header-title h1 {\r\n    font-size: 1.2rem;\r\n  }\r\n\r\n  .status-card {\r\n    min-width: 100%;\r\n  }\r\n\r\n  .status-content {\r\n    padding: 0.8rem;\r\n  }\r\n\r\n  .status-icon {\r\n    font-size: 1.8rem;\r\n  }\r\n\r\n  .status-text strong {\r\n    font-size: 1rem;\r\n  }\r\n\r\n  .action-buttons-header {\r\n    flex-direction: column;\r\n    gap: 0.8rem;\r\n  }\r\n\r\n  .action-buttons-header .p-button {\r\n    width: 100%;\r\n    font-size: 0.85rem;\r\n    padding: 0.75rem;\r\n  }\r\n\r\n  .tab-navigation :deep(.p-tabview-nav-link) {\r\n    padding: 0.6rem 0.8rem;\r\n    font-size: 0.8rem;\r\n  }\r\n\r\n  .tab-header {\r\n    gap: 0.5rem;\r\n  }\r\n\r\n  .tab-header span {\r\n    font-size: 0.8rem;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}