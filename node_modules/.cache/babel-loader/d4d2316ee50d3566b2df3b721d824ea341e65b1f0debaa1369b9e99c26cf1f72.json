{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"loading-state\"\n};\nconst _hoisted_2 = {\n  key: 1,\n  class: \"user-info-content\"\n};\nconst _hoisted_3 = {\n  class: \"user-header\"\n};\nconst _hoisted_4 = {\n  class: \"user-title\"\n};\nconst _hoisted_5 = {\n  class: \"user-details\"\n};\nconst _hoisted_6 = {\n  class: \"detail-row\"\n};\nconst _hoisted_7 = {\n  class: \"detail-value\"\n};\nconst _hoisted_8 = {\n  class: \"detail-row\"\n};\nconst _hoisted_9 = {\n  class: \"detail-value\"\n};\nconst _hoisted_10 = {\n  class: \"detail-row\"\n};\nconst _hoisted_11 = {\n  class: \"detail-value\"\n};\nconst _hoisted_12 = {\n  class: \"detail-row\"\n};\nconst _hoisted_13 = {\n  class: \"detail-value\"\n};\nconst _hoisted_14 = {\n  class: \"detail-row\"\n};\nconst _hoisted_15 = {\n  class: \"detail-value\"\n};\nconst _hoisted_16 = {\n  class: \"detail-row\"\n};\nconst _hoisted_17 = {\n  key: 2,\n  class: \"error-state\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Badge = _resolveComponent(\"Badge\");\n  const _component_Dialog = _resolveComponent(\"Dialog\");\n  return _openBlock(), _createBlock(_component_Dialog, {\n    visible: $props.visible,\n    modal: \"\",\n    header: \"ข้อมูลผู้ใช้\",\n    style: {\n      width: '90vw',\n      maxWidth: '450px'\n    },\n    position: \"center\",\n    draggable: false,\n    \"onUpdate:visible\": _cache[0] || (_cache[0] = $event => _ctx.$emit('update:visible', $event))\n  }, {\n    default: _withCtx(() => [$data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [...(_cache[1] || (_cache[1] = [_createElementVNode(\"i\", {\n      class: \"pi pi-spin pi-spinner\",\n      style: {\n        \"font-size\": \"2rem\"\n      }\n    }, null, -1 /* CACHED */), _createElementVNode(\"p\", null, \"กำลังโหลดข้อมูล...\", -1 /* CACHED */)]))])) : $data.user ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n      class: \"user-avatar\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-user\"\n    })], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h3\", null, _toDisplayString($data.user.firstname) + \" \" + _toDisplayString($data.user.lastname), 1 /* TEXT */), _createVNode(_component_Badge, {\n      value: $options.getRoleLabel($data.user.role),\n      severity: $options.getRoleSeverity($data.user.role)\n    }, null, 8 /* PROPS */, [\"value\", \"severity\"])])]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_cache[3] || (_cache[3] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-id-card\"\n    }), _createTextVNode(\" รหัสพนักงาน\")], -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_7, _toDisplayString($data.user.employee_id || '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_8, [_cache[4] || (_cache[4] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-envelope\"\n    }), _createTextVNode(\" Email\")], -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_9, _toDisplayString($data.user.email || '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_10, [_cache[5] || (_cache[5] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-phone\"\n    }), _createTextVNode(\" เบอร์โทร\")], -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_11, _toDisplayString($data.user.phone || '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_12, [_cache[6] || (_cache[6] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-briefcase\"\n    }), _createTextVNode(\" ตำแหน่ง\")], -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_13, _toDisplayString($data.user.position || '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_14, [_cache[7] || (_cache[7] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-building\"\n    }), _createTextVNode(\" แผนก\")], -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_15, _toDisplayString($data.user.department || '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_16, [_cache[8] || (_cache[8] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-circle-fill\"\n    }), _createTextVNode(\" สถานะ\")], -1 /* CACHED */)), _createVNode(_component_Badge, {\n      value: $data.user.is_active ? 'ใช้งาน' : 'ปิดใช้งาน',\n      severity: $data.user.is_active ? 'success' : 'danger'\n    }, null, 8 /* PROPS */, [\"value\", \"severity\"])])])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [...(_cache[9] || (_cache[9] = [_createElementVNode(\"i\", {\n      class: \"pi pi-exclamation-triangle\",\n      style: {\n        \"font-size\": \"2rem\",\n        \"color\": \"#f59e0b\"\n      }\n    }, null, -1 /* CACHED */), _createElementVNode(\"p\", null, \"ไม่พบข้อมูลผู้ใช้\", -1 /* CACHED */)]))]))]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"visible\"]);\n}","map":{"version":3,"names":["class","_createBlock","_component_Dialog","visible","$props","modal","header","style","width","maxWidth","position","draggable","_cache","$event","_ctx","$emit","$data","loading","_createElementBlock","_hoisted_1","_createElementVNode","user","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","firstname","lastname","_createVNode","_component_Badge","value","$options","getRoleLabel","role","severity","getRoleSeverity","_hoisted_5","_hoisted_6","_hoisted_7","employee_id","_hoisted_8","_hoisted_9","email","_hoisted_10","_hoisted_11","phone","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","department","_hoisted_16","is_active","_hoisted_17"],"sources":["D:\\frontend_cem\\src\\components\\UserInfoDialog.vue"],"sourcesContent":["<template>\n  <Dialog :visible=\"visible\" modal header=\"ข้อมูลผู้ใช้\" :style=\"{ width: '90vw', maxWidth: '450px' }\" position=\"center\" :draggable=\"false\" @update:visible=\"$emit('update:visible', $event)\">\n    <div v-if=\"loading\" class=\"loading-state\">\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2rem\"></i>\n      <p>กำลังโหลดข้อมูล...</p>\n    </div>\n\n    <div v-else-if=\"user\" class=\"user-info-content\">\n      <div class=\"user-header\">\n        <div class=\"user-avatar\">\n          <i class=\"pi pi-user\"></i>\n        </div>\n        <div class=\"user-title\">\n          <h3>{{ user.firstname }} {{ user.lastname }}</h3>\n          <Badge :value=\"getRoleLabel(user.role)\" :severity=\"getRoleSeverity(user.role)\" />\n        </div>\n      </div>\n\n      <div class=\"user-details\">\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-id-card\"></i> รหัสพนักงาน</span>\n          <span class=\"detail-value\">{{ user.employee_id || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-envelope\"></i> Email</span>\n          <span class=\"detail-value\">{{ user.email || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-phone\"></i> เบอร์โทร</span>\n          <span class=\"detail-value\">{{ user.phone || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-briefcase\"></i> ตำแหน่ง</span>\n          <span class=\"detail-value\">{{ user.position || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-building\"></i> แผนก</span>\n          <span class=\"detail-value\">{{ user.department || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-circle-fill\"></i> สถานะ</span>\n          <Badge :value=\"user.is_active ? 'ใช้งาน' : 'ปิดใช้งาน'\" :severity=\"user.is_active ? 'success' : 'danger'\" />\n        </div>\n      </div>\n    </div>\n\n    <div v-else class=\"error-state\">\n      <i class=\"pi pi-exclamation-triangle\" style=\"font-size: 2rem; color: #f59e0b\"></i>\n      <p>ไม่พบข้อมูลผู้ใช้</p>\n    </div>\n  </Dialog>\n</template>\n\n<script>\nimport axios from '@/utils/axiosConfig'\n\nexport default {\n  name: 'UserInfoDialog',\n  props: {\n    visible: Boolean,\n    userName: String,\n    userId: Number\n  },\n  emits: ['update:visible'],\n  mounted() {\n    if (this.visible && (this.userId || this.userName)) {\n      this.loadUserInfo()\n    }\n  },\n  data() {\n    return {\n      user: null,\n      loading: false\n    }\n  },\n  watch: {\n    visible(newVal) {\n      if (newVal) {\n        this.loadUserInfo()\n      }\n    }\n  },\n  methods: {\n    async loadUserInfo() {\n      if (!this.userName && !this.userId) return\n\n      this.loading = true\n      this.user = null\n\n      try {\n        const response = await axios.get('/api/users')\n        \n        if (this.userId) {\n          this.user = response.data.find(u => u.id === this.userId)\n        } else {\n          const fullName = this.userName.trim()\n          this.user = response.data.find(u => {\n            const userName = `${u.firstname} ${u.lastname}`.trim()\n            return userName === fullName\n          })\n        }\n      } catch {\n        // ignore\n      } finally {\n        this.loading = false\n      }\n    },\n    getRoleLabel(role) {\n      const roles = {\n        'admin': 'ผู้ดูแลระบบ',\n        'manager': 'ผู้จัดการ',\n        'hr': 'ฝ่ายบุคคล',\n        'user': 'ผู้ใช้งาน'\n      }\n      return roles[role?.toLowerCase()] || role\n    },\n    getRoleSeverity(role) {\n      const severities = {\n        'admin': 'danger',\n        'manager': 'warning',\n        'hr': 'info',\n        'user': 'success'\n      }\n      return severities[role?.toLowerCase()] || 'secondary'\n    }\n  }\n}\n</script>\n\n<style scoped>\n.loading-state,\n.error-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 1.5rem;\n  gap: 0.75rem;\n  color: #6c757d;\n}\n\n.user-info-content {\n  padding: 0.5rem 0;\n}\n\n.user-header {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 1rem;\n  padding-bottom: 1rem;\n  border-bottom: 1px solid #e9ecef;\n}\n\n.user-avatar {\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 1.8rem;\n}\n\n.user-title h3 {\n  margin: 0 0 0.4rem 0;\n  font-size: 1.2rem;\n  color: #2c3e50;\n}\n\n.user-details {\n  display: flex;\n  flex-direction: column;\n  gap: 0.6rem;\n}\n\n.detail-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.5rem 0.75rem;\n  background: #f8f9fa;\n  border-radius: 6px;\n}\n\n.detail-label {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n  font-weight: 600;\n  color: #495057;\n  font-size: 0.9rem;\n}\n\n.detail-label i {\n  color: #6c757d;\n  font-size: 0.85rem;\n}\n\n.detail-value {\n  color: #2c3e50;\n  font-weight: 500;\n  font-size: 0.9rem;\n}\n\n@media (max-width: 768px) {\n  .user-avatar {\n    width: 50px;\n    height: 50px;\n    font-size: 1.5rem;\n  }\n\n  .user-title h3 {\n    font-size: 1rem;\n  }\n\n  .detail-row {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.25rem;\n  }\n\n  .detail-label,\n  .detail-value {\n    font-size: 0.85rem;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}