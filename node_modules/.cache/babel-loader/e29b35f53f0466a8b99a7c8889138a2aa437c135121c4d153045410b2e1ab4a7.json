{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"loading-state\"\n};\nconst _hoisted_2 = {\n  key: 1,\n  class: \"user-info-content\"\n};\nconst _hoisted_3 = {\n  class: \"user-header\"\n};\nconst _hoisted_4 = {\n  class: \"user-title\"\n};\nconst _hoisted_5 = {\n  class: \"user-details\"\n};\nconst _hoisted_6 = {\n  class: \"detail-row\"\n};\nconst _hoisted_7 = {\n  class: \"detail-value\"\n};\nconst _hoisted_8 = {\n  class: \"detail-row\"\n};\nconst _hoisted_9 = {\n  class: \"detail-value\"\n};\nconst _hoisted_10 = {\n  class: \"detail-row\"\n};\nconst _hoisted_11 = {\n  class: \"detail-value\"\n};\nconst _hoisted_12 = {\n  class: \"detail-row\"\n};\nconst _hoisted_13 = {\n  class: \"detail-value\"\n};\nconst _hoisted_14 = {\n  class: \"detail-row\"\n};\nconst _hoisted_15 = {\n  class: \"detail-value\"\n};\nconst _hoisted_16 = {\n  class: \"detail-row\"\n};\nconst _hoisted_17 = {\n  key: 2,\n  class: \"error-state\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Badge = _resolveComponent(\"Badge\");\n  const _component_Dialog = _resolveComponent(\"Dialog\");\n  return _openBlock(), _createBlock(_component_Dialog, {\n    visible: $props.visible,\n    modal: \"\",\n    header: \"ข้อมูลผู้ใช้\",\n    style: {\n      width: '400px',\n      maxWidth: '95vw'\n    },\n    position: \"center\",\n    draggable: false,\n    \"onUpdate:visible\": _cache[0] || (_cache[0] = $event => _ctx.$emit('update:visible', $event))\n  }, {\n    default: _withCtx(() => [$data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [...(_cache[1] || (_cache[1] = [_createElementVNode(\"i\", {\n      class: \"pi pi-spin pi-spinner\",\n      style: {\n        \"font-size\": \"2rem\"\n      }\n    }, null, -1), _createElementVNode(\"p\", null, \"กำลังโหลดข้อมูล...\", -1)]))])) : $data.user ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n      class: \"user-avatar\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-user\"\n    })], -1)), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h3\", null, _toDisplayString($data.user.firstname) + \" \" + _toDisplayString($data.user.lastname), 1), _createVNode(_component_Badge, {\n      value: $options.getRoleLabel($data.user.role),\n      severity: $options.getRoleSeverity($data.user.role)\n    }, null, 8, [\"value\", \"severity\"])])]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_cache[3] || (_cache[3] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-id-card\"\n    }), _createTextVNode(\" รหัสพนักงาน\")], -1)), _createElementVNode(\"span\", _hoisted_7, _toDisplayString($data.user.employee_id || '-'), 1)]), _createElementVNode(\"div\", _hoisted_8, [_cache[4] || (_cache[4] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-envelope\"\n    }), _createTextVNode(\" Email\")], -1)), _createElementVNode(\"span\", _hoisted_9, _toDisplayString($data.user.email || '-'), 1)]), _createElementVNode(\"div\", _hoisted_10, [_cache[5] || (_cache[5] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-phone\"\n    }), _createTextVNode(\" เบอร์โทร\")], -1)), _createElementVNode(\"span\", _hoisted_11, _toDisplayString($data.user.phone || '-'), 1)]), _createElementVNode(\"div\", _hoisted_12, [_cache[6] || (_cache[6] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-briefcase\"\n    }), _createTextVNode(\" ตำแหน่ง\")], -1)), _createElementVNode(\"span\", _hoisted_13, _toDisplayString($data.user.position || '-'), 1)]), _createElementVNode(\"div\", _hoisted_14, [_cache[7] || (_cache[7] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-building\"\n    }), _createTextVNode(\" แผนก\")], -1)), _createElementVNode(\"span\", _hoisted_15, _toDisplayString($data.user.department || '-'), 1)]), _createElementVNode(\"div\", _hoisted_16, [_cache[8] || (_cache[8] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-circle-fill\"\n    }), _createTextVNode(\" สถานะ\")], -1)), _createVNode(_component_Badge, {\n      value: $data.user.is_active ? 'ใช้งาน' : 'ปิดใช้งาน',\n      severity: $data.user.is_active ? 'success' : 'danger'\n    }, null, 8, [\"value\", \"severity\"])])])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [...(_cache[9] || (_cache[9] = [_createElementVNode(\"i\", {\n      class: \"pi pi-exclamation-triangle\",\n      style: {\n        \"font-size\": \"2rem\",\n        \"color\": \"#f59e0b\"\n      }\n    }, null, -1), _createElementVNode(\"p\", null, \"ไม่พบข้อมูลผู้ใช้\", -1)]))]))]),\n    _: 1\n  }, 8, [\"visible\"]);\n}","map":{"version":3,"names":["class","_createBlock","_component_Dialog","visible","$props","modal","header","style","width","maxWidth","position","draggable","_cache","$event","_ctx","$emit","$data","loading","_createElementBlock","_hoisted_1","_createElementVNode","user","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","firstname","lastname","_createVNode","_component_Badge","value","$options","getRoleLabel","role","severity","getRoleSeverity","_hoisted_5","_hoisted_6","_hoisted_7","employee_id","_hoisted_8","_hoisted_9","email","_hoisted_10","_hoisted_11","phone","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","department","_hoisted_16","is_active","_hoisted_17"],"sources":["D:\\frontend_cem\\src\\components\\UserInfoDialog.vue"],"sourcesContent":["<template>\r\n  <Dialog :visible=\"visible\" modal header=\"ข้อมูลผู้ใช้\" :style=\"{ width: '400px', maxWidth: '95vw' }\" position=\"center\" :draggable=\"false\" @update:visible=\"$emit('update:visible', $event)\">\r\n    <div v-if=\"loading\" class=\"loading-state\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2rem\"></i>\r\n      <p>กำลังโหลดข้อมูล...</p>\r\n    </div>\r\n\r\n    <div v-else-if=\"user\" class=\"user-info-content\">\r\n      <div class=\"user-header\">\r\n        <div class=\"user-avatar\">\r\n          <i class=\"pi pi-user\"></i>\r\n        </div>\r\n        <div class=\"user-title\">\r\n          <h3>{{ user.firstname }} {{ user.lastname }}</h3>\r\n          <Badge :value=\"getRoleLabel(user.role)\" :severity=\"getRoleSeverity(user.role)\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"user-details\">\r\n        <div class=\"detail-row\">\r\n          <span class=\"detail-label\"><i class=\"pi pi-id-card\"></i> รหัสพนักงาน</span>\r\n          <span class=\"detail-value\">{{ user.employee_id || '-' }}</span>\r\n        </div>\r\n\r\n        <div class=\"detail-row\">\r\n          <span class=\"detail-label\"><i class=\"pi pi-envelope\"></i> Email</span>\r\n          <span class=\"detail-value\">{{ user.email || '-' }}</span>\r\n        </div>\r\n\r\n        <div class=\"detail-row\">\r\n          <span class=\"detail-label\"><i class=\"pi pi-phone\"></i> เบอร์โทร</span>\r\n          <span class=\"detail-value\">{{ user.phone || '-' }}</span>\r\n        </div>\r\n\r\n        <div class=\"detail-row\">\r\n          <span class=\"detail-label\"><i class=\"pi pi-briefcase\"></i> ตำแหน่ง</span>\r\n          <span class=\"detail-value\">{{ user.position || '-' }}</span>\r\n        </div>\r\n\r\n        <div class=\"detail-row\">\r\n          <span class=\"detail-label\"><i class=\"pi pi-building\"></i> แผนก</span>\r\n          <span class=\"detail-value\">{{ user.department || '-' }}</span>\r\n        </div>\r\n\r\n        <div class=\"detail-row\">\r\n          <span class=\"detail-label\"><i class=\"pi pi-circle-fill\"></i> สถานะ</span>\r\n          <Badge :value=\"user.is_active ? 'ใช้งาน' : 'ปิดใช้งาน'\" :severity=\"user.is_active ? 'success' : 'danger'\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-else class=\"error-state\">\r\n      <i class=\"pi pi-exclamation-triangle\" style=\"font-size: 2rem; color: #f59e0b\"></i>\r\n      <p>ไม่พบข้อมูลผู้ใช้</p>\r\n    </div>\r\n  </Dialog>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'UserInfoDialog',\r\n  props: {\r\n    visible: Boolean,\r\n    userName: String,\r\n    userId: Number\r\n  },\r\n  emits: ['update:visible'],\r\n  mounted() {\r\n    if (this.visible && (this.userId || this.userName)) {\r\n      this.loadUserInfo()\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      user: null,\r\n      loading: false\r\n    }\r\n  },\r\n  watch: {\r\n    visible(newVal) {\r\n      if (newVal) {\r\n        this.loadUserInfo()\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async loadUserInfo() {\r\n      if (!this.userName && !this.userId) return\r\n\r\n      this.loading = true\r\n      this.user = null\r\n\r\n      try {\r\n        const response = await axios.get('/api/users')\r\n        \r\n        if (this.userId) {\r\n          this.user = response.data.find(u => u.id === this.userId)\r\n        } else {\r\n          const fullName = this.userName.trim()\r\n          this.user = response.data.find(u => {\r\n            const userName = `${u.firstname} ${u.lastname}`.trim()\r\n            return userName === fullName\r\n          })\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading user info:', error)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    getRoleLabel(role) {\r\n      const roles = {\r\n        'admin': 'ผู้ดูแลระบบ',\r\n        'manager': 'ผู้จัดการ',\r\n        'hr': 'ฝ่ายบุคคล',\r\n        'user': 'ผู้ใช้งาน'\r\n      }\r\n      return roles[role?.toLowerCase()] || role\r\n    },\r\n    getRoleSeverity(role) {\r\n      const severities = {\r\n        'admin': 'danger',\r\n        'manager': 'warning',\r\n        'hr': 'info',\r\n        'user': 'success'\r\n      }\r\n      return severities[role?.toLowerCase()] || 'secondary'\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.loading-state,\r\n.error-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 1.5rem;\r\n  gap: 0.75rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.user-info-content {\r\n  padding: 0.5rem 0;\r\n}\r\n\r\n.user-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n}\r\n\r\n.user-avatar {\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 50%;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: white;\r\n  font-size: 1.8rem;\r\n}\r\n\r\n.user-title h3 {\r\n  margin: 0 0 0.4rem 0;\r\n  font-size: 1.2rem;\r\n  color: #2c3e50;\r\n}\r\n\r\n.user-details {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.6rem;\r\n}\r\n\r\n.detail-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.5rem 0.75rem;\r\n  background: #f8f9fa;\r\n  border-radius: 6px;\r\n}\r\n\r\n.detail-label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.4rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.detail-label i {\r\n  color: #6c757d;\r\n  font-size: 0.85rem;\r\n}\r\n\r\n.detail-value {\r\n  color: #2c3e50;\r\n  font-weight: 500;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .user-avatar {\r\n    width: 50px;\r\n    height: 50px;\r\n    font-size: 1.5rem;\r\n  }\r\n\r\n  .user-title h3 {\r\n    font-size: 1rem;\r\n  }\r\n\r\n  .detail-row {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.25rem;\r\n  }\r\n\r\n  .detail-label,\r\n  .detail-value {\r\n    font-size: 0.85rem;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":";;;EAEwBA,KAAK,EAAC;;;;EAKJA,KAAK,EAAC;;;EACrBA,KAAK,EAAC;AAAa;;EAIjBA,KAAK,EAAC;AAAY;;EAMpBA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAY;;EAEfA,KAAK,EAAC;AAAc;;EAGvBA,KAAK,EAAC;AAAY;;EAEfA,KAAK,EAAC;AAAc;;EAGvBA,KAAK,EAAC;AAAY;;EAEfA,KAAK,EAAC;AAAc;;EAGvBA,KAAK,EAAC;AAAY;;EAEfA,KAAK,EAAC;AAAc;;EAGvBA,KAAK,EAAC;AAAY;;EAEfA,KAAK,EAAC;AAAc;;EAGvBA,KAAK,EAAC;AAAY;;;EAOfA,KAAK,EAAC;;;;;uBAlDpBC,YAAA,CAsDSC,iBAAA;IAtDAC,OAAO,EAAEC,MAAA,CAAAD,OAAO;IAAEE,KAAK,EAAL,EAAK;IAACC,MAAM,EAAC,cAAc;IAAEC,KAAK,EAAE;MAAAC,KAAA;MAAAC,QAAA;IAAA,CAAoC;IAAEC,QAAQ,EAAC,QAAQ;IAAEC,SAAS,EAAE,KAAK;IAAG,kBAAc,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,IAAA,CAAAC,KAAK,mBAAmBF,MAAM;;sBAExL,MAEwF,CAH5EG,KAAA,CAAAC,OAAO,I,cAAlBC,mBAAA,CAGM,OAHNC,UAGM,OAAAP,MAAA,QAAAA,MAAA,OAFJQ,mBAAA,CAA6D;MAA1DpB,KAAK,EAAC,uBAAuB;MAACO,KAAuB,EAAvB;QAAA;MAAA;kBACjCa,mBAAA,CAAyB,WAAtB,oBAAkB,M,QAGPJ,KAAA,CAAAK,IAAI,I,cAApBH,mBAAA,CA0CM,OA1CNI,UA0CM,GAzCJF,mBAAA,CAQM,OARNG,UAQM,G,0BAPJH,mBAAA,CAEM;MAFDpB,KAAK,EAAC;IAAa,IACtBoB,mBAAA,CAA0B;MAAvBpB,KAAK,EAAC;IAAY,G,QAEvBoB,mBAAA,CAGM,OAHNI,UAGM,GAFJJ,mBAAA,CAAiD,YAAAK,gBAAA,CAA1CT,KAAA,CAAAK,IAAI,CAACK,SAAS,IAAG,GAAC,GAAAD,gBAAA,CAAGT,KAAA,CAAAK,IAAI,CAACM,QAAQ,OACzCC,YAAA,CAAiFC,gBAAA;MAAzEC,KAAK,EAAEC,QAAA,CAAAC,YAAY,CAAChB,KAAA,CAAAK,IAAI,CAACY,IAAI;MAAIC,QAAQ,EAAEH,QAAA,CAAAI,eAAe,CAACnB,KAAA,CAAAK,IAAI,CAACY,IAAI;4CAIhFb,mBAAA,CA8BM,OA9BNgB,UA8BM,GA7BJhB,mBAAA,CAGM,OAHNiB,UAGM,G,0BAFJjB,mBAAA,CAA2E;MAArEpB,KAAK,EAAC;IAAc,IAACoB,mBAAA,CAA6B;MAA1BpB,KAAK,EAAC;IAAe,I,iBAAK,cAAY,E,QACpEoB,mBAAA,CAA+D,QAA/DkB,UAA+D,EAAAb,gBAAA,CAAjCT,KAAA,CAAAK,IAAI,CAACkB,WAAW,a,GAGhDnB,mBAAA,CAGM,OAHNoB,UAGM,G,0BAFJpB,mBAAA,CAAsE;MAAhEpB,KAAK,EAAC;IAAc,IAACoB,mBAAA,CAA8B;MAA3BpB,KAAK,EAAC;IAAgB,I,iBAAK,QAAM,E,QAC/DoB,mBAAA,CAAyD,QAAzDqB,UAAyD,EAAAhB,gBAAA,CAA3BT,KAAA,CAAAK,IAAI,CAACqB,KAAK,a,GAG1CtB,mBAAA,CAGM,OAHNuB,WAGM,G,0BAFJvB,mBAAA,CAAsE;MAAhEpB,KAAK,EAAC;IAAc,IAACoB,mBAAA,CAA2B;MAAxBpB,KAAK,EAAC;IAAa,I,iBAAK,WAAS,E,QAC/DoB,mBAAA,CAAyD,QAAzDwB,WAAyD,EAAAnB,gBAAA,CAA3BT,KAAA,CAAAK,IAAI,CAACwB,KAAK,a,GAG1CzB,mBAAA,CAGM,OAHN0B,WAGM,G,0BAFJ1B,mBAAA,CAAyE;MAAnEpB,KAAK,EAAC;IAAc,IAACoB,mBAAA,CAA+B;MAA5BpB,KAAK,EAAC;IAAiB,I,iBAAK,UAAQ,E,QAClEoB,mBAAA,CAA4D,QAA5D2B,WAA4D,EAAAtB,gBAAA,CAA9BT,KAAA,CAAAK,IAAI,CAACX,QAAQ,a,GAG7CU,mBAAA,CAGM,OAHN4B,WAGM,G,0BAFJ5B,mBAAA,CAAqE;MAA/DpB,KAAK,EAAC;IAAc,IAACoB,mBAAA,CAA8B;MAA3BpB,KAAK,EAAC;IAAgB,I,iBAAK,OAAK,E,QAC9DoB,mBAAA,CAA8D,QAA9D6B,WAA8D,EAAAxB,gBAAA,CAAhCT,KAAA,CAAAK,IAAI,CAAC6B,UAAU,a,GAG/C9B,mBAAA,CAGM,OAHN+B,WAGM,G,0BAFJ/B,mBAAA,CAAyE;MAAnEpB,KAAK,EAAC;IAAc,IAACoB,mBAAA,CAAiC;MAA9BpB,KAAK,EAAC;IAAmB,I,iBAAK,QAAM,E,QAClE4B,YAAA,CAA4GC,gBAAA;MAApGC,KAAK,EAAEd,KAAA,CAAAK,IAAI,CAAC+B,SAAS;MAA4BlB,QAAQ,EAAElB,KAAA,CAAAK,IAAI,CAAC+B,SAAS;+DAKvFlC,mBAAA,CAGM,OAHNmC,WAGM,OAAAzC,MAAA,QAAAA,MAAA,OAFJQ,mBAAA,CAAkF;MAA/EpB,KAAK,EAAC,4BAA4B;MAACO,KAAuC,EAAvC;QAAA;QAAA;MAAA;kBACtCa,mBAAA,CAAwB,WAArB,mBAAiB,M","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}