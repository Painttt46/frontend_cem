{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport axios from 'axios';\nexport default {\n  name: 'UserInfoDialog',\n  props: {\n    visible: Boolean,\n    userName: String,\n    userId: Number\n  },\n  emits: ['update:visible'],\n  data() {\n    return {\n      user: null,\n      loading: false\n    };\n  },\n  watch: {\n    visible(newVal) {\n      if (newVal) {\n        this.loadUserInfo();\n      }\n    }\n  },\n  methods: {\n    async loadUserInfo() {\n      if (!this.userName && !this.userId) return;\n      this.loading = true;\n      this.user = null;\n      try {\n        const response = await axios.get('/api/users');\n        if (this.userId) {\n          this.user = response.data.find(u => u.id === this.userId);\n        } else {\n          const fullName = this.userName.trim();\n          this.user = response.data.find(u => {\n            const userName = `${u.firstname} ${u.lastname}`.trim();\n            return userName === fullName;\n          });\n        }\n      } catch (error) {\n        console.error('Error loading user info:', error);\n      } finally {\n        this.loading = false;\n      }\n    },\n    getRoleLabel(role) {\n      const roles = {\n        'admin': 'ผู้ดูแลระบบ',\n        'manager': 'ผู้จัดการ',\n        'hr': 'ฝ่ายบุคคล',\n        'user': 'ผู้ใช้งาน'\n      };\n      return roles[role?.toLowerCase()] || role;\n    },\n    getRoleSeverity(role) {\n      const severities = {\n        'admin': 'danger',\n        'manager': 'warning',\n        'hr': 'info',\n        'user': 'success'\n      };\n      return severities[role?.toLowerCase()] || 'secondary';\n    }\n  }\n};","map":{"version":3,"names":["axios","name","props","visible","Boolean","userName","String","userId","Number","emits","data","user","loading","watch","newVal","loadUserInfo","methods","response","get","find","u","id","fullName","trim","firstname","lastname","error","console","getRoleLabel","role","roles","toLowerCase","getRoleSeverity","severities"],"sources":["D:\\frontend_cem\\src\\components\\UserInfoDialog.vue"],"sourcesContent":["<template>\n  <Dialog :visible=\"visible\" modal header=\"ข้อมูลผู้ใช้\" :style=\"{ width: '500px' }\" @update:visible=\"$emit('update:visible', $event)\">\n    <div v-if=\"loading\" class=\"loading-state\">\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2rem\"></i>\n      <p>กำลังโหลดข้อมูล...</p>\n    </div>\n\n    <div v-else-if=\"user\" class=\"user-info-content\">\n      <div class=\"user-header\">\n        <div class=\"user-avatar\">\n          <i class=\"pi pi-user\"></i>\n        </div>\n        <div class=\"user-title\">\n          <h3>{{ user.firstname }} {{ user.lastname }}</h3>\n          <Badge :value=\"getRoleLabel(user.role)\" :severity=\"getRoleSeverity(user.role)\" />\n        </div>\n      </div>\n\n      <Divider />\n\n      <div class=\"user-details\">\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-id-card\"></i> รหัสพนักงาน</span>\n          <span class=\"detail-value\">{{ user.employee_id || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-user\"></i> Username</span>\n          <span class=\"detail-value\">{{ user.username }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-envelope\"></i> Email</span>\n          <span class=\"detail-value\">{{ user.email || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-phone\"></i> เบอร์โทร</span>\n          <span class=\"detail-value\">{{ user.phone || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-building\"></i> แผนก</span>\n          <span class=\"detail-value\">{{ user.department || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-briefcase\"></i> ตำแหน่ง</span>\n          <span class=\"detail-value\">{{ user.position || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-circle-fill\"></i> สถานะ</span>\n          <Badge :value=\"user.is_active ? 'ใช้งาน' : 'ปิดใช้งาน'\" :severity=\"user.is_active ? 'success' : 'danger'\" />\n        </div>\n      </div>\n    </div>\n\n    <div v-else class=\"error-state\">\n      <i class=\"pi pi-exclamation-triangle\" style=\"font-size: 2rem; color: #f59e0b\"></i>\n      <p>ไม่พบข้อมูลผู้ใช้</p>\n    </div>\n\n    <template #footer>\n      <Button label=\"ปิด\" icon=\"pi pi-times\" @click=\"$emit('update:visible', false)\" />\n    </template>\n  </Dialog>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  name: 'UserInfoDialog',\n  props: {\n    visible: Boolean,\n    userName: String,\n    userId: Number\n  },\n  emits: ['update:visible'],\n  data() {\n    return {\n      user: null,\n      loading: false\n    }\n  },\n  watch: {\n    visible(newVal) {\n      if (newVal) {\n        this.loadUserInfo()\n      }\n    }\n  },\n  methods: {\n    async loadUserInfo() {\n      if (!this.userName && !this.userId) return\n\n      this.loading = true\n      this.user = null\n\n      try {\n        const response = await axios.get('/api/users')\n        if (this.userId) {\n          this.user = response.data.find(u => u.id === this.userId)\n        } else {\n          const fullName = this.userName.trim()\n          this.user = response.data.find(u => {\n            const userName = `${u.firstname} ${u.lastname}`.trim()\n            return userName === fullName\n          })\n        }\n      } catch (error) {\n        console.error('Error loading user info:', error)\n      } finally {\n        this.loading = false\n      }\n    },\n    getRoleLabel(role) {\n      const roles = {\n        'admin': 'ผู้ดูแลระบบ',\n        'manager': 'ผู้จัดการ',\n        'hr': 'ฝ่ายบุคคล',\n        'user': 'ผู้ใช้งาน'\n      }\n      return roles[role?.toLowerCase()] || role\n    },\n    getRoleSeverity(role) {\n      const severities = {\n        'admin': 'danger',\n        'manager': 'warning',\n        'hr': 'info',\n        'user': 'success'\n      }\n      return severities[role?.toLowerCase()] || 'secondary'\n    }\n  }\n}\n</script>\n\n<style scoped>\n.loading-state,\n.error-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  gap: 1rem;\n  color: #6c757d;\n}\n\n.user-info-content {\n  padding: 1rem 0;\n}\n\n.user-header {\n  display: flex;\n  align-items: center;\n  gap: 1.5rem;\n  margin-bottom: 1rem;\n}\n\n.user-avatar {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 2.5rem;\n}\n\n.user-title h3 {\n  margin: 0 0 0.5rem 0;\n  font-size: 1.5rem;\n  color: #2c3e50;\n}\n\n.user-details {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.detail-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem;\n  background: #f8f9fa;\n  border-radius: 8px;\n}\n\n.detail-label {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-weight: 600;\n  color: #495057;\n}\n\n.detail-label i {\n  color: #6c757d;\n}\n\n.detail-value {\n  color: #2c3e50;\n  font-weight: 500;\n}\n</style>\n"],"mappings":";;AAsEA,OAAOA,KAAI,MAAO,OAAM;AAExB,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,KAAK,EAAE;IACLC,OAAO,EAAEC,OAAO;IAChBC,QAAQ,EAAEC,MAAM;IAChBC,MAAM,EAAEC;EACV,CAAC;EACDC,KAAK,EAAE,CAAC,gBAAgB,CAAC;EACzBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,IAAI;MACVC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,KAAK,EAAE;IACLV,OAAOA,CAACW,MAAM,EAAE;MACd,IAAIA,MAAM,EAAE;QACV,IAAI,CAACC,YAAY,CAAC;MACpB;IACF;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,YAAYA,CAAA,EAAG;MACnB,IAAI,CAAC,IAAI,CAACV,QAAO,IAAK,CAAC,IAAI,CAACE,MAAM,EAAE;MAEpC,IAAI,CAACK,OAAM,GAAI,IAAG;MAClB,IAAI,CAACD,IAAG,GAAI,IAAG;MAEf,IAAI;QACF,MAAMM,QAAO,GAAI,MAAMjB,KAAK,CAACkB,GAAG,CAAC,YAAY;QAC7C,IAAI,IAAI,CAACX,MAAM,EAAE;UACf,IAAI,CAACI,IAAG,GAAIM,QAAQ,CAACP,IAAI,CAACS,IAAI,CAACC,CAAA,IAAKA,CAAC,CAACC,EAAC,KAAM,IAAI,CAACd,MAAM;QAC1D,OAAO;UACL,MAAMe,QAAO,GAAI,IAAI,CAACjB,QAAQ,CAACkB,IAAI,CAAC;UACpC,IAAI,CAACZ,IAAG,GAAIM,QAAQ,CAACP,IAAI,CAACS,IAAI,CAACC,CAAA,IAAK;YAClC,MAAMf,QAAO,GAAI,GAAGe,CAAC,CAACI,SAAS,IAAIJ,CAAC,CAACK,QAAQ,EAAE,CAACF,IAAI,CAAC;YACrD,OAAOlB,QAAO,KAAMiB,QAAO;UAC7B,CAAC;QACH;MACF,EAAE,OAAOI,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK;MACjD,UAAU;QACR,IAAI,CAACd,OAAM,GAAI,KAAI;MACrB;IACF,CAAC;IACDgB,YAAYA,CAACC,IAAI,EAAE;MACjB,MAAMC,KAAI,GAAI;QACZ,OAAO,EAAE,aAAa;QACtB,SAAS,EAAE,WAAW;QACtB,IAAI,EAAE,WAAW;QACjB,MAAM,EAAE;MACV;MACA,OAAOA,KAAK,CAACD,IAAI,EAAEE,WAAW,CAAC,CAAC,KAAKF,IAAG;IAC1C,CAAC;IACDG,eAAeA,CAACH,IAAI,EAAE;MACpB,MAAMI,UAAS,GAAI;QACjB,OAAO,EAAE,QAAQ;QACjB,SAAS,EAAE,SAAS;QACpB,IAAI,EAAE,MAAM;QACZ,MAAM,EAAE;MACV;MACA,OAAOA,UAAU,CAACJ,IAAI,EAAEE,WAAW,CAAC,CAAC,KAAK,WAAU;IACtD;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}