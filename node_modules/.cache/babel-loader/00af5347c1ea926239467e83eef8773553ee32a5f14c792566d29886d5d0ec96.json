{"ast":null,"code":"export default {\n  name: 'CarHistory',\n  props: {\n    records: Array\n  },\n  data() {\n    return {\n      searchQuery: '',\n      showColleaguesModal: false,\n      selectedColleagues: [],\n      showDescriptionModal: false,\n      selectedDescription: ''\n    };\n  },\n  computed: {\n    groupedRecords() {\n      if (!this.records || !Array.isArray(this.records)) return [];\n      const borrowRecords = this.records.filter(r => r && r.status !== undefined);\n      const groups = borrowRecords.map(borrow => {\n        const returned = borrow.status === 'returned';\n        return {\n          id: borrow.id,\n          license: borrow.license,\n          borrowDate: borrow.selected_date,\n          borrowRecord: borrow,\n          returnRecord: returned ? {\n            name: borrow.return_name,\n            location: borrow.return_location,\n            time: borrow.return_time,\n            date: borrow.return_date,\n            created_at: borrow.updated_at\n          } : null,\n          returned: returned\n        };\n      });\n      return groups.sort((a, b) => b.id - a.id);\n    },\n    groupedRecordsWithDuration() {\n      return this.groupedRecords.map(group => {\n        let duration = 'ยังไม่คืน';\n        if (group.returned) {\n          const borrowDate = new Date(group.borrowDate);\n          const [borrowHour, borrowMin] = group.borrowRecord.time.split(':').map(Number);\n          const borrowTime = new Date(borrowDate);\n          borrowTime.setHours(borrowHour, borrowMin, 0, 0);\n          const returnTime = group.returnRecord.created_at ? new Date(group.returnRecord.created_at) : new Date();\n          const diffMs = returnTime - borrowTime;\n          if (diffMs > 0) {\n            const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n            const diffMinutes = Math.floor(diffMs % (1000 * 60 * 60) / (1000 * 60));\n            if (diffHours > 0) {\n              duration = `${diffHours} ชั่วโมง ${diffMinutes} นาที`;\n            } else {\n              duration = `${diffMinutes} นาที`;\n            }\n          } else {\n            duration = 'ข้อมูลเวลาไม่ถูกต้อง';\n          }\n        }\n        return {\n          ...group,\n          duration\n        };\n      });\n    },\n    filteredRecords() {\n      const records = this.groupedRecordsWithDuration || [];\n      if (!this.searchQuery) return records;\n      const query = this.searchQuery.toLowerCase().trim();\n      return records.filter(record => {\n        const formattedDate = this.formatDate(record.borrowDate);\n\n        // รวมชื่อผู้ร่วมงานทั้งหมด\n        const colleaguesNames = record.borrowRecord?.colleagues ? record.borrowRecord.colleagues.map(c => c.name).join(' ') : '';\n        const searchableData = {\n          id: record.id || '',\n          license: record.license || '',\n          borrower_name: record.borrowRecord?.name || '',\n          borrow_time: record.borrowRecord?.time || '',\n          borrow_location: record.borrowRecord?.location || '',\n          project: record.borrowRecord?.project || '',\n          description: record.borrowRecord?.description || '',\n          colleagues: colleaguesNames,\n          returner_name: record.returnRecord?.name || '',\n          return_time: record.returnRecord?.time || '',\n          return_location: record.returnRecord?.location || '',\n          duration: record.duration || '',\n          borrow_date: formattedDate\n        };\n        return Object.values(searchableData).some(value => {\n          if (value === null || value === undefined) return false;\n          const strValue = String(value).toLowerCase();\n          return strValue.includes(query) || strValue.replace(/\\s/g, '').includes(query.replace(/\\s/g, ''));\n        });\n      });\n    }\n  },\n  methods: {\n    showColleaguesDialog(colleagues) {\n      this.selectedColleagues = colleagues || [];\n      this.showColleaguesModal = true;\n    },\n    hasColleagues(record) {\n      return record.colleagues && Array.isArray(record.colleagues) && record.colleagues.length > 0;\n    },\n    getColleagueName(colleague) {\n      if (typeof colleague === 'string') return colleague;\n      return colleague?.name || colleague;\n    },\n    getColleaguePosition(colleague) {\n      if (typeof colleague === 'string') return '';\n      return colleague?.position || '';\n    },\n    getColleagueDepartment(colleague) {\n      if (typeof colleague === 'string') return '';\n      return colleague?.department || '';\n    },\n    formatTime(dateString) {\n      if (!dateString) return '-';\n      return new Date(dateString).toLocaleTimeString('th-TH', {\n        hour: '2-digit',\n        minute: '2-digit',\n        hour12: false\n      });\n    },\n    canUploadImages(group) {\n      return group.borrowRecord.status === 'active';\n    },\n    handleImageUpload(event, bookingId) {\n      const files = Array.from(event.target.files);\n      if (files.length === 0) return;\n      this.$emit('upload-images', {\n        files,\n        bookingId\n      });\n\n      // Clear file input\n      event.target.value = '';\n    },\n    formatDate(date) {\n      return new Date(date).toLocaleDateString('th-TH', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    },\n    hasImages(data) {\n      return data.borrowRecord.images?.length > 0 || data.returned && data.returnRecord.images?.length > 0;\n    },\n    isWaitingToUse(data) {\n      const now = new Date();\n      const borrowDate = new Date(data.borrowDate);\n      const [hour, minute] = data.borrowRecord.time.split(':').map(Number);\n      const borrowDateTime = new Date(borrowDate);\n      borrowDateTime.setHours(hour, minute, 0, 0);\n\n      // If current time is before booking time, show \"รอใช้งาน\"\n      return now < borrowDateTime;\n    },\n    viewImages(data) {\n      const images = [];\n      if (data.borrowRecord.images?.length > 0) {\n        images.push(...data.borrowRecord.images.map(img => ({\n          src: img,\n          type: 'ใช้'\n        })));\n      }\n      if (data.returned && data.returnRecord.images?.length > 0) {\n        images.push(...data.returnRecord.images.map(img => ({\n          src: img,\n          type: 'คืน'\n        })));\n      }\n      this.$emit('view-images', images, data);\n    },\n    viewDescription(description) {\n      this.selectedDescription = description;\n      this.showDescriptionModal = true;\n    }\n  }\n};","map":{"version":3,"names":["name","props","records","Array","data","searchQuery","showColleaguesModal","selectedColleagues","showDescriptionModal","selectedDescription","computed","groupedRecords","isArray","borrowRecords","filter","r","status","undefined","groups","map","borrow","returned","id","license","borrowDate","selected_date","borrowRecord","returnRecord","return_name","location","return_location","time","return_time","date","return_date","created_at","updated_at","sort","a","b","groupedRecordsWithDuration","group","duration","Date","borrowHour","borrowMin","split","Number","borrowTime","setHours","returnTime","diffMs","diffHours","Math","floor","diffMinutes","filteredRecords","query","toLowerCase","trim","record","formattedDate","formatDate","colleaguesNames","colleagues","c","join","searchableData","borrower_name","borrow_time","borrow_location","project","description","returner_name","borrow_date","Object","values","some","value","strValue","String","includes","replace","methods","showColleaguesDialog","hasColleagues","length","getColleagueName","colleague","getColleaguePosition","position","getColleagueDepartment","department","formatTime","dateString","toLocaleTimeString","hour","minute","hour12","canUploadImages","handleImageUpload","event","bookingId","files","from","target","$emit","toLocaleDateString","year","month","day","hasImages","images","isWaitingToUse","now","borrowDateTime","viewImages","push","img","src","type","viewDescription"],"sources":["D:\\GEN-T\\WEB\\GenT-CEM\\frontend_cem\\src\\views\\car_booking\\History.vue"],"sourcesContent":["<template>\r\n  <Card class=\"history-card\">\r\n    <template #content>\r\n      <!-- Search Box -->\r\n      <div class=\"search-box mb-3\">\r\n        <IconField iconPosition=\"left\">\r\n          <InputIcon class=\"pi pi-search\" />\r\n          <InputText v-model=\"searchQuery\" placeholder=\"ค้นหา...\" class=\"w-full\" />\r\n        </IconField>\r\n      </div>\r\n\r\n      <div v-if=\"filteredRecords.length === 0\" class=\"empty-state\">\r\n        <i class=\"pi pi-car\" style=\"font-size: 4rem; color: #ccc;\"></i>\r\n        <p>{{ searchQuery ? 'ไม่พบข้อมูลที่ค้นหา' : 'ยังไม่มีข้อมูลการใช้รถ' }}</p>\r\n      </div>\r\n\r\n      <DataTable v-else :value=\"filteredRecords\" :paginator=\"true\" :rows=\"10\"\r\n        :rowsPerPageOptions=\"[5, 10, 20]\" responsiveLayout=\"scroll\" class=\"history-table\" stripedRows>\r\n        <Column field=\"id\" header=\"Ticket ID\" :sortable=\"true\">\r\n          <template #body=\"slotProps\">\r\n            <span class=\"ticket-id\">{{ slotProps.data.id }}</span>\r\n          </template>\r\n        </Column>\r\n\r\n        <Column field=\"borrowDate\" header=\"วันที่\" :sortable=\"true\">\r\n          <template #body=\"slotProps\">\r\n            {{ formatDate(slotProps.data.borrowDate) }}\r\n          </template>\r\n        </Column>\r\n\r\n        <Column field=\"borrowRecord.name\" header=\"ผู้ใช้\" :sortable=\"true\" />\r\n        <Column field=\"borrowRecord.time\" header=\"เวลาใช้\" />\r\n        <Column field=\"borrowRecord.location\" header=\"สถานที่\" />\r\n        <Column field=\"borrowRecord.project\" header=\"โครงการ\" />\r\n        \r\n        <Column header=\"ผู้ร่วมงาน\" style=\"min-width: 120px;\">\r\n          <template #body=\"slotProps\">\r\n            <Button \r\n              v-if=\"hasColleagues(slotProps.data.borrowRecord)\" \r\n              @click=\"showColleaguesDialog(slotProps.data.borrowRecord.colleagues)\"\r\n              severity=\"info\" \r\n              size=\"small\"\r\n              outlined\r\n            >\r\n              <i class=\"pi pi-users\"></i>\r\n              <Badge :value=\"slotProps.data.borrowRecord.colleagues.length\" severity=\"info\" />\r\n            </Button>\r\n            <span v-else class=\"no-colleagues\">\r\n              <i class=\"pi pi-user-minus\"></i> ไม่มี\r\n            </span>\r\n          </template>\r\n        </Column>\r\n\r\n        <Column header=\"ผู้คืน\">\r\n          <template #body=\"slotProps\">\r\n            {{ slotProps.data.returned ? slotProps.data.returnRecord.name : '-' }}\r\n          </template>\r\n        </Column>\r\n\r\n        <Column header=\"วันที่คืน\">\r\n          <template #body=\"slotProps\">\r\n            <span v-if=\"slotProps.data.returned && slotProps.data.returnRecord.date\">\r\n              {{ formatDate(slotProps.data.returnRecord.date) }}\r\n            </span>\r\n            <span v-else-if=\"slotProps.data.returned\">\r\n              {{ formatDate(slotProps.data.borrowRecord.updated_at) }}\r\n            </span>\r\n            <span v-else>-</span>\r\n          </template>\r\n        </Column>\r\n\r\n        <Column header=\"เวลาคืน\">\r\n          <template #body=\"slotProps\">\r\n            <span v-if=\"slotProps.data.returned\">\r\n              {{ slotProps.data.returnRecord.time || formatTime(slotProps.data.borrowRecord.updated_at) }}\r\n            </span>\r\n            <span v-else>-</span>\r\n          </template>\r\n        </Column>\r\n\r\n        <Column header=\"สถานที่คืน\">\r\n          <template #body=\"slotProps\">\r\n            {{ slotProps.data.returned ? slotProps.data.returnRecord.location : '-' }}\r\n          </template>\r\n        </Column>\r\n\r\n        <Column field=\"duration\" header=\"ระยะเวลา\" />\r\n\r\n        <Column header=\"รูปภาพ\">\r\n          <template #body=\"slotProps\">\r\n            <i class=\"pi pi-eye view-icon\" @click=\"viewImages(slotProps.data)\"></i>\r\n          </template>\r\n        </Column>\r\n\r\n        <Column header=\"ข้อมูลเพิ่มเติม\">\r\n          <template #body=\"slotProps\">\r\n            <Button \r\n              v-if=\"slotProps.data.borrowRecord.discription\" \r\n              icon=\"pi pi-info-circle\" \r\n              severity=\"info\" \r\n              text \r\n              rounded \r\n              size=\"small\"\r\n              @click=\"viewDescription(slotProps.data.borrowRecord.discription)\"\r\n              v-tooltip=\"'ดูข้อมูลเพิ่มเติม'\"\r\n            />\r\n            <span v-else class=\"no-description\">-</span>\r\n          </template>\r\n        </Column>\r\n\r\n        <Column header=\"สถานะ\">\r\n          <template #body=\"slotProps\">\r\n            <Badge v-if=\"slotProps.data.returned\" value=\"คืนแล้ว\" severity=\"success\" icon=\"pi pi-check\" />\r\n            <Badge v-else-if=\"isWaitingToUse(slotProps.data)\" value=\"รอใช้งาน\" severity=\"info\" icon=\"pi pi-clock\" />\r\n            <Badge v-else value=\"ยังไม่คืน\" severity=\"warning\" icon=\"pi pi-clock\" />\r\n          </template>\r\n        </Column>\r\n      </DataTable>\r\n    </template>\r\n  </Card>\r\n\r\n  <!-- Colleagues Dialog -->\r\n  <Dialog v-model:visible=\"showColleaguesModal\" modal header=\"รายชื่อผู้ร่วมงาน\" :style=\"{ width: '600px' }\" :draggable=\"false\">\r\n    <div class=\"colleagues-list\">\r\n      <div v-for=\"(colleague, index) in selectedColleagues\" :key=\"index\" class=\"colleague-card\">\r\n        <div class=\"colleague-details\">\r\n          <div class=\"colleague-name\">{{ getColleagueName(colleague) }}</div>\r\n          <div v-if=\"getColleaguePosition(colleague) || getColleagueDepartment(colleague)\" class=\"colleague-info\">\r\n            <span v-if=\"getColleaguePosition(colleague)\" class=\"position\">{{ getColleaguePosition(colleague) }}</span>\r\n            <span v-if=\"getColleagueDepartment(colleague)\" class=\"department\">{{ getColleagueDepartment(colleague) }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </Dialog>\r\n\r\n  <!-- Description Dialog -->\r\n  <Dialog v-model:visible=\"showDescriptionModal\" modal header=\"ข้อมูลเพิ่มเติม\" :style=\"{ width: '500px' }\" :draggable=\"false\">\r\n    <div class=\"description-content\">\r\n      <p>{{ selectedDescription }}</p>\r\n    </div>\r\n  </Dialog>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'CarHistory',\r\n  props: {\r\n    records: Array\r\n  },\r\n  data() {\r\n    return {\r\n      searchQuery: '',\r\n      showColleaguesModal: false,\r\n      selectedColleagues: [],\r\n      showDescriptionModal: false,\r\n      selectedDescription: ''\r\n    }\r\n  },\r\n  computed: {\r\n    groupedRecords() {\r\n      if (!this.records || !Array.isArray(this.records)) return []\r\n      \r\n      const borrowRecords = this.records.filter(r => r && r.status !== undefined)\r\n      const groups = borrowRecords.map(borrow => {\r\n        const returned = borrow.status === 'returned'\r\n        return {\r\n          id: borrow.id,\r\n          license: borrow.license,\r\n          borrowDate: borrow.selected_date,\r\n          borrowRecord: borrow,\r\n          returnRecord: returned ? {\r\n            name: borrow.return_name,\r\n            location: borrow.return_location,\r\n            time: borrow.return_time,\r\n            date: borrow.return_date,\r\n            created_at: borrow.updated_at\r\n          } : null,\r\n          returned: returned\r\n        }\r\n      })\r\n      return groups.sort((a, b) => b.id - a.id)\r\n    },\r\n    groupedRecordsWithDuration() {\r\n      return this.groupedRecords.map(group => {\r\n        let duration = 'ยังไม่คืน'\r\n        if (group.returned) {\r\n          const borrowDate = new Date(group.borrowDate)\r\n          const [borrowHour, borrowMin] = group.borrowRecord.time.split(':').map(Number)\r\n          const borrowTime = new Date(borrowDate)\r\n          borrowTime.setHours(borrowHour, borrowMin, 0, 0)\r\n\r\n          const returnTime = group.returnRecord.created_at\r\n            ? new Date(group.returnRecord.created_at)\r\n            : new Date()\r\n\r\n          const diffMs = returnTime - borrowTime\r\n          if (diffMs > 0) {\r\n            const diffHours = Math.floor(diffMs / (1000 * 60 * 60))\r\n            const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60))\r\n            if (diffHours > 0) {\r\n              duration = `${diffHours} ชั่วโมง ${diffMinutes} นาที`\r\n            } else {\r\n              duration = `${diffMinutes} นาที`\r\n            }\r\n          } else {\r\n            duration = 'ข้อมูลเวลาไม่ถูกต้อง'\r\n          }\r\n        }\r\n        return { ...group, duration }\r\n      })\r\n    },\r\n    filteredRecords() {\r\n      const records = this.groupedRecordsWithDuration || []\r\n      if (!this.searchQuery) return records\r\n\r\n      const query = this.searchQuery.toLowerCase().trim()\r\n      return records.filter(record => {\r\n        const formattedDate = this.formatDate(record.borrowDate)\r\n        \r\n        // รวมชื่อผู้ร่วมงานทั้งหมด\r\n        const colleaguesNames = record.borrowRecord?.colleagues \r\n          ? record.borrowRecord.colleagues.map(c => c.name).join(' ') \r\n          : ''\r\n        \r\n        const searchableData = {\r\n          id: record.id || '',\r\n          license: record.license || '',\r\n          borrower_name: record.borrowRecord?.name || '',\r\n          borrow_time: record.borrowRecord?.time || '',\r\n          borrow_location: record.borrowRecord?.location || '',\r\n          project: record.borrowRecord?.project || '',\r\n          description: record.borrowRecord?.description || '',\r\n          colleagues: colleaguesNames,\r\n          returner_name: record.returnRecord?.name || '',\r\n          return_time: record.returnRecord?.time || '',\r\n          return_location: record.returnRecord?.location || '',\r\n          duration: record.duration || '',\r\n          borrow_date: formattedDate\r\n        }\r\n        \r\n        return Object.values(searchableData).some(value => {\r\n          if (value === null || value === undefined) return false\r\n          const strValue = String(value).toLowerCase()\r\n          return strValue.includes(query) || strValue.replace(/\\s/g, '').includes(query.replace(/\\s/g, ''))\r\n        })\r\n      })\r\n    }\r\n  },\r\n  methods: {\r\n    showColleaguesDialog(colleagues) {\r\n      this.selectedColleagues = colleagues || []\r\n      this.showColleaguesModal = true\r\n    },\r\n    \r\n    hasColleagues(record) {\r\n      return record.colleagues && Array.isArray(record.colleagues) && record.colleagues.length > 0\r\n    },\r\n    \r\n    getColleagueName(colleague) {\r\n      if (typeof colleague === 'string') return colleague\r\n      return colleague?.name || colleague\r\n    },\r\n    \r\n    getColleaguePosition(colleague) {\r\n      if (typeof colleague === 'string') return ''\r\n      return colleague?.position || ''\r\n    },\r\n    \r\n    getColleagueDepartment(colleague) {\r\n      if (typeof colleague === 'string') return ''\r\n      return colleague?.department || ''\r\n    },\r\n    \r\n    formatTime(dateString) {\r\n      if (!dateString) return '-'\r\n      return new Date(dateString).toLocaleTimeString('th-TH', {\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        hour12: false\r\n      })\r\n    },\r\n    canUploadImages(group) {\r\n      return group.borrowRecord.status === 'active'\r\n    },\r\n    handleImageUpload(event, bookingId) {\r\n      const files = Array.from(event.target.files)\r\n      if (files.length === 0) return\r\n\r\n      this.$emit('upload-images', { files, bookingId })\r\n      \r\n      // Clear file input\r\n      event.target.value = ''\r\n    },\r\n    formatDate(date) {\r\n      return new Date(date).toLocaleDateString('th-TH', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric'\r\n      })\r\n    },\r\n    hasImages(data) {\r\n      return (data.borrowRecord.images?.length > 0) ||\r\n        (data.returned && data.returnRecord.images?.length > 0)\r\n    },\r\n    isWaitingToUse(data) {\r\n      const now = new Date()\r\n      const borrowDate = new Date(data.borrowDate)\r\n      const [hour, minute] = data.borrowRecord.time.split(':').map(Number)\r\n      const borrowDateTime = new Date(borrowDate)\r\n      borrowDateTime.setHours(hour, minute, 0, 0)\r\n      \r\n      // If current time is before booking time, show \"รอใช้งาน\"\r\n      return now < borrowDateTime\r\n    },\r\n    viewImages(data) {\r\n      const images = []\r\n      if (data.borrowRecord.images?.length > 0) {\r\n        images.push(...data.borrowRecord.images.map(img => ({ src: img, type: 'ใช้' })))\r\n      }\r\n      if (data.returned && data.returnRecord.images?.length > 0) {\r\n        images.push(...data.returnRecord.images.map(img => ({ src: img, type: 'คืน' })))\r\n      }\r\n      this.$emit('view-images', images, data)\r\n    },\r\n    \r\n    viewDescription(description) {\r\n      this.selectedDescription = description\r\n      this.showDescriptionModal = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.colleagues-compact {\r\n  padding: 0.25rem;\r\n}\r\n\r\n.colleagues-names {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.25rem;\r\n}\r\n\r\n.colleague-item {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 6px;\r\n  padding: 0.25rem 0.375rem;\r\n}\r\n\r\n.colleague-name {\r\n  font-weight: 600;\r\n  color: #495057;\r\n  font-size: 0.75rem;\r\n  margin-bottom: 0.125rem;\r\n}\r\n\r\n.colleague-info {\r\n  color: #6c757d;\r\n  font-size: 0.65rem;\r\n  line-height: 1.2;\r\n}\r\n\r\n.no-colleagues {\r\n  color: #a0aec0;\r\n  font-size: 0.75rem;\r\n  text-align: center;\r\n}\r\n\r\n.no-colleagues i {\r\n  font-size: 0.8rem;\r\n  margin-right: 0.25rem;\r\n}\r\n\r\n.colleagues-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n  max-height: 450px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.colleague-card {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  padding: 1.25rem;\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 12px;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.colleague-card:hover {\r\n  background: #e9ecef;\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.colleague-avatar {\r\n  width: 50px;\r\n  height: 50px;\r\n  background: #667eea;\r\n  color: white;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.colleague-details {\r\n  flex: 1;\r\n}\r\n\r\n.colleague-name {\r\n  font-weight: 600;\r\n  color: #495057;\r\n  font-size: 1.1rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.colleague-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.25rem;\r\n}\r\n\r\n.position {\r\n  color: #6c757d;\r\n  font-size: 0.95rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.department {\r\n  color: #868e96;\r\n  font-size: 0.9rem;\r\n}\r\n</style>\r\n<style scoped>\r\n.history-card {\r\n  width: 100%;\r\n  margin: 0;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\r\n  border: 1px solid #e9ecef;\r\n}\r\n\r\n.card-header {\r\n  background: #87CEEB;\r\n  color: white;\r\n  padding: 1.5rem;\r\n  text-align: center;\r\n  border-radius: 8px 8px 0 0;\r\n}\r\n\r\n.card-header h3 {\r\n  margin: 0;\r\n  font-size: 1.25rem;\r\n  font-weight: 600;\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n}\r\n\r\n.card-header i {\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 4rem 2rem;\r\n  color: #6c757d;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  margin: 1rem;\r\n}\r\n\r\n.empty-state p {\r\n  margin-top: 1rem;\r\n  font-size: 1.1rem;\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n}\r\n\r\n.history-table :deep(.p-datatable) {\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n}\r\n\r\n.history-table :deep(.p-datatable-header) {\r\n  background: #f8f9fa;\r\n  border-bottom: 2px solid #e9ecef;\r\n  padding: 1rem;\r\n}\r\n\r\n.history-table :deep(.p-datatable-thead > tr > th) {\r\n  background: #f8f9fa;\r\n  color: #495057;\r\n  font-weight: 600;\r\n  border-bottom: 2px solid #e9ecef;\r\n  padding: 1rem 0.75rem;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.history-table :deep(.p-datatable-tbody > tr > td) {\r\n  padding: 1rem 0.75rem;\r\n  border-bottom: 1px solid #f1f3f4;\r\n  vertical-align: middle;\r\n  text-align: center;\r\n}\r\n\r\n.history-table :deep(.p-datatable-tbody > tr:hover) {\r\n  background: #f8f9fa;\r\n}\r\n\r\n.history-table :deep(.p-paginator) {\r\n  background: #f8f9fa;\r\n  border-top: 2px solid #e9ecef;\r\n  padding: 1rem;\r\n}\r\n\r\n.history-table :deep(.p-badge) {\r\n  font-weight: 500;\r\n  padding: 0.5rem 0.75rem;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  min-height: 2.5rem;\r\n  white-space: normal;\r\n  text-align: center;\r\n  line-height: 1.2;\r\n}\r\n\r\n.view-icon {\r\n  font-size: 1.2rem;\r\n  color: #667eea;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.view-icon:hover {\r\n  color: #5a67d8;\r\n  transform: scale(1.1);\r\n}\r\n\r\n.ticket-id {\r\n  font-weight: 600;\r\n  color: #495057;\r\n  padding: 0.25rem 0.5rem;\r\n  background: #e3f2fd;\r\n  border-radius: 4px;\r\n  border: 1px solid #bbdefb;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .history-table :deep(.p-datatable-tbody > tr > td) {\r\n    padding: 0.75rem 0.5rem;\r\n    font-size: 0.9rem;\r\n  }\r\n}\r\n\r\n.description-content {\r\n  padding: 1rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  border-left: 4px solid #007bff;\r\n}\r\n\r\n.description-content p {\r\n  margin: 0;\r\n  line-height: 1.6;\r\n  color: #495057;\r\n}\r\n\r\n.no-description {\r\n  color: #6c757d;\r\n  font-style: italic;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}