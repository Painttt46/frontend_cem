{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport Calendar from './Calendar.vue';\nimport History from './History.vue';\nimport BookingFormPrime from './BookingFormPrime.vue';\nimport axios from 'axios';\nexport default {\n  components: {\n    Calendar,\n    History,\n    BookingForm: BookingFormPrime\n  },\n  data() {\n    return {\n      activeTabIndex: 0,\n      selectedDate: null,\n      showForm: false,\n      activeForm: 'borrow',\n      borrowForm: {\n        license: 'FXAG-2032',\n        time: '',\n        location: '',\n        project: '',\n        discription: '',\n        colleagues: [],\n        images: []\n      },\n      returnForm: {\n        borrowId: '',\n        license: 'FXAG-2032',\n        location: '',\n        discription: '',\n        images: []\n      },\n      cancelForm: {\n        borrowId: '',\n        reason: ''\n      },\n      records: [],\n      currentTime: new Date(),\n      currentBookingData: null,\n      showImageModal: false,\n      selectedImages: [],\n      showFullImageModal: false,\n      fullSizeImage: '',\n      teamsWebhookUrl: 'YOUR_TEAMS_WEBHOOK_URL_HERE',\n      // Replace with actual webhook URL\n      // Track which bookings have been notified as active\n      notifiedActiveBookings: new Set()\n    };\n  },\n  computed: {\n    currentDateTime() {\n      return this.currentTime.toLocaleString('th-TH', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit'\n      });\n    },\n    hasActiveBorrow() {\n      return this.records.some(r => r.status === 'active');\n    },\n    availableBorrows() {\n      const currentUserName = this.getCurrentUserName();\n      return this.records.filter(r => {\n        // Must be active status (past borrow time, not returned)\n        if (r.status !== 'active') return false;\n\n        // Check if current user is authorized to return this booking\n        const isBorrower = r.name === currentUserName;\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) && r.colleagues.some(colleague => {\n          const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name;\n          return colleagueName === currentUserName;\n        });\n        return isBorrower || isColleague;\n      });\n    },\n    pendingBorrows() {\n      const currentUserName = this.getCurrentUserName();\n      return this.records.filter(r => {\n        // Must be pending status (future booking, not started yet)\n        if (r.status !== 'pending') return false;\n\n        // Check if current user is authorized to cancel this booking\n        const isBorrower = r.name === currentUserName;\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) && r.colleagues.some(colleague => {\n          const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name;\n          return colleagueName === currentUserName;\n        });\n        return isBorrower || isColleague;\n      });\n    },\n    currentReturnTime() {\n      return this.currentTime.toLocaleTimeString('th-TH', {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n    selectedBorrowProject() {\n      if (!this.returnForm.borrowId) return '';\n      const selectedBorrow = this.records.find(r => r.id == this.returnForm.borrowId);\n      return selectedBorrow ? selectedBorrow.project : '';\n    },\n    selectedBorrowDescription() {\n      if (!this.returnForm.borrowId) return '';\n      const selectedBorrow = this.records.find(r => r.id == this.returnForm.borrowId);\n      return selectedBorrow ? selectedBorrow.discription : '';\n    },\n    borrowRecordsCount() {\n      return this.records.filter(r => r.status !== 'returned').length;\n    },\n    bookingsAllowingImageUpload() {\n      const currentUserName = this.getCurrentUserName();\n      return this.records.filter(r => {\n        // Must be active status and user is authorized\n        if (r.status !== 'active') return false;\n        const isBorrower = r.name === currentUserName;\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) && r.colleagues.some(colleague => {\n          const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name;\n          return colleagueName === currentUserName;\n        });\n        return isBorrower || isColleague;\n      });\n    },\n    groupedImages() {\n      const groups = {};\n      this.selectedImages.forEach(image => {\n        if (!groups[image.type]) {\n          groups[image.type] = [];\n        }\n        groups[image.type].push(image);\n      });\n      return Object.keys(groups).map(type => ({\n        type,\n        images: groups[type]\n      }));\n    }\n  },\n  mounted() {\n    setInterval(() => {\n      this.currentTime = new Date();\n    }, 1000);\n\n    // Auto refresh data every 30 seconds\n    setInterval(() => {\n      this.loadRecords();\n    }, 30000);\n  },\n  created() {\n    this.$http = axios.create({\n      baseURL: ''\n    });\n    this.loadRecords();\n  },\n  methods: {\n    getCurrentUserName() {\n      const firstName = localStorage.getItem('soc_firstname') || '';\n      const lastName = localStorage.getItem('soc_lastname') || '';\n      return `${firstName} ${lastName}`.trim();\n    },\n    async loadRecords() {\n      try {\n        const response = await axios.get('/api/car-booking');\n        this.records = response.data;\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถโหลดข้อมูลการจองรถได้',\n          life: 3000\n        });\n      }\n    },\n    triggerFileUpload() {\n      document.getElementById('modal-upload').click();\n    },\n    selectDate(date) {\n      this.selectedDate = date;\n      this.showForm = true;\n      this.activeForm = 'borrow';\n    },\n    showReturnForm() {\n      this.selectedDate = new Date();\n      this.showForm = true;\n      this.activeForm = 'return';\n    },\n    showCancelForm() {\n      this.selectedDate = new Date();\n      this.showForm = true;\n      this.activeForm = 'cancel';\n    },\n    closeForm() {\n      this.showForm = false;\n      this.selectedDate = null;\n      this.resetForms();\n    },\n    handleImageUpload(event, formType) {\n      const files = Array.from(event.target.files);\n      const images = [];\n      files.forEach(file => {\n        const reader = new FileReader();\n        reader.onload = e => {\n          images.push(e.target.result);\n          if (images.length === files.length) {\n            if (formType === 'borrow') {\n              this.borrowForm.images = images;\n            } else {\n              this.returnForm.images = images;\n            }\n          }\n        };\n        reader.readAsDataURL(file);\n      });\n    },\n    openImageModal(imageSrc) {\n      this.selectedImages = [{\n        src: imageSrc,\n        type: 'รูปภาพ'\n      }];\n      this.showImageModal = true;\n    },\n    calculateUsageDuration(borrowDate, borrowTime, returnDate) {\n      const borrowDateTime = new Date(borrowDate);\n      const [hour, minute] = borrowTime.split(':').map(Number);\n      borrowDateTime.setHours(hour, minute, 0, 0);\n      const diffMs = returnDate - borrowDateTime;\n      const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n      const diffMinutes = Math.floor(diffMs % (1000 * 60 * 60) / (1000 * 60));\n      if (diffHours > 0) {\n        return `${diffHours} ชั่วโมง ${diffMinutes} นาที`;\n      } else {\n        return `${diffMinutes} นาที`;\n      }\n    },\n    viewImages(images, bookingData = null) {\n      this.selectedImages = images;\n      this.currentBookingData = bookingData;\n      this.showImageModal = true;\n    },\n    handleImageError() {\n      this.$toast.add({\n        severity: 'error',\n        summary: 'เกิดข้อผิดพลาด',\n        detail: 'ไม่สามารถโหลดรูปภาพได้',\n        life: 3000\n      });\n    },\n    handleImageLoad() {},\n    viewFullImage(imageSrc) {\n      // Handle nested proxy objects\n      let imageUrl = imageSrc;\n      if (typeof imageSrc === 'object' && imageSrc.src) {\n        imageUrl = typeof imageSrc.src === 'string' ? imageSrc.src : imageSrc.src.src;\n      }\n      this.fullSizeImage = imageUrl;\n      this.showFullImageModal = true;\n    },\n    formatDateForDB(date) {\n      const d = new Date(date);\n      const year = d.getFullYear();\n      const month = String(d.getMonth() + 1).padStart(2, '0');\n      const day = String(d.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    async handleAdditionalImageUpload(event, bookingId) {\n      const files = Array.from(event.target.files);\n      if (files.length === 0) return;\n      try {\n        // Find the booking record\n        const booking = this.records.find(r => r.id === bookingId);\n        if (!booking) return;\n\n        // Convert files to base64\n        const newImages = [];\n        for (const file of files) {\n          const reader = new FileReader();\n          const base64 = await new Promise(resolve => {\n            reader.onload = () => resolve(reader.result);\n            reader.readAsDataURL(file);\n          });\n          newImages.push({\n            name: file.name,\n            src: base64,\n            type: 'เพิ่มเติม',\n            timestamp: new Date().toLocaleString('th-TH')\n          });\n        }\n\n        // Update booking with new images\n        const currentImages = booking.images || [];\n        const updatedImages = [...currentImages, ...newImages];\n\n        // Update in database via API (need to add PUT endpoint)\n        await this.$http.put(`/api/car-booking/${bookingId}`, {\n          images: updatedImages\n        });\n        await this.loadRecords();\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: `อัปโหลดรูปภาพ ${files.length} ไฟล์เรียบร้อย`,\n          life: 3000\n        });\n\n        // Clear file input\n        event.target.value = '';\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถอัปโหลดรูปภาพได้',\n          life: 3000\n        });\n      }\n    },\n    async submitBorrow() {\n      try {\n        const borrowData = {\n          type: 'borrow',\n          location: this.borrowForm.location,\n          project: this.borrowForm.project,\n          description: this.borrowForm.discription,\n          selected_date: this.formatDateForDB(this.selectedDate),\n          time: this.borrowForm.time,\n          license: 'FXAG-2032',\n          colleagues: this.borrowForm.colleagues || [],\n          images: this.borrowForm.images || [],\n          user_id: localStorage.getItem('soc_user_id')\n        };\n        await this.$http.post('/api/car-booking', borrowData);\n        await this.loadRecords();\n        this.closeForm();\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: 'บันทึกการจองรถเรียบร้อยแล้ว',\n          life: 3000\n        });\n      } catch (error) {\n        // Handle conflict error (409)\n        if (error.response?.status === 409) {\n          this.$toast.add({\n            severity: 'warn',\n            summary: 'ไม่สามารถจองได้',\n            detail: error.response.data.details || error.response.data.error,\n            life: 5000\n          });\n        } else {\n          this.$toast.add({\n            severity: 'error',\n            summary: 'เกิดข้อผิดพลาด',\n            detail: 'ไม่สามารถบันทึกการจองได้',\n            life: 3000\n          });\n        }\n      }\n    },\n    async submitReturn() {\n      // Get borrowId from form or component reference\n      const borrowId = this.returnForm.borrowId || this.$refs.bookingForm?.selectedReturnBorrow;\n      if (!borrowId) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'ข้อผิดพลาด',\n          detail: 'กรุณาเลือกการแจ้งใช้รถที่ต้องการคืน',\n          life: 3000\n        });\n        return;\n      }\n      try {\n        const firstName = localStorage.getItem('soc_firstname') || '';\n        const lastName = localStorage.getItem('soc_lastname') || '';\n        const currentUserName = `${firstName} ${lastName}`.trim();\n        const currentTime = this.currentTime.toLocaleTimeString('th-TH', {\n          hour: '2-digit',\n          minute: '2-digit',\n          hour12: false\n        });\n        const returnData = {\n          return_name: currentUserName,\n          return_location: this.returnForm.location,\n          return_description: this.returnForm.discription,\n          return_time: currentTime,\n          return_date: this.formatDateForDB(new Date())\n        };\n        await axios.put(`/api/car-booking/${borrowId}`, returnData);\n\n        // If we get here, the API call was successful\n        await this.loadRecords();\n        this.closeForm();\n\n        // If we get here, the API call was successful\n        await this.loadRecords();\n        this.closeForm();\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: 'บันทึกการคืนรถเรียบร้อยแล้ว',\n          life: 3000\n        });\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถบันทึกการคืนรถได้',\n          life: 3000\n        });\n      }\n    },\n    async submitCancel() {\n      if (!this.cancelForm.borrowId) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'ข้อผิดพลาด',\n          detail: 'กรุณาเลือกการจองที่ต้องการยกเลิก',\n          life: 3000\n        });\n        return;\n      }\n      try {\n        await this.$http.delete(`/api/car-booking/${this.cancelForm.borrowId}`);\n        await this.loadRecords();\n        this.closeForm();\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: 'ยกเลิกการจองเรียบร้อยแล้ว',\n          life: 3000\n        });\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถยกเลิกการจองได้',\n          life: 3000\n        });\n      }\n    },\n    updateBorrowForm({\n      field,\n      value\n    }) {\n      this.borrowForm[field] = value;\n    },\n    updateReturnForm(field, value) {\n      this.returnForm[field] = value;\n    },\n    updateCancelForm({\n      field,\n      value\n    }) {\n      this.cancelForm[field] = value;\n    },\n    async handleAdditionalImageUploadFromHistory({\n      files,\n      bookingId\n    }) {\n      if (files.length === 0) return;\n      try {\n        // Find the booking record\n        const booking = this.records.find(r => r.id === bookingId);\n        if (!booking) return;\n\n        // Convert files to base64\n        const newImages = [];\n        for (const file of files) {\n          const reader = new FileReader();\n          const base64 = await new Promise(resolve => {\n            reader.onload = () => resolve(reader.result);\n            reader.readAsDataURL(file);\n          });\n          newImages.push({\n            name: file.name,\n            src: base64,\n            type: 'เพิ่มเติม',\n            timestamp: new Date().toLocaleString('th-TH')\n          });\n        }\n\n        // Update booking with new images\n        const currentImages = booking.images || [];\n        const updatedImages = [...currentImages, ...newImages];\n\n        // Update in database via API\n        await this.$http.put(`/api/car-booking/${bookingId}`, {\n          images: updatedImages\n        });\n        await this.loadRecords();\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: `อัปโหลดรูปภาพ ${files.length} ไฟล์เรียบร้อย`,\n          life: 3000\n        });\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถอัปโหลดรูปภาพได้',\n          life: 3000\n        });\n      }\n    },\n    resetForms() {\n      this.borrowForm = {\n        license: 'FXAG-2032',\n        time: '',\n        location: '',\n        project: '',\n        discription: '',\n        colleagues: [],\n        images: []\n      };\n      this.returnForm = {\n        borrowId: '',\n        license: 'FXAG-2032',\n        location: '',\n        discription: '',\n        images: []\n      };\n      this.cancelForm = {\n        borrowId: '',\n        reason: ''\n      };\n    },\n    canUploadForBooking(bookingData) {\n      if (!bookingData) return false;\n\n      // Find the actual record from this.records\n      const record = this.records.find(r => r.id === bookingData.id);\n      if (!record) return false;\n\n      // Can upload if status is active\n      return record.status === 'active';\n    },\n    async handleModalImageUpload(event) {\n      if (!this.currentBookingData) return;\n      const files = Array.from(event.target.files);\n      if (files.length === 0) return;\n      await this.handleAdditionalImageUploadFromHistory({\n        files,\n        bookingId: this.currentBookingData.id\n      });\n\n      // Clear file input and close modal\n      event.target.value = '';\n      this.showImageModal = false;\n    }\n  }\n};","map":{"version":3,"names":["Calendar","History","BookingFormPrime","axios","components","BookingForm","data","activeTabIndex","selectedDate","showForm","activeForm","borrowForm","license","time","location","project","discription","colleagues","images","returnForm","borrowId","cancelForm","reason","records","currentTime","Date","currentBookingData","showImageModal","selectedImages","showFullImageModal","fullSizeImage","teamsWebhookUrl","notifiedActiveBookings","Set","computed","currentDateTime","toLocaleString","year","month","day","hour","minute","second","hasActiveBorrow","some","r","status","availableBorrows","currentUserName","getCurrentUserName","filter","isBorrower","name","isColleague","Array","isArray","colleague","colleagueName","pendingBorrows","currentReturnTime","toLocaleTimeString","selectedBorrowProject","selectedBorrow","find","id","selectedBorrowDescription","borrowRecordsCount","length","bookingsAllowingImageUpload","groupedImages","groups","forEach","image","type","push","Object","keys","map","mounted","setInterval","loadRecords","created","$http","create","baseURL","methods","firstName","localStorage","getItem","lastName","trim","response","get","error","$toast","add","severity","summary","detail","life","triggerFileUpload","document","getElementById","click","selectDate","date","showReturnForm","showCancelForm","closeForm","resetForms","handleImageUpload","event","formType","files","from","target","file","reader","FileReader","onload","e","result","readAsDataURL","openImageModal","imageSrc","src","calculateUsageDuration","borrowDate","borrowTime","returnDate","borrowDateTime","split","Number","setHours","diffMs","diffHours","Math","floor","diffMinutes","viewImages","bookingData","handleImageError","handleImageLoad","viewFullImage","imageUrl","formatDateForDB","d","getFullYear","String","getMonth","padStart","getDate","handleAdditionalImageUpload","bookingId","booking","newImages","base64","Promise","resolve","timestamp","currentImages","updatedImages","put","value","submitBorrow","borrowData","description","selected_date","user_id","post","details","submitReturn","$refs","bookingForm","selectedReturnBorrow","hour12","returnData","return_name","return_location","return_description","return_time","return_date","submitCancel","delete","updateBorrowForm","field","updateReturnForm","updateCancelForm","handleAdditionalImageUploadFromHistory","canUploadForBooking","record","handleModalImageUpload"],"sources":["D:\\FULLACC\\frontend_cem-main\\src\\views\\car_booking\\car_booking.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"main-tabs\">\n      <div class=\"tabs-header\">\n        <div class=\"header-title\">\n          <i class=\"pi pi-car\"></i>\n          <h1>ระบบแจ้งใช้รถ/แจ้งคืนรถ</h1>\n        </div>\n        \n        <TabView v-model:activeIndex=\"activeTabIndex\" class=\"tab-navigation\">\n          <TabPanel>\n            <template #header>\n              <div class=\"tab-header\">\n                <i class=\"pi pi-calendar\"></i>\n                <span>ปฏิทิน</span>\n              </div>\n            </template>\n          </TabPanel>\n\n          <TabPanel>\n            <template #header>\n              <div class=\"tab-header\">\n                <i class=\"pi pi-history\"></i>\n                <span>ประวัติการใช้รถ</span>\n                <Badge v-if=\"borrowRecordsCount > 0\" :value=\"borrowRecordsCount\" severity=\"info\" />\n              </div>\n            </template>\n          </TabPanel>\n        </TabView>\n\n        <div v-if=\"activeTabIndex === 0\" class=\"action-buttons-header\">\n          <Button @click=\"showReturnForm\" :disabled=\"availableBorrows.length === 0\" severity=\"warning\"\n            icon=\"pi pi-upload\" raised>\n            <Badge v-if=\"availableBorrows.length > 0\" :value=\"availableBorrows.length\" severity=\"warning\" />\n            แจ้งคืนรถ\n          </Button>\n\n          <Button @click=\"showCancelForm\" :disabled=\"pendingBorrows.length === 0\" severity=\"danger\"\n            icon=\"pi pi-times-circle\" raised>\n            ยกเลิกการจอง\n            <Badge v-if=\"pendingBorrows.length > 0\" :value=\"pendingBorrows.length\" \n                   :style=\"{ backgroundColor: 'white', color: 'black', fontSize: '0.75rem', \n                            width: '1.2rem', height: '1.2rem', borderRadius: '50%',\n                            display: 'inline-flex', alignItems: 'center', justifyContent: 'center',\n                            lineHeight: '1', fontWeight: 'bold', border: '2px solid white' }\" />\n          </Button>\n        </div>\n      </div>\n\n      <div class=\"tab-content-area\">\n        <div v-if=\"activeTabIndex === 0\" class=\"tab-content\">\n          <Calendar :records=\"records\" :available-borrows=\"availableBorrows\" :pending-borrows=\"pendingBorrows\"\n            :has-active-borrow=\"hasActiveBorrow\" @select-date=\"selectDate\" @show-return-form=\"showReturnForm\"\n            @show-cancel-form=\"showCancelForm\" />\n        </div>\n\n        <div v-if=\"activeTabIndex === 1\" class=\"tab-content\">\n          <History :records=\"records\" @view-images=\"viewImages\"\n            @upload-images=\"handleAdditionalImageUploadFromHistory\" />\n        </div>\n      </div>\n    </div>\n\n    <!-- Form Modal -->\n    <BookingForm ref=\"bookingForm\" v-if=\"showForm\" :show-form=\"showForm\" :selected-date=\"selectedDate\"\n      :active-form=\"activeForm\" :borrow-form=\"borrowForm\" :return-form=\"returnForm\" :cancel-form=\"cancelForm\"\n      :available-borrows=\"availableBorrows\" :pending-borrows=\"pendingBorrows\" :current-return-time=\"currentReturnTime\"\n      :selected-borrow-project=\"selectedBorrowProject\" :selected-borrow-description=\"selectedBorrowDescription\" @close-form=\"closeForm\" @submit-borrow=\"submitBorrow\"\n      @submit-return=\"submitReturn\" @submit-cancel=\"submitCancel\" @handle-image-upload=\"handleImageUpload\"\n      @update-borrow-form=\"updateBorrowForm\" @updateReturnForm=\"updateReturnForm\"\n      @update-cancel-form=\"updateCancelForm\" />\n\n    <!-- Image Modal -->\n    <Dialog v-model:visible=\"showImageModal\" modal header=\"รูปภาพ\" :style=\"{ width: '80vw' }\" :draggable=\"false\">\n      <div v-if=\"selectedImages.length === 0\" class=\"no-images-state\">\n        <i class=\"pi pi-image\" style=\"font-size: 4rem; color: #ccc;\"></i>\n        <p>ไม่มีรูปภาพ</p>\n      </div>\n\n      <div v-else class=\"image-viewer\">\n        <div v-for=\"imageType in groupedImages\" :key=\"imageType.type\"\n          :class=\"['image-section', imageType.type === 'ใช้' ? 'borrow-section' : 'return-section']\">\n          <div class=\"section-header\">\n            <i :class=\"imageType.type === 'ใช้' ? 'pi pi-download' : 'pi pi-upload'\"></i>\n            รูปภาพตอน{{ imageType.type }}\n          </div>\n          <div class=\"images-grid\">\n            <div v-for=\"(image, index) in imageType.images\" :key=\"index\" class=\"image-container\">\n              <img :src=\"image.src?.src || image.src\" class=\"grid-image\" @click=\"viewFullImage(image)\" alt=\"รูปภาพ\" />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Upload section -->\n      <div v-if=\"currentBookingData && canUploadForBooking(currentBookingData)\" class=\"upload-section\">\n        <Divider />\n        <div class=\"upload-controls\">\n          <input type=\"file\" id=\"modal-upload\" @change=\"handleModalImageUpload\" accept=\"image/*\" multiple\n            style=\"display: none\" />\n          <Button label=\"อัปโหลดรูปเพิ่ม\" icon=\"pi pi-camera\" @click=\"triggerFileUpload\" severity=\"secondary\" />\n        </div>\n      </div>\n\n    </Dialog>\n    <!-- Full Size Image Modal -->\n    <Dialog v-model:visible=\"showFullImageModal\" modal header=\"รูปภาพขนาดใหญ่\" :style=\"{ width: '90vw' }\"\n      :draggable=\"false\">\n      <div v-if=\"!fullSizeImage\" class=\"no-image-placeholder\">\n        <p>ไม่สามารถโหลดรูปภาพได้</p>\n      </div>\n      <img v-else :src=\"typeof fullSizeImage === 'string' ? fullSizeImage : fullSizeImage.src\" class=\"full-size-image\"\n        @error=\"handleImageError\" @load=\"handleImageLoad\" />\n    </Dialog>\n\n    <!-- Toast for notifications -->\n    <Toast />\n  </div>\n</template>\n\n<script>\nimport Calendar from './Calendar.vue'\nimport History from './History.vue'\nimport BookingFormPrime from './BookingFormPrime.vue'\nimport axios from 'axios'\n\nexport default {\n  components: {\n    Calendar,\n    History,\n    BookingForm: BookingFormPrime\n  },\n  data() {\n    return {\n      activeTabIndex: 0,\n      selectedDate: null,\n      showForm: false,\n      activeForm: 'borrow',\n      borrowForm: {\n        license: 'FXAG-2032',\n        time: '',\n        location: '',\n        project: '',\n        discription: '',\n        colleagues: [],\n        images: []\n      },\n      returnForm: {\n        borrowId: '',\n        license: 'FXAG-2032',\n        location: '',\n        discription: '',\n        images: []\n      },\n      cancelForm: {\n        borrowId: '',\n        reason: ''\n      },\n      records: [],\n      currentTime: new Date(),\n      currentBookingData: null,\n      showImageModal: false,\n      selectedImages: [],\n      showFullImageModal: false,\n      fullSizeImage: '',\n      teamsWebhookUrl: 'YOUR_TEAMS_WEBHOOK_URL_HERE', // Replace with actual webhook URL\n      // Track which bookings have been notified as active\n      notifiedActiveBookings: new Set()\n    }\n  },\n  computed: {\n    currentDateTime() {\n      return this.currentTime.toLocaleString('th-TH', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit'\n      })\n    },\n    hasActiveBorrow() {\n      return this.records.some(r => r.status === 'active')\n    },\n    availableBorrows() {\n      const currentUserName = this.getCurrentUserName()\n      \n      return this.records.filter(r => {\n        // Must be active status (past borrow time, not returned)\n        if (r.status !== 'active') return false\n\n        // Check if current user is authorized to return this booking\n        const isBorrower = r.name === currentUserName\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) &&\n          r.colleagues.some(colleague => {\n            const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name\n            return colleagueName === currentUserName\n          })\n\n        return isBorrower || isColleague\n      })\n    },\n    pendingBorrows() {\n      const currentUserName = this.getCurrentUserName()\n\n      return this.records.filter(r => {\n        // Must be pending status (future booking, not started yet)\n        if (r.status !== 'pending') return false\n\n        // Check if current user is authorized to cancel this booking\n        const isBorrower = r.name === currentUserName\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) &&\n          r.colleagues.some(colleague => {\n            const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name\n            return colleagueName === currentUserName\n          })\n\n        return isBorrower || isColleague\n      })\n    },\n    currentReturnTime() {\n      return this.currentTime.toLocaleTimeString('th-TH', {\n        hour: '2-digit',\n        minute: '2-digit'\n      })\n    },\n    selectedBorrowProject() {\n      if (!this.returnForm.borrowId) return ''\n      const selectedBorrow = this.records.find(r => r.id == this.returnForm.borrowId)\n      return selectedBorrow ? selectedBorrow.project : ''\n    },\n    selectedBorrowDescription() {\n      if (!this.returnForm.borrowId) return ''\n      const selectedBorrow = this.records.find(r => r.id == this.returnForm.borrowId)\n      return selectedBorrow ? selectedBorrow.discription : ''\n    },\n    borrowRecordsCount() {\n      return this.records.filter(r => r.status !== 'returned').length\n    },\n    bookingsAllowingImageUpload() {\n      const currentUserName = this.getCurrentUserName()\n      \n      return this.records.filter(r => {\n        // Must be active status and user is authorized\n        if (r.status !== 'active') return false\n\n        const isBorrower = r.name === currentUserName\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) &&\n          r.colleagues.some(colleague => {\n            const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name\n            return colleagueName === currentUserName\n          })\n\n        return isBorrower || isColleague\n      })\n    },\n    groupedImages() {\n      const groups = {}\n      this.selectedImages.forEach(image => {\n        if (!groups[image.type]) {\n          groups[image.type] = []\n        }\n        groups[image.type].push(image)\n      })\n      return Object.keys(groups).map(type => ({\n        type,\n        images: groups[type]\n      }))\n    }\n  },\n  mounted() {\n    setInterval(() => {\n      this.currentTime = new Date()\n    }, 1000)\n    \n    // Auto refresh data every 30 seconds\n    setInterval(() => {\n      this.loadRecords()\n    }, 30000)\n  },\n  created() {\n    this.$http = axios.create({\n      baseURL: ''\n    })\n    this.loadRecords()\n  },\n  methods: {\n    getCurrentUserName() {\n      const firstName = localStorage.getItem('soc_firstname') || ''\n      const lastName = localStorage.getItem('soc_lastname') || ''\n      return `${firstName} ${lastName}`.trim()\n    },\n    async loadRecords() {\n      try {\n        const response = await axios.get('/api/car-booking')\n        this.records = response.data\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถโหลดข้อมูลการจองรถได้',\n          life: 3000\n        })\n      }\n    },\n    triggerFileUpload() {\n      document.getElementById('modal-upload').click()\n    },\n    selectDate(date) {\n      this.selectedDate = date\n      this.showForm = true\n      this.activeForm = 'borrow'\n    },\n    showReturnForm() {\n      this.selectedDate = new Date()\n      this.showForm = true\n      this.activeForm = 'return'\n    },\n    showCancelForm() {\n      this.selectedDate = new Date()\n      this.showForm = true\n      this.activeForm = 'cancel'\n    },\n    closeForm() {\n      this.showForm = false\n      this.selectedDate = null\n      this.resetForms()\n    },\n    handleImageUpload(event, formType) {\n      const files = Array.from(event.target.files)\n      const images = []\n      files.forEach(file => {\n        const reader = new FileReader()\n        reader.onload = (e) => {\n          images.push(e.target.result)\n          if (images.length === files.length) {\n            if (formType === 'borrow') {\n              this.borrowForm.images = images\n            } else {\n              this.returnForm.images = images\n            }\n          }\n        }\n        reader.readAsDataURL(file)\n      })\n    },\n    openImageModal(imageSrc) {\n      this.selectedImages = [{ src: imageSrc, type: 'รูปภาพ' }]\n      this.showImageModal = true\n    },\n    calculateUsageDuration(borrowDate, borrowTime, returnDate) {\n      const borrowDateTime = new Date(borrowDate)\n      const [hour, minute] = borrowTime.split(':').map(Number)\n      borrowDateTime.setHours(hour, minute, 0, 0)\n\n      const diffMs = returnDate - borrowDateTime\n      const diffHours = Math.floor(diffMs / (1000 * 60 * 60))\n      const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60))\n\n      if (diffHours > 0) {\n        return `${diffHours} ชั่วโมง ${diffMinutes} นาที`\n      } else {\n        return `${diffMinutes} นาที`\n      }\n    },\n    viewImages(images, bookingData = null) {\n      this.selectedImages = images\n      this.currentBookingData = bookingData\n      this.showImageModal = true\n    },\n    handleImageError() {\n      this.$toast.add({\n        severity: 'error',\n        summary: 'เกิดข้อผิดพลาด',\n        detail: 'ไม่สามารถโหลดรูปภาพได้',\n        life: 3000\n      })\n    },\n    handleImageLoad() {\n    },\n    viewFullImage(imageSrc) {\n      // Handle nested proxy objects\n      let imageUrl = imageSrc\n      if (typeof imageSrc === 'object' && imageSrc.src) {\n        imageUrl = typeof imageSrc.src === 'string' ? imageSrc.src : imageSrc.src.src\n      }\n      this.fullSizeImage = imageUrl\n      this.showFullImageModal = true\n    },\n    formatDateForDB(date) {\n      const d = new Date(date)\n      const year = d.getFullYear()\n      const month = String(d.getMonth() + 1).padStart(2, '0')\n      const day = String(d.getDate()).padStart(2, '0')\n      return `${year}-${month}-${day}`\n    },\n    async handleAdditionalImageUpload(event, bookingId) {\n      const files = Array.from(event.target.files)\n      if (files.length === 0) return\n\n      try {\n        // Find the booking record\n        const booking = this.records.find(r => r.id === bookingId)\n        if (!booking) return\n\n        // Convert files to base64\n        const newImages = []\n        for (const file of files) {\n          const reader = new FileReader()\n          const base64 = await new Promise((resolve) => {\n            reader.onload = () => resolve(reader.result)\n            reader.readAsDataURL(file)\n          })\n          newImages.push({\n            name: file.name,\n            src: base64,\n            type: 'เพิ่มเติม',\n            timestamp: new Date().toLocaleString('th-TH')\n          })\n        }\n\n        // Update booking with new images\n        const currentImages = booking.images || []\n        const updatedImages = [...currentImages, ...newImages]\n\n        // Update in database via API (need to add PUT endpoint)\n        await this.$http.put(`/api/car-booking/${bookingId}`, {\n          images: updatedImages\n        })\n\n        await this.loadRecords()\n\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: `อัปโหลดรูปภาพ ${files.length} ไฟล์เรียบร้อย`,\n          life: 3000\n        })\n\n        // Clear file input\n        event.target.value = ''\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถอัปโหลดรูปภาพได้',\n          life: 3000\n        })\n      }\n    },\n    async submitBorrow() {\n      try {\n        const borrowData = {\n          type: 'borrow',\n          location: this.borrowForm.location,\n          project: this.borrowForm.project,\n          description: this.borrowForm.discription,\n          selected_date: this.formatDateForDB(this.selectedDate),\n          time: this.borrowForm.time,\n          license: 'FXAG-2032',\n          colleagues: this.borrowForm.colleagues || [],\n          images: this.borrowForm.images || [],\n          user_id: localStorage.getItem('soc_user_id')\n        }\n\n        await this.$http.post('/api/car-booking', borrowData)\n\n\n        await this.loadRecords()\n        this.closeForm()\n\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: 'บันทึกการจองรถเรียบร้อยแล้ว',\n          life: 3000\n        })\n      } catch (error) {\n        \n        // Handle conflict error (409)\n        if (error.response?.status === 409) {\n          this.$toast.add({\n            severity: 'warn',\n            summary: 'ไม่สามารถจองได้',\n            detail: error.response.data.details || error.response.data.error,\n            life: 5000\n          })\n        } else {\n          this.$toast.add({\n            severity: 'error',\n            summary: 'เกิดข้อผิดพลาด',\n            detail: 'ไม่สามารถบันทึกการจองได้',\n            life: 3000\n          })\n        }\n      }\n    },\n    async submitReturn() {\n      // Get borrowId from form or component reference\n      const borrowId = this.returnForm.borrowId || this.$refs.bookingForm?.selectedReturnBorrow\n\n\n      if (!borrowId) {\n        this.$toast.add({ severity: 'error', summary: 'ข้อผิดพลาด', detail: 'กรุณาเลือกการแจ้งใช้รถที่ต้องการคืน', life: 3000 })\n        return\n      }\n\n      try {\n        const firstName = localStorage.getItem('soc_firstname') || ''\n        const lastName = localStorage.getItem('soc_lastname') || ''\n        const currentUserName = `${firstName} ${lastName}`.trim()\n\n        const currentTime = this.currentTime.toLocaleTimeString('th-TH', {\n          hour: '2-digit',\n          minute: '2-digit',\n          hour12: false\n        })\n\n        const returnData = {\n          return_name: currentUserName,\n          return_location: this.returnForm.location,\n          return_description: this.returnForm.discription,\n          return_time: currentTime,\n          return_date: this.formatDateForDB(new Date())\n        }\n\n\n        await axios.put(`/api/car-booking/${borrowId}`, returnData)\n\n        // If we get here, the API call was successful\n        await this.loadRecords()\n        this.closeForm()\n\n        // If we get here, the API call was successful\n        await this.loadRecords()\n        this.closeForm()\n\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: 'บันทึกการคืนรถเรียบร้อยแล้ว',\n          life: 3000\n        })\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถบันทึกการคืนรถได้',\n          life: 3000\n        })\n      }\n    },\n    async submitCancel() {\n\n      if (!this.cancelForm.borrowId) {\n        this.$toast.add({ severity: 'error', summary: 'ข้อผิดพลาด', detail: 'กรุณาเลือกการจองที่ต้องการยกเลิก', life: 3000 })\n        return\n      }\n\n      try {\n        await this.$http.delete(`/api/car-booking/${this.cancelForm.borrowId}`)\n\n        await this.loadRecords()\n        this.closeForm()\n\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: 'ยกเลิกการจองเรียบร้อยแล้ว',\n          life: 3000\n        })\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถยกเลิกการจองได้',\n          life: 3000\n        })\n      }\n    },\n    updateBorrowForm({ field, value }) {\n      this.borrowForm[field] = value\n    },\n    updateReturnForm(field, value) {\n      this.returnForm[field] = value\n    },\n    updateCancelForm({ field, value }) {\n      this.cancelForm[field] = value\n    },\n    async handleAdditionalImageUploadFromHistory({ files, bookingId }) {\n      if (files.length === 0) return\n\n      try {\n        // Find the booking record\n        const booking = this.records.find(r => r.id === bookingId)\n        if (!booking) return\n\n        // Convert files to base64\n        const newImages = []\n        for (const file of files) {\n          const reader = new FileReader()\n          const base64 = await new Promise((resolve) => {\n            reader.onload = () => resolve(reader.result)\n            reader.readAsDataURL(file)\n          })\n          newImages.push({\n            name: file.name,\n            src: base64,\n            type: 'เพิ่มเติม',\n            timestamp: new Date().toLocaleString('th-TH')\n          })\n        }\n\n        // Update booking with new images\n        const currentImages = booking.images || []\n        const updatedImages = [...currentImages, ...newImages]\n\n        // Update in database via API\n        await this.$http.put(`/api/car-booking/${bookingId}`, {\n          images: updatedImages\n        })\n\n        await this.loadRecords()\n\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: `อัปโหลดรูปภาพ ${files.length} ไฟล์เรียบร้อย`,\n          life: 3000\n        })\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถอัปโหลดรูปภาพได้',\n          life: 3000\n        })\n      }\n    },\n    resetForms() {\n      this.borrowForm = {\n        license: 'FXAG-2032',\n        time: '',\n        location: '',\n        project: '',\n        discription: '',\n        colleagues: [],\n        images: []\n      }\n      this.returnForm = {\n        borrowId: '',\n        license: 'FXAG-2032',\n        location: '',\n        discription: '',\n        images: []\n      }\n      this.cancelForm = {\n        borrowId: '',\n        reason: ''\n      }\n    },\n    canUploadForBooking(bookingData) {\n      if (!bookingData) return false\n      \n      // Find the actual record from this.records\n      const record = this.records.find(r => r.id === bookingData.id)\n      if (!record) return false\n      \n      // Can upload if status is active\n      return record.status === 'active'\n    },\n    async handleModalImageUpload(event) {\n      if (!this.currentBookingData) return\n\n      const files = Array.from(event.target.files)\n      if (files.length === 0) return\n\n      await this.handleAdditionalImageUploadFromHistory({\n        files,\n        bookingId: this.currentBookingData.id\n      })\n\n      // Clear file input and close modal\n      event.target.value = ''\n      this.showImageModal = false\n    }\n  }\n}\n</script>\n\n<style scoped>\n.calendar-card {\n  width: 100%;\n  margin: 0;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  border: 1px solid #e9ecef;\n}\n\n.app-container {\n  padding: 1.5rem;\n  max-width: 1400px;\n  margin: 0 auto;\n  background: #f8f9fa;\n  min-height: 100vh;\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n}\n\n.main-tabs {\n  margin-top: 1.5rem;\n  box-shadow: 0 4px 20px rgba(74, 144, 226, 0.15);\n  border-radius: 15px;\n  overflow: hidden;\n  border: 1px solid rgba(74, 144, 226, 0.2);\n  background: white;\n}\n\n.tabs-header {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0.75rem 1.5rem;\n  background: linear-gradient(135deg, #4A90E2, #D73527);\n  position: relative;\n  flex-wrap: wrap;\n  gap: 1rem;\n}\n\n.header-title {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  color: white;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: 2;\n}\n\n.header-title h1 {\n  margin: 0;\n  font-size: 1.8rem;\n  font-weight: 600;\n}\n\n.header-title i {\n  font-size: 1.5rem;\n}\n\n.tab-navigation {\n  background: transparent;\n  max-width: 100%;\n  overflow: hidden;\n  margin-right: auto;\n}\n\n.tab-navigation :deep(.p-tabview-nav) {\n  background: transparent;\n  border: none;\n  margin: 0;\n  padding: 0;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n\n.tab-navigation :deep(.p-tabview-nav-link) {\n  color: white;\n  border: none;\n  font-weight: 500;\n  padding: 0.75rem 1rem;\n  font-size: 0.9rem;\n  transition: all 0.3s ease;\n  border-radius: 8px;\n  margin: 0.25rem;\n  white-space: nowrap;\n}\n\n.tab-navigation :deep(.p-tabview-nav li.p-highlight .p-tabview-nav-link) {\n  background: rgba(255, 255, 255, 0.25);\n  color: white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  transform: translateY(-2px);\n  border-bottom: none !important;\n}\n\n.tab-navigation :deep(.p-tabview-nav-link:hover) {\n  background: rgba(255, 255, 255, 0.15);\n  transform: translateY(-1px);\n}\n\n.tab-navigation :deep(.p-tabview-ink-bar) {\n  display: none !important;\n}\n\n.tab-navigation :deep(.p-tabview-panels) {\n  display: none;\n}\n\n.action-buttons-header {\n  display: flex;\n  gap: 1rem;\n  flex-shrink: 0;\n  z-index: 1;\n  margin-left: auto;\n}\n\n.action-buttons-header .p-button {\n  font-weight: 700;\n  padding: 0.75rem 1.25rem;\n  font-size: 0.95rem;\n  border-radius: 8px;\n  min-width: 140px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  border: 3px solid white;\n}\n\n.action-buttons-header .p-button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  border: 3px solid white;\n}\n\n.tab-content-area {\n  background: white;\n}\n\n.tab-content {\n  padding: 0;\n}\n\n.main-tabs :deep(.p-tabview-nav) {\n  background: transparent;\n  border: none;\n  margin: 0;\n  padding: 0.5rem;\n  gap: 0.5rem;\n}\n\n.main-tabs :deep(.p-tabview-nav-link) {\n  color: black !important;\n  border: none;\n  font-weight: 800 !important;\n  padding: 1rem 1.5rem;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  border-radius: 8px;\n  margin: 0 0.25rem;\n  background: rgba(255, 255, 255, 0.4\n  )\n}\n\n.tab-header {\n  font-weight: 800 !important;\n  color: black !important;\n}\n\n.tab-header span {\n  font-weight: 800 !important;\n  color: black !important;\n}\n\n.tab-header i {\n  font-size: 1.2rem;\n  font-weight: 900;\n}\n\n.main-tabs :deep(.p-tabview-nav li.p-highlight .p-tabview-nav-link) {\n  background: white;\n  color: #4A90E2;\n  box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);\n  transform: translateY(-2px);\n  border-bottom: none !important;\n  font-weight: 700;\n  border-radius: 8px;\n}\n\n.main-tabs :deep(.p-tabview-nav-link:hover) {\n  background: rgba(255, 255, 255, 0.2);\n  transform: translateY(-1px);\n  border-radius: 8px;\n}\n\n.main-tabs :deep(.p-tabview-ink-bar) {\n  display: none !important;\n}\n\n.main-tabs :deep(.p-tabview-panels) {\n  background: white;\n  padding: 0;\n  border-radius: 0 0 15px 15px;\n}\n\n.main-tabs :deep(.p-tabview-panel) {\n  padding: 0;\n}\n\n.tab-header {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  font-weight: 500;\n}\n\n.tab-header i {\n  font-size: 1.1rem;\n}\n\n.tab-content {\n  padding: 0;\n}\n\n.image-viewer {\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n}\n\n.image-section {\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.borrow-section {\n  border: 2px solid #28a745;\n}\n\n.borrow-section .section-header {\n  background: #d4edda;\n  color: #155724;\n  border-bottom: 1px solid #c3e6cb;\n}\n\n.return-section {\n  border: 2px solid #ffc107;\n}\n\n.return-section .section-header {\n  background: #fff3cd;\n  color: #856404;\n  border-bottom: 1px solid #ffeaa7;\n}\n\n.section-header {\n  background: #f8f9fa;\n  padding: 1rem;\n  font-weight: 600;\n  color: #495057;\n  border-bottom: 1px solid #e9ecef;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.images-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1rem;\n  padding: 1rem;\n}\n\n.image-container {\n  position: relative;\n  width: 100%;\n  height: 200px;\n}\n\n.grid-image {\n  width: 100%;\n  height: 200px;\n  object-fit: cover;\n  border-radius: 6px;\n  border: 1px solid #e9ecef;\n  cursor: pointer;\n  transition: transform 0.2s ease;\n}\n\n.image-placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 200px;\n  background: #f8f9fa;\n  border: 1px dashed #dee2e6;\n  border-radius: 6px;\n  color: #6c757d;\n}\n\n.grid-image:hover {\n  transform: scale(1.05);\n}\n\n.full-size-image {\n  max-width: 100%;\n  max-height: 80vh;\n  object-fit: contain;\n  border-radius: 8px;\n  display: block;\n  margin: 0 auto;\n}\n\n.no-images-state {\n  text-align: center;\n  padding: 3rem;\n  color: #6c757d;\n}\n\n.no-images-state p {\n  margin-top: 1rem;\n  font-size: 1.1rem;\n}\n\n.upload-section {\n  margin-top: 1rem;\n}\n\n.upload-controls {\n  text-align: center;\n  padding: 1rem;\n}\n\n@media (max-width: 768px) {\n  .app-container {\n    padding: 1rem;\n  }\n\n  .main-header {\n    flex-direction: column;\n    text-align: center;\n    padding: 1.5rem;\n  }\n\n  .main-header h1 {\n    font-size: 1.5rem;\n  }\n\n  .car-status {\n    margin-bottom: 1rem !important;\n  }\n\n  .status-card {\n    min-width: 100%;\n    max-width: 100%;\n  }\n\n  .status-content {\n    padding: 1rem;\n    gap: 1rem;\n    flex-direction: column;\n    text-align: center;\n  }\n\n  .status-icon {\n    font-size: 2rem;\n  }\n\n  .status-text {\n    align-items: center;\n  }\n\n  .tabs-header {\n    flex-direction: column;\n    gap: 1rem;\n    padding: 1rem;\n    text-align: center;\n  }\n\n  .header-title {\n    order: 1;\n    position: static;\n    transform: none;\n    justify-content: center;\n    width: 100%;\n  }\n\n  .tab-navigation {\n    order: 2;\n    width: 100%;\n    margin-right: 0;\n  }\n\n  .tab-navigation :deep(.p-tabview-nav) {\n    flex-direction: column;\n    gap: 0.5rem;\n    padding: 0.5rem;\n  }\n\n  .tab-navigation :deep(.p-tabview-nav-link) {\n    padding: 0.75rem 1rem;\n    font-size: 0.85rem;\n    margin: 0;\n    width: 100%;\n    text-align: center;\n  }\n\n  .action-buttons-header {\n    order: 3;\n    width: 100%;\n    justify-content: center;\n    flex-wrap: wrap;\n  }\n\n  .action-buttons-header {\n    width: 100%;\n    justify-content: center;\n    flex-wrap: wrap;\n  }\n\n  .action-buttons-header .p-button {\n    flex: 1;\n    font-size: 0.9rem;\n    padding: 0.75rem 1rem;\n    min-width: auto;\n  }\n}\n\n@media (max-width: 480px) {\n  .app-container {\n    padding: 0.5rem;\n  }\n\n  .main-header h1 {\n    font-size: 1.25rem;\n  }\n\n  .header-title h1 {\n    font-size: 1.2rem;\n  }\n\n  .status-card {\n    min-width: 100%;\n  }\n\n  .status-content {\n    padding: 0.8rem;\n  }\n\n  .status-icon {\n    font-size: 1.8rem;\n  }\n\n  .status-text strong {\n    font-size: 1rem;\n  }\n\n  .action-buttons-header {\n    flex-direction: column;\n    gap: 0.8rem;\n  }\n\n  .action-buttons-header .p-button {\n    width: 100%;\n    font-size: 0.85rem;\n    padding: 0.75rem;\n  }\n\n  .tab-navigation :deep(.p-tabview-nav-link) {\n    padding: 0.6rem 0.8rem;\n    font-size: 0.8rem;\n  }\n\n  .tab-header {\n    gap: 0.5rem;\n  }\n\n  .tab-header span {\n    font-size: 0.8rem;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}