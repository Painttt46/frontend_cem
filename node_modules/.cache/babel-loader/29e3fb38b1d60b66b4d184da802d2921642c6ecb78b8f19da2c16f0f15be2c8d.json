{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, withKeys as _withKeys, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"permissions-container\"\n};\nconst _hoisted_2 = {\n  class: \"header-content\"\n};\nconst _hoisted_3 = {\n  class: \"role-selector\"\n};\nconst _hoisted_4 = {\n  class: \"table-header\"\n};\nconst _hoisted_5 = [\"onDblclick\"];\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = [\"onDblclick\"];\nconst _hoisted_8 = [\"onDblclick\"];\nconst _hoisted_9 = {\n  style: {\n    \"margin-left\": \"0.5rem\",\n    \"font-size\": \"0.85rem\",\n    \"color\": \"#6c757d\"\n  }\n};\nconst _hoisted_10 = {\n  key: 1,\n  class: \"action-bar\"\n};\nconst _hoisted_11 = {\n  class: \"add-permission-form\"\n};\nconst _hoisted_12 = {\n  class: \"field\"\n};\nconst _hoisted_13 = {\n  class: \"field\"\n};\nconst _hoisted_14 = {\n  class: \"field\"\n};\nconst _hoisted_15 = {\n  class: \"field\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Toast = _resolveComponent(\"Toast\");\n  const _component_Button = _resolveComponent(\"Button\");\n  const _component_Card = _resolveComponent(\"Card\");\n  const _component_Dropdown = _resolveComponent(\"Dropdown\");\n  const _component_InputText = _resolveComponent(\"InputText\");\n  const _component_Column = _resolveComponent(\"Column\");\n  const _component_InputSwitch = _resolveComponent(\"InputSwitch\");\n  const _component_DataTable = _resolveComponent(\"DataTable\");\n  const _component_Dialog = _resolveComponent(\"Dialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_Toast), _createCommentVNode(\" Header \"), _createVNode(_component_Card, {\n    class: \"header-card mb-4\"\n  }, {\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_Button, {\n      icon: \"pi pi-arrow-left\",\n      text: \"\",\n      rounded: \"\",\n      onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.push('/management/settings')),\n      class: \"back-btn\"\n    }), _cache[9] || (_cache[9] = _createElementVNode(\"div\", {\n      class: \"header-title\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-shield\"\n    }), _createElementVNode(\"h1\", null, \"จัดการสิทธิ์การเข้าถึง\")], -1 /* CACHED */))])]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" Role Selector \"), _createVNode(_component_Card, {\n    class: \"mb-4\"\n  }, {\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_3, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", null, \"เลือก Role:\", -1 /* CACHED */)), _createVNode(_component_Dropdown, {\n      modelValue: $setup.selectedRole,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.selectedRole = $event),\n      options: $setup.roles,\n      optionLabel: \"label\",\n      optionValue: \"value\",\n      placeholder: \"เลือก Role\",\n      class: \"w-full md:w-14rem\"\n    }, null, 8 /* PROPS */, [\"modelValue\", \"options\"])])]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" Permissions Table \"), $setup.selectedRole ? (_openBlock(), _createBlock(_component_Card, {\n    key: 0\n  }, {\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_Button, {\n      label: \"เพิ่ม Permission\",\n      icon: \"pi pi-plus\",\n      onClick: _cache[2] || (_cache[2] = $event => $setup.showAddDialog = true),\n      severity: \"success\",\n      size: \"small\"\n    })]), _createVNode(_component_DataTable, {\n      value: $setup.pages,\n      class: \"p-datatable-sm\",\n      stripedRows: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_Column, {\n        field: \"name\",\n        header: \"หน้า (Double-click เพื่อแก้ไข)\",\n        style: {\n          \"min-width\": \"200px\"\n        }\n      }, {\n        body: _withCtx(({\n          data\n        }) => [_createElementVNode(\"div\", {\n          class: \"page-info\",\n          onDblclick: $event => $setup.editCell(data, 'name')\n        }, [_createElementVNode(\"i\", {\n          class: _normalizeClass([data.icon, \"page-icon\"])\n        }, null, 2 /* CLASS */), !data.editingName ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString(data.name), 1 /* TEXT */)) : (_openBlock(), _createBlock(_component_InputText, {\n          key: 1,\n          modelValue: data.name,\n          \"onUpdate:modelValue\": $event => data.name = $event,\n          onBlur: $event => $setup.saveEdit(data, 'name'),\n          onKeyup: _withKeys($event => $setup.saveEdit(data, 'name'), [\"enter\"]),\n          autofocus: \"\"\n        }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\", \"onBlur\", \"onKeyup\"]))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_5)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_Column, {\n        field: \"path\",\n        header: \"Path (Double-click เพื่อแก้ไข)\",\n        style: {\n          \"min-width\": \"200px\"\n        }\n      }, {\n        body: _withCtx(({\n          data\n        }) => [!data.editingPath ? (_openBlock(), _createElementBlock(\"code\", {\n          key: 0,\n          onDblclick: $event => $setup.editCell(data, 'path')\n        }, _toDisplayString(data.path), 41 /* TEXT, PROPS, NEED_HYDRATION */, _hoisted_7)) : (_openBlock(), _createBlock(_component_InputText, {\n          key: 1,\n          modelValue: data.path,\n          \"onUpdate:modelValue\": $event => data.path = $event,\n          onBlur: $event => $setup.saveEdit(data, 'path'),\n          onKeyup: _withKeys($event => $setup.saveEdit(data, 'path'), [\"enter\"]),\n          autofocus: \"\"\n        }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\", \"onBlur\", \"onKeyup\"]))]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_Column, {\n        field: \"icon\",\n        header: \"Icon (Double-click เพื่อแก้ไข)\",\n        style: {\n          \"min-width\": \"150px\"\n        }\n      }, {\n        body: _withCtx(({\n          data\n        }) => [!data.editingIcon ? (_openBlock(), _createElementBlock(\"div\", {\n          key: 0,\n          onDblclick: $event => $setup.editCell(data, 'icon')\n        }, [_createElementVNode(\"i\", {\n          class: _normalizeClass(data.icon),\n          style: {\n            \"font-size\": \"1.2rem\",\n            \"color\": \"#4A90E2\"\n          }\n        }, null, 2 /* CLASS */), _createElementVNode(\"span\", _hoisted_9, _toDisplayString(data.icon), 1 /* TEXT */)], 40 /* PROPS, NEED_HYDRATION */, _hoisted_8)) : (_openBlock(), _createBlock(_component_InputText, {\n          key: 1,\n          modelValue: data.icon,\n          \"onUpdate:modelValue\": $event => data.icon = $event,\n          placeholder: \"pi pi-home\",\n          onBlur: $event => $setup.saveEdit(data, 'icon'),\n          onKeyup: _withKeys($event => $setup.saveEdit(data, 'icon'), [\"enter\"]),\n          autofocus: \"\"\n        }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\", \"onBlur\", \"onKeyup\"]))]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_Column, {\n        header: \"สิทธิ์การเข้าถึง\",\n        style: {\n          \"width\": \"150px\"\n        }\n      }, {\n        body: _withCtx(({\n          data\n        }) => [_createVNode(_component_InputSwitch, {\n          modelValue: data.hasAccess,\n          \"onUpdate:modelValue\": $event => data.hasAccess = $event\n        }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"value\"])]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Save Button \"), $setup.selectedRole ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createVNode(_component_Button, {\n    label: \"บันทึกการเปลี่ยนแปลง\",\n    icon: \"pi pi-save\",\n    onClick: $setup.confirmSave,\n    loading: $setup.saving\n  }, null, 8 /* PROPS */, [\"loading\"])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Add Permission Dialog \"), _createVNode(_component_Dialog, {\n    visible: $setup.showAddDialog,\n    \"onUpdate:visible\": _cache[8] || (_cache[8] = $event => $setup.showAddDialog = $event),\n    header: \"เพิ่ม Permission ใหม่\",\n    modal: true,\n    draggable: false,\n    style: {\n      \"width\": \"500px\"\n    }\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_Button, {\n      label: \"ยกเลิก\",\n      icon: \"pi pi-times\",\n      onClick: _cache[7] || (_cache[7] = $event => $setup.showAddDialog = false),\n      severity: \"secondary\"\n    }), _createVNode(_component_Button, {\n      label: \"เพิ่ม\",\n      icon: \"pi pi-check\",\n      onClick: $setup.addPermission\n    })]),\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", null, \"ชื่อหน้า\", -1 /* CACHED */)), _createVNode(_component_InputText, {\n      modelValue: $setup.newPermission.name,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.newPermission.name = $event),\n      placeholder: \"เช่น: จัดการสินค้า\",\n      class: \"w-full\"\n    }, null, 8 /* PROPS */, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_13, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", null, \"Path\", -1 /* CACHED */)), _createVNode(_component_InputText, {\n      modelValue: $setup.newPermission.path,\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.newPermission.path = $event),\n      placeholder: \"เช่น: /management/products\",\n      class: \"w-full\"\n    }, null, 8 /* PROPS */, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_14, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", null, \"Icon\", -1 /* CACHED */)), _createVNode(_component_InputText, {\n      modelValue: $setup.newPermission.icon,\n      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.newPermission.icon = $event),\n      placeholder: \"เช่น: pi pi-box\",\n      class: \"w-full\"\n    }, null, 8 /* PROPS */, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_15, [_cache[14] || (_cache[14] = _createElementVNode(\"label\", null, \"สิทธิ์การเข้าถึง\", -1 /* CACHED */)), _createVNode(_component_InputSwitch, {\n      modelValue: $setup.newPermission.hasAccess,\n      \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.newPermission.hasAccess = $event)\n    }, null, 8 /* PROPS */, [\"modelValue\"])])])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"visible\"])]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","_createVNode","_component_Toast","_createCommentVNode","_component_Card","content","_withCtx","_createElementVNode","_hoisted_2","_component_Button","icon","text","rounded","onClick","_cache","$event","_ctx","$router","push","_hoisted_3","_component_Dropdown","$setup","selectedRole","options","roles","optionLabel","optionValue","placeholder","_createBlock","key","_hoisted_4","label","showAddDialog","severity","size","_component_DataTable","value","pages","stripedRows","_component_Column","field","header","body","data","onDblclick","editCell","_normalizeClass","editingName","_hoisted_6","_toDisplayString","name","_component_InputText","onBlur","saveEdit","onKeyup","_withKeys","autofocus","editingPath","path","_hoisted_7","editingIcon","_hoisted_9","_component_InputSwitch","hasAccess","_hoisted_10","confirmSave","loading","saving","_component_Dialog","visible","modal","draggable","footer","addPermission","_hoisted_11","_hoisted_12","newPermission","_hoisted_13","_hoisted_14","_hoisted_15"],"sources":["D:\\frontend_cem\\src\\views\\management\\RolePermissions.vue"],"sourcesContent":["<template>\n  <div class=\"permissions-container\">\n    <Toast />\n    \n    <!-- Header -->\n    <Card class=\"header-card mb-4\">\n      <template #content>\n        <div class=\"header-content\">\n          <Button icon=\"pi pi-arrow-left\" text rounded @click=\"$router.push('/management/settings')\" class=\"back-btn\" />\n          <div class=\"header-title\">\n            <i class=\"pi pi-shield\"></i>\n            <h1>จัดการสิทธิ์การเข้าถึง</h1>\n          </div>\n        </div>\n      </template>\n    </Card>\n\n    <!-- Role Selector -->\n    <Card class=\"mb-4\">\n      <template #content>\n        <div class=\"role-selector\">\n          <label>เลือก Role:</label>\n          <Dropdown v-model=\"selectedRole\" :options=\"roles\" optionLabel=\"label\" optionValue=\"value\" \n                    placeholder=\"เลือก Role\" class=\"w-full md:w-14rem\" />\n        </div>\n      </template>\n    </Card>\n\n    <!-- Permissions Table -->\n    <Card v-if=\"selectedRole\">\n      <template #content>\n        <div class=\"table-header\">\n          <Button label=\"เพิ่ม Permission\" icon=\"pi pi-plus\" @click=\"showAddDialog = true\" severity=\"success\" size=\"small\" />\n        </div>\n        <DataTable :value=\"pages\" class=\"p-datatable-sm\" stripedRows>\n          <Column field=\"name\" header=\"หน้า (Double-click เพื่อแก้ไข)\" style=\"min-width: 200px\">\n            <template #body=\"{ data }\">\n              <div class=\"page-info\" @dblclick=\"editCell(data, 'name')\">\n                <i :class=\"data.icon\" class=\"page-icon\"></i>\n                <span v-if=\"!data.editingName\">{{ data.name }}</span>\n                <InputText v-else v-model=\"data.name\" @blur=\"saveEdit(data, 'name')\" @keyup.enter=\"saveEdit(data, 'name')\" autofocus />\n              </div>\n            </template>\n          </Column>\n          <Column field=\"path\" header=\"Path (Double-click เพื่อแก้ไข)\" style=\"min-width: 200px\">\n            <template #body=\"{ data }\">\n              <code v-if=\"!data.editingPath\" @dblclick=\"editCell(data, 'path')\">{{ data.path }}</code>\n              <InputText v-else v-model=\"data.path\" @blur=\"saveEdit(data, 'path')\" @keyup.enter=\"saveEdit(data, 'path')\" autofocus />\n            </template>\n          </Column>\n          <Column field=\"icon\" header=\"Icon (Double-click เพื่อแก้ไข)\" style=\"min-width: 150px\">\n            <template #body=\"{ data }\">\n              <div v-if=\"!data.editingIcon\" @dblclick=\"editCell(data, 'icon')\">\n                <i :class=\"data.icon\" style=\"font-size: 1.2rem; color: #4A90E2;\"></i>\n                <span style=\"margin-left: 0.5rem; font-size: 0.85rem; color: #6c757d;\">{{ data.icon }}</span>\n              </div>\n              <InputText v-else v-model=\"data.icon\" placeholder=\"pi pi-home\" @blur=\"saveEdit(data, 'icon')\" @keyup.enter=\"saveEdit(data, 'icon')\" autofocus />\n            </template>\n          </Column>\n          <Column header=\"สิทธิ์การเข้าถึง\" style=\"width: 150px\">\n            <template #body=\"{ data }\">\n              <InputSwitch v-model=\"data.hasAccess\" />\n            </template>\n          </Column>\n        </DataTable>\n      </template>\n    </Card>\n\n    <!-- Save Button -->\n    <div class=\"action-bar\" v-if=\"selectedRole\">\n      <Button label=\"บันทึกการเปลี่ยนแปลง\" icon=\"pi pi-save\" @click=\"confirmSave\" :loading=\"saving\" />\n    </div>\n\n    <!-- Add Permission Dialog -->\n    <Dialog v-model:visible=\"showAddDialog\" header=\"เพิ่ม Permission ใหม่\" :modal=\"true\" :draggable=\"false\" style=\"width: 500px\">\n      <div class=\"add-permission-form\">\n        <div class=\"field\">\n          <label>ชื่อหน้า</label>\n          <InputText v-model=\"newPermission.name\" placeholder=\"เช่น: จัดการสินค้า\" class=\"w-full\" />\n        </div>\n        <div class=\"field\">\n          <label>Path</label>\n          <InputText v-model=\"newPermission.path\" placeholder=\"เช่น: /management/products\" class=\"w-full\" />\n        </div>\n        <div class=\"field\">\n          <label>Icon</label>\n          <InputText v-model=\"newPermission.icon\" placeholder=\"เช่น: pi pi-box\" class=\"w-full\" />\n        </div>\n        <div class=\"field\">\n          <label>สิทธิ์การเข้าถึง</label>\n          <InputSwitch v-model=\"newPermission.hasAccess\" />\n        </div>\n      </div>\n      <template #footer>\n        <Button label=\"ยกเลิก\" icon=\"pi pi-times\" @click=\"showAddDialog = false\" severity=\"secondary\" />\n        <Button label=\"เพิ่ม\" icon=\"pi pi-check\" @click=\"addPermission\" />\n      </template>\n    </Dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch, onMounted } from 'vue'\nimport { useToast } from 'primevue/usetoast'\nimport { useConfirm } from 'primevue/useconfirm'\nimport axios from 'axios'\n\nconst toast = useToast()\nconst confirm = useConfirm()\nconst selectedRole = ref(null)\nconst saving = ref(false)\nconst roles = ref([])\nconst editingCell = ref(null)\nconst showAddDialog = ref(false)\nconst newPermission = ref({\n  name: '',\n  path: '',\n  icon: 'pi pi-circle',\n  hasAccess: true\n})\n\nconst pages = ref([\n  { id: 1, name: 'งานรายวัน', path: '/daily_work', icon: 'pi pi-home', hasAccess: false },\n  { id: 2, name: 'โครงการ', path: '/projects', icon: 'pi pi-briefcase', hasAccess: false },\n  { id: 3, name: 'โปรไฟล์', path: '/profile', icon: 'pi pi-user', hasAccess: false },\n  { id: 4, name: 'จองรถ', path: '/car_booking', icon: 'pi pi-car', hasAccess: false },\n  { id: 5, name: 'ลางาน', path: '/leave_work', icon: 'pi pi-calendar-times', hasAccess: false },\n  { id: 6, name: 'อนุมัติลางาน', path: '/leave_work/approve', icon: 'pi pi-check-circle', hasAccess: false },\n  { id: 7, name: 'ระบบจัดการ', path: '/management', icon: 'pi pi-cog', hasAccess: false },\n  { id: 8, name: 'จัดการผู้ใช้งาน', path: '/management/users', icon: 'pi pi-users', hasAccess: false },\n  { id: 9, name: 'จัดการงาน', path: '/management/tasks', icon: 'pi pi-briefcase', hasAccess: false },\n  { id: 10, name: 'ตั้งค่าระบบ', path: '/management/settings', icon: 'pi pi-cog', hasAccess: false },\n  { id: 11, name: 'จัดการสิทธิ์', path: '/management/settings/role-permissions', icon: 'pi pi-shield', hasAccess: false }\n])\n\nonMounted(async () => {\n  await loadRoles()\n})\n\nconst loadRoles = async () => {\n  try {\n    \n    const response = await axios.get('/api/users/roles', {\n    })\n    \n    roles.value = response.data.roles.map(role => ({\n      label: role.charAt(0).toUpperCase() + role.slice(1),\n      value: role\n    }))\n  } catch (error) {\n    console.error('Error loading roles:', error)\n    // Fallback to default roles\n    roles.value = [\n      { label: 'Superadmin', value: 'superadmin' },\n      { label: 'Admin', value: 'admin' },\n      { label: 'Manager', value: 'manager' },\n      { label: 'User', value: 'user' }\n    ]\n  }\n}\n\nwatch(selectedRole, async (newRole) => {\n  if (newRole) {\n    await loadPermissions(newRole)\n  }\n})\n\nconst loadPermissions = async (role) => {\n  try {\n    \n    const response = await axios.get(`/api/role-permissions/${role}`, {\n    })\n    \n    if (response.data.permissions) {\n      pages.value.forEach(page => {\n        const permission = response.data.permissions.find(p => p.page_path === page.path)\n        page.hasAccess = permission ? permission.has_access : false\n      })\n    }\n  } catch (error) {\n    // If no permissions exist yet, set defaults based on role\n    setDefaultPermissions(role)\n  }\n}\n\nconst setDefaultPermissions = (role) => {\n  pages.value.forEach(page => {\n    if (role === 'superadmin') {\n      page.hasAccess = true\n    } else if (role === 'admin') {\n      page.hasAccess = !page.path.includes('role-permissions')\n    } else if (role === 'manager') {\n      page.hasAccess = !['/management/users', '/management/settings'].some(p => page.path.includes(p))\n    } else {\n      page.hasAccess = ['/daily_work', '/profile', '/car_booking', '/leave_work'].includes(page.path)\n    }\n  })\n}\n\nconst editCell = (data, field) => {\n  editingCell.value = { ...data }\n  if (field === 'name') data.editingName = true\n  if (field === 'path') data.editingPath = true\n  if (field === 'icon') data.editingIcon = true\n}\n\nconst saveEdit = (data, field) => {\n  const oldValue = editingCell.value[field]\n  const newValue = data[field]\n  \n  if (oldValue !== newValue) {\n    confirm.require({\n      message: `ต้องการเปลี่ยน ${field === 'name' ? 'ชื่อ' : field === 'path' ? 'Path' : 'Icon'} จาก \"${oldValue}\" เป็น \"${newValue}\" หรือไม่?`,\n      header: 'ยืนยันการแก้ไข',\n      icon: 'pi pi-exclamation-triangle',\n      acceptLabel: 'ยืนยัน',\n      rejectLabel: 'ยกเลิก',\n      blockScroll: true,\n      draggable: false,\n      accept: () => {\n        toast.add({\n          severity: 'success',\n          summary: 'แก้ไขสำเร็จ',\n          detail: 'กรุณากดบันทึกเพื่อบันทึกการเปลี่ยนแปลง',\n          life: 3000\n        })\n      },\n      reject: () => {\n        data[field] = oldValue\n      }\n    })\n  }\n  \n  data.editingName = false\n  data.editingPath = false\n  data.editingIcon = false\n}\n\nconst confirmSave = () => {\n  confirm.require({\n    message: `ต้องการบันทึกสิทธิ์การเข้าถึงสำหรับ Role \"${selectedRole.value}\" หรือไม่?`,\n    header: 'ยืนยันการบันทึก',\n    icon: 'pi pi-save',\n    acceptLabel: 'บันทึก',\n    rejectLabel: 'ยกเลิก',\n    blockScroll: true,\n    draggable: false,\n    accept: () => {\n      savePermissions()\n    }\n  })\n}\n\nconst addPermission = () => {\n  if (!newPermission.value.name || !newPermission.value.path) {\n    toast.add({\n      severity: 'warn',\n      summary: 'กรุณากรอกข้อมูล',\n      detail: 'กรุณากรอกชื่อหน้าและ Path',\n      life: 3000\n    })\n    return\n  }\n\n  const newId = Math.max(...pages.value.map(p => p.id)) + 1\n  pages.value.push({\n    id: newId,\n    name: newPermission.value.name,\n    path: newPermission.value.path,\n    icon: newPermission.value.icon || 'pi pi-circle',\n    hasAccess: newPermission.value.hasAccess\n  })\n\n  toast.add({\n    severity: 'success',\n    summary: 'เพิ่มสำเร็จ',\n    detail: 'กรุณากดบันทึกเพื่อบันทึกการเปลี่ยนแปลง',\n    life: 3000\n  })\n\n  showAddDialog.value = false\n  newPermission.value = {\n    name: '',\n    path: '',\n    icon: 'pi pi-circle',\n    hasAccess: true\n  }\n}\n\nconst savePermissions = async () => {\n  saving.value = true\n  try {\n    \n    const permissions = pages.value.map(page => ({\n      role: selectedRole.value,\n      page_path: page.path,\n      page_name: page.name,\n      page_icon: page.icon,\n      has_access: page.hasAccess\n    }))\n\n    await axios.post('/api/role-permissions', \n      { permissions },\n    )\n\n    toast.add({\n      severity: 'success',\n      summary: 'สำเร็จ',\n      detail: 'บันทึกสิทธิ์การเข้าถึงเรียบร้อยแล้ว',\n      life: 3000\n    })\n\n    setTimeout(() => {\n      window.location.reload()\n    }, 1000)\n  } catch (error) {\n    toast.add({\n      severity: 'error',\n      summary: 'เกิดข้อผิดพลาด',\n      detail: 'ไม่สามารถบันทึกสิทธิ์ได้',\n      life: 3000\n    })\n  } finally {\n    saving.value = false\n  }\n}\n</script>\n\n<style scoped>\n.permissions-container {\n  padding: 1rem;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.header-card {\n  background: linear-gradient(135deg, #4A90E2, #D73527);\n  color: white;\n  border: none;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.header-content {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1rem;\n}\n\n.back-btn {\n  color: white !important;\n}\n\n.header-title {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n.header-title i {\n  font-size: 1.5rem;\n}\n\n.header-title h1 {\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 600;\n}\n\n.role-selector {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 0.5rem 0;\n}\n\n.role-selector label {\n  font-weight: 600;\n  min-width: 100px;\n  color: #2c3e50;\n}\n\n.table-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  gap: 1rem;\n}\n\n.table-header h3 {\n  margin: 0;\n  color: #2c3e50;\n  font-size: 1.1rem;\n}\n\n.add-permission-form {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  padding: 1rem 0;\n}\n\n.add-permission-form .field {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.add-permission-form label {\n  font-weight: 600;\n  color: #2c3e50;\n  font-size: 0.9rem;\n}\n\n.page-info {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 4px;\n  transition: background 0.2s;\n}\n\n.page-info:hover {\n  background: #f8f9fa;\n}\n\n.page-icon {\n  color: #4A90E2;\n  font-size: 1.1rem;\n  min-width: 20px;\n}\n\ncode {\n  background: #f8f9fa;\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  font-size: 0.85rem;\n  color: #e83e8c;\n  cursor: pointer;\n  display: inline-block;\n  transition: background 0.2s;\n}\n\ncode:hover {\n  background: #e9ecef;\n}\n\n.action-bar {\n  margin-top: 1.5rem;\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n}\n\n:deep(.p-confirm-dialog) {\n  max-width: 90vw;\n  position: fixed !important;\n  top: 50% !important;\n  left: 50% !important;\n  transform: translate(-50%, -50%) !important;\n  margin: 0 !important;\n}\n\n:deep(.p-confirm-dialog .p-dialog-header) {\n  cursor: default !important;\n  user-select: none;\n  pointer-events: none;\n}\n\n:deep(.p-confirm-dialog .p-dialog-header .p-dialog-header-icon) {\n  pointer-events: auto;\n}\n\n:deep(.p-confirm-dialog .p-dialog-title) {\n  pointer-events: none;\n}\n\n:deep(.p-datatable .p-datatable-thead > tr > th) {\n  background: #f8f9fa;\n  color: #2c3e50;\n  font-weight: 600;\n  padding: 1rem;\n  border-bottom: 2px solid #dee2e6;\n}\n\n:deep(.p-datatable .p-datatable-tbody > tr > td) {\n  padding: 0.75rem 1rem;\n}\n\n:deep(.p-datatable .p-datatable-tbody > tr:hover) {\n  background: #f8f9fa;\n}\n\n@media (max-width: 1024px) {\n  .permissions-container {\n    padding: 0.75rem;\n  }\n\n  .table-header {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n\n  :deep(.p-datatable) {\n    font-size: 0.9rem;\n  }\n\n  :deep(.p-datatable .p-datatable-thead > tr > th) {\n    padding: 0.75rem;\n  }\n\n  :deep(.p-datatable .p-datatable-tbody > tr > td) {\n    padding: 0.5rem 0.75rem;\n  }\n}\n\n@media (max-width: 768px) {\n  .permissions-container {\n    padding: 0.5rem;\n  }\n\n  .header-content {\n    padding: 0.75rem;\n  }\n\n  .header-title h1 {\n    font-size: 1.25rem;\n  }\n\n  .header-title i {\n    font-size: 1.25rem;\n  }\n\n  .role-selector {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.5rem;\n  }\n\n  .role-selector label {\n    min-width: auto;\n  }\n\n  :deep(.p-dropdown) {\n    width: 100% !important;\n  }\n\n  .table-header {\n    margin-bottom: 0.75rem;\n  }\n\n  .table-header h3 {\n    font-size: 1rem;\n  }\n\n  :deep(.p-datatable) {\n    font-size: 0.85rem;\n  }\n\n  :deep(.p-datatable .p-datatable-thead > tr > th) {\n    padding: 0.5rem;\n    font-size: 0.8rem;\n  }\n\n  :deep(.p-datatable .p-datatable-tbody > tr > td) {\n    padding: 0.5rem;\n  }\n\n  .page-info {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.25rem;\n  }\n\n  .page-icon {\n    font-size: 1rem;\n  }\n\n  code {\n    font-size: 0.75rem;\n    word-break: break-all;\n    max-width: 100%;\n  }\n\n  :deep(.p-inputswitch) {\n    transform: scale(0.85);\n  }\n\n  .action-bar {\n    margin-top: 1rem;\n    flex-direction: column;\n  }\n\n  .action-bar button {\n    width: 100%;\n  }\n\n  :deep(.p-dialog) {\n    width: 95vw !important;\n    margin: 0.5rem;\n  }\n\n  :deep(.p-confirm-dialog) {\n    width: 90vw !important;\n  }\n\n  .add-permission-form {\n    padding: 0.5rem 0;\n  }\n\n  .add-permission-form .field label {\n    font-size: 0.85rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .permissions-container {\n    padding: 0.25rem;\n  }\n\n  .header-title h1 {\n    font-size: 1.1rem;\n  }\n\n  :deep(.p-datatable) {\n    font-size: 0.75rem;\n  }\n\n  :deep(.p-datatable .p-datatable-thead > tr > th) {\n    padding: 0.4rem;\n    font-size: 0.75rem;\n  }\n\n  :deep(.p-datatable .p-datatable-tbody > tr > td) {\n    padding: 0.4rem;\n  }\n\n  :deep(.p-button) {\n    font-size: 0.85rem;\n    padding: 0.5rem 1rem;\n  }\n\n  :deep(.p-inputswitch) {\n    transform: scale(0.75);\n  }\n\n  .table-header h3 {\n    font-size: 0.9rem;\n  }\n}\n\n@media (max-width: 768px) and (orientation: landscape) {\n  .header-content {\n    padding: 0.5rem;\n  }\n\n  .header-title h1 {\n    font-size: 1rem;\n  }\n\n  :deep(.p-datatable .p-datatable-thead > tr > th),\n  :deep(.p-datatable .p-datatable-tbody > tr > td) {\n    padding: 0.4rem;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}