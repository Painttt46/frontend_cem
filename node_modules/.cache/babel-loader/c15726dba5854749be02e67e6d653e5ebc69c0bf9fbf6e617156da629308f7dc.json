{"ast":null,"code":"import { ref, watch, onMounted } from 'vue';\nimport { useToast } from 'primevue/usetoast';\nimport { useConfirm } from 'primevue/useconfirm';\nimport axios from '@/utils/axiosConfig';\nexport default {\n  __name: 'RolePermissions',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const toast = useToast();\n    const confirm = useConfirm();\n    const selectedRole = ref(null);\n    const saving = ref(false);\n    const roles = ref([]);\n    const editingCell = ref(null);\n    const showAddDialog = ref(false);\n    const newPermission = ref({\n      name: '',\n      path: '',\n      icon: 'pi pi-circle',\n      hasAccess: true\n    });\n    const pages = ref([{\n      id: 1,\n      name: 'งานรายวัน',\n      path: '/daily_work',\n      icon: 'pi pi-home',\n      hasAccess: false\n    }, {\n      id: 2,\n      name: 'โครงการ',\n      path: '/projects',\n      icon: 'pi pi-briefcase',\n      hasAccess: false\n    }, {\n      id: 3,\n      name: 'โปรไฟล์',\n      path: '/profile',\n      icon: 'pi pi-user',\n      hasAccess: false\n    }, {\n      id: 4,\n      name: 'จองรถ',\n      path: '/car_booking',\n      icon: 'pi pi-car',\n      hasAccess: false\n    }, {\n      id: 5,\n      name: 'ลางาน',\n      path: '/leave_work',\n      icon: 'pi pi-calendar-times',\n      hasAccess: false\n    }, {\n      id: 6,\n      name: 'อนุมัติลางาน',\n      path: '/leave_work/approve',\n      icon: 'pi pi-check-circle',\n      hasAccess: false\n    }, {\n      id: 7,\n      name: 'ระบบจัดการ',\n      path: '/management',\n      icon: 'pi pi-cog',\n      hasAccess: false\n    }, {\n      id: 8,\n      name: 'จัดการผู้ใช้งาน',\n      path: '/management/users',\n      icon: 'pi pi-users',\n      hasAccess: false\n    }, {\n      id: 9,\n      name: 'จัดการงาน',\n      path: '/management/tasks',\n      icon: 'pi pi-briefcase',\n      hasAccess: false\n    }, {\n      id: 10,\n      name: 'ตั้งค่าระบบ',\n      path: '/management/settings',\n      icon: 'pi pi-cog',\n      hasAccess: false\n    }, {\n      id: 11,\n      name: 'จัดการสิทธิ์',\n      path: '/management/settings/role-permissions',\n      icon: 'pi pi-shield',\n      hasAccess: false\n    }]);\n    onMounted(async () => {\n      await loadRoles();\n    });\n    const loadRoles = async () => {\n      try {\n        const response = await axios.get('/api/users/roles', {});\n        roles.value = response.data.roles.map(role => ({\n          label: role.charAt(0).toUpperCase() + role.slice(1),\n          value: role\n        }));\n      } catch (error) {\n        console.error('Error loading roles:', error);\n        // Fallback to default roles\n        roles.value = [{\n          label: 'Superadmin',\n          value: 'superadmin'\n        }, {\n          label: 'Admin',\n          value: 'admin'\n        }, {\n          label: 'Manager',\n          value: 'manager'\n        }, {\n          label: 'User',\n          value: 'user'\n        }];\n      }\n    };\n    watch(selectedRole, async newRole => {\n      if (newRole) {\n        await loadPermissions(newRole);\n      }\n    });\n    const loadPermissions = async role => {\n      try {\n        const response = await axios.get(`/api/role-permissions/${role}`, {});\n        if (response.data.permissions) {\n          // Update existing pages\n          pages.value.forEach(page => {\n            const permission = response.data.permissions.find(p => p.page_path === page.path);\n            page.hasAccess = permission ? permission.has_access : false;\n          });\n\n          // Add new permissions from database that don't exist in pages\n          response.data.permissions.forEach(permission => {\n            const existingPage = pages.value.find(p => p.path === permission.page_path);\n            if (!existingPage) {\n              pages.value.push({\n                id: permission.id,\n                name: permission.page_name,\n                path: permission.page_path,\n                icon: permission.page_icon || 'pi pi-circle',\n                hasAccess: permission.has_access\n              });\n            }\n          });\n        }\n      } catch (error) {\n        // If no permissions exist yet, set defaults based on role\n        setDefaultPermissions(role);\n      }\n    };\n    const setDefaultPermissions = role => {\n      pages.value.forEach(page => {\n        if (role === 'superadmin') {\n          page.hasAccess = true;\n        } else if (role === 'admin') {\n          page.hasAccess = !page.path.includes('role-permissions');\n        } else if (role === 'manager') {\n          page.hasAccess = !['/management/users', '/management/settings'].some(p => page.path.includes(p));\n        } else {\n          page.hasAccess = ['/daily_work', '/profile', '/car_booking', '/leave_work'].includes(page.path);\n        }\n      });\n    };\n    const editCell = (data, field) => {\n      editingCell.value = {\n        ...data\n      };\n      if (field === 'name') data.editingName = true;\n      if (field === 'path') data.editingPath = true;\n      if (field === 'icon') data.editingIcon = true;\n    };\n    const saveEdit = (data, field) => {\n      const oldValue = editingCell.value[field];\n      const newValue = data[field];\n      if (oldValue !== newValue) {\n        confirm.require({\n          message: `ต้องการเปลี่ยน ${field === 'name' ? 'ชื่อ' : field === 'path' ? 'Path' : 'Icon'} จาก \"${oldValue}\" เป็น \"${newValue}\" หรือไม่?`,\n          header: 'ยืนยันการแก้ไข',\n          icon: 'pi pi-exclamation-triangle',\n          acceptLabel: 'ยืนยัน',\n          rejectLabel: 'ยกเลิก',\n          blockScroll: true,\n          draggable: false,\n          accept: () => {\n            toast.add({\n              severity: 'success',\n              summary: 'แก้ไขสำเร็จ',\n              detail: 'กรุณากดบันทึกเพื่อบันทึกการเปลี่ยนแปลง',\n              life: 3000\n            });\n          },\n          reject: () => {\n            data[field] = oldValue;\n          }\n        });\n      }\n      data.editingName = false;\n      data.editingPath = false;\n      data.editingIcon = false;\n    };\n    const confirmSave = () => {\n      confirm.require({\n        message: `ต้องการบันทึกสิทธิ์การเข้าถึงสำหรับ Role \"${selectedRole.value}\" หรือไม่?`,\n        header: 'ยืนยันการบันทึก',\n        icon: 'pi pi-save',\n        acceptLabel: 'บันทึก',\n        rejectLabel: 'ยกเลิก',\n        blockScroll: true,\n        draggable: false,\n        accept: () => {\n          savePermissions();\n        }\n      });\n    };\n    const addPermission = () => {\n      if (!newPermission.value.name || !newPermission.value.path) {\n        toast.add({\n          severity: 'warn',\n          summary: 'กรุณากรอกข้อมูล',\n          detail: 'กรุณากรอกชื่อหน้าและ Path',\n          life: 3000\n        });\n        return;\n      }\n      const newId = Math.max(...pages.value.map(p => p.id)) + 1;\n      pages.value.push({\n        id: newId,\n        name: newPermission.value.name,\n        path: newPermission.value.path,\n        icon: newPermission.value.icon || 'pi pi-circle',\n        hasAccess: newPermission.value.hasAccess\n      });\n      toast.add({\n        severity: 'success',\n        summary: 'เพิ่มสำเร็จ',\n        detail: 'กรุณากดบันทึกเพื่อบันทึกการเปลี่ยนแปลง',\n        life: 3000\n      });\n      showAddDialog.value = false;\n      newPermission.value = {\n        name: '',\n        path: '',\n        icon: 'pi pi-circle',\n        hasAccess: true\n      };\n    };\n    const savePermissions = async () => {\n      saving.value = true;\n      try {\n        const permissions = pages.value.map(page => ({\n          role: selectedRole.value,\n          page_path: page.path,\n          page_name: page.name,\n          page_icon: page.icon,\n          has_access: page.hasAccess\n        }));\n        await axios.post('/api/role-permissions', {\n          permissions\n        });\n        toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: 'บันทึกสิทธิ์การเข้าถึงเรียบร้อยแล้ว',\n          life: 3000\n        });\n        setTimeout(() => {\n          window.location.reload();\n        }, 1000);\n      } catch (error) {\n        toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถบันทึกสิทธิ์ได้',\n          life: 3000\n        });\n      } finally {\n        saving.value = false;\n      }\n    };\n    const __returned__ = {\n      toast,\n      confirm,\n      selectedRole,\n      saving,\n      roles,\n      editingCell,\n      showAddDialog,\n      newPermission,\n      pages,\n      loadRoles,\n      loadPermissions,\n      setDefaultPermissions,\n      editCell,\n      saveEdit,\n      confirmSave,\n      addPermission,\n      savePermissions,\n      ref,\n      watch,\n      onMounted,\n      get useToast() {\n        return useToast;\n      },\n      get useConfirm() {\n        return useConfirm;\n      },\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watch","onMounted","useToast","useConfirm","axios","toast","confirm","selectedRole","saving","roles","editingCell","showAddDialog","newPermission","name","path","icon","hasAccess","pages","id","loadRoles","response","get","value","data","map","role","label","charAt","toUpperCase","slice","error","console","newRole","loadPermissions","permissions","forEach","page","permission","find","p","page_path","has_access","existingPage","push","page_name","page_icon","setDefaultPermissions","includes","some","editCell","field","editingName","editingPath","editingIcon","saveEdit","oldValue","newValue","require","message","header","acceptLabel","rejectLabel","blockScroll","draggable","accept","add","severity","summary","detail","life","reject","confirmSave","savePermissions","addPermission","newId","Math","max","post","setTimeout","window","location","reload"],"sources":["D:/frontend_cem/src/views/management/RolePermissions.vue"],"sourcesContent":["<template>\n  <div class=\"permissions-container\">\n    <Toast />\n    \n    <!-- Header -->\n    <Card class=\"header-card mb-4\">\n      <template #content>\n        <div class=\"header-content\">\n          <Button icon=\"pi pi-arrow-left\" text rounded @click=\"$router.push('/management/settings')\" class=\"back-btn\" />\n          <div class=\"header-title\">\n            <i class=\"pi pi-shield\"></i>\n            <h1>จัดการสิทธิ์การเข้าถึง</h1>\n          </div>\n        </div>\n      </template>\n    </Card>\n\n    <!-- Role Selector -->\n    <Card class=\"mb-4\">\n      <template #content>\n        <div class=\"role-selector\">\n          <label>เลือก Role:</label>\n          <Dropdown v-model=\"selectedRole\" :options=\"roles\" optionLabel=\"label\" optionValue=\"value\" \n                    placeholder=\"เลือก Role\" class=\"w-full md:w-14rem\" />\n        </div>\n      </template>\n    </Card>\n\n    <!-- Permissions Table -->\n    <Card v-if=\"selectedRole\">\n      <template #content>\n        <div class=\"table-header\">\n          <Button label=\"เพิ่ม Permission\" icon=\"pi pi-plus\" @click=\"showAddDialog = true\" severity=\"success\" size=\"small\" />\n        </div>\n        <DataTable :value=\"pages\" class=\"p-datatable-sm\" stripedRows>\n          <Column field=\"name\" header=\"หน้า (Double-click เพื่อแก้ไข)\" style=\"min-width: 200px\">\n            <template #body=\"{ data }\">\n              <div class=\"page-info\" @dblclick=\"editCell(data, 'name')\">\n                <i :class=\"data.icon\" class=\"page-icon\"></i>\n                <span v-if=\"!data.editingName\">{{ data.name }}</span>\n                <InputText v-else v-model=\"data.name\" @blur=\"saveEdit(data, 'name')\" @keyup.enter=\"saveEdit(data, 'name')\" autofocus />\n              </div>\n            </template>\n          </Column>\n          <Column field=\"path\" header=\"Path (Double-click เพื่อแก้ไข)\" style=\"min-width: 200px\">\n            <template #body=\"{ data }\">\n              <code v-if=\"!data.editingPath\" @dblclick=\"editCell(data, 'path')\">{{ data.path }}</code>\n              <InputText v-else v-model=\"data.path\" @blur=\"saveEdit(data, 'path')\" @keyup.enter=\"saveEdit(data, 'path')\" autofocus />\n            </template>\n          </Column>\n          <Column field=\"icon\" header=\"Icon (Double-click เพื่อแก้ไข)\" style=\"min-width: 150px\">\n            <template #body=\"{ data }\">\n              <div v-if=\"!data.editingIcon\" @dblclick=\"editCell(data, 'icon')\">\n                <i :class=\"data.icon\" style=\"font-size: 1.2rem; color: #4A90E2;\"></i>\n                <span style=\"margin-left: 0.5rem; font-size: 0.85rem; color: #6c757d;\">{{ data.icon }}</span>\n              </div>\n              <InputText v-else v-model=\"data.icon\" placeholder=\"pi pi-home\" @blur=\"saveEdit(data, 'icon')\" @keyup.enter=\"saveEdit(data, 'icon')\" autofocus />\n            </template>\n          </Column>\n          <Column header=\"สิทธิ์การเข้าถึง\" style=\"width: 150px\">\n            <template #body=\"{ data }\">\n              <InputSwitch v-model=\"data.hasAccess\" />\n            </template>\n          </Column>\n        </DataTable>\n      </template>\n    </Card>\n\n    <!-- Save Button -->\n    <div class=\"action-bar\" v-if=\"selectedRole\">\n      <Button label=\"บันทึกการเปลี่ยนแปลง\" icon=\"pi pi-save\" @click=\"confirmSave\" :loading=\"saving\" />\n    </div>\n\n    <!-- Add Permission Dialog -->\n    <Dialog v-model:visible=\"showAddDialog\" header=\"เพิ่ม Permission ใหม่\" :modal=\"true\" :draggable=\"false\" style=\"width: 500px\">\n      <div class=\"add-permission-form\">\n        <div class=\"field\">\n          <label>ชื่อหน้า</label>\n          <InputText v-model=\"newPermission.name\" placeholder=\"เช่น: จัดการสินค้า\" class=\"w-full\" />\n        </div>\n        <div class=\"field\">\n          <label>Path</label>\n          <InputText v-model=\"newPermission.path\" placeholder=\"เช่น: /management/products\" class=\"w-full\" />\n        </div>\n        <div class=\"field\">\n          <label>Icon</label>\n          <InputText v-model=\"newPermission.icon\" placeholder=\"เช่น: pi pi-box\" class=\"w-full\" />\n        </div>\n        <div class=\"field\">\n          <label>สิทธิ์การเข้าถึง</label>\n          <InputSwitch v-model=\"newPermission.hasAccess\" />\n        </div>\n      </div>\n      <template #footer>\n        <Button label=\"ยกเลิก\" icon=\"pi pi-times\" @click=\"showAddDialog = false\" severity=\"secondary\" />\n        <Button label=\"เพิ่ม\" icon=\"pi pi-check\" @click=\"addPermission\" />\n      </template>\n    </Dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch, onMounted } from 'vue'\nimport { useToast } from 'primevue/usetoast'\nimport { useConfirm } from 'primevue/useconfirm'\nimport axios from '@/utils/axiosConfig'\n\nconst toast = useToast()\nconst confirm = useConfirm()\nconst selectedRole = ref(null)\nconst saving = ref(false)\nconst roles = ref([])\nconst editingCell = ref(null)\nconst showAddDialog = ref(false)\nconst newPermission = ref({\n  name: '',\n  path: '',\n  icon: 'pi pi-circle',\n  hasAccess: true\n})\n\nconst pages = ref([\n  { id: 1, name: 'งานรายวัน', path: '/daily_work', icon: 'pi pi-home', hasAccess: false },\n  { id: 2, name: 'โครงการ', path: '/projects', icon: 'pi pi-briefcase', hasAccess: false },\n  { id: 3, name: 'โปรไฟล์', path: '/profile', icon: 'pi pi-user', hasAccess: false },\n  { id: 4, name: 'จองรถ', path: '/car_booking', icon: 'pi pi-car', hasAccess: false },\n  { id: 5, name: 'ลางาน', path: '/leave_work', icon: 'pi pi-calendar-times', hasAccess: false },\n  { id: 6, name: 'อนุมัติลางาน', path: '/leave_work/approve', icon: 'pi pi-check-circle', hasAccess: false },\n  { id: 7, name: 'ระบบจัดการ', path: '/management', icon: 'pi pi-cog', hasAccess: false },\n  { id: 8, name: 'จัดการผู้ใช้งาน', path: '/management/users', icon: 'pi pi-users', hasAccess: false },\n  { id: 9, name: 'จัดการงาน', path: '/management/tasks', icon: 'pi pi-briefcase', hasAccess: false },\n  { id: 10, name: 'ตั้งค่าระบบ', path: '/management/settings', icon: 'pi pi-cog', hasAccess: false },\n  { id: 11, name: 'จัดการสิทธิ์', path: '/management/settings/role-permissions', icon: 'pi pi-shield', hasAccess: false }\n])\n\nonMounted(async () => {\n  await loadRoles()\n})\n\nconst loadRoles = async () => {\n  try {\n    \n    const response = await axios.get('/api/users/roles', {\n    })\n    \n    roles.value = response.data.roles.map(role => ({\n      label: role.charAt(0).toUpperCase() + role.slice(1),\n      value: role\n    }))\n  } catch (error) {\n    console.error('Error loading roles:', error)\n    // Fallback to default roles\n    roles.value = [\n      { label: 'Superadmin', value: 'superadmin' },\n      { label: 'Admin', value: 'admin' },\n      { label: 'Manager', value: 'manager' },\n      { label: 'User', value: 'user' }\n    ]\n  }\n}\n\nwatch(selectedRole, async (newRole) => {\n  if (newRole) {\n    await loadPermissions(newRole)\n  }\n})\n\nconst loadPermissions = async (role) => {\n  try {\n    \n    const response = await axios.get(`/api/role-permissions/${role}`, {\n    })\n    \n    if (response.data.permissions) {\n      // Update existing pages\n      pages.value.forEach(page => {\n        const permission = response.data.permissions.find(p => p.page_path === page.path)\n        page.hasAccess = permission ? permission.has_access : false\n      })\n      \n      // Add new permissions from database that don't exist in pages\n      response.data.permissions.forEach(permission => {\n        const existingPage = pages.value.find(p => p.path === permission.page_path)\n        if (!existingPage) {\n          pages.value.push({\n            id: permission.id,\n            name: permission.page_name,\n            path: permission.page_path,\n            icon: permission.page_icon || 'pi pi-circle',\n            hasAccess: permission.has_access\n          })\n        }\n      })\n    }\n  } catch (error) {\n    // If no permissions exist yet, set defaults based on role\n    setDefaultPermissions(role)\n  }\n}\n\nconst setDefaultPermissions = (role) => {\n  pages.value.forEach(page => {\n    if (role === 'superadmin') {\n      page.hasAccess = true\n    } else if (role === 'admin') {\n      page.hasAccess = !page.path.includes('role-permissions')\n    } else if (role === 'manager') {\n      page.hasAccess = !['/management/users', '/management/settings'].some(p => page.path.includes(p))\n    } else {\n      page.hasAccess = ['/daily_work', '/profile', '/car_booking', '/leave_work'].includes(page.path)\n    }\n  })\n}\n\nconst editCell = (data, field) => {\n  editingCell.value = { ...data }\n  if (field === 'name') data.editingName = true\n  if (field === 'path') data.editingPath = true\n  if (field === 'icon') data.editingIcon = true\n}\n\nconst saveEdit = (data, field) => {\n  const oldValue = editingCell.value[field]\n  const newValue = data[field]\n  \n  if (oldValue !== newValue) {\n    confirm.require({\n      message: `ต้องการเปลี่ยน ${field === 'name' ? 'ชื่อ' : field === 'path' ? 'Path' : 'Icon'} จาก \"${oldValue}\" เป็น \"${newValue}\" หรือไม่?`,\n      header: 'ยืนยันการแก้ไข',\n      icon: 'pi pi-exclamation-triangle',\n      acceptLabel: 'ยืนยัน',\n      rejectLabel: 'ยกเลิก',\n      blockScroll: true,\n      draggable: false,\n      accept: () => {\n        toast.add({\n          severity: 'success',\n          summary: 'แก้ไขสำเร็จ',\n          detail: 'กรุณากดบันทึกเพื่อบันทึกการเปลี่ยนแปลง',\n          life: 3000\n        })\n      },\n      reject: () => {\n        data[field] = oldValue\n      }\n    })\n  }\n  \n  data.editingName = false\n  data.editingPath = false\n  data.editingIcon = false\n}\n\nconst confirmSave = () => {\n  confirm.require({\n    message: `ต้องการบันทึกสิทธิ์การเข้าถึงสำหรับ Role \"${selectedRole.value}\" หรือไม่?`,\n    header: 'ยืนยันการบันทึก',\n    icon: 'pi pi-save',\n    acceptLabel: 'บันทึก',\n    rejectLabel: 'ยกเลิก',\n    blockScroll: true,\n    draggable: false,\n    accept: () => {\n      savePermissions()\n    }\n  })\n}\n\nconst addPermission = () => {\n  if (!newPermission.value.name || !newPermission.value.path) {\n    toast.add({\n      severity: 'warn',\n      summary: 'กรุณากรอกข้อมูล',\n      detail: 'กรุณากรอกชื่อหน้าและ Path',\n      life: 3000\n    })\n    return\n  }\n\n  const newId = Math.max(...pages.value.map(p => p.id)) + 1\n  pages.value.push({\n    id: newId,\n    name: newPermission.value.name,\n    path: newPermission.value.path,\n    icon: newPermission.value.icon || 'pi pi-circle',\n    hasAccess: newPermission.value.hasAccess\n  })\n\n  toast.add({\n    severity: 'success',\n    summary: 'เพิ่มสำเร็จ',\n    detail: 'กรุณากดบันทึกเพื่อบันทึกการเปลี่ยนแปลง',\n    life: 3000\n  })\n\n  showAddDialog.value = false\n  newPermission.value = {\n    name: '',\n    path: '',\n    icon: 'pi pi-circle',\n    hasAccess: true\n  }\n}\n\nconst savePermissions = async () => {\n  saving.value = true\n  try {\n    \n    const permissions = pages.value.map(page => ({\n      role: selectedRole.value,\n      page_path: page.path,\n      page_name: page.name,\n      page_icon: page.icon,\n      has_access: page.hasAccess\n    }))\n\n    await axios.post('/api/role-permissions', \n      { permissions },\n    )\n\n    toast.add({\n      severity: 'success',\n      summary: 'สำเร็จ',\n      detail: 'บันทึกสิทธิ์การเข้าถึงเรียบร้อยแล้ว',\n      life: 3000\n    })\n\n    setTimeout(() => {\n      window.location.reload()\n    }, 1000)\n  } catch (error) {\n    toast.add({\n      severity: 'error',\n      summary: 'เกิดข้อผิดพลาด',\n      detail: 'ไม่สามารถบันทึกสิทธิ์ได้',\n      life: 3000\n    })\n  } finally {\n    saving.value = false\n  }\n}\n</script>\n\n<style scoped>\n.permissions-container {\n  padding: 1rem;\n  padding-bottom: 0;\n  max-width: 100%;\n  margin: 0 auto;\n  margin-left: 0.5%;\n  background: #e5e7eb;\n  height: 100%;\n  overflow: auto;\n}\n\n.header-card {\n  background: linear-gradient(135deg, #4A90E2, #D73527);\n  color: white;\n  border: none;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.header-content {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1rem;\n}\n\n.back-btn {\n  color: white !important;\n}\n\n.header-title {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n.header-title i {\n  font-size: 1.5rem;\n}\n\n.header-title h1 {\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 600;\n}\n\n.role-selector {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 0.5rem 0;\n}\n\n.role-selector label {\n  font-weight: 600;\n  min-width: 100px;\n  color: #2c3e50;\n}\n\n.table-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  gap: 1rem;\n}\n\n.table-header h3 {\n  margin: 0;\n  color: #2c3e50;\n  font-size: 1.1rem;\n}\n\n.add-permission-form {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  padding: 1rem 0;\n}\n\n.add-permission-form .field {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.add-permission-form label {\n  font-weight: 600;\n  color: #2c3e50;\n  font-size: 0.9rem;\n}\n\n.page-info {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 4px;\n  transition: background 0.2s;\n}\n\n.page-info:hover {\n  background: #f8f9fa;\n}\n\n.page-icon {\n  color: #4A90E2;\n  font-size: 1.1rem;\n  min-width: 20px;\n}\n\ncode {\n  background: #f8f9fa;\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  font-size: 0.85rem;\n  color: #e83e8c;\n  cursor: pointer;\n  display: inline-block;\n  transition: background 0.2s;\n}\n\ncode:hover {\n  background: #e9ecef;\n}\n\n.action-bar {\n  margin-top: 1.5rem;\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n}\n\n:deep(.p-confirm-dialog) {\n  max-width: 90vw;\n  position: fixed !important;\n  top: 50% !important;\n  left: 50% !important;\n  transform: translate(-50%, -50%) !important;\n  margin: 0 !important;\n}\n\n:deep(.p-confirm-dialog .p-dialog-header) {\n  cursor: default !important;\n  user-select: none;\n  pointer-events: none;\n}\n\n:deep(.p-confirm-dialog .p-dialog-header .p-dialog-header-icon) {\n  pointer-events: auto;\n}\n\n:deep(.p-confirm-dialog .p-dialog-title) {\n  pointer-events: none;\n}\n\n:deep(.p-datatable .p-datatable-thead > tr > th) {\n  background: #f8f9fa;\n  color: #2c3e50;\n  font-weight: 600;\n  padding: 1rem;\n  border-bottom: 2px solid #dee2e6;\n}\n\n:deep(.p-datatable .p-datatable-tbody > tr > td) {\n  padding: 0.75rem 1rem;\n}\n\n:deep(.p-datatable .p-datatable-tbody > tr:hover) {\n  background: #f8f9fa;\n}\n\n@media (max-width: 1024px) {\n  .permissions-container {\n    padding: 0.75rem;\n  }\n\n  .table-header {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n\n  :deep(.p-datatable) {\n    font-size: 0.9rem;\n  }\n\n  :deep(.p-datatable .p-datatable-thead > tr > th) {\n    padding: 0.75rem;\n  }\n\n  :deep(.p-datatable .p-datatable-tbody > tr > td) {\n    padding: 0.5rem 0.75rem;\n  }\n}\n\n@media (max-width: 768px) {\n  .permissions-container {\n    padding: 0.5rem;\n  }\n\n  .header-content {\n    padding: 0.75rem;\n  }\n\n  .header-title h1 {\n    font-size: 1.25rem;\n  }\n\n  .header-title i {\n    font-size: 1.25rem;\n  }\n\n  .role-selector {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.5rem;\n  }\n\n  .role-selector label {\n    min-width: auto;\n  }\n\n  :deep(.p-dropdown) {\n    width: 100% !important;\n  }\n\n  .table-header {\n    margin-bottom: 0.75rem;\n  }\n\n  .table-header h3 {\n    font-size: 1rem;\n  }\n\n  :deep(.p-datatable) {\n    font-size: 0.85rem;\n  }\n\n  :deep(.p-datatable .p-datatable-thead > tr > th) {\n    padding: 0.5rem;\n    font-size: 0.8rem;\n  }\n\n  :deep(.p-datatable .p-datatable-tbody > tr > td) {\n    padding: 0.5rem;\n  }\n\n  .page-info {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.25rem;\n  }\n\n  .page-icon {\n    font-size: 1rem;\n  }\n\n  code {\n    font-size: 0.75rem;\n    word-break: break-all;\n    max-width: 100%;\n  }\n\n  :deep(.p-inputswitch) {\n    transform: scale(0.85);\n  }\n\n  .action-bar {\n    margin-top: 1rem;\n    flex-direction: column;\n  }\n\n  .action-bar button {\n    width: 100%;\n  }\n\n  :deep(.p-dialog) {\n    width: 95vw !important;\n    margin: 0.5rem;\n  }\n\n  :deep(.p-confirm-dialog) {\n    width: 90vw !important;\n  }\n\n  .add-permission-form {\n    padding: 0.5rem 0;\n  }\n\n  .add-permission-form .field label {\n    font-size: 0.85rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .permissions-container {\n    padding: 0.25rem;\n  }\n\n  .header-title h1 {\n    font-size: 1.1rem;\n  }\n\n  :deep(.p-datatable) {\n    font-size: 0.75rem;\n  }\n\n  :deep(.p-datatable .p-datatable-thead > tr > th) {\n    padding: 0.4rem;\n    font-size: 0.75rem;\n  }\n\n  :deep(.p-datatable .p-datatable-tbody > tr > td) {\n    padding: 0.4rem;\n  }\n\n  :deep(.p-button) {\n    font-size: 0.85rem;\n    padding: 0.5rem 1rem;\n  }\n\n  :deep(.p-inputswitch) {\n    transform: scale(0.75);\n  }\n\n  .table-header h3 {\n    font-size: 0.9rem;\n  }\n}\n\n@media (max-width: 768px) and (orientation: landscape) {\n  .header-content {\n    padding: 0.5rem;\n  }\n\n  .header-title h1 {\n    font-size: 1rem;\n  }\n\n  :deep(.p-datatable .p-datatable-thead > tr > th),\n  :deep(.p-datatable .p-datatable-tbody > tr > td) {\n    padding: 0.4rem;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}