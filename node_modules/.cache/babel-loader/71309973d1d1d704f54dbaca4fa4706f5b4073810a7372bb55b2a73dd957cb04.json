{"ast":null,"code":"import { ref } from 'vue';\nimport { useToast } from 'primevue/usetoast';\nexport function useErrorHandler() {\n  const toast = useToast();\n  const error = ref(null);\n  const isError = ref(false);\n\n  /**\n   * Handle API errors and show toast notification\n   * @param {Error} err - Error object from axios\n   * @param {Object} options - Options for error handling\n   * @param {boolean} options.showToast - Show toast notification (default: true)\n   * @param {string} options.customMessage - Custom error message\n   * @param {number} options.life - Toast life in ms (default: 5000)\n   */\n  const handleError = (err, options = {}) => {\n    const {\n      showToast = true,\n      customMessage = null,\n      life = 5000\n    } = options;\n\n    // Set error state\n    error.value = err;\n    isError.value = true;\n\n    // Get user-friendly message\n    const message = customMessage || err.userMessage || err.message || 'เกิดข้อผิดพลาด';\n\n    // Show toast notification\n    if (showToast) {\n      toast.add({\n        severity: 'error',\n        summary: 'เกิดข้อผิดพลาด',\n        detail: message,\n        life\n      });\n    }\n    return message;\n  };\n\n  /**\n   * Clear error state\n   */\n  const clearError = () => {\n    error.value = null;\n    isError.value = false;\n  };\n\n  /**\n   * Wrap async function with error handling\n   * @param {Function} fn - Async function to wrap\n   * @param {Object} options - Error handling options\n   */\n  const withErrorHandling = async (fn, options = {}) => {\n    try {\n      clearError();\n      return await fn();\n    } catch (err) {\n      handleError(err, options);\n      throw err;\n    }\n  };\n  return {\n    error,\n    isError,\n    handleError,\n    clearError,\n    withErrorHandling\n  };\n}","map":{"version":3,"names":["ref","useToast","useErrorHandler","toast","error","isError","handleError","err","options","showToast","customMessage","life","value","message","userMessage","add","severity","summary","detail","clearError","withErrorHandling","fn"],"sources":["D:/frontend_cem/src/composables/useErrorHandler.js"],"sourcesContent":["import { ref } from 'vue'\nimport { useToast } from 'primevue/usetoast'\n\nexport function useErrorHandler() {\n  const toast = useToast()\n  const error = ref(null)\n  const isError = ref(false)\n\n  /**\n   * Handle API errors and show toast notification\n   * @param {Error} err - Error object from axios\n   * @param {Object} options - Options for error handling\n   * @param {boolean} options.showToast - Show toast notification (default: true)\n   * @param {string} options.customMessage - Custom error message\n   * @param {number} options.life - Toast life in ms (default: 5000)\n   */\n  const handleError = (err, options = {}) => {\n    const {\n      showToast = true,\n      customMessage = null,\n      life = 5000\n    } = options\n\n    // Set error state\n    error.value = err\n    isError.value = true\n\n    // Get user-friendly message\n    const message = customMessage || err.userMessage || err.message || 'เกิดข้อผิดพลาด'\n\n    // Show toast notification\n    if (showToast) {\n      toast.add({\n        severity: 'error',\n        summary: 'เกิดข้อผิดพลาด',\n        detail: message,\n        life\n      })\n    }\n\n    return message\n  }\n\n  /**\n   * Clear error state\n   */\n  const clearError = () => {\n    error.value = null\n    isError.value = false\n  }\n\n  /**\n   * Wrap async function with error handling\n   * @param {Function} fn - Async function to wrap\n   * @param {Object} options - Error handling options\n   */\n  const withErrorHandling = async (fn, options = {}) => {\n    try {\n      clearError()\n      return await fn()\n    } catch (err) {\n      handleError(err, options)\n      throw err\n    }\n  }\n\n  return {\n    error,\n    isError,\n    handleError,\n    clearError,\n    withErrorHandling\n  }\n}\n"],"mappings":"AAAA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,QAAQ,QAAQ,mBAAmB;AAE5C,OAAO,SAASC,eAAeA,CAAA,EAAG;EAChC,MAAMC,KAAK,GAAGF,QAAQ,CAAC,CAAC;EACxB,MAAMG,KAAK,GAAGJ,GAAG,CAAC,IAAI,CAAC;EACvB,MAAMK,OAAO,GAAGL,GAAG,CAAC,KAAK,CAAC;;EAE1B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACE,MAAMM,WAAW,GAAGA,CAACC,GAAG,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;IACzC,MAAM;MACJC,SAAS,GAAG,IAAI;MAChBC,aAAa,GAAG,IAAI;MACpBC,IAAI,GAAG;IACT,CAAC,GAAGH,OAAO;;IAEX;IACAJ,KAAK,CAACQ,KAAK,GAAGL,GAAG;IACjBF,OAAO,CAACO,KAAK,GAAG,IAAI;;IAEpB;IACA,MAAMC,OAAO,GAAGH,aAAa,IAAIH,GAAG,CAACO,WAAW,IAAIP,GAAG,CAACM,OAAO,IAAI,gBAAgB;;IAEnF;IACA,IAAIJ,SAAS,EAAE;MACbN,KAAK,CAACY,GAAG,CAAC;QACRC,QAAQ,EAAE,OAAO;QACjBC,OAAO,EAAE,gBAAgB;QACzBC,MAAM,EAAEL,OAAO;QACfF;MACF,CAAC,CAAC;IACJ;IAEA,OAAOE,OAAO;EAChB,CAAC;;EAED;AACF;AACA;EACE,MAAMM,UAAU,GAAGA,CAAA,KAAM;IACvBf,KAAK,CAACQ,KAAK,GAAG,IAAI;IAClBP,OAAO,CAACO,KAAK,GAAG,KAAK;EACvB,CAAC;;EAED;AACF;AACA;AACA;AACA;EACE,MAAMQ,iBAAiB,GAAG,MAAAA,CAAOC,EAAE,EAAEb,OAAO,GAAG,CAAC,CAAC,KAAK;IACpD,IAAI;MACFW,UAAU,CAAC,CAAC;MACZ,OAAO,MAAME,EAAE,CAAC,CAAC;IACnB,CAAC,CAAC,OAAOd,GAAG,EAAE;MACZD,WAAW,CAACC,GAAG,EAAEC,OAAO,CAAC;MACzB,MAAMD,GAAG;IACX;EACF,CAAC;EAED,OAAO;IACLH,KAAK;IACLC,OAAO;IACPC,WAAW;IACXa,UAAU;IACVC;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}