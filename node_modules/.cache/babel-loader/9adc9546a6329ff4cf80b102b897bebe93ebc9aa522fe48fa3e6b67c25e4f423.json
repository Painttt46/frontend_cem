{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport axios from 'axios';\nexport default {\n  name: 'TaskList',\n  created() {\n    this.$http = axios.create({\n      baseURL: ''\n    });\n    this.loadTasks();\n  },\n  mounted() {\n    // Listen for task updates\n    window.addEventListener('taskUpdated', this.handleTaskUpdate);\n    window.addEventListener('workRecordUpdated', this.handleTaskUpdate);\n    window.addEventListener('taskStatusChanged', this.handleTaskUpdate);\n    window.addEventListener('categoriesUpdated', this.handleCategoriesUpdate);\n    window.addEventListener('statusesUpdated', this.handleStatusesUpdate);\n\n    // Load categories, statuses and tasks\n    this.loadCategoriesFromStorage();\n    this.loadStatusesFromStorage();\n    this.loadTasks();\n  },\n  beforeUnmount() {\n    window.removeEventListener('taskUpdated', this.handleTaskUpdate);\n    window.removeEventListener('workRecordUpdated', this.handleTaskUpdate);\n    window.removeEventListener('taskStatusChanged', this.handleTaskUpdate);\n    window.removeEventListener('categoriesUpdated', this.handleCategoriesUpdate);\n    window.removeEventListener('statusesUpdated', this.handleStatusesUpdate);\n  },\n  data() {\n    return {\n      searchQuery: '',\n      tasks: [],\n      detailDialog: false,\n      selectedTask: null,\n      filesDialog: false,\n      selectedTaskFiles: [],\n      editDialog: false,\n      taskWorksDialog: false,\n      taskWorks: [],\n      loadingWorks: false,\n      editFormData: {\n        id: null,\n        task_name: '',\n        so_number: '',\n        contract_number: '',\n        sale_owner: '',\n        description: '',\n        category: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',\n        existingFiles: [],\n        newFiles: []\n      },\n      categoryOptions: [{\n        label: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',\n        value: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ'\n      }, {\n        label: '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö',\n        value: '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö'\n      }, {\n        label: '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤',\n        value: '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤'\n      }, {\n        label: '‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°',\n        value: '‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°'\n      }, {\n        label: '‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°',\n        value: '‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°'\n      }, {\n        label: '‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢',\n        value: '‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢'\n      }, {\n        label: '‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£',\n        value: '‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£'\n      }, {\n        label: '‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤',\n        value: '‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤'\n      }],\n      categories: [],\n      workStatuses: []\n    };\n  },\n  computed: {\n    filteredTasks() {\n      const tasks = this.tasks || [];\n      if (!this.searchQuery) return tasks;\n      const query = this.searchQuery.toLowerCase().trim();\n      return tasks.filter(task => {\n        const searchableData = {\n          id: task.id || '',\n          task_name: task.task_name || '',\n          so_number: task.so_number || '',\n          contract_number: task.contract_number || '',\n          sale_owner: task.sale_owner || '',\n          description: task.description || '',\n          category: task.category || '',\n          status: task.status || '',\n          created_by: task.created_by || ''\n        };\n        return Object.values(searchableData).some(value => {\n          if (value === null || value === undefined) return false;\n          const strValue = String(value).toLowerCase();\n          return strValue.includes(query) || strValue.replace(/\\s/g, '').includes(query.replace(/\\s/g, ''));\n        });\n      });\n    },\n    totalHours() {\n      return this.taskWorks.reduce((sum, work) => sum + (work.total_hours || 0), 0).toFixed(1);\n    }\n  },\n  methods: {\n    loadCategoriesFromStorage() {\n      const saved = localStorage.getItem('task_categories');\n      if (saved) {\n        this.categories = JSON.parse(saved);\n      } else {\n        // Default categories same as TaskManagement\n        this.categories = [{\n          label: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',\n          value: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',\n          icon: 'emoji:üíº'\n        }, {\n          label: '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤',\n          value: '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤',\n          icon: 'emoji:üíª'\n        }, {\n          label: '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤',\n          value: '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤',\n          icon: 'emoji:üîß'\n        }];\n      }\n    },\n    loadStatusesFromStorage() {\n      const saved = localStorage.getItem('work_statuses');\n      if (saved) {\n        this.workStatuses = JSON.parse(saved);\n      } else {\n        // Default statuses same as TaskManagement\n        this.workStatuses = [{\n          label: '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',\n          value: 'pending',\n          icon: 'emoji:‚è≥'\n        }, {\n          label: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',\n          value: 'in_progress',\n          icon: 'emoji:üîÑ'\n        }, {\n          label: '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô',\n          value: 'completed',\n          icon: 'emoji:‚úÖ'\n        }, {\n          label: '‡∏£‡∏∞‡∏á‡∏±‡∏ö',\n          value: 'on_hold',\n          icon: 'emoji:‚è∏Ô∏è'\n        }];\n      }\n    },\n    getCategoryIcon(categoryValue) {\n      const category = this.categories.find(cat => cat.value === categoryValue);\n      return category ? category.icon : 'pi pi-tag';\n    },\n    getCategoryLabel(categoryValue) {\n      const category = this.categories.find(cat => cat.value === categoryValue);\n      return category ? category.label : categoryValue;\n    },\n    getStatusIcon(statusValue) {\n      const status = this.workStatuses.find(s => s.value === statusValue);\n      return status ? status.icon : 'pi pi-circle';\n    },\n    getStatusLabel(statusValue) {\n      const status = this.workStatuses.find(s => s.value === statusValue);\n      return status ? status.label : statusValue;\n    },\n    async loadTasks() {\n      try {\n        const response = await this.$http.get('/api/tasks');\n        // ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á format array ‡∏ï‡∏£‡∏á‡πÜ ‡πÅ‡∏•‡∏∞ format ‡∏ó‡∏µ‡πà‡∏°‡∏µ wrapper\n        this.tasks = response.data.data || response.data || [];\n      } catch (error) {\n        this.tasks = [];\n        this.$toast.add({\n          severity: 'error',\n          summary: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\n          detail: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ',\n          life: 5000\n        });\n      }\n    },\n    formatDate(date) {\n      if (!date) return '-';\n      try {\n        return new Date(date).toLocaleDateString('th-TH', {\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric'\n        });\n      } catch (error) {\n        return date;\n      }\n    },\n    showTaskDetails(task) {\n      this.selectedTask = task;\n      this.detailDialog = true;\n    },\n    hasFiles(task) {\n      return task.files && Array.isArray(task.files) && task.files.length > 0;\n    },\n    downloadTaskFiles(task) {\n      if (this.hasFiles(task)) {\n        this.selectedTaskFiles = task.files;\n        this.filesDialog = true;\n      }\n    },\n    downloadFile(fileName) {\n      // Create download link\n      const link = document.createElement('a');\n      link.href = `/api/files/download/${fileName}`;\n      link.download = fileName;\n      link.target = '_blank';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    },\n    getStatusSeverity(status) {\n      const severities = {\n        'completed': 'success',\n        'in_progress': 'info',\n        'pending': 'warning',\n        'on_hold': 'secondary'\n      };\n      return severities[status] || 'secondary';\n    },\n    getCategorySeverity(category) {\n      const severities = {\n        '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ': 'contrast',\n        '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö': 'info',\n        '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤': 'warning',\n        '‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°': 'success',\n        '‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°': 'primary',\n        '‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢': 'danger',\n        '‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£': 'secondary',\n        '‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤': 'help'\n      };\n      return severities[category] || 'secondary';\n    },\n    editTask(task) {\n      this.editFormData = {\n        id: task.id,\n        task_name: task.task_name,\n        so_number: task.so_number || '',\n        contract_number: task.contract_number || '',\n        sale_owner: task.sale_owner || '',\n        description: task.description || '',\n        category: task.category || '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',\n        status: task.status || 'pending',\n        existingFiles: [...(task.files || [])],\n        newFiles: []\n      };\n      this.editDialog = true;\n    },\n    handleEditFileUpload(event) {\n      const files = Array.from(event.target.files);\n      this.editFormData.newFiles = [...this.editFormData.newFiles, ...files];\n    },\n    removeExistingFile(index) {\n      this.editFormData.existingFiles.splice(index, 1);\n    },\n    removeNewFile(index) {\n      this.editFormData.newFiles.splice(index, 1);\n    },\n    async uploadNewFiles() {\n      if (this.editFormData.newFiles.length === 0) return [];\n      const formData = new FormData();\n      this.editFormData.newFiles.forEach(file => {\n        formData.append('files', file);\n      });\n      try {\n        const response = await this.$http.post('/api/files/upload', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        return response.data.files || [];\n      } catch (error) {\n        return [];\n      }\n    },\n    async updateTask() {\n      try {\n        // Upload ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà\n        const newUploadedFiles = await this.uploadNewFiles();\n\n        // ‡∏£‡∏ß‡∏°‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà\n        const allFiles = [...this.editFormData.existingFiles, ...newUploadedFiles];\n        const updateData = {\n          ...this.editFormData,\n          files: allFiles\n        };\n        delete updateData.existingFiles;\n        delete updateData.newFiles;\n        await this.$http.put(`/api/tasks/${this.editFormData.id}`, updateData);\n        this.$toast.add({\n          severity: 'success',\n          summary: '‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',\n          detail: '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß',\n          life: 3000\n        });\n        this.editDialog = false;\n\n        // Auto-refresh data\n        await this.loadTasks();\n\n        // Dispatch global event for real-time update\n        window.dispatchEvent(new CustomEvent('taskUpdated'));\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\n          detail: error.response?.data?.error || '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ',\n          life: 5000\n        });\n      }\n    },\n    handleTaskUpdate() {\n      // Auto-refresh tasks when updated\n      this.loadTasks();\n    },\n    handleCategoriesUpdate(event) {\n      this.categories = event.detail || [];\n    },\n    handleStatusesUpdate(event) {\n      this.workStatuses = event.detail || [];\n    },\n    async refreshData() {\n      // Method for external refresh calls\n      await this.loadTasks();\n    },\n    async viewTaskWorks(task) {\n      this.selectedTask = task;\n      this.loadingWorks = true;\n      this.taskWorksDialog = true;\n      try {\n        const response = await this.$http.get(`/api/daily-work?task_id=${task.id}`);\n        this.taskWorks = response.data;\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\n          detail: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡πÑ‡∏î‡πâ',\n          life: 3000\n        });\n        this.taskWorks = [];\n      } finally {\n        this.loadingWorks = false;\n      }\n    },\n    formatDateTime(date) {\n      try {\n        return new Date(date).toLocaleString('th-TH', {\n          year: 'numeric',\n          month: 'short',\n          day: 'numeric',\n          hour: '2-digit',\n          minute: '2-digit'\n        });\n      } catch (error) {\n        return date;\n      }\n    },\n    getWorkStatusLabel(status) {\n      const statusMap = {\n        'completed': '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå',\n        'in_progress': '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',\n        'pending': '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',\n        'on_hold': '‡∏£‡∏∞‡∏á‡∏±‡∏ö'\n      };\n      return statusMap[status] || status;\n    },\n    getWorkStatusSeverity(status) {\n      const severities = {\n        'completed': 'success',\n        'in_progress': 'info',\n        'pending': 'warning',\n        'on_hold': 'secondary'\n      };\n      return severities[status] || 'secondary';\n    }\n  }\n};","map":{"version":3,"names":["axios","name","created","$http","create","baseURL","loadTasks","mounted","window","addEventListener","handleTaskUpdate","handleCategoriesUpdate","handleStatusesUpdate","loadCategoriesFromStorage","loadStatusesFromStorage","beforeUnmount","removeEventListener","data","searchQuery","tasks","detailDialog","selectedTask","filesDialog","selectedTaskFiles","editDialog","taskWorksDialog","taskWorks","loadingWorks","editFormData","id","task_name","so_number","contract_number","sale_owner","description","category","existingFiles","newFiles","categoryOptions","label","value","categories","workStatuses","computed","filteredTasks","query","toLowerCase","trim","filter","task","searchableData","status","created_by","Object","values","some","undefined","strValue","String","includes","replace","totalHours","reduce","sum","work","total_hours","toFixed","methods","saved","localStorage","getItem","JSON","parse","icon","getCategoryIcon","categoryValue","find","cat","getCategoryLabel","getStatusIcon","statusValue","s","getStatusLabel","response","get","error","$toast","add","severity","summary","detail","life","formatDate","date","Date","toLocaleDateString","year","month","day","showTaskDetails","hasFiles","files","Array","isArray","length","downloadTaskFiles","downloadFile","fileName","link","document","createElement","href","download","target","body","appendChild","click","removeChild","getStatusSeverity","severities","getCategorySeverity","editTask","handleEditFileUpload","event","from","removeExistingFile","index","splice","removeNewFile","uploadNewFiles","formData","FormData","forEach","file","append","post","headers","updateTask","newUploadedFiles","allFiles","updateData","put","dispatchEvent","CustomEvent","refreshData","viewTaskWorks","formatDateTime","toLocaleString","hour","minute","getWorkStatusLabel","statusMap","getWorkStatusSeverity"],"sources":["D:\\FULLACC\\frontend_cem-main\\src\\views\\daily_work\\TaskList.vue"],"sourcesContent":["<template>\n  <Card class=\"history-card\">\n    <template #content>\n      <!-- Search Box -->\n      <div class=\"search-box mb-3\">\n        <IconField iconPosition=\"left\">\n          <InputIcon class=\"pi pi-search\" />\n          <InputText v-model=\"searchQuery\" placeholder=\"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...\" class=\"w-full\" />\n        </IconField>\n      </div>\n\n      <div v-if=\"filteredTasks.length === 0\" class=\"empty-state\">\n        <i class=\"pi pi-briefcase\" style=\"font-size: 4rem; color: #ccc;\"></i>\n        <p>{{ searchQuery ? '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤' : '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ß‡πâ' }}</p>\n      </div>\n\n      <DataTable v-else :value=\"filteredTasks\" :paginator=\"true\" :rows=\"10\"\n        :rowsPerPageOptions=\"[5, 10, 20]\" responsiveLayout=\"scroll\" class=\"history-table\" stripedRows>\n        \n        <Column field=\"id\" header=\"‡∏£‡∏´‡∏±‡∏™‡∏á‡∏≤‡∏ô\" :sortable=\"true\">\n          <template #body=\"slotProps\">\n            <div style=\"text-align: center;\">\n              <Badge :value=\"slotProps.data.id\" class=\"custom-id-badge\" />\n            </div>\n          </template>\n        </Column>\n\n        <Column field=\"task_name\" header=\"‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£\" :sortable=\"true\" style=\"min-width: 150px; max-width: 250px;\">\n          <template #body=\"slotProps\">\n            <div class=\"task-name\">{{ slotProps.data.task_name }}</div>\n          </template>\n        </Column>\n\n        <Column field=\"so_number\" header=\"‡πÄ‡∏•‡∏Ç SO\" class=\"hide-mobile\">\n          <template #body=\"slotProps\">\n            <div v-if=\"slotProps.data.so_number\" class=\"so-number\">\n              {{ slotProps.data.so_number }}\n            </div>\n            <span v-else class=\"text-muted\">-</span>\n          </template>\n        </Column>\n\n        <Column field=\"contract_number\" header=\"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏ç‡∏ç‡∏≤\" class=\"hide-mobile\">\n          <template #body=\"slotProps\">\n            {{ slotProps.data.contract_number || '-' }}\n          </template>\n        </Column>\n\n        <Column field=\"sale_owner\" header=\"Sale ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô\" class=\"hide-mobile\">\n          <template #body=\"slotProps\">\n            <div v-if=\"slotProps.data.sale_owner\" class=\"sale-info\">\n              <i class=\"pi pi-user\"></i>\n              {{ slotProps.data.sale_owner }}\n            </div>\n            <span v-else class=\"text-muted\">-</span>\n          </template>\n        </Column>\n\n        <Column field=\"category\" header=\"‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà\" :sortable=\"true\" style=\"min-width: 120px;\">\n          <template #body=\"slotProps\">\n            <Badge :value=\"slotProps.data.category || '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ'\" :severity=\"getCategorySeverity(slotProps.data.category)\" class=\"category-badge\" />\n          </template>\n        </Column>\n\n        <Column field=\"created_at\" header=\"‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£\" :sortable=\"true\">\n          <template #body=\"slotProps\">\n            {{ formatDate(slotProps.data.created_at) }}\n          </template>\n        </Column>\n\n        <Column field=\"project_end_date\" header=\"‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£\" :sortable=\"true\" class=\"hide-mobile\">\n          <template #body=\"slotProps\">\n            {{ slotProps.data.project_end_date ? formatDate(slotProps.data.project_end_date) : '-' }}\n          </template>\n        </Column>\n\n        <Column header=\"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î\" class=\"hide-mobile\">\n          <template #body=\"slotProps\">\n            <Button \n              label=\"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î\" \n              icon=\"pi pi-info-circle\" \n              size=\"small\" \n              severity=\"info\" \n              outlined \n              @click=\"showTaskDetails(slotProps.data)\"\n              :disabled=\"!slotProps.data.description\" />\n          </template>\n        </Column>\n\n        <Column header=\"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£\" style=\"width: 150px;\">\n          <template #body=\"slotProps\">\n            <div class=\"action-buttons\">\n              <Button \n                icon=\"pi pi-eye\" \n                size=\"small\" \n                severity=\"info\" \n                outlined\n                @click=\"viewTaskWorks(slotProps.data)\"\n                v-tooltip=\"'‡∏î‡∏π‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô'\"\n              />\n              <Button \n                icon=\"pi pi-pencil\" \n                size=\"small\" \n                severity=\"warning\" \n                outlined\n                @click=\"editTask(slotProps.data)\"\n                v-tooltip=\"'‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç'\"\n              />\n            </div>\n          </template>\n        </Column>\n\n        <Column header=\"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞\" style=\"width: 100px;\">\n          <template #body=\"slotProps\">\n            <Badge :value=\"getStatusLabel(slotProps.data.status)\" :severity=\"getStatusSeverity(slotProps.data.status)\" />\n          </template>\n        </Column>\n\n        <Column header=\"‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö\" style=\"width: 80px;\">\n          <template #body=\"slotProps\">\n            <div v-if=\"hasFiles(slotProps.data)\" class=\"attachments-info\">\n              <Button \n                icon=\"pi pi-paperclip\" \n                size=\"small\" \n                severity=\"info\" \n                outlined\n                @click=\"downloadTaskFiles(slotProps.data)\"\n                v-tooltip=\"`${slotProps.data.files.length} ‡πÑ‡∏ü‡∏•‡πå`\"\n              />\n            </div>\n            <span v-else class=\"no-files\">-</span>\n          </template>\n        </Column>\n      </DataTable>\n    </template>\n  </Card>\n\n  <!-- Dialog ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô -->\n  <div v-if=\"detailDialog\" class=\"dialog-overlay\" @click=\"detailDialog = false\">\n    <div class=\"dialog-content\" @click.stop>\n      <div class=\"dialog-header\">\n        <h3>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô</h3>\n        <button class=\"dialog-close\" @click=\"detailDialog = false\">&times;</button>\n      </div>\n      <div class=\"dialog-body\">\n        <div class=\"work-description\">\n          {{ selectedTask?.description || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î' }}\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Files Dialog -->\n  <Dialog v-model:visible=\"filesDialog\" modal header=\"‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö\" :style=\"{ width: '50rem' }\">\n    <div v-if=\"selectedTaskFiles && selectedTaskFiles.length > 0\" class=\"files-list\">\n      <div v-for=\"(file, index) in selectedTaskFiles\" :key=\"index\" class=\"file-item\">\n        <div class=\"file-info\">\n          <i class=\"pi pi-file\"></i>\n          <span class=\"file-name\">{{ file }}</span>\n        </div>\n        <Button \n          icon=\"pi pi-download\" \n          size=\"small\" \n          severity=\"success\" \n          outlined\n          @click=\"downloadFile(file)\"\n          v-tooltip=\"'‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î'\"\n        />\n      </div>\n    </div>\n    <div v-else class=\"no-files\">\n      <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö</p>\n    </div>\n  </Dialog>\n\n  <!-- Task Works Dialog -->\n  <Dialog v-model:visible=\"taskWorksDialog\" modal :header=\"`‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£: ${selectedTask?.task_name || ''}`\" \n          :style=\"{ width: '90vw', maxWidth: '1200px' }\" :draggable=\"false\" position=\"center\">\n    <div v-if=\"loadingWorks\" class=\"loading-state\">\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2rem;\"></i>\n      <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>\n    </div>\n    \n    <div v-else-if=\"taskWorks.length === 0\" class=\"empty-works\">\n      <i class=\"pi pi-inbox\" style=\"font-size: 3rem; color: #ccc;\"></i>\n      <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ</p>\n    </div>\n    \n    <DataTable v-else :value=\"taskWorks\" :paginator=\"true\" :rows=\"10\" \n               responsiveLayout=\"scroll\" stripedRows class=\"works-table\">\n      <Column field=\"id\" header=\"ID\" style=\"width: 80px; text-align: center;\">\n        <template #body=\"slotProps\">\n          <Badge :value=\"slotProps.data.id\" severity=\"info\" />\n        </template>\n      </Column>\n      \n      <Column field=\"work_date\" header=\"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà\" :sortable=\"true\">\n        <template #body=\"slotProps\">\n          {{ formatDate(slotProps.data.work_date) }}\n        </template>\n      </Column>\n      \n      <Column field=\"employee_name\" header=\"‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô\" :sortable=\"true\">\n        <template #body=\"slotProps\">\n          {{ slotProps.data.employee_name || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏' }}\n        </template>\n      </Column>\n      \n      <Column field=\"start_time\" header=\"‡πÄ‡∏ß‡∏•‡∏≤\">\n        <template #body=\"slotProps\">\n          {{ slotProps.data.start_time }} - {{ slotProps.data.end_time }}\n        </template>\n      </Column>\n      \n      <Column field=\"total_hours\" header=\"‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á\" style=\"text-align: center;\">\n        <template #body=\"slotProps\">\n          {{ slotProps.data.total_hours?.toFixed(1) || '0' }} ‡∏ä‡∏°.\n        </template>\n      </Column>\n      \n      <Column field=\"work_status\" header=\"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞\" style=\"text-align: center;\">\n        <template #body=\"slotProps\">\n          <Badge :value=\"getWorkStatusLabel(slotProps.data.work_status)\" \n                 :severity=\"getWorkStatusSeverity(slotProps.data.work_status)\" />\n        </template>\n      </Column>\n      \n      <Column field=\"location\" header=\"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà\" />\n      \n      <Column header=\"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î\">\n        <template #body=\"slotProps\">\n          <Button label=\"‡∏î‡∏π\" icon=\"pi pi-info-circle\" size=\"small\" \n                  severity=\"info\" text @click=\"showTaskDetails(slotProps.data)\" />\n        </template>\n      </Column>\n    </DataTable>\n    \n    <template #footer>\n      <div class=\"dialog-footer-stats\">\n        <div class=\"stat-item\">\n          <i class=\"pi pi-calendar\"></i>\n          <span>‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <strong>{{ taskWorks.length }}</strong> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>\n        </div>\n        <div class=\"stat-item\">\n          <i class=\"pi pi-clock\"></i>\n          <span>‡∏£‡∏ß‡∏°: <strong>{{ totalHours }}</strong> ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</span>\n        </div>\n      </div>\n      <Button label=\"‡∏õ‡∏¥‡∏î\" icon=\"pi pi-times\" @click=\"taskWorksDialog = false\" />\n    </template>\n  </Dialog>\n\n  <!-- Edit Task Dialog -->\n  <Dialog v-model:visible=\"editDialog\" modal header=\"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô\" :style=\"{ width: '50rem' }\" :draggable=\"false\" position=\"center\">\n    <form @submit.prevent=\"updateTask\" class=\"edit-form\">\n      <div class=\"form-grid\">\n        <div class=\"input-group\">\n          <label class=\"input-label\">‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô *</label>\n          <InputText v-model=\"editFormData.task_name\" required class=\"corporate-input\" />\n        </div>\n        \n        <div class=\"input-group\">\n          <label class=\"input-label\">SO Number</label>\n          <InputText v-model=\"editFormData.so_number\" class=\"corporate-input\" />\n        </div>\n        \n        <div class=\"input-group\">\n          <label class=\"input-label\">Contract Number</label>\n          <InputText v-model=\"editFormData.contract_number\" class=\"corporate-input\" />\n        </div>\n        \n        <div class=\"input-group\">\n          <label class=\"input-label\">Sale Owner</label>\n          <InputText v-model=\"editFormData.sale_owner\" class=\"corporate-input\" />\n        </div>\n\n        <div class=\"input-group\">\n          <label class=\"input-label\">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏á‡∏≤‡∏ô *</label>\n          <Dropdown v-model=\"editFormData.category\" :options=\"categories\" \n                    optionLabel=\"label\" optionValue=\"value\" placeholder=\"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏á‡∏≤‡∏ô\" \n                    class=\"corporate-input\" required>\n            <template #value=\"slotProps\">\n              <div v-if=\"slotProps.value\" class=\"category-display\">\n                <span v-if=\"getCategoryIcon(slotProps.value) && getCategoryIcon(slotProps.value).startsWith('emoji:')\" \n                      class=\"emoji\">{{ getCategoryIcon(slotProps.value).replace('emoji:', '') }}</span>\n                <i v-else :class=\"getCategoryIcon(slotProps.value) || 'pi pi-tag'\"></i>\n                <span>{{ getCategoryLabel(slotProps.value) }}</span>\n              </div>\n            </template>\n            <template #option=\"slotProps\">\n              <div class=\"category-option\">\n                <span v-if=\"slotProps.option.icon && slotProps.option.icon.startsWith('emoji:')\" \n                      class=\"emoji\">{{ slotProps.option.icon.replace('emoji:', '') }}</span>\n                <i v-else :class=\"slotProps.option.icon || 'pi pi-tag'\"></i>\n                <span>{{ slotProps.option.label }}</span>\n              </div>\n            </template>\n          </Dropdown>\n        </div>\n\n        <div class=\"input-group\">\n          <label class=\"input-label\">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô</label>\n          <Dropdown v-model=\"editFormData.status\" :options=\"workStatuses\" \n                    optionLabel=\"label\" optionValue=\"value\" placeholder=\"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô\" \n                    class=\"corporate-input\">\n            <template #value=\"slotProps\">\n              <div v-if=\"slotProps.value\" class=\"status-display\">\n                <span v-if=\"getStatusIcon(slotProps.value) && getStatusIcon(slotProps.value).startsWith('emoji:')\" \n                      class=\"emoji\">{{ getStatusIcon(slotProps.value).replace('emoji:', '') }}</span>\n                <i v-else :class=\"getStatusIcon(slotProps.value) || 'pi pi-circle'\"></i>\n                <span>{{ getStatusLabel(slotProps.value) }}</span>\n              </div>\n            </template>\n            <template #option=\"slotProps\">\n              <div class=\"status-option\">\n                <span v-if=\"slotProps.option.icon && slotProps.option.icon.startsWith('emoji:')\" \n                      class=\"emoji\">{{ slotProps.option.icon.replace('emoji:', '') }}</span>\n                <i v-else :class=\"slotProps.option.icon || 'pi pi-circle'\"></i>\n                <span>{{ slotProps.option.label }}</span>\n              </div>\n            </template>\n          </Dropdown>\n        </div>\n        \n        <div class=\"input-group full-width\">\n          <label class=\"input-label\">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>\n          <Textarea v-model=\"editFormData.description\" rows=\"4\" class=\"corporate-input\" />\n        </div>\n\n        <div class=\"input-group full-width\">\n          <label class=\"input-label\">‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö</label>\n          <div class=\"file-upload-section\">\n            <input type=\"file\" ref=\"editFileInput\" @change=\"handleEditFileUpload\" \n              accept=\"image/*,.pdf,.doc,.docx,.xls,.xlsx\" multiple class=\"file-input\" style=\"display: none;\">\n            <Button type=\"button\" \n              label=\"‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå\" \n              icon=\"pi pi-upload\" \n              severity=\"secondary\" \n              outlined \n              @click=\"$refs.editFileInput.click()\" />\n          </div>\n          \n          <!-- ‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏° -->\n          <div v-if=\"editFormData.existingFiles?.length > 0\" class=\"existing-files\">\n            <h4>‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°:</h4>\n            <div v-for=\"(file, index) in editFormData.existingFiles\" :key=\"index\" class=\"file-item\">\n              <i class=\"pi pi-file\"></i>\n              <span class=\"file-name\">{{ file }}</span>\n              <Button icon=\"pi pi-times\" size=\"small\" severity=\"danger\" text @click=\"removeExistingFile(index)\" />\n            </div>\n          </div>\n          \n          <!-- ‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà -->\n          <div v-if=\"editFormData.newFiles?.length > 0\" class=\"new-files\">\n            <h4>‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà:</h4>\n            <div v-for=\"(file, index) in editFormData.newFiles\" :key=\"index\" class=\"file-item\">\n              <i class=\"pi pi-file\"></i>\n              <span class=\"file-name\">{{ file.name }}</span>\n              <Button icon=\"pi pi-times\" size=\"small\" severity=\"danger\" text @click=\"removeNewFile(index)\" />\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"form-actions\">\n        <Button type=\"button\" label=\"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å\" severity=\"secondary\" outlined @click=\"editDialog = false\" />\n        <Button type=\"submit\" label=\"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å\" severity=\"success\" />\n      </div>\n    </form>\n  </Dialog>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  name: 'TaskList',\n  created() {\n    this.$http = axios.create({\n      baseURL: ''\n    })\n    this.loadTasks()\n  },\n  mounted() {\n    // Listen for task updates\n    window.addEventListener('taskUpdated', this.handleTaskUpdate)\n    window.addEventListener('workRecordUpdated', this.handleTaskUpdate)\n    window.addEventListener('taskStatusChanged', this.handleTaskUpdate)\n    window.addEventListener('categoriesUpdated', this.handleCategoriesUpdate)\n    window.addEventListener('statusesUpdated', this.handleStatusesUpdate)\n    \n    // Load categories, statuses and tasks\n    this.loadCategoriesFromStorage()\n    this.loadStatusesFromStorage()\n    this.loadTasks()\n  },\n  beforeUnmount() {\n    window.removeEventListener('taskUpdated', this.handleTaskUpdate)\n    window.removeEventListener('workRecordUpdated', this.handleTaskUpdate)\n    window.removeEventListener('taskStatusChanged', this.handleTaskUpdate)\n    window.removeEventListener('categoriesUpdated', this.handleCategoriesUpdate)\n    window.removeEventListener('statusesUpdated', this.handleStatusesUpdate)\n  },\n  data() {\n    return {\n      searchQuery: '',\n      tasks: [],\n      detailDialog: false,\n      selectedTask: null,\n      filesDialog: false,\n      selectedTaskFiles: [],\n      editDialog: false,\n      taskWorksDialog: false,\n      taskWorks: [],\n      loadingWorks: false,\n      editFormData: {\n        id: null,\n        task_name: '',\n        so_number: '',\n        contract_number: '',\n        sale_owner: '',\n        description: '',\n        category: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',\n        existingFiles: [],\n        newFiles: []\n      },\n      categoryOptions: [\n        { label: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ', value: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ' },\n        { label: '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö', value: '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö' },\n        { label: '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤', value: '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤' },\n        { label: '‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°', value: '‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°' },\n        { label: '‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°', value: '‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°' },\n        { label: '‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢', value: '‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢' },\n        { label: '‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£', value: '‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£' },\n        { label: '‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤', value: '‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤' }\n      ],\n      categories: [],\n      workStatuses: []\n    }\n  },\n  computed: {\n    filteredTasks() {\n      const tasks = this.tasks || []\n      if (!this.searchQuery) return tasks\n\n      const query = this.searchQuery.toLowerCase().trim()\n      return tasks.filter(task => {\n        const searchableData = {\n          id: task.id || '',\n          task_name: task.task_name || '',\n          so_number: task.so_number || '',\n          contract_number: task.contract_number || '',\n          sale_owner: task.sale_owner || '',\n          description: task.description || '',\n          category: task.category || '',\n          status: task.status || '',\n          created_by: task.created_by || ''\n        }\n        \n        return Object.values(searchableData).some(value => {\n          if (value === null || value === undefined) return false\n          const strValue = String(value).toLowerCase()\n          return strValue.includes(query) || strValue.replace(/\\s/g, '').includes(query.replace(/\\s/g, ''))\n        })\n      })\n    },\n    totalHours() {\n      return this.taskWorks.reduce((sum, work) => sum + (work.total_hours || 0), 0).toFixed(1)\n    }\n  },\n  methods: {\n    loadCategoriesFromStorage() {\n      const saved = localStorage.getItem('task_categories')\n      if (saved) {\n        this.categories = JSON.parse(saved)\n      } else {\n        // Default categories same as TaskManagement\n        this.categories = [\n          { label: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ', value: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ', icon: 'emoji:üíº' },\n          { label: '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤', value: '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤', icon: 'emoji:üíª' },\n          { label: '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤', value: '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤', icon: 'emoji:üîß' }\n        ]\n      }\n    },\n    loadStatusesFromStorage() {\n      const saved = localStorage.getItem('work_statuses')\n      if (saved) {\n        this.workStatuses = JSON.parse(saved)\n      } else {\n        // Default statuses same as TaskManagement\n        this.workStatuses = [\n          { label: '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£', value: 'pending', icon: 'emoji:‚è≥' },\n          { label: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£', value: 'in_progress', icon: 'emoji:üîÑ' },\n          { label: '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô', value: 'completed', icon: 'emoji:‚úÖ' },\n          { label: '‡∏£‡∏∞‡∏á‡∏±‡∏ö', value: 'on_hold', icon: 'emoji:‚è∏Ô∏è' }\n        ]\n      }\n    },\n    getCategoryIcon(categoryValue) {\n      const category = this.categories.find(cat => cat.value === categoryValue)\n      return category ? category.icon : 'pi pi-tag'\n    },\n    getCategoryLabel(categoryValue) {\n      const category = this.categories.find(cat => cat.value === categoryValue)\n      return category ? category.label : categoryValue\n    },\n    getStatusIcon(statusValue) {\n      const status = this.workStatuses.find(s => s.value === statusValue)\n      return status ? status.icon : 'pi pi-circle'\n    },\n    getStatusLabel(statusValue) {\n      const status = this.workStatuses.find(s => s.value === statusValue)\n      return status ? status.label : statusValue\n    },\n    async loadTasks() {\n      try {\n        const response = await this.$http.get('/api/tasks')\n        // ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á format array ‡∏ï‡∏£‡∏á‡πÜ ‡πÅ‡∏•‡∏∞ format ‡∏ó‡∏µ‡πà‡∏°‡∏µ wrapper\n        this.tasks = response.data.data || response.data || []\n      } catch (error) {\n        this.tasks = []\n        this.$toast.add({\n          severity: 'error',\n          summary: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\n          detail: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ',\n          life: 5000\n        })\n      }\n    },\n    formatDate(date) {\n      if (!date) return '-'\n      try {\n        return new Date(date).toLocaleDateString('th-TH', {\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric'\n        })\n      } catch (error) {\n        return date\n      }\n    },\n    showTaskDetails(task) {\n      this.selectedTask = task\n      this.detailDialog = true\n    },\n    hasFiles(task) {\n      return task.files && Array.isArray(task.files) && task.files.length > 0\n    },\n    downloadTaskFiles(task) {\n      if (this.hasFiles(task)) {\n        this.selectedTaskFiles = task.files\n        this.filesDialog = true\n      }\n    },\n    downloadFile(fileName) {\n      // Create download link\n      const link = document.createElement('a')\n      link.href = `/api/files/download/${fileName}`\n      link.download = fileName\n      link.target = '_blank'\n      document.body.appendChild(link)\n      link.click()\n      document.body.removeChild(link)\n    },\n    getStatusSeverity(status) {\n      const severities = {\n        'completed': 'success',\n        'in_progress': 'info', \n        'pending': 'warning',\n        'on_hold': 'secondary'\n      }\n      return severities[status] || 'secondary'\n    },\n    getCategorySeverity(category) {\n      const severities = {\n        '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ': 'contrast',\n        '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö': 'info',\n        '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤': 'warning',\n        '‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°': 'success',\n        '‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°': 'primary',\n        '‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢': 'danger',\n        '‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£': 'secondary',\n        '‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤': 'help'\n      }\n      return severities[category] || 'secondary'\n    },\n    editTask(task) {\n      this.editFormData = {\n        id: task.id,\n        task_name: task.task_name,\n        so_number: task.so_number || '',\n        contract_number: task.contract_number || '',\n        sale_owner: task.sale_owner || '',\n        description: task.description || '',\n        category: task.category || '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',\n        status: task.status || 'pending',\n        existingFiles: [...(task.files || [])],\n        newFiles: []\n      }\n      this.editDialog = true\n    },\n    handleEditFileUpload(event) {\n      const files = Array.from(event.target.files)\n      this.editFormData.newFiles = [...this.editFormData.newFiles, ...files]\n    },\n    removeExistingFile(index) {\n      this.editFormData.existingFiles.splice(index, 1)\n    },\n    removeNewFile(index) {\n      this.editFormData.newFiles.splice(index, 1)\n    },\n    async uploadNewFiles() {\n      if (this.editFormData.newFiles.length === 0) return []\n      \n      const formData = new FormData()\n      this.editFormData.newFiles.forEach(file => {\n        formData.append('files', file)\n      })\n      \n      try {\n        const response = await this.$http.post('/api/files/upload', formData, {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        })\n        return response.data.files || []\n      } catch (error) {\n        return []\n      }\n    },\n    async updateTask() {\n      try {\n        // Upload ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà\n        const newUploadedFiles = await this.uploadNewFiles()\n        \n        // ‡∏£‡∏ß‡∏°‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà\n        const allFiles = [...this.editFormData.existingFiles, ...newUploadedFiles]\n        \n        const updateData = {\n          ...this.editFormData,\n          files: allFiles\n        }\n        delete updateData.existingFiles\n        delete updateData.newFiles\n        \n        await this.$http.put(`/api/tasks/${this.editFormData.id}`, updateData)\n        \n        this.$toast.add({\n          severity: 'success',\n          summary: '‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',\n          detail: '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß',\n          life: 3000\n        })\n        \n        this.editDialog = false\n        \n        // Auto-refresh data\n        await this.loadTasks()\n        \n        // Dispatch global event for real-time update\n        window.dispatchEvent(new CustomEvent('taskUpdated'))\n        \n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\n          detail: error.response?.data?.error || '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ',\n          life: 5000\n        })\n      }\n    },\n    handleTaskUpdate() {\n      // Auto-refresh tasks when updated\n      this.loadTasks()\n    },\n    handleCategoriesUpdate(event) {\n      this.categories = event.detail || []\n    },\n    handleStatusesUpdate(event) {\n      this.workStatuses = event.detail || []\n    },\n    async refreshData() {\n      // Method for external refresh calls\n      await this.loadTasks()\n    },\n    async viewTaskWorks(task) {\n      this.selectedTask = task\n      this.loadingWorks = true\n      this.taskWorksDialog = true\n      \n      try {\n        const response = await this.$http.get(`/api/daily-work?task_id=${task.id}`)\n        this.taskWorks = response.data\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\n          detail: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡πÑ‡∏î‡πâ',\n          life: 3000\n        })\n        this.taskWorks = []\n      } finally {\n        this.loadingWorks = false\n      }\n    },\n    formatDateTime(date) {\n      try {\n        return new Date(date).toLocaleString('th-TH', {\n          year: 'numeric',\n          month: 'short',\n          day: 'numeric',\n          hour: '2-digit',\n          minute: '2-digit'\n        })\n      } catch (error) {\n        return date\n      }\n    },\n    getWorkStatusLabel(status) {\n      const statusMap = {\n        'completed': '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå',\n        'in_progress': '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',\n        'pending': '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',\n        'on_hold': '‡∏£‡∏∞‡∏á‡∏±‡∏ö'\n      }\n      return statusMap[status] || status\n    },\n    getWorkStatusSeverity(status) {\n      const severities = {\n        'completed': 'success',\n        'in_progress': 'info',\n        'pending': 'warning',\n        'on_hold': 'secondary'\n      }\n      return severities[status] || 'secondary'\n    }\n  }\n}\n</script>\n\n<style scoped>\n.history-card {\n  width: 100%;\n  margin: 0;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  border: 1px solid #e9ecef;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 4rem 2rem;\n  color: #6c757d;\n  background: #f8f9fa;\n  border-radius: 8px;\n  margin: 1rem;\n}\n\n.empty-state p {\n  margin-top: 1rem;\n  font-size: 1.1rem;\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n}\n\n.history-table :deep(.p-datatable) {\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n}\n\n.history-table :deep(.p-datatable-thead > tr > th) {\n  background: #f8f9fa;\n  color: #495057;\n  font-weight: 600;\n  border-bottom: 2px solid #e9ecef;\n  padding: 1rem 0.75rem;\n  font-size: 0.9rem;\n}\n\n.history-table :deep(.p-datatable-tbody > tr > td) {\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #f1f3f4;\n  vertical-align: middle;\n}\n\n.history-table :deep(.p-datatable-tbody > tr:hover) {\n  background: #f8f9fa;\n}\n\n.history-table :deep(.p-paginator) {\n  background: #f8f9fa;\n  border-top: 2px solid #e9ecef;\n  padding: 1rem;\n}\n\n.custom-id-badge {\n  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\n  color: white;\n  font-weight: 600;\n  padding: 0.5rem 0.75rem;\n  border-radius: 20px;\n  font-size: 0.8rem;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 40px;\n}\n\n.task-name {\n  font-weight: 600;\n  color: #495057;\n}\n\n.so-number {\n  font-size: 0.9rem;\n  color: #6c757d;\n  background: #e3f2fd;\n  padding: 0.2rem 0.5rem;\n  border-radius: 12px;\n  display: inline-block;\n  width: fit-content;\n}\n\n.sale-info {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: #495057;\n}\n\n.sale-info i {\n  color: #667eea;\n}\n\n.text-muted {\n  color: #6c757d;\n}\n\n.dialog-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.dialog-content {\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n  max-width: 600px;\n  width: 90%;\n  max-height: 80vh;\n  overflow: hidden;\n  animation: dialogSlideIn 0.3s ease-out;\n}\n\n@keyframes dialogSlideIn {\n  from {\n    opacity: 0;\n    transform: scale(0.8) translateY(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n}\n\n.dialog-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1.5rem;\n  border-bottom: 1px solid #e9ecef;\n  background: #f8f9fa;\n}\n\n.dialog-header h3 {\n  margin: 0;\n  color: #495057;\n  font-size: 1.25rem;\n}\n\n.dialog-close {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  cursor: pointer;\n  color: #6c757d;\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  transition: all 0.2s;\n}\n\n.dialog-close:hover {\n  background: #e9ecef;\n  color: #495057;\n}\n\n.dialog-body {\n  padding: 1.5rem;\n}\n\n.work-description {\n  background: #f8f9fa;\n  padding: 1rem;\n  border-radius: 6px;\n  border-left: 4px solid #28a745;\n  white-space: pre-wrap;\n  line-height: 1.6;\n  color: #495057;\n  font-size: 0.95rem;\n}\n\n/* Mobile Responsive */\n.files-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.file-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem;\n  border: 1px solid #e0e0e0;\n  border-radius: 6px;\n  background-color: #f9f9f9;\n}\n\n.file-info {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.file-name {\n  font-weight: 500;\n}\n\n.no-files {\n  text-align: center;\n  padding: 2rem;\n  color: #666;\n}\n\n@media (max-width: 768px) {\n  :deep(.hide-mobile) {\n    display: none !important;\n  }\n  \n  .history-table :deep(.p-datatable-tbody > tr > td) {\n    padding: 0.75rem 0.5rem;\n    font-size: 0.9rem;\n  }\n  \n  .history-table :deep(.p-datatable-thead > tr > th) {\n    padding: 0.75rem 0.5rem;\n    font-size: 0.85rem;\n  }\n  \n  .task-name {\n    font-size: 0.9rem;\n    line-height: 1.2;\n  }\n}\n\n.edit-form {\n  padding: 1rem 0;\n}\n\n.form-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n}\n\n.input-group {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.input-group.full-width {\n  grid-column: 1 / -1;\n}\n\n.input-label {\n  font-weight: 500;\n  color: #333;\n}\n\n.corporate-input, .corporate-dropdown {\n  width: 100%;\n}\n\n.file-upload-section {\n  margin-bottom: 1rem;\n}\n\n.existing-files, .new-files {\n  margin-top: 1rem;\n}\n\n.existing-files h4, .new-files h4 {\n  margin: 0 0 0.5rem 0;\n  font-size: 0.9rem;\n  color: #666;\n}\n\n.file-item {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  margin-bottom: 0.5rem;\n  background-color: #f9f9f9;\n}\n\n.file-name {\n  flex: 1;\n  font-size: 0.9rem;\n}\n\n.form-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid #e0e0e0;\n}\n\n.action-buttons {\n  display: flex;\n  gap: 0.5rem;\n  justify-content: center;\n}\n\n.description-preview {\n  font-size: 0.9rem;\n  color: #666;\n}\n\n.attachments-info {\n  display: flex;\n  justify-content: center;\n}\n\n.no-files {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #999;\n  font-size: 0.9rem;\n  width: 100%;\n  text-align: center;\n}\n\n.category-badge {\n  white-space: nowrap;\n  overflow: visible;\n  text-overflow: unset;\n  max-width: none;\n  width: auto;\n  background-color: #333 !important;\n  color: white !important;\n}\n\n@media (max-width: 480px) {\n  .history-table :deep(.p-datatable-tbody > tr > td) {\n    padding: 0.5rem 0.25rem;\n    font-size: 0.8rem;\n  }\n  \n  .history-table :deep(.p-datatable-thead > tr > th) {\n    padding: 0.5rem 0.25rem;\n    font-size: 0.8rem;\n  }\n  \n  .custom-id-badge {\n    font-size: 0.7rem;\n    padding: 0.3rem 0.5rem;\n  }\n}\n\n.category-display,\n.category-option,\n.status-display,\n.status-option {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.category-display .emoji,\n.category-option .emoji,\n.status-display .emoji,\n.status-option .emoji {\n  font-size: 16px;\n}\n\n.category-display i,\n.category-option i,\n.status-display i,\n.status-option i {\n  color: #4A90E2;\n  font-size: 14px;\n}\n\n/* Lock edit dialog position */\n.p-dialog .p-dialog-header {\n  cursor: default !important;\n}\n\n.p-dialog .p-dialog-header .p-dialog-title {\n  cursor: default !important;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}