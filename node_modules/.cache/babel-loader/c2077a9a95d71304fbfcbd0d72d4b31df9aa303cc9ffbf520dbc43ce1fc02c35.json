{"ast":null,"code":"import AutoComplete from 'primevue/autocomplete';\nimport Dropdown from 'primevue/dropdown';\nimport axios from 'axios';\nexport default {\n  name: 'BookingFormPrime',\n  components: {\n    AutoComplete,\n    Dropdown\n  },\n  emits: ['close-form', 'submit-borrow', 'submit-return', 'submit-cancel', 'handle-image-upload', 'update-borrow-form', 'updateReturnForm', 'update-cancel-form'],\n  props: {\n    showForm: Boolean,\n    selectedDate: Date,\n    activeForm: String,\n    borrowForm: Object,\n    returnForm: Object,\n    cancelForm: Object,\n    availableBorrows: Array,\n    pendingBorrows: Array,\n    currentReturnTime: String,\n    selectedBorrowProject: String,\n    selectedBorrowDescription: String\n  },\n  data() {\n    return {\n      selectedReturnBorrow: '',\n      selectedCancelBorrow: '',\n      showConfirm: false,\n      confirmMessage: '',\n      pendingAction: null,\n      users: [],\n      filteredUsers: [],\n      maxDisplayUsers: 50,\n      selectedColleague: null,\n      projectOptions: []\n    };\n  },\n  async created() {\n    this.$http = axios.create({\n      baseURL: process.env.VUE_APP_API_URL || ''\n    });\n    await this.loadUsers();\n    await this.loadProjects();\n    this.filteredUsers = this.users.slice(0, this.maxDisplayUsers);\n  },\n  computed: {\n    currentUserName() {\n      const firstName = localStorage.getItem('soc_firstname') || '';\n      const lastName = localStorage.getItem('soc_lastname') || '';\n      return `${firstName} ${lastName}`.trim();\n    },\n    formattedAvailableBorrows() {\n      return this.availableBorrows.map(borrow => ({\n        id: borrow.id,\n        displayText: `${borrow.id} - ${borrow.name} (${borrow.project}) - ${this.formatDate(borrow.selected_date)} ${borrow.time}`\n      }));\n    },\n    formattedPendingBorrows() {\n      return this.pendingBorrows.map(borrow => ({\n        id: borrow.id,\n        displayText: `${borrow.id} - ${borrow.name} (${borrow.project}) - ${this.formatDate(borrow.selected_date)} ${borrow.time}`\n      }));\n    },\n    selectedProject: {\n      get() {\n        return this.borrowForm.project;\n      },\n      set(value) {\n        this.$emit('update-borrow-form', {\n          field: 'project',\n          value\n        });\n      }\n    }\n  },\n  watch: {\n    selectedReturnBorrow(newVal) {\n      this.$emit('updateReturnForm', 'borrowId', newVal);\n      if (newVal && this.selectedBorrowDescription) {\n        this.$emit('updateReturnForm', 'discription', this.selectedBorrowDescription);\n      }\n    },\n    selectedCancelBorrow(newVal) {\n      this.$emit('update-cancel-form', {\n        field: 'borrowId',\n        value: newVal\n      });\n    }\n  },\n  methods: {\n    async loadProjects() {\n      try {\n        const response = await this.$http.get('/api/tasks');\n        if (response.data && Array.isArray(response.data)) {\n          this.projectOptions = response.data.filter(task => task.status !== 'completed').map(task => ({\n            label: task.task_name,\n            value: task.task_name\n          }));\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async loadUsers() {\n      try {\n        const response = await this.$http.get('/api/users');\n        if (response.data && Array.isArray(response.data)) {\n          // กรองผู้ใช้ปัจจุบันออก\n          const currentUserName = this.currentUserName;\n          this.users = response.data.filter(user => {\n            const userName = `${user.firstname} ${user.lastname}`.trim();\n            return userName !== currentUserName;\n          }).map(user => ({\n            ...user,\n            displayName: `${user.firstname} ${user.lastname}`.trim()\n          }));\n          this.filteredUsers = this.users.slice(0, this.maxDisplayUsers);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    searchUsers(event) {\n      const query = event.query.toLowerCase().trim();\n\n      // Get already selected colleagues\n      const selectedColleagues = this.borrowForm?.colleagues || [];\n      const selectedNames = selectedColleagues.map(c => c.name);\n\n      // Filter out already selected colleagues\n      let availableUsers = this.users.filter(user => !selectedNames.includes(user.displayName));\n      if (query === '') {\n        this.filteredUsers = availableUsers.slice(0, this.maxDisplayUsers);\n      } else {\n        const filtered = availableUsers.filter(user => user.displayName.toLowerCase().includes(query) || user.username.toLowerCase().includes(query) || user.position && user.position.toLowerCase().includes(query) || user.department && user.department.toLowerCase().includes(query));\n        this.filteredUsers = filtered.slice(0, this.maxDisplayUsers);\n      }\n    },\n    showAllUsers() {\n      // Get already selected colleagues\n      const selectedColleagues = this.borrowForm?.colleagues || [];\n      const selectedNames = selectedColleagues.map(c => c.name);\n\n      // Filter out already selected colleagues\n      const availableUsers = this.users.filter(user => !selectedNames.includes(user.displayName));\n      this.filteredUsers = availableUsers.slice(0, this.maxDisplayUsers);\n    },\n    onColleagueSelect(event) {\n      const user = event.value;\n      if (user && user.displayName) {\n        // ตรวจสอบว่าไม่ได้เลือกซ้ำ\n        const colleagues = this.borrowForm?.colleagues || [];\n        const alreadySelected = colleagues.some(c => c.name === user.displayName);\n        if (!alreadySelected) {\n          const newColleagues = [...colleagues, {\n            name: user.displayName,\n            position: user.position || '',\n            department: user.department || ''\n          }];\n          this.$emit('update-borrow-form', {\n            field: 'colleagues',\n            value: newColleagues\n          });\n        }\n\n        // Clear selection\n        this.selectedColleague = null;\n      }\n    },\n    removeColleague(index) {\n      const colleagues = [...(this.borrowForm?.colleagues || [])];\n      colleagues.splice(index, 1);\n      this.$emit('update-borrow-form', {\n        field: 'colleagues',\n        value: colleagues\n      });\n    },\n    getFormTitle() {\n      const titles = {\n        borrow: 'แจ้งใช้รถ',\n        return: 'แจ้งคืนรถ',\n        cancel: 'ยกเลิกการจอง'\n      };\n      return titles[this.activeForm] || 'ฟอร์ม';\n    },\n    handleDialogClose() {\n      this.$emit('close-form');\n    },\n    confirmSubmit(type) {\n      const messages = {\n        borrow: 'ยืนยันการแจ้งใช้รถ?',\n        return: 'ยืนยันการแจ้งคืนรถ?',\n        cancel: 'ยืนยันการยกเลิกการจอง?'\n      };\n      this.confirmMessage = messages[type];\n      this.pendingAction = type;\n      this.showConfirm = true;\n    },\n    handleConfirm() {\n      this.showConfirm = false;\n      if (this.pendingAction === 'borrow') {\n        this.$emit('submit-borrow');\n      } else if (this.pendingAction === 'return') {\n        this.$emit('submit-return');\n      } else if (this.pendingAction === 'cancel') {\n        this.$emit('submit-cancel');\n      }\n      this.pendingAction = null;\n    },\n    updateBorrowForm(field, value) {\n      this.$emit('update-borrow-form', {\n        field,\n        value\n      });\n    },\n    updateReturnForm(field, value) {\n      this.$emit('update-return-form', {\n        field,\n        value\n      });\n    },\n    updateCancelForm(field, value) {\n      this.$emit('update-cancel-form', {\n        field,\n        value\n      });\n    },\n    formatDate(date) {\n      return new Date(date).toLocaleDateString('th-TH', {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric'\n      });\n    }\n  }\n};","map":{"version":3,"names":["AutoComplete","Dropdown","axios","name","components","emits","props","showForm","Boolean","selectedDate","Date","activeForm","String","borrowForm","Object","returnForm","cancelForm","availableBorrows","Array","pendingBorrows","currentReturnTime","selectedBorrowProject","selectedBorrowDescription","data","selectedReturnBorrow","selectedCancelBorrow","showConfirm","confirmMessage","pendingAction","users","filteredUsers","maxDisplayUsers","selectedColleague","projectOptions","created","$http","create","baseURL","process","env","VUE_APP_API_URL","loadUsers","loadProjects","slice","computed","currentUserName","firstName","localStorage","getItem","lastName","trim","formattedAvailableBorrows","map","borrow","id","displayText","project","formatDate","selected_date","time","formattedPendingBorrows","selectedProject","get","set","value","$emit","field","watch","newVal","methods","response","isArray","filter","task","status","label","task_name","error","console","user","userName","firstname","lastname","displayName","searchUsers","event","query","toLowerCase","selectedColleagues","colleagues","selectedNames","c","availableUsers","includes","filtered","username","position","department","showAllUsers","onColleagueSelect","alreadySelected","some","newColleagues","removeColleague","index","splice","getFormTitle","titles","return","cancel","handleDialogClose","confirmSubmit","type","messages","handleConfirm","updateBorrowForm","updateReturnForm","updateCancelForm","date","toLocaleDateString","day","month","year"],"sources":["D:\\GEN-T\\WEB\\GenT-CEM\\frontend_cem\\src\\views\\car_booking\\BookingFormPrime.vue"],"sourcesContent":["<template>\r\n  <Dialog :visible=\"showForm\" modal :header=\"getFormTitle()\" :style=\"{ width: '700px' }\"\r\n    @update:visible=\"handleDialogClose\" :closable=\"true\" :draggable=\"false\" class=\"corporate-dialog\">\r\n    <div class=\"p-fluid dialog-content\">\r\n      <!-- แจ้งใช้รถ -->\r\n      <form v-if=\"activeForm === 'borrow'\" @submit.prevent=\"confirmSubmit('borrow')\" class=\"form-container\">\r\n        <div class=\"form-grid\">\r\n          <div class=\"input-group\">\r\n            <label for=\"name\" class=\"input-label\">ชื่อ-นามสกุล</label>\r\n            <InputText id=\"name\" :value=\"currentUserName\" readonly class=\"corporate-input readonly-field\" />\r\n          </div>\r\n\r\n          <div class=\"input-group\">\r\n            <label for=\"license\" class=\"input-label\">ทะเบียนรถ</label>\r\n            <InputText id=\"license\" :value=\"borrowForm.license\" readonly class=\"corporate-input readonly-field\" />\r\n          </div>\r\n\r\n          <div class=\"input-group\">\r\n            <label for=\"time\" class=\"input-label\">เวลา *</label>\r\n            <InputText id=\"time\" :value=\"borrowForm.time\" @input=\"updateBorrowForm('time', $event.target.value)\"\r\n              type=\"time\" required class=\"corporate-input\" />\r\n          </div>\r\n\r\n          <div class=\"input-group\">\r\n            <label for=\"location\" class=\"input-label\">สถานที่ *</label>\r\n            <InputText id=\"location\" :value=\"borrowForm.location\"\r\n              @input=\"updateBorrowForm('location', $event.target.value)\" required class=\"corporate-input\" />\r\n          </div>\r\n\r\n          <div class=\"input-group\">\r\n            <label for=\"project\" class=\"input-label\">โครงการ *</label>\r\n            <Dropdown id=\"project\" v-model=\"selectedProject\" :options=\"projectOptions\" \r\n              optionLabel=\"label\" optionValue=\"value\" placeholder=\"เลือกโครงการ\"\r\n              required class=\"corporate-input\" filter />\r\n          </div>\r\n\r\n\r\n\r\n          <div class=\"input-group\">\r\n            <label for=\"description\" class=\"input-label\">ข้อมูลเพิ่มเติม</label>\r\n            <Textarea \r\n              id=\"description\" \r\n              :value=\"borrowForm.discription\" \r\n              @input=\"$emit('update-borrow-form', { field: 'discription', value: $event.target.value })\"\r\n              placeholder=\"ระบุข้อมูลเพิ่มเติม (ถ้ามี)\"\r\n              rows=\"3\"\r\n              class=\"corporate-input\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"input-group full-width\">\r\n            <label class=\"input-label\">ผู้ร่วมงาน</label>\r\n            <div class=\"colleagues-section\">\r\n              <div class=\"colleague-search\">\r\n                <AutoComplete v-model=\"selectedColleague\" :suggestions=\"filteredUsers\" @complete=\"searchUsers\"\r\n                  @item-select=\"onColleagueSelect\" @dropdown-click=\"showAllUsers\" optionLabel=\"displayName\"\r\n                  placeholder=\"ค้นหาหรือเลือกผู้ร่วมงาน...\" class=\"corporate-input\" :dropdown=\"true\"\r\n                  :forceSelection=\"false\" :scrollHeight=\"200\">\r\n                  <template #option=\"slotProps\">\r\n                    <div class=\"user-option\">\r\n                      <div class=\"user-name\">{{ slotProps.option.displayName }}</div>\r\n                      <div class=\"user-role\">{{ slotProps.option.position }} - {{ slotProps.option.department }}</div>\r\n                    </div>\r\n                  </template>\r\n                </AutoComplete>\r\n              </div>\r\n\r\n              <div v-if=\"borrowForm.colleagues && borrowForm.colleagues.length > 0\" class=\"selected-colleagues\">\r\n                <h6 class=\"colleagues-title\">ผู้ร่วมงานที่เลือก:</h6>\r\n                <div class=\"colleagues-list\">\r\n                  <div v-for=\"(colleague, index) in borrowForm.colleagues\" :key=\"index\" class=\"colleague-card\">\r\n                    <div class=\"colleague-details\">\r\n                      <div class=\"colleague-name\">{{ colleague.name }}</div>\r\n                      <div class=\"colleague-position\">\r\n                        <i class=\"pi pi-briefcase\"></i>\r\n                        {{ colleague.position }}\r\n                      </div>\r\n                      <div class=\"colleague-department\">\r\n                        <i class=\"pi pi-building\"></i>\r\n                        {{ colleague.department }}\r\n                      </div>\r\n                    </div>\r\n                    <Button type=\"button\" icon=\"pi pi-times\" severity=\"danger\" text rounded size=\"small\"\r\n                      @click=\"removeColleague(index)\" class=\"remove-btn\" />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div v-else class=\"no-colleagues\">\r\n                <i class=\"pi pi-users\"></i>\r\n                <span>ยังไม่มีผู้ร่วมงาน</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"file-upload-section\">\r\n            <label class=\"upload-label\">รูปภาพ</label>\r\n            <div class=\"file-upload-wrapper\">\r\n              <input ref=\"borrowFileInput\" @change=\"$emit('handle-image-upload', $event, 'borrow')\" type=\"file\"\r\n                accept=\"image/*\" multiple class=\"file-input\" id=\"borrowImages\">\r\n              <Button type=\"button\"\r\n                :label=\"borrowForm.images?.length > 0 ? `เลือกแล้ว ${borrowForm.images.length} รูป` : 'เลือกรูปภาพ'\"\r\n                icon=\"pi pi-upload\" severity=\"secondary\" outlined @click=\"$refs.borrowFileInput.click()\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <Divider />\r\n\r\n        <div class=\"form-actions\">\r\n          <Button type=\"button\" label=\"ยกเลิก\" icon=\"pi pi-times\" severity=\"secondary\" outlined\r\n            @click=\"handleDialogClose\" />\r\n          <Button type=\"submit\" label=\"บันทึกการแจ้งใช้รถ\" icon=\"pi pi-check\" severity=\"success\" />\r\n        </div>\r\n      </form>\r\n\r\n      <!-- แจ้งคืนรถ -->\r\n      <form v-if=\"activeForm === 'return'\" @submit.prevent=\"confirmSubmit('return')\" class=\"form-container\">\r\n        <div class=\"form-grid\">\r\n          <div class=\"input-group full-width\">\r\n            <label class=\"input-label\">เลือกการแจ้งใช้รถที่ต้องการคืน *</label>\r\n            <Dropdown v-model=\"selectedReturnBorrow\" :options=\"formattedAvailableBorrows\" optionLabel=\"displayText\"\r\n              optionValue=\"id\" class=\"corporate-dropdown\" />\r\n          </div>\r\n\r\n          <div class=\"input-group\">\r\n            <label for=\"returnName\" class=\"input-label\">ชื่อ-นามสกุล</label>\r\n            <InputText id=\"returnName\" :value=\"currentUserName\" readonly class=\"corporate-input readonly-field\" />\r\n          </div>\r\n\r\n          <div class=\"input-group\">\r\n            <label for=\"returnLicense\" class=\"input-label\">ทะเบียนรถ</label>\r\n            <InputText id=\"returnLicense\" :value=\"returnForm.license\" readonly class=\"corporate-input readonly-field\" />\r\n          </div>\r\n\r\n          <div class=\"input-group\">\r\n            <label for=\"returnTime\" class=\"input-label\">เวลาคืนรถ</label>\r\n            <InputText id=\"returnTime\" :value=\"currentReturnTime\" readonly class=\"corporate-input readonly-field\" />\r\n          </div>\r\n\r\n          <div class=\"input-group\">\r\n            <label for=\"returnLocation\" class=\"input-label\">สถานที่คืนรถ *</label>\r\n            <InputText id=\"returnLocation\" :value=\"returnForm.location\"\r\n              @input=\"$emit('updateReturnForm', 'location', $event.target.value)\" required class=\"corporate-input\" />\r\n          </div>\r\n\r\n          <div class=\"input-group\">\r\n            <label for=\"returnDescription\" class=\"input-label\">ข้อมูลเพิ่มเติม</label>\r\n            <Textarea \r\n              id=\"returnDescription\" \r\n              :value=\"returnForm.discription || selectedBorrowDescription\" \r\n              @input=\"$emit('updateReturnForm', 'discription', $event.target.value)\"\r\n              :disabled=\"!selectedReturnBorrow\"\r\n              placeholder=\"กรุณาเลือกการแจ้งใช้รถที่ต้องการคืนก่อน\"\r\n              rows=\"3\"\r\n              class=\"corporate-input\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"input-group\">\r\n            <label for=\"returnProject\" class=\"input-label\">โครงการ</label>\r\n            <InputText id=\"returnProject\" :value=\"selectedBorrowProject\" readonly\r\n              class=\"corporate-input readonly-field\" />\r\n          </div>\r\n\r\n          <div class=\"file-upload-section\">\r\n            <label class=\"upload-label\">รูปภาพ</label>\r\n            <div class=\"file-upload-wrapper\">\r\n              <input ref=\"returnFileInput\" @change=\"$emit('handle-image-upload', $event, 'return')\" type=\"file\"\r\n                accept=\"image/*\" multiple class=\"file-input\" id=\"returnImages\">\r\n              <Button type=\"button\"\r\n                :label=\"returnForm.images?.length > 0 ? `เลือกแล้ว ${returnForm.images.length} รูป` : 'เลือกรูปภาพ'\"\r\n                icon=\"pi pi-upload\" severity=\"secondary\" outlined @click=\"$refs.returnFileInput.click()\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <Divider />\r\n\r\n        <div class=\"form-actions\">\r\n          <Button type=\"button\" label=\"ยกเลิก\" icon=\"pi pi-times\" severity=\"secondary\" outlined\r\n            @click=\"handleDialogClose\" />\r\n          <Button type=\"submit\" label=\"บันทึกการแจ้งคืนรถ\" icon=\"pi pi-check\" severity=\"success\" />\r\n        </div>\r\n      </form>\r\n\r\n      <!-- ยกเลิกการจอง -->\r\n      <form v-if=\"activeForm === 'cancel'\" @submit.prevent=\"confirmSubmit('cancel')\" class=\"form-container\">\r\n        <div class=\"form-grid\">\r\n          <div class=\"input-group full-width\">\r\n            <label class=\"input-label\">เลือกการจองที่ต้องการยกเลิก *</label>\r\n            <Dropdown v-model=\"selectedCancelBorrow\" :options=\"formattedPendingBorrows\" optionLabel=\"displayText\"\r\n              optionValue=\"id\" class=\"corporate-dropdown\" />\r\n          </div>\r\n        </div>\r\n\r\n        <Divider />\r\n\r\n        <div class=\"form-actions\">\r\n          <Button type=\"button\" label=\"ยกเลิก\" icon=\"pi pi-times\" severity=\"secondary\" outlined\r\n            @click=\"handleDialogClose\" />\r\n          <Button type=\"submit\" label=\"ยืนยันการยกเลิก\" icon=\"pi pi-trash\" severity=\"danger\" />\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </Dialog>\r\n\r\n  <!-- Confirmation Dialog -->\r\n  <Dialog :visible=\"showConfirm\" modal header=\"ยืนยันการดำเนินการ\" :style=\"{ width: '450px' }\" :closable=\"false\"\r\n    :draggable=\"false\" class=\"confirm-dialog\">\r\n    <div class=\"confirm-content\">\r\n      <div class=\"confirm-icon\">\r\n        <i class=\"pi pi-question-circle\"></i>\r\n      </div>\r\n      <p class=\"confirm-message\">{{ confirmMessage }}</p>\r\n      <div class=\"confirm-buttons\">\r\n        <Button @click=\"handleConfirm\" label=\"ยืนยัน\" icon=\"pi pi-check\" severity=\"success\" />\r\n        <Button @click=\"showConfirm = false\" label=\"ยกเลิก\" icon=\"pi pi-times\" severity=\"secondary\" outlined />\r\n      </div>\r\n    </div>\r\n  </Dialog>\r\n</template>\r\n\r\n<script>\r\nimport AutoComplete from 'primevue/autocomplete'\r\nimport Dropdown from 'primevue/dropdown'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'BookingFormPrime',\r\n  components: {\r\n    AutoComplete,\r\n    Dropdown\r\n  },\r\n  emits: ['close-form', 'submit-borrow', 'submit-return', 'submit-cancel', 'handle-image-upload', 'update-borrow-form', 'updateReturnForm', 'update-cancel-form'],\r\n  props: {\r\n    showForm: Boolean,\r\n    selectedDate: Date,\r\n    activeForm: String,\r\n    borrowForm: Object,\r\n    returnForm: Object,\r\n    cancelForm: Object,\r\n    availableBorrows: Array,\r\n    pendingBorrows: Array,\r\n    currentReturnTime: String,\r\n    selectedBorrowProject: String,\r\n    selectedBorrowDescription: String\r\n  },\r\n  data() {\r\n    return {\r\n      selectedReturnBorrow: '',\r\n      selectedCancelBorrow: '',\r\n      showConfirm: false,\r\n      confirmMessage: '',\r\n      pendingAction: null,\r\n      users: [],\r\n      filteredUsers: [],\r\n      maxDisplayUsers: 50,\r\n      selectedColleague: null,\r\n      projectOptions: []\r\n    }\r\n  },\r\n  async created() {\r\n    this.$http = axios.create({\r\n      baseURL: process.env.VUE_APP_API_URL || ''\r\n    });\r\n    await this.loadUsers();\r\n    await this.loadProjects();\r\n    this.filteredUsers = this.users.slice(0, this.maxDisplayUsers);\r\n  },\r\n  computed: {\r\n    currentUserName() {\r\n      const firstName = localStorage.getItem('soc_firstname') || ''\r\n      const lastName = localStorage.getItem('soc_lastname') || ''\r\n      return `${firstName} ${lastName}`.trim()\r\n    },\r\n    formattedAvailableBorrows() {\r\n      return this.availableBorrows.map(borrow => ({\r\n        id: borrow.id,\r\n        displayText: `${borrow.id} - ${borrow.name} (${borrow.project}) - ${this.formatDate(borrow.selected_date)} ${borrow.time}`\r\n      }))\r\n    },\r\n    formattedPendingBorrows() {\r\n      return this.pendingBorrows.map(borrow => ({\r\n        id: borrow.id,\r\n        displayText: `${borrow.id} - ${borrow.name} (${borrow.project}) - ${this.formatDate(borrow.selected_date)} ${borrow.time}`\r\n      }))\r\n    },\r\n    selectedProject: {\r\n      get() {\r\n        return this.borrowForm.project\r\n      },\r\n      set(value) {\r\n        this.$emit('update-borrow-form', { field: 'project', value })\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    selectedReturnBorrow(newVal) {\r\n      this.$emit('updateReturnForm', 'borrowId', newVal)\r\n      if (newVal && this.selectedBorrowDescription) {\r\n        this.$emit('updateReturnForm', 'discription', this.selectedBorrowDescription)\r\n      }\r\n    },\r\n    selectedCancelBorrow(newVal) {\r\n      this.$emit('update-cancel-form', { field: 'borrowId', value: newVal })\r\n    }\r\n  },\r\n  methods: {\r\n    async loadProjects() {\r\n      try {\r\n        const response = await this.$http.get('/api/tasks')\r\n        if (response.data && Array.isArray(response.data)) {\r\n          this.projectOptions = response.data\r\n            .filter(task => task.status !== 'completed')\r\n            .map(task => ({\r\n              label: task.task_name,\r\n              value: task.task_name\r\n            }))\r\n        }\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    async loadUsers() {\r\n      try {\r\n        const response = await this.$http.get('/api/users')\r\n        if (response.data && Array.isArray(response.data)) {\r\n          // กรองผู้ใช้ปัจจุบันออก\r\n          const currentUserName = this.currentUserName\r\n          this.users = response.data\r\n            .filter(user => {\r\n              const userName = `${user.firstname} ${user.lastname}`.trim()\r\n              return userName !== currentUserName\r\n            })\r\n            .map(user => ({\r\n              ...user,\r\n              displayName: `${user.firstname} ${user.lastname}`.trim()\r\n            }))\r\n          this.filteredUsers = this.users.slice(0, this.maxDisplayUsers)\r\n        }\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n\r\n    searchUsers(event) {\r\n      const query = event.query.toLowerCase().trim()\r\n\r\n      // Get already selected colleagues\r\n      const selectedColleagues = this.borrowForm?.colleagues || []\r\n      const selectedNames = selectedColleagues.map(c => c.name)\r\n\r\n      // Filter out already selected colleagues\r\n      let availableUsers = this.users.filter(user =>\r\n        !selectedNames.includes(user.displayName)\r\n      )\r\n\r\n      if (query === '') {\r\n        this.filteredUsers = availableUsers.slice(0, this.maxDisplayUsers)\r\n      } else {\r\n        const filtered = availableUsers.filter(user =>\r\n          user.displayName.toLowerCase().includes(query) ||\r\n          user.username.toLowerCase().includes(query) ||\r\n          (user.position && user.position.toLowerCase().includes(query)) ||\r\n          (user.department && user.department.toLowerCase().includes(query))\r\n        )\r\n        this.filteredUsers = filtered.slice(0, this.maxDisplayUsers)\r\n      }\r\n    },\r\n\r\n    showAllUsers() {\r\n      // Get already selected colleagues\r\n      const selectedColleagues = this.borrowForm?.colleagues || []\r\n      const selectedNames = selectedColleagues.map(c => c.name)\r\n\r\n      // Filter out already selected colleagues\r\n      const availableUsers = this.users.filter(user =>\r\n        !selectedNames.includes(user.displayName)\r\n      )\r\n\r\n      this.filteredUsers = availableUsers.slice(0, this.maxDisplayUsers)\r\n    },\r\n\r\n    onColleagueSelect(event) {\r\n      const user = event.value\r\n      if (user && user.displayName) {\r\n        // ตรวจสอบว่าไม่ได้เลือกซ้ำ\r\n        const colleagues = this.borrowForm?.colleagues || []\r\n        const alreadySelected = colleagues.some(c => c.name === user.displayName)\r\n\r\n        if (!alreadySelected) {\r\n          const newColleagues = [...colleagues, {\r\n            name: user.displayName,\r\n            position: user.position || '',\r\n            department: user.department || ''\r\n          }]\r\n          this.$emit('update-borrow-form', { field: 'colleagues', value: newColleagues })\r\n        }\r\n\r\n        // Clear selection\r\n        this.selectedColleague = null\r\n      }\r\n    },\r\n\r\n    removeColleague(index) {\r\n      const colleagues = [...(this.borrowForm?.colleagues || [])]\r\n      colleagues.splice(index, 1)\r\n      this.$emit('update-borrow-form', { field: 'colleagues', value: colleagues })\r\n    },\r\n\r\n    getFormTitle() {\r\n      const titles = {\r\n        borrow: 'แจ้งใช้รถ',\r\n        return: 'แจ้งคืนรถ',\r\n        cancel: 'ยกเลิกการจอง'\r\n      }\r\n      return titles[this.activeForm] || 'ฟอร์ม'\r\n    },\r\n    handleDialogClose() {\r\n      this.$emit('close-form')\r\n    },\r\n    confirmSubmit(type) {\r\n      const messages = {\r\n        borrow: 'ยืนยันการแจ้งใช้รถ?',\r\n        return: 'ยืนยันการแจ้งคืนรถ?',\r\n        cancel: 'ยืนยันการยกเลิกการจอง?'\r\n      }\r\n\r\n      this.confirmMessage = messages[type]\r\n      this.pendingAction = type\r\n      this.showConfirm = true\r\n    },\r\n    handleConfirm() {\r\n      this.showConfirm = false\r\n\r\n      if (this.pendingAction === 'borrow') {\r\n        this.$emit('submit-borrow')\r\n      } else if (this.pendingAction === 'return') {\r\n        this.$emit('submit-return')\r\n      } else if (this.pendingAction === 'cancel') {\r\n        this.$emit('submit-cancel')\r\n      }\r\n\r\n      this.pendingAction = null\r\n    },\r\n    updateBorrowForm(field, value) {\r\n      this.$emit('update-borrow-form', { field, value })\r\n    },\r\n    updateReturnForm(field, value) {\r\n      this.$emit('update-return-form', { field, value })\r\n    },\r\n    updateCancelForm(field, value) {\r\n      this.$emit('update-cancel-form', { field, value })\r\n    },\r\n    formatDate(date) {\r\n      return new Date(date).toLocaleDateString('th-TH', {\r\n        day: '2-digit',\r\n        month: '2-digit',\r\n        year: 'numeric'\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.colleagues-section {\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.colleague-search {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.colleagues-title {\r\n  margin: 1rem 0 0.5rem 0;\r\n  color: #495057;\r\n  font-weight: 600;\r\n}\r\n\r\n.colleagues-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.colleague-card {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 1rem;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  background: #f8f9fa;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.colleague-card:hover {\r\n  border-color: #dee2e6;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.colleague-details {\r\n  flex: 1;\r\n}\r\n\r\n.colleague-name {\r\n  font-weight: 600;\r\n  color: #212529;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.colleague-position,\r\n.colleague-department {\r\n  font-size: 0.875rem;\r\n  color: #6c757d;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.25rem;\r\n  margin-bottom: 0.125rem;\r\n}\r\n\r\n.colleague-position i,\r\n.colleague-department i {\r\n  font-size: 0.75rem;\r\n}\r\n\r\n.remove-btn {\r\n  margin-left: 0.5rem;\r\n}\r\n\r\n.no-colleagues {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  color: #6c757d;\r\n  font-style: italic;\r\n}\r\n\r\n.no-colleagues i {\r\n  font-size: 2rem;\r\n  margin-bottom: 0.5rem;\r\n  display: block;\r\n}\r\n\r\n.user-option {\r\n  padding: 0.5rem;\r\n}\r\n\r\n.user-name {\r\n  font-weight: 600;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.user-role {\r\n  font-size: 0.875rem;\r\n  color: #6c757d;\r\n}\r\n</style>\r\n\r\n<style scoped>\r\n.input-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.input-label {\r\n  font-weight: 500;\r\n  color: #495057;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.corporate-dialog {\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n}\r\n\r\n.corporate-dialog :deep(.p-dialog-header) {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  border-radius: 8px 8px 0 0;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.corporate-dialog :deep(.p-dialog-title) {\r\n  font-weight: 600;\r\n  font-size: 1.25rem;\r\n}\r\n\r\n.dialog-content {\r\n  padding: 2rem;\r\n  background: #fafafa;\r\n}\r\n\r\n.form-container {\r\n  background: white;\r\n  padding: 2rem;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.form-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 1.5rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.full-width {\r\n  grid-column: 1 / -1;\r\n}\r\n\r\n.corporate-input,\r\n.corporate-dropdown {\r\n  border: 2px solid #e9ecef;\r\n  border-radius: 6px;\r\n  padding: 0.75rem;\r\n  font-size: 1rem;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.corporate-input:focus,\r\n.corporate-dropdown:focus {\r\n  border-color: #667eea;\r\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n.readonly-field {\r\n  background: #f8f9fa;\r\n  color: #6c757d;\r\n}\r\n\r\n.file-upload-section {\r\n  grid-column: 1 / -1;\r\n}\r\n\r\n.upload-label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 500;\r\n  color: #495057;\r\n}\r\n\r\n.file-input {\r\n  display: none;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 1rem;\r\n  margin-top: 1.5rem;\r\n}\r\n\r\n.form-actions .p-button {\r\n  min-width: 140px;\r\n  padding: 0.75rem 1.5rem;\r\n  font-weight: 500;\r\n}\r\n\r\n/* Confirmation Dialog */\r\n.confirm-dialog :deep(.p-dialog-header) {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  border-radius: 8px 8px 0 0;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.confirm-content {\r\n  text-align: center;\r\n  padding: 2rem;\r\n}\r\n\r\n.confirm-icon {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.confirm-icon i {\r\n  font-size: 3rem;\r\n  color: #667eea;\r\n}\r\n\r\n.confirm-message {\r\n  font-size: 1.1rem;\r\n  margin-bottom: 2rem;\r\n  color: #495057;\r\n}\r\n\r\n.confirm-buttons {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.confirm-buttons .p-button {\r\n  min-width: 120px;\r\n  padding: 0.75rem 1.5rem;\r\n  font-weight: 500;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .form-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .corporate-dialog {\r\n    width: 95vw !important;\r\n    max-width: none !important;\r\n  }\r\n\r\n  .dialog-content {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .form-container {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .confirm-content {\r\n    padding: 1.5rem;\r\n  }\r\n\r\n  .confirm-buttons {\r\n    flex-direction: column;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}