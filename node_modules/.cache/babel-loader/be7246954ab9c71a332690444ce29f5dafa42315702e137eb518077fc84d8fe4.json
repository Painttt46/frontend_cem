{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport Calendar from './Calendar.vue';\nimport History from './History.vue';\nimport BookingFormPrime from './BookingFormPrime.vue';\nimport axios from 'axios';\nexport default {\n  components: {\n    Calendar,\n    History,\n    BookingForm: BookingFormPrime\n  },\n  data() {\n    return {\n      activeTabIndex: 0,\n      selectedDate: null,\n      showForm: false,\n      activeForm: 'borrow',\n      borrowForm: {\n        license: 'FXAG-2032',\n        time: '',\n        location: '',\n        project: '',\n        discription: '',\n        colleagues: [],\n        images: []\n      },\n      returnForm: {\n        borrowId: '',\n        license: 'FXAG-2032',\n        location: '',\n        discription: '',\n        images: []\n      },\n      cancelForm: {\n        borrowId: '',\n        reason: ''\n      },\n      records: [],\n      currentTime: new Date(),\n      serverTimeOffset: 0,\n      currentBookingData: null,\n      showImageModal: false,\n      selectedImages: [],\n      showFullImageModal: false,\n      fullSizeImage: '',\n      teamsWebhookUrl: 'YOUR_TEAMS_WEBHOOK_URL_HERE',\n      notifiedActiveBookings: new Set()\n    };\n  },\n  computed: {\n    currentDateTime() {\n      return this.currentTime.toLocaleString('th-TH', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit'\n      });\n    },\n    hasActiveBorrow() {\n      return this.records.some(r => r.status === 'active');\n    },\n    availableBorrows() {\n      const currentUserName = this.getCurrentUserName();\n      return this.records.filter(r => {\n        // Must be active status (past borrow time, not returned)\n        if (r.status !== 'active') return false;\n\n        // Check if current user is authorized to return this booking\n        const isBorrower = r.name === currentUserName;\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) && r.colleagues.some(colleague => {\n          const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name;\n          return colleagueName === currentUserName;\n        });\n        return isBorrower || isColleague;\n      });\n    },\n    pendingBorrows() {\n      const currentUserName = this.getCurrentUserName();\n      return this.records.filter(r => {\n        // Must be pending status (future booking, not started yet)\n        if (r.status !== 'pending') return false;\n\n        // Check if current user is authorized to cancel this booking\n        const isBorrower = r.name === currentUserName;\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) && r.colleagues.some(colleague => {\n          const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name;\n          return colleagueName === currentUserName;\n        });\n        return isBorrower || isColleague;\n      });\n    },\n    currentReturnTime() {\n      return this.currentTime.toLocaleTimeString('th-TH', {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n    selectedBorrowProject() {\n      if (!this.returnForm.borrowId) return '';\n      const selectedBorrow = this.records.find(r => r.id == this.returnForm.borrowId);\n      return selectedBorrow ? selectedBorrow.project : '';\n    },\n    selectedBorrowDescription() {\n      if (!this.returnForm.borrowId) return '';\n      const selectedBorrow = this.records.find(r => r.id == this.returnForm.borrowId);\n      return selectedBorrow ? selectedBorrow.discription : '';\n    },\n    borrowRecordsCount() {\n      return this.records.filter(r => r.status !== 'returned').length;\n    },\n    bookingsAllowingImageUpload() {\n      const currentUserName = this.getCurrentUserName();\n      return this.records.filter(r => {\n        // Must be active status and user is authorized\n        if (r.status !== 'active') return false;\n        const isBorrower = r.name === currentUserName;\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) && r.colleagues.some(colleague => {\n          const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name;\n          return colleagueName === currentUserName;\n        });\n        return isBorrower || isColleague;\n      });\n    },\n    groupedImages() {\n      const groups = {};\n      this.selectedImages.forEach(image => {\n        if (!groups[image.type]) {\n          groups[image.type] = [];\n        }\n        groups[image.type].push(image);\n      });\n      return Object.keys(groups).map(type => ({\n        type,\n        images: groups[type]\n      }));\n    }\n  },\n  mounted() {\n    this.syncServerTime();\n    setInterval(() => {\n      this.currentTime = new Date(Date.now() + this.serverTimeOffset);\n    }, 1000);\n    setInterval(() => {\n      this.loadRecords();\n    }, 30000);\n    setInterval(() => {\n      this.syncServerTime();\n    }, 300000);\n  },\n  created() {\n    this.$http = axios.create({\n      baseURL: '',\n      headers: {\n        'X-Timezone': 'Asia/Bangkok'\n      }\n    });\n    this.loadRecords();\n  },\n  methods: {\n    async syncServerTime() {\n      try {\n        const response = await axios.get('/api/server-time');\n        const serverTime = new Date(response.data.serverTime);\n        const clientTime = new Date();\n        this.serverTimeOffset = serverTime.getTime() - clientTime.getTime();\n        this.currentTime = new Date(Date.now() + this.serverTimeOffset);\n        console.log('[Time Sync] Server time:', serverTime.toLocaleString('th-TH'));\n        console.log('[Time Sync] Offset:', this.serverTimeOffset, 'ms');\n      } catch (error) {\n        console.error('Failed to sync server time:', error);\n      }\n    },\n    getCurrentUserName() {\n      const firstName = localStorage.getItem('soc_firstname') || '';\n      const lastName = localStorage.getItem('soc_lastname') || '';\n      return `${firstName} ${lastName}`.trim();\n    },\n    async loadRecords() {\n      try {\n        const response = await axios.get('/api/car-booking');\n        this.records = response.data;\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถโหลดข้อมูลการจองรถได้',\n          life: 3000\n        });\n      }\n    },\n    triggerFileUpload() {\n      document.getElementById('modal-upload').click();\n    },\n    selectDate(date) {\n      this.selectedDate = date;\n      this.showForm = true;\n      this.activeForm = 'borrow';\n    },\n    showReturnForm() {\n      this.selectedDate = new Date(Date.now() + this.serverTimeOffset);\n      this.showForm = true;\n      this.activeForm = 'return';\n    },\n    showCancelForm() {\n      this.selectedDate = new Date(Date.now() + this.serverTimeOffset);\n      this.showForm = true;\n      this.activeForm = 'cancel';\n    },\n    closeForm() {\n      this.showForm = false;\n      this.selectedDate = null;\n      this.resetForms();\n    },\n    handleImageUpload(event, formType) {\n      const files = Array.from(event.target.files);\n      const images = [];\n      files.forEach(file => {\n        const reader = new FileReader();\n        reader.onload = e => {\n          images.push(e.target.result);\n          if (images.length === files.length) {\n            if (formType === 'borrow') {\n              this.borrowForm.images = images;\n            } else {\n              this.returnForm.images = images;\n            }\n          }\n        };\n        reader.readAsDataURL(file);\n      });\n    },\n    openImageModal(imageSrc) {\n      this.selectedImages = [{\n        src: imageSrc,\n        type: 'รูปภาพ'\n      }];\n      this.showImageModal = true;\n    },\n    calculateUsageDuration(borrowDate, borrowTime, returnDate) {\n      const borrowDateTime = new Date(borrowDate);\n      const [hour, minute] = borrowTime.split(':').map(Number);\n      borrowDateTime.setHours(hour, minute, 0, 0);\n      const diffMs = returnDate - borrowDateTime;\n      const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n      const diffMinutes = Math.floor(diffMs % (1000 * 60 * 60) / (1000 * 60));\n      if (diffHours > 0) {\n        return `${diffHours} ชั่วโมง ${diffMinutes} นาที`;\n      } else {\n        return `${diffMinutes} นาที`;\n      }\n    },\n    viewImages(images, bookingData = null) {\n      this.selectedImages = images;\n      this.currentBookingData = bookingData;\n      this.showImageModal = true;\n    },\n    handleImageError() {\n      this.$toast.add({\n        severity: 'error',\n        summary: 'เกิดข้อผิดพลาด',\n        detail: 'ไม่สามารถโหลดรูปภาพได้',\n        life: 3000\n      });\n    },\n    handleImageLoad() {},\n    viewFullImage(imageSrc) {\n      // Handle nested proxy objects\n      let imageUrl = imageSrc;\n      if (typeof imageSrc === 'object' && imageSrc.src) {\n        imageUrl = typeof imageSrc.src === 'string' ? imageSrc.src : imageSrc.src.src;\n      }\n      this.fullSizeImage = imageUrl;\n      this.showFullImageModal = true;\n    },\n    formatDateForDB(date) {\n      const d = new Date(date);\n      // Convert to Bangkok timezone\n      const bangkokTime = new Date(d.toLocaleString('en-US', {\n        timeZone: 'Asia/Bangkok'\n      }));\n      const year = bangkokTime.getFullYear();\n      const month = String(bangkokTime.getMonth() + 1).padStart(2, '0');\n      const day = String(bangkokTime.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    async handleAdditionalImageUpload(event, bookingId) {\n      const files = Array.from(event.target.files);\n      if (files.length === 0) return;\n      try {\n        // Find the booking record\n        const booking = this.records.find(r => r.id === bookingId);\n        if (!booking) return;\n\n        // Convert files to base64\n        const newImages = [];\n        for (const file of files) {\n          const reader = new FileReader();\n          const base64 = await new Promise(resolve => {\n            reader.onload = () => resolve(reader.result);\n            reader.readAsDataURL(file);\n          });\n          newImages.push({\n            name: file.name,\n            src: base64,\n            type: 'เพิ่มเติม',\n            timestamp: new Date(Date.now() + this.serverTimeOffset).toLocaleString('th-TH')\n          });\n        }\n\n        // Update booking with new images\n        const currentImages = booking.images || [];\n        const updatedImages = [...currentImages, ...newImages];\n\n        // Update in database via API (need to add PUT endpoint)\n        await this.$http.put(`/api/car-booking/${bookingId}`, {\n          images: updatedImages\n        });\n        await this.loadRecords();\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: `อัปโหลดรูปภาพ ${files.length} ไฟล์เรียบร้อย`,\n          life: 3000\n        });\n\n        // Clear file input\n        event.target.value = '';\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถอัปโหลดรูปภาพได้',\n          life: 3000\n        });\n      }\n    },\n    async submitBorrow() {\n      try {\n        const borrowData = {\n          type: 'borrow',\n          location: this.borrowForm.location,\n          project: this.borrowForm.project,\n          description: this.borrowForm.discription,\n          selected_date: this.formatDateForDB(this.selectedDate),\n          time: this.borrowForm.time,\n          license: 'FXAG-2032',\n          colleagues: this.borrowForm.colleagues || [],\n          images: this.borrowForm.images || [],\n          user_id: localStorage.getItem('soc_user_id')\n        };\n        await this.$http.post('/api/car-booking', borrowData);\n        await this.loadRecords();\n        this.closeForm();\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: 'บันทึกการจองรถเรียบร้อยแล้ว',\n          life: 3000\n        });\n      } catch (error) {\n        // Handle conflict error (409)\n        if (error.response?.status === 409) {\n          this.$toast.add({\n            severity: 'warn',\n            summary: 'ไม่สามารถจองได้',\n            detail: error.response.data.details || error.response.data.error,\n            life: 5000\n          });\n        } else {\n          this.$toast.add({\n            severity: 'error',\n            summary: 'เกิดข้อผิดพลาด',\n            detail: 'ไม่สามารถบันทึกการจองได้',\n            life: 3000\n          });\n        }\n      }\n    },\n    async submitReturn() {\n      const borrowId = this.returnForm.borrowId || this.$refs.bookingForm?.selectedReturnBorrow;\n      if (!borrowId) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'ข้อผิดพลาด',\n          detail: 'กรุณาเลือกการแจ้งใช้รถที่ต้องการคืน',\n          life: 3000\n        });\n        return;\n      }\n      try {\n        const firstName = localStorage.getItem('soc_firstname') || '';\n        const lastName = localStorage.getItem('soc_lastname') || '';\n        const currentUserName = `${firstName} ${lastName}`.trim();\n        const bangkokTime = new Date(Date.now() + this.serverTimeOffset);\n        const currentTime = bangkokTime.toLocaleTimeString('th-TH', {\n          hour: '2-digit',\n          minute: '2-digit',\n          hour12: false\n        });\n        const returnData = {\n          return_name: currentUserName,\n          return_location: this.returnForm.location,\n          return_description: this.returnForm.discription,\n          return_time: currentTime,\n          return_date: this.formatDateForDB(bangkokTime)\n        };\n        await axios.put(`/api/car-booking/${borrowId}`, returnData);\n        await this.loadRecords();\n        this.closeForm();\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: 'บันทึกการคืนรถเรียบร้อยแล้ว',\n          life: 3000\n        });\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถบันทึกการคืนรถได้',\n          life: 3000\n        });\n      }\n    },\n    async submitCancel() {\n      if (!this.cancelForm.borrowId) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'ข้อผิดพลาด',\n          detail: 'กรุณาเลือกการจองที่ต้องการยกเลิก',\n          life: 3000\n        });\n        return;\n      }\n      try {\n        await this.$http.delete(`/api/car-booking/${this.cancelForm.borrowId}`);\n        await this.loadRecords();\n        this.closeForm();\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: 'ยกเลิกการจองเรียบร้อยแล้ว',\n          life: 3000\n        });\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถยกเลิกการจองได้',\n          life: 3000\n        });\n      }\n    },\n    updateBorrowForm({\n      field,\n      value\n    }) {\n      this.borrowForm[field] = value;\n    },\n    updateReturnForm(field, value) {\n      this.returnForm[field] = value;\n    },\n    updateCancelForm({\n      field,\n      value\n    }) {\n      this.cancelForm[field] = value;\n    },\n    async handleAdditionalImageUploadFromHistory({\n      files,\n      bookingId\n    }) {\n      if (files.length === 0) return;\n      try {\n        // Find the booking record\n        const booking = this.records.find(r => r.id === bookingId);\n        if (!booking) return;\n\n        // Convert files to base64\n        const newImages = [];\n        for (const file of files) {\n          const reader = new FileReader();\n          const base64 = await new Promise(resolve => {\n            reader.onload = () => resolve(reader.result);\n            reader.readAsDataURL(file);\n          });\n          newImages.push({\n            name: file.name,\n            src: base64,\n            type: 'เพิ่มเติม',\n            timestamp: new Date(Date.now() + this.serverTimeOffset).toLocaleString('th-TH')\n          });\n        }\n\n        // Update booking with new images\n        const currentImages = booking.images || [];\n        const updatedImages = [...currentImages, ...newImages];\n\n        // Update in database via API\n        await this.$http.put(`/api/car-booking/${bookingId}`, {\n          images: updatedImages\n        });\n        await this.loadRecords();\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: `อัปโหลดรูปภาพ ${files.length} ไฟล์เรียบร้อย`,\n          life: 3000\n        });\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'เกิดข้อผิดพลาด',\n          detail: 'ไม่สามารถอัปโหลดรูปภาพได้',\n          life: 3000\n        });\n      }\n    },\n    resetForms() {\n      this.borrowForm = {\n        license: 'FXAG-2032',\n        time: '',\n        location: '',\n        project: '',\n        discription: '',\n        colleagues: [],\n        images: []\n      };\n      this.returnForm = {\n        borrowId: '',\n        license: 'FXAG-2032',\n        location: '',\n        discription: '',\n        images: []\n      };\n      this.cancelForm = {\n        borrowId: '',\n        reason: ''\n      };\n    },\n    canUploadForBooking(bookingData) {\n      if (!bookingData) return false;\n\n      // Find the actual record from this.records\n      const record = this.records.find(r => r.id === bookingData.id);\n      if (!record) return false;\n\n      // Can upload if status is active\n      return record.status === 'active';\n    },\n    async handleModalImageUpload(event) {\n      if (!this.currentBookingData) return;\n      const files = Array.from(event.target.files);\n      if (files.length === 0) return;\n      await this.handleAdditionalImageUploadFromHistory({\n        files,\n        bookingId: this.currentBookingData.id\n      });\n\n      // Clear file input and close modal\n      event.target.value = '';\n      this.showImageModal = false;\n    }\n  }\n};","map":{"version":3,"names":["Calendar","History","BookingFormPrime","axios","components","BookingForm","data","activeTabIndex","selectedDate","showForm","activeForm","borrowForm","license","time","location","project","discription","colleagues","images","returnForm","borrowId","cancelForm","reason","records","currentTime","Date","serverTimeOffset","currentBookingData","showImageModal","selectedImages","showFullImageModal","fullSizeImage","teamsWebhookUrl","notifiedActiveBookings","Set","computed","currentDateTime","toLocaleString","year","month","day","hour","minute","second","hasActiveBorrow","some","r","status","availableBorrows","currentUserName","getCurrentUserName","filter","isBorrower","name","isColleague","Array","isArray","colleague","colleagueName","pendingBorrows","currentReturnTime","toLocaleTimeString","selectedBorrowProject","selectedBorrow","find","id","selectedBorrowDescription","borrowRecordsCount","length","bookingsAllowingImageUpload","groupedImages","groups","forEach","image","type","push","Object","keys","map","mounted","syncServerTime","setInterval","now","loadRecords","created","$http","create","baseURL","headers","methods","response","get","serverTime","clientTime","getTime","console","log","error","firstName","localStorage","getItem","lastName","trim","$toast","add","severity","summary","detail","life","triggerFileUpload","document","getElementById","click","selectDate","date","showReturnForm","showCancelForm","closeForm","resetForms","handleImageUpload","event","formType","files","from","target","file","reader","FileReader","onload","e","result","readAsDataURL","openImageModal","imageSrc","src","calculateUsageDuration","borrowDate","borrowTime","returnDate","borrowDateTime","split","Number","setHours","diffMs","diffHours","Math","floor","diffMinutes","viewImages","bookingData","handleImageError","handleImageLoad","viewFullImage","imageUrl","formatDateForDB","d","bangkokTime","timeZone","getFullYear","String","getMonth","padStart","getDate","handleAdditionalImageUpload","bookingId","booking","newImages","base64","Promise","resolve","timestamp","currentImages","updatedImages","put","value","submitBorrow","borrowData","description","selected_date","user_id","post","details","submitReturn","$refs","bookingForm","selectedReturnBorrow","hour12","returnData","return_name","return_location","return_description","return_time","return_date","submitCancel","delete","updateBorrowForm","field","updateReturnForm","updateCancelForm","handleAdditionalImageUploadFromHistory","canUploadForBooking","record","handleModalImageUpload"],"sources":["D:\\frontend_cem\\src\\views\\car_booking\\car_booking.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <div class=\"main-tabs\">\r\n      <div class=\"tabs-header\">\r\n        <div class=\"header-title\">\r\n          <i class=\"pi pi-car\"></i>\r\n          <h1>ระบบแจ้งใช้รถ/แจ้งคืนรถ</h1>\r\n        </div>\r\n        \r\n        <TabView v-model:activeIndex=\"activeTabIndex\" class=\"tab-navigation\">\r\n          <TabPanel>\r\n            <template #header>\r\n              <div class=\"tab-header\">\r\n                <i class=\"pi pi-calendar\"></i>\r\n                <span>ปฏิทิน</span>\r\n              </div>\r\n            </template>\r\n          </TabPanel>\r\n\r\n          <TabPanel>\r\n            <template #header>\r\n              <div class=\"tab-header\">\r\n                <i class=\"pi pi-history\"></i>\r\n                <span>ประวัติการใช้รถ</span>\r\n                <Badge v-if=\"borrowRecordsCount > 0\" :value=\"borrowRecordsCount\" severity=\"info\" />\r\n              </div>\r\n            </template>\r\n          </TabPanel>\r\n        </TabView>\r\n\r\n        <div v-if=\"activeTabIndex === 0\" class=\"action-buttons-header\">\r\n          <Button @click=\"showReturnForm\" :disabled=\"availableBorrows.length === 0\" severity=\"warning\"\r\n            icon=\"pi pi-upload\" raised>\r\n            <Badge v-if=\"availableBorrows.length > 0\" :value=\"availableBorrows.length\" severity=\"warning\" />\r\n            แจ้งคืนรถ\r\n          </Button>\r\n\r\n          <Button @click=\"showCancelForm\" :disabled=\"pendingBorrows.length === 0\" severity=\"danger\"\r\n            icon=\"pi pi-times-circle\" raised>\r\n            ยกเลิกการจอง\r\n            <Badge v-if=\"pendingBorrows.length > 0\" :value=\"pendingBorrows.length\" \r\n                   :style=\"{ backgroundColor: 'white', color: 'black', fontSize: '0.75rem', \r\n                            width: '1.2rem', height: '1.2rem', borderRadius: '50%',\r\n                            display: 'inline-flex', alignItems: 'center', justifyContent: 'center',\r\n                            lineHeight: '1', fontWeight: 'bold', border: '2px solid white' }\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"tab-content-area\">\r\n        <div v-if=\"activeTabIndex === 0\" class=\"tab-content\">\r\n          <Calendar :records=\"records\" :available-borrows=\"availableBorrows\" :pending-borrows=\"pendingBorrows\"\r\n            :has-active-borrow=\"hasActiveBorrow\" @select-date=\"selectDate\" @show-return-form=\"showReturnForm\"\r\n            @show-cancel-form=\"showCancelForm\" />\r\n        </div>\r\n\r\n        <div v-if=\"activeTabIndex === 1\" class=\"tab-content\">\r\n          <History :records=\"records\" @view-images=\"viewImages\"\r\n            @upload-images=\"handleAdditionalImageUploadFromHistory\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Form Modal -->\r\n    <BookingForm ref=\"bookingForm\" v-if=\"showForm\" :show-form=\"showForm\" :selected-date=\"selectedDate\"\r\n      :active-form=\"activeForm\" :borrow-form=\"borrowForm\" :return-form=\"returnForm\" :cancel-form=\"cancelForm\"\r\n      :available-borrows=\"availableBorrows\" :pending-borrows=\"pendingBorrows\" :current-return-time=\"currentReturnTime\"\r\n      :selected-borrow-project=\"selectedBorrowProject\" :selected-borrow-description=\"selectedBorrowDescription\" @close-form=\"closeForm\" @submit-borrow=\"submitBorrow\"\r\n      @submit-return=\"submitReturn\" @submit-cancel=\"submitCancel\" @handle-image-upload=\"handleImageUpload\"\r\n      @update-borrow-form=\"updateBorrowForm\" @updateReturnForm=\"updateReturnForm\"\r\n      @update-cancel-form=\"updateCancelForm\" />\r\n\r\n    <!-- Image Modal -->\r\n    <Dialog v-model:visible=\"showImageModal\" modal header=\"รูปภาพ\" :style=\"{ width: '80vw' }\" :draggable=\"false\">\r\n      <div v-if=\"selectedImages.length === 0\" class=\"no-images-state\">\r\n        <i class=\"pi pi-image\" style=\"font-size: 4rem; color: #ccc;\"></i>\r\n        <p>ไม่มีรูปภาพ</p>\r\n      </div>\r\n\r\n      <div v-else class=\"image-viewer\">\r\n        <div v-for=\"imageType in groupedImages\" :key=\"imageType.type\"\r\n          :class=\"['image-section', imageType.type === 'ใช้' ? 'borrow-section' : 'return-section']\">\r\n          <div class=\"section-header\">\r\n            <i :class=\"imageType.type === 'ใช้' ? 'pi pi-download' : 'pi pi-upload'\"></i>\r\n            รูปภาพตอน{{ imageType.type }}\r\n          </div>\r\n          <div class=\"images-grid\">\r\n            <div v-for=\"(image, index) in imageType.images\" :key=\"index\" class=\"image-container\">\r\n              <img :src=\"image.src?.src || image.src\" class=\"grid-image\" @click=\"viewFullImage(image)\" alt=\"รูปภาพ\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Upload section -->\r\n      <div v-if=\"currentBookingData && canUploadForBooking(currentBookingData)\" class=\"upload-section\">\r\n        <Divider />\r\n        <div class=\"upload-controls\">\r\n          <input type=\"file\" id=\"modal-upload\" @change=\"handleModalImageUpload\" accept=\"image/*\" multiple\r\n            style=\"display: none\" />\r\n          <Button label=\"อัปโหลดรูปเพิ่ม\" icon=\"pi pi-camera\" @click=\"triggerFileUpload\" severity=\"secondary\" />\r\n        </div>\r\n      </div>\r\n\r\n    </Dialog>\r\n    <!-- Full Size Image Modal -->\r\n    <Dialog v-model:visible=\"showFullImageModal\" modal header=\"รูปภาพขนาดใหญ่\" :style=\"{ width: '90vw' }\"\r\n      :draggable=\"false\">\r\n      <div v-if=\"!fullSizeImage\" class=\"no-image-placeholder\">\r\n        <p>ไม่สามารถโหลดรูปภาพได้</p>\r\n      </div>\r\n      <img v-else :src=\"typeof fullSizeImage === 'string' ? fullSizeImage : fullSizeImage.src\" class=\"full-size-image\"\r\n        @error=\"handleImageError\" @load=\"handleImageLoad\" />\r\n    </Dialog>\r\n\r\n    <!-- Toast for notifications -->\r\n    <Toast />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Calendar from './Calendar.vue'\r\nimport History from './History.vue'\r\nimport BookingFormPrime from './BookingFormPrime.vue'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  components: {\r\n    Calendar,\r\n    History,\r\n    BookingForm: BookingFormPrime\r\n  },\r\n  data() {\r\n    return {\r\n      activeTabIndex: 0,\r\n      selectedDate: null,\r\n      showForm: false,\r\n      activeForm: 'borrow',\r\n      borrowForm: {\r\n        license: 'FXAG-2032',\r\n        time: '',\r\n        location: '',\r\n        project: '',\r\n        discription: '',\r\n        colleagues: [],\r\n        images: []\r\n      },\r\n      returnForm: {\r\n        borrowId: '',\r\n        license: 'FXAG-2032',\r\n        location: '',\r\n        discription: '',\r\n        images: []\r\n      },\r\n      cancelForm: {\r\n        borrowId: '',\r\n        reason: ''\r\n      },\r\n      records: [],\r\n      currentTime: new Date(),\r\n      serverTimeOffset: 0,\r\n      currentBookingData: null,\r\n      showImageModal: false,\r\n      selectedImages: [],\r\n      showFullImageModal: false,\r\n      fullSizeImage: '',\r\n      teamsWebhookUrl: 'YOUR_TEAMS_WEBHOOK_URL_HERE',\r\n      notifiedActiveBookings: new Set()\r\n    }\r\n  },\r\n  computed: {\r\n    currentDateTime() {\r\n      return this.currentTime.toLocaleString('th-TH', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        second: '2-digit'\r\n      })\r\n    },\r\n    hasActiveBorrow() {\r\n      return this.records.some(r => r.status === 'active')\r\n    },\r\n    availableBorrows() {\r\n      const currentUserName = this.getCurrentUserName()\r\n      \r\n      return this.records.filter(r => {\r\n        // Must be active status (past borrow time, not returned)\r\n        if (r.status !== 'active') return false\r\n\r\n        // Check if current user is authorized to return this booking\r\n        const isBorrower = r.name === currentUserName\r\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) &&\r\n          r.colleagues.some(colleague => {\r\n            const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name\r\n            return colleagueName === currentUserName\r\n          })\r\n\r\n        return isBorrower || isColleague\r\n      })\r\n    },\r\n    pendingBorrows() {\r\n      const currentUserName = this.getCurrentUserName()\r\n\r\n      return this.records.filter(r => {\r\n        // Must be pending status (future booking, not started yet)\r\n        if (r.status !== 'pending') return false\r\n\r\n        // Check if current user is authorized to cancel this booking\r\n        const isBorrower = r.name === currentUserName\r\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) &&\r\n          r.colleagues.some(colleague => {\r\n            const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name\r\n            return colleagueName === currentUserName\r\n          })\r\n\r\n        return isBorrower || isColleague\r\n      })\r\n    },\r\n    currentReturnTime() {\r\n      return this.currentTime.toLocaleTimeString('th-TH', {\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      })\r\n    },\r\n    selectedBorrowProject() {\r\n      if (!this.returnForm.borrowId) return ''\r\n      const selectedBorrow = this.records.find(r => r.id == this.returnForm.borrowId)\r\n      return selectedBorrow ? selectedBorrow.project : ''\r\n    },\r\n    selectedBorrowDescription() {\r\n      if (!this.returnForm.borrowId) return ''\r\n      const selectedBorrow = this.records.find(r => r.id == this.returnForm.borrowId)\r\n      return selectedBorrow ? selectedBorrow.discription : ''\r\n    },\r\n    borrowRecordsCount() {\r\n      return this.records.filter(r => r.status !== 'returned').length\r\n    },\r\n    bookingsAllowingImageUpload() {\r\n      const currentUserName = this.getCurrentUserName()\r\n      \r\n      return this.records.filter(r => {\r\n        // Must be active status and user is authorized\r\n        if (r.status !== 'active') return false\r\n\r\n        const isBorrower = r.name === currentUserName\r\n        const isColleague = r.colleagues && Array.isArray(r.colleagues) &&\r\n          r.colleagues.some(colleague => {\r\n            const colleagueName = typeof colleague === 'string' ? colleague : colleague?.name\r\n            return colleagueName === currentUserName\r\n          })\r\n\r\n        return isBorrower || isColleague\r\n      })\r\n    },\r\n    groupedImages() {\r\n      const groups = {}\r\n      this.selectedImages.forEach(image => {\r\n        if (!groups[image.type]) {\r\n          groups[image.type] = []\r\n        }\r\n        groups[image.type].push(image)\r\n      })\r\n      return Object.keys(groups).map(type => ({\r\n        type,\r\n        images: groups[type]\r\n      }))\r\n    }\r\n  },\r\n  mounted() {\r\n    this.syncServerTime()\r\n    \r\n    setInterval(() => {\r\n      this.currentTime = new Date(Date.now() + this.serverTimeOffset)\r\n    }, 1000)\r\n    \r\n    setInterval(() => {\r\n      this.loadRecords()\r\n    }, 30000)\r\n    \r\n    setInterval(() => {\r\n      this.syncServerTime()\r\n    }, 300000)\r\n  },\r\n  created() {\r\n    this.$http = axios.create({\r\n      baseURL: '',\r\n      headers: {\r\n        'X-Timezone': 'Asia/Bangkok'\r\n      }\r\n    })\r\n    this.loadRecords()\r\n  },\r\n  methods: {\r\n    async syncServerTime() {\r\n      try {\r\n        const response = await axios.get('/api/server-time')\r\n        const serverTime = new Date(response.data.serverTime)\r\n        const clientTime = new Date()\r\n        this.serverTimeOffset = serverTime.getTime() - clientTime.getTime()\r\n        this.currentTime = new Date(Date.now() + this.serverTimeOffset)\r\n        console.log('[Time Sync] Server time:', serverTime.toLocaleString('th-TH'))\r\n        console.log('[Time Sync] Offset:', this.serverTimeOffset, 'ms')\r\n      } catch (error) {\r\n        console.error('Failed to sync server time:', error)\r\n      }\r\n    },\r\n    getCurrentUserName() {\r\n      const firstName = localStorage.getItem('soc_firstname') || ''\r\n      const lastName = localStorage.getItem('soc_lastname') || ''\r\n      return `${firstName} ${lastName}`.trim()\r\n    },\r\n    async loadRecords() {\r\n      try {\r\n        const response = await axios.get('/api/car-booking')\r\n        this.records = response.data\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: 'error',\r\n          summary: 'เกิดข้อผิดพลาด',\r\n          detail: 'ไม่สามารถโหลดข้อมูลการจองรถได้',\r\n          life: 3000\r\n        })\r\n      }\r\n    },\r\n    triggerFileUpload() {\r\n      document.getElementById('modal-upload').click()\r\n    },\r\n    selectDate(date) {\r\n      this.selectedDate = date\r\n      this.showForm = true\r\n      this.activeForm = 'borrow'\r\n    },\r\n    showReturnForm() {\r\n      this.selectedDate = new Date(Date.now() + this.serverTimeOffset)\r\n      this.showForm = true\r\n      this.activeForm = 'return'\r\n    },\r\n    showCancelForm() {\r\n      this.selectedDate = new Date(Date.now() + this.serverTimeOffset)\r\n      this.showForm = true\r\n      this.activeForm = 'cancel'\r\n    },\r\n    closeForm() {\r\n      this.showForm = false\r\n      this.selectedDate = null\r\n      this.resetForms()\r\n    },\r\n    handleImageUpload(event, formType) {\r\n      const files = Array.from(event.target.files)\r\n      const images = []\r\n      files.forEach(file => {\r\n        const reader = new FileReader()\r\n        reader.onload = (e) => {\r\n          images.push(e.target.result)\r\n          if (images.length === files.length) {\r\n            if (formType === 'borrow') {\r\n              this.borrowForm.images = images\r\n            } else {\r\n              this.returnForm.images = images\r\n            }\r\n          }\r\n        }\r\n        reader.readAsDataURL(file)\r\n      })\r\n    },\r\n    openImageModal(imageSrc) {\r\n      this.selectedImages = [{ src: imageSrc, type: 'รูปภาพ' }]\r\n      this.showImageModal = true\r\n    },\r\n    calculateUsageDuration(borrowDate, borrowTime, returnDate) {\r\n      const borrowDateTime = new Date(borrowDate)\r\n      const [hour, minute] = borrowTime.split(':').map(Number)\r\n      borrowDateTime.setHours(hour, minute, 0, 0)\r\n\r\n      const diffMs = returnDate - borrowDateTime\r\n      const diffHours = Math.floor(diffMs / (1000 * 60 * 60))\r\n      const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60))\r\n\r\n      if (diffHours > 0) {\r\n        return `${diffHours} ชั่วโมง ${diffMinutes} นาที`\r\n      } else {\r\n        return `${diffMinutes} นาที`\r\n      }\r\n    },\r\n    viewImages(images, bookingData = null) {\r\n      this.selectedImages = images\r\n      this.currentBookingData = bookingData\r\n      this.showImageModal = true\r\n    },\r\n    handleImageError() {\r\n      this.$toast.add({\r\n        severity: 'error',\r\n        summary: 'เกิดข้อผิดพลาด',\r\n        detail: 'ไม่สามารถโหลดรูปภาพได้',\r\n        life: 3000\r\n      })\r\n    },\r\n    handleImageLoad() {\r\n    },\r\n    viewFullImage(imageSrc) {\r\n      // Handle nested proxy objects\r\n      let imageUrl = imageSrc\r\n      if (typeof imageSrc === 'object' && imageSrc.src) {\r\n        imageUrl = typeof imageSrc.src === 'string' ? imageSrc.src : imageSrc.src.src\r\n      }\r\n      this.fullSizeImage = imageUrl\r\n      this.showFullImageModal = true\r\n    },\r\n    formatDateForDB(date) {\r\n      const d = new Date(date)\r\n      // Convert to Bangkok timezone\r\n      const bangkokTime = new Date(d.toLocaleString('en-US', { timeZone: 'Asia/Bangkok' }))\r\n      const year = bangkokTime.getFullYear()\r\n      const month = String(bangkokTime.getMonth() + 1).padStart(2, '0')\r\n      const day = String(bangkokTime.getDate()).padStart(2, '0')\r\n      return `${year}-${month}-${day}`\r\n    },\r\n    async handleAdditionalImageUpload(event, bookingId) {\r\n      const files = Array.from(event.target.files)\r\n      if (files.length === 0) return\r\n\r\n      try {\r\n        // Find the booking record\r\n        const booking = this.records.find(r => r.id === bookingId)\r\n        if (!booking) return\r\n\r\n        // Convert files to base64\r\n        const newImages = []\r\n        for (const file of files) {\r\n          const reader = new FileReader()\r\n          const base64 = await new Promise((resolve) => {\r\n            reader.onload = () => resolve(reader.result)\r\n            reader.readAsDataURL(file)\r\n          })\r\n          newImages.push({\r\n            name: file.name,\r\n            src: base64,\r\n            type: 'เพิ่มเติม',\r\n            timestamp: new Date(Date.now() + this.serverTimeOffset).toLocaleString('th-TH')\r\n          })\r\n        }\r\n\r\n        // Update booking with new images\r\n        const currentImages = booking.images || []\r\n        const updatedImages = [...currentImages, ...newImages]\r\n\r\n        // Update in database via API (need to add PUT endpoint)\r\n        await this.$http.put(`/api/car-booking/${bookingId}`, {\r\n          images: updatedImages\r\n        })\r\n\r\n        await this.loadRecords()\r\n\r\n        this.$toast.add({\r\n          severity: 'success',\r\n          summary: 'สำเร็จ',\r\n          detail: `อัปโหลดรูปภาพ ${files.length} ไฟล์เรียบร้อย`,\r\n          life: 3000\r\n        })\r\n\r\n        // Clear file input\r\n        event.target.value = ''\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: 'error',\r\n          summary: 'เกิดข้อผิดพลาด',\r\n          detail: 'ไม่สามารถอัปโหลดรูปภาพได้',\r\n          life: 3000\r\n        })\r\n      }\r\n    },\r\n    async submitBorrow() {\r\n      try {\r\n        const borrowData = {\r\n          type: 'borrow',\r\n          location: this.borrowForm.location,\r\n          project: this.borrowForm.project,\r\n          description: this.borrowForm.discription,\r\n          selected_date: this.formatDateForDB(this.selectedDate),\r\n          time: this.borrowForm.time,\r\n          license: 'FXAG-2032',\r\n          colleagues: this.borrowForm.colleagues || [],\r\n          images: this.borrowForm.images || [],\r\n          user_id: localStorage.getItem('soc_user_id')\r\n        }\r\n\r\n        await this.$http.post('/api/car-booking', borrowData)\r\n\r\n\r\n        await this.loadRecords()\r\n        this.closeForm()\r\n\r\n        this.$toast.add({\r\n          severity: 'success',\r\n          summary: 'สำเร็จ',\r\n          detail: 'บันทึกการจองรถเรียบร้อยแล้ว',\r\n          life: 3000\r\n        })\r\n      } catch (error) {\r\n        \r\n        // Handle conflict error (409)\r\n        if (error.response?.status === 409) {\r\n          this.$toast.add({\r\n            severity: 'warn',\r\n            summary: 'ไม่สามารถจองได้',\r\n            detail: error.response.data.details || error.response.data.error,\r\n            life: 5000\r\n          })\r\n        } else {\r\n          this.$toast.add({\r\n            severity: 'error',\r\n            summary: 'เกิดข้อผิดพลาด',\r\n            detail: 'ไม่สามารถบันทึกการจองได้',\r\n            life: 3000\r\n          })\r\n        }\r\n      }\r\n    },\r\n    async submitReturn() {\r\n      const borrowId = this.returnForm.borrowId || this.$refs.bookingForm?.selectedReturnBorrow\r\n\r\n      if (!borrowId) {\r\n        this.$toast.add({ severity: 'error', summary: 'ข้อผิดพลาด', detail: 'กรุณาเลือกการแจ้งใช้รถที่ต้องการคืน', life: 3000 })\r\n        return\r\n      }\r\n\r\n      try {\r\n        const firstName = localStorage.getItem('soc_firstname') || ''\r\n        const lastName = localStorage.getItem('soc_lastname') || ''\r\n        const currentUserName = `${firstName} ${lastName}`.trim()\r\n\r\n        const bangkokTime = new Date(Date.now() + this.serverTimeOffset)\r\n        const currentTime = bangkokTime.toLocaleTimeString('th-TH', {\r\n          hour: '2-digit',\r\n          minute: '2-digit',\r\n          hour12: false\r\n        })\r\n\r\n        const returnData = {\r\n          return_name: currentUserName,\r\n          return_location: this.returnForm.location,\r\n          return_description: this.returnForm.discription,\r\n          return_time: currentTime,\r\n          return_date: this.formatDateForDB(bangkokTime)\r\n        }\r\n\r\n        await axios.put(`/api/car-booking/${borrowId}`, returnData)\r\n\r\n        await this.loadRecords()\r\n        this.closeForm()\r\n\r\n        this.$toast.add({\r\n          severity: 'success',\r\n          summary: 'สำเร็จ',\r\n          detail: 'บันทึกการคืนรถเรียบร้อยแล้ว',\r\n          life: 3000\r\n        })\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: 'error',\r\n          summary: 'เกิดข้อผิดพลาด',\r\n          detail: 'ไม่สามารถบันทึกการคืนรถได้',\r\n          life: 3000\r\n        })\r\n      }\r\n    },\r\n    async submitCancel() {\r\n\r\n      if (!this.cancelForm.borrowId) {\r\n        this.$toast.add({ severity: 'error', summary: 'ข้อผิดพลาด', detail: 'กรุณาเลือกการจองที่ต้องการยกเลิก', life: 3000 })\r\n        return\r\n      }\r\n\r\n      try {\r\n        await this.$http.delete(`/api/car-booking/${this.cancelForm.borrowId}`)\r\n\r\n        await this.loadRecords()\r\n        this.closeForm()\r\n\r\n        this.$toast.add({\r\n          severity: 'success',\r\n          summary: 'สำเร็จ',\r\n          detail: 'ยกเลิกการจองเรียบร้อยแล้ว',\r\n          life: 3000\r\n        })\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: 'error',\r\n          summary: 'เกิดข้อผิดพลาด',\r\n          detail: 'ไม่สามารถยกเลิกการจองได้',\r\n          life: 3000\r\n        })\r\n      }\r\n    },\r\n    updateBorrowForm({ field, value }) {\r\n      this.borrowForm[field] = value\r\n    },\r\n    updateReturnForm(field, value) {\r\n      this.returnForm[field] = value\r\n    },\r\n    updateCancelForm({ field, value }) {\r\n      this.cancelForm[field] = value\r\n    },\r\n    async handleAdditionalImageUploadFromHistory({ files, bookingId }) {\r\n      if (files.length === 0) return\r\n\r\n      try {\r\n        // Find the booking record\r\n        const booking = this.records.find(r => r.id === bookingId)\r\n        if (!booking) return\r\n\r\n        // Convert files to base64\r\n        const newImages = []\r\n        for (const file of files) {\r\n          const reader = new FileReader()\r\n          const base64 = await new Promise((resolve) => {\r\n            reader.onload = () => resolve(reader.result)\r\n            reader.readAsDataURL(file)\r\n          })\r\n          newImages.push({\r\n            name: file.name,\r\n            src: base64,\r\n            type: 'เพิ่มเติม',\r\n            timestamp: new Date(Date.now() + this.serverTimeOffset).toLocaleString('th-TH')\r\n          })\r\n        }\r\n\r\n        // Update booking with new images\r\n        const currentImages = booking.images || []\r\n        const updatedImages = [...currentImages, ...newImages]\r\n\r\n        // Update in database via API\r\n        await this.$http.put(`/api/car-booking/${bookingId}`, {\r\n          images: updatedImages\r\n        })\r\n\r\n        await this.loadRecords()\r\n\r\n        this.$toast.add({\r\n          severity: 'success',\r\n          summary: 'สำเร็จ',\r\n          detail: `อัปโหลดรูปภาพ ${files.length} ไฟล์เรียบร้อย`,\r\n          life: 3000\r\n        })\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: 'error',\r\n          summary: 'เกิดข้อผิดพลาด',\r\n          detail: 'ไม่สามารถอัปโหลดรูปภาพได้',\r\n          life: 3000\r\n        })\r\n      }\r\n    },\r\n    resetForms() {\r\n      this.borrowForm = {\r\n        license: 'FXAG-2032',\r\n        time: '',\r\n        location: '',\r\n        project: '',\r\n        discription: '',\r\n        colleagues: [],\r\n        images: []\r\n      }\r\n      this.returnForm = {\r\n        borrowId: '',\r\n        license: 'FXAG-2032',\r\n        location: '',\r\n        discription: '',\r\n        images: []\r\n      }\r\n      this.cancelForm = {\r\n        borrowId: '',\r\n        reason: ''\r\n      }\r\n    },\r\n    canUploadForBooking(bookingData) {\r\n      if (!bookingData) return false\r\n      \r\n      // Find the actual record from this.records\r\n      const record = this.records.find(r => r.id === bookingData.id)\r\n      if (!record) return false\r\n      \r\n      // Can upload if status is active\r\n      return record.status === 'active'\r\n    },\r\n    async handleModalImageUpload(event) {\r\n      if (!this.currentBookingData) return\r\n\r\n      const files = Array.from(event.target.files)\r\n      if (files.length === 0) return\r\n\r\n      await this.handleAdditionalImageUploadFromHistory({\r\n        files,\r\n        bookingId: this.currentBookingData.id\r\n      })\r\n\r\n      // Clear file input and close modal\r\n      event.target.value = ''\r\n      this.showImageModal = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.calendar-card {\r\n  width: 100%;\r\n  margin: 0;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\r\n  border: 1px solid #e9ecef;\r\n}\r\n\r\n.app-container {\r\n  padding: 1.5rem;\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n  background: #f8f9fa;\r\n  min-height: 100vh;\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n}\r\n\r\n.main-tabs {\r\n  margin-top: 1.5rem;\r\n  box-shadow: 0 4px 20px rgba(74, 144, 226, 0.15);\r\n  border-radius: 15px;\r\n  overflow: hidden;\r\n  border: 1px solid rgba(74, 144, 226, 0.2);\r\n  background: white;\r\n}\r\n\r\n.tabs-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0.75rem 1.5rem;\r\n  background: linear-gradient(135deg, #4A90E2, #D73527);\r\n  position: relative;\r\n  flex-wrap: wrap;\r\n  gap: 1rem;\r\n}\r\n\r\n.header-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n  color: white;\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  z-index: 2;\r\n}\r\n\r\n.header-title h1 {\r\n  margin: 0;\r\n  font-size: 1.8rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.header-title i {\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.tab-navigation {\r\n  background: transparent;\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n  margin-right: auto;\r\n}\r\n\r\n.tab-navigation :deep(.p-tabview-nav) {\r\n  background: transparent;\r\n  border: none;\r\n  margin: 0;\r\n  padding: 0;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n}\r\n\r\n.tab-navigation :deep(.p-tabview-nav-link) {\r\n  color: white;\r\n  border: none;\r\n  font-weight: 500;\r\n  padding: 0.75rem 1rem;\r\n  font-size: 0.9rem;\r\n  transition: all 0.3s ease;\r\n  border-radius: 8px;\r\n  margin: 0.25rem;\r\n  white-space: nowrap;\r\n}\r\n\r\n.tab-navigation :deep(.p-tabview-nav li.p-highlight .p-tabview-nav-link) {\r\n  background: rgba(255, 255, 255, 0.25);\r\n  color: white;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n  transform: translateY(-2px);\r\n  border-bottom: none !important;\r\n}\r\n\r\n.tab-navigation :deep(.p-tabview-nav-link:hover) {\r\n  background: rgba(255, 255, 255, 0.15);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.tab-navigation :deep(.p-tabview-ink-bar) {\r\n  display: none !important;\r\n}\r\n\r\n.tab-navigation :deep(.p-tabview-panels) {\r\n  display: none;\r\n}\r\n\r\n.action-buttons-header {\r\n  display: flex;\r\n  gap: 1rem;\r\n  flex-shrink: 0;\r\n  z-index: 1;\r\n  margin-left: auto;\r\n}\r\n\r\n.action-buttons-header .p-button {\r\n  font-weight: 700;\r\n  padding: 0.75rem 1.25rem;\r\n  font-size: 0.95rem;\r\n  border-radius: 8px;\r\n  min-width: 140px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n  border: 3px solid white;\r\n}\r\n\r\n.action-buttons-header .p-button:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n  border: 3px solid white;\r\n}\r\n\r\n.tab-content-area {\r\n  background: white;\r\n}\r\n\r\n.tab-content {\r\n  padding: 0;\r\n}\r\n\r\n.main-tabs :deep(.p-tabview-nav) {\r\n  background: transparent;\r\n  border: none;\r\n  margin: 0;\r\n  padding: 0.5rem;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.main-tabs :deep(.p-tabview-nav-link) {\r\n  color: black !important;\r\n  border: none;\r\n  font-weight: 800 !important;\r\n  padding: 1rem 1.5rem;\r\n  font-size: 1rem;\r\n  transition: all 0.3s ease;\r\n  border-radius: 8px;\r\n  margin: 0 0.25rem;\r\n  background: rgba(255, 255, 255, 0.4\r\n  )\r\n}\r\n\r\n.tab-header {\r\n  font-weight: 800 !important;\r\n  color: black !important;\r\n}\r\n\r\n.tab-header span {\r\n  font-weight: 800 !important;\r\n  color: black !important;\r\n}\r\n\r\n.tab-header i {\r\n  font-size: 1.2rem;\r\n  font-weight: 900;\r\n}\r\n\r\n.main-tabs :deep(.p-tabview-nav li.p-highlight .p-tabview-nav-link) {\r\n  background: white;\r\n  color: #4A90E2;\r\n  box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);\r\n  transform: translateY(-2px);\r\n  border-bottom: none !important;\r\n  font-weight: 700;\r\n  border-radius: 8px;\r\n}\r\n\r\n.main-tabs :deep(.p-tabview-nav-link:hover) {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  transform: translateY(-1px);\r\n  border-radius: 8px;\r\n}\r\n\r\n.main-tabs :deep(.p-tabview-ink-bar) {\r\n  display: none !important;\r\n}\r\n\r\n.main-tabs :deep(.p-tabview-panels) {\r\n  background: white;\r\n  padding: 0;\r\n  border-radius: 0 0 15px 15px;\r\n}\r\n\r\n.main-tabs :deep(.p-tabview-panel) {\r\n  padding: 0;\r\n}\r\n\r\n.tab-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.tab-header i {\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.tab-content {\r\n  padding: 0;\r\n}\r\n\r\n.image-viewer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2rem;\r\n}\r\n\r\n.image-section {\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n.borrow-section {\r\n  border: 2px solid #28a745;\r\n}\r\n\r\n.borrow-section .section-header {\r\n  background: #d4edda;\r\n  color: #155724;\r\n  border-bottom: 1px solid #c3e6cb;\r\n}\r\n\r\n.return-section {\r\n  border: 2px solid #ffc107;\r\n}\r\n\r\n.return-section .section-header {\r\n  background: #fff3cd;\r\n  color: #856404;\r\n  border-bottom: 1px solid #ffeaa7;\r\n}\r\n\r\n.section-header {\r\n  background: #f8f9fa;\r\n  padding: 1rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  border-bottom: 1px solid #e9ecef;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.images-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n  padding: 1rem;\r\n}\r\n\r\n.image-container {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 200px;\r\n}\r\n\r\n.grid-image {\r\n  width: 100%;\r\n  height: 200px;\r\n  object-fit: cover;\r\n  border-radius: 6px;\r\n  border: 1px solid #e9ecef;\r\n  cursor: pointer;\r\n  transition: transform 0.2s ease;\r\n}\r\n\r\n.image-placeholder {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: 200px;\r\n  background: #f8f9fa;\r\n  border: 1px dashed #dee2e6;\r\n  border-radius: 6px;\r\n  color: #6c757d;\r\n}\r\n\r\n.grid-image:hover {\r\n  transform: scale(1.05);\r\n}\r\n\r\n.full-size-image {\r\n  max-width: 100%;\r\n  max-height: 80vh;\r\n  object-fit: contain;\r\n  border-radius: 8px;\r\n  display: block;\r\n  margin: 0 auto;\r\n}\r\n\r\n.no-images-state {\r\n  text-align: center;\r\n  padding: 3rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.no-images-state p {\r\n  margin-top: 1rem;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.upload-section {\r\n  margin-top: 1rem;\r\n}\r\n\r\n.upload-controls {\r\n  text-align: center;\r\n  padding: 1rem;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .app-container {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .main-header {\r\n    flex-direction: column;\r\n    text-align: center;\r\n    padding: 1.5rem;\r\n  }\r\n\r\n  .main-header h1 {\r\n    font-size: 1.5rem;\r\n  }\r\n\r\n  .car-status {\r\n    margin-bottom: 1rem !important;\r\n  }\r\n\r\n  .status-card {\r\n    min-width: 100%;\r\n    max-width: 100%;\r\n  }\r\n\r\n  .status-content {\r\n    padding: 1rem;\r\n    gap: 1rem;\r\n    flex-direction: column;\r\n    text-align: center;\r\n  }\r\n\r\n  .status-icon {\r\n    font-size: 2rem;\r\n  }\r\n\r\n  .status-text {\r\n    align-items: center;\r\n  }\r\n\r\n  .tabs-header {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n    padding: 1rem;\r\n    text-align: center;\r\n  }\r\n\r\n  .header-title {\r\n    order: 1;\r\n    position: static;\r\n    transform: none;\r\n    justify-content: center;\r\n    width: 100%;\r\n  }\r\n\r\n  .tab-navigation {\r\n    order: 2;\r\n    width: 100%;\r\n    margin-right: 0;\r\n  }\r\n\r\n  .tab-navigation :deep(.p-tabview-nav) {\r\n    flex-direction: column;\r\n    gap: 0.5rem;\r\n    padding: 0.5rem;\r\n  }\r\n\r\n  .tab-navigation :deep(.p-tabview-nav-link) {\r\n    padding: 0.75rem 1rem;\r\n    font-size: 0.85rem;\r\n    margin: 0;\r\n    width: 100%;\r\n    text-align: center;\r\n  }\r\n\r\n  .action-buttons-header {\r\n    order: 3;\r\n    width: 100%;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n  }\r\n\r\n  .action-buttons-header {\r\n    width: 100%;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n  }\r\n\r\n  .action-buttons-header .p-button {\r\n    flex: 1;\r\n    font-size: 0.9rem;\r\n    padding: 0.75rem 1rem;\r\n    min-width: auto;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .app-container {\r\n    padding: 0.5rem;\r\n  }\r\n\r\n  .main-header h1 {\r\n    font-size: 1.25rem;\r\n  }\r\n\r\n  .header-title h1 {\r\n    font-size: 1.2rem;\r\n  }\r\n\r\n  .status-card {\r\n    min-width: 100%;\r\n  }\r\n\r\n  .status-content {\r\n    padding: 0.8rem;\r\n  }\r\n\r\n  .status-icon {\r\n    font-size: 1.8rem;\r\n  }\r\n\r\n  .status-text strong {\r\n    font-size: 1rem;\r\n  }\r\n\r\n  .action-buttons-header {\r\n    flex-direction: column;\r\n    gap: 0.8rem;\r\n  }\r\n\r\n  .action-buttons-header .p-button {\r\n    width: 100%;\r\n    font-size: 0.85rem;\r\n    padding: 0.75rem;\r\n  }\r\n\r\n  .tab-navigation :deep(.p-tabview-nav-link) {\r\n    padding: 0.6rem 0.8rem;\r\n    font-size: 0.8rem;\r\n  }\r\n\r\n  .tab-header {\r\n    gap: 0.5rem;\r\n  }\r\n\r\n  .tab-header span {\r\n    font-size: 0.8rem;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}