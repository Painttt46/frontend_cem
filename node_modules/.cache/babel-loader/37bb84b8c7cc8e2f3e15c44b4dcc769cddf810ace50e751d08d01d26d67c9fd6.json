{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"loading-state\"\n};\nconst _hoisted_2 = {\n  key: 1,\n  class: \"user-info-content\"\n};\nconst _hoisted_3 = {\n  class: \"user-header\"\n};\nconst _hoisted_4 = {\n  class: \"user-title\"\n};\nconst _hoisted_5 = {\n  class: \"user-details\"\n};\nconst _hoisted_6 = {\n  class: \"detail-row\"\n};\nconst _hoisted_7 = {\n  class: \"detail-value\"\n};\nconst _hoisted_8 = {\n  class: \"detail-row\"\n};\nconst _hoisted_9 = {\n  class: \"detail-value\"\n};\nconst _hoisted_10 = {\n  class: \"detail-row\"\n};\nconst _hoisted_11 = {\n  class: \"detail-value\"\n};\nconst _hoisted_12 = {\n  class: \"detail-row\"\n};\nconst _hoisted_13 = {\n  class: \"detail-value\"\n};\nconst _hoisted_14 = {\n  class: \"detail-row\"\n};\nconst _hoisted_15 = {\n  class: \"detail-value\"\n};\nconst _hoisted_16 = {\n  class: \"detail-row\"\n};\nconst _hoisted_17 = {\n  class: \"detail-value\"\n};\nconst _hoisted_18 = {\n  class: \"detail-row\"\n};\nconst _hoisted_19 = {\n  key: 2,\n  class: \"error-state\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Badge = _resolveComponent(\"Badge\");\n  const _component_Divider = _resolveComponent(\"Divider\");\n  const _component_Button = _resolveComponent(\"Button\");\n  const _component_Dialog = _resolveComponent(\"Dialog\");\n  return _openBlock(), _createBlock(_component_Dialog, {\n    visible: $props.visible,\n    modal: \"\",\n    header: \"ข้อมูลผู้ใช้\",\n    style: {\n      width: '500px'\n    },\n    \"onUpdate:visible\": _cache[1] || (_cache[1] = $event => _ctx.$emit('update:visible', $event))\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_Button, {\n      label: \"ปิด\",\n      icon: \"pi pi-times\",\n      onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit('update:visible', false))\n    })]),\n    default: _withCtx(() => [$setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [...(_cache[2] || (_cache[2] = [_createElementVNode(\"i\", {\n      class: \"pi pi-spin pi-spinner\",\n      style: {\n        \"font-size\": \"2rem\"\n      }\n    }, null, -1 /* CACHED */), _createElementVNode(\"p\", null, \"กำลังโหลดข้อมูล...\", -1 /* CACHED */)]))])) : $setup.user ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n      class: \"user-avatar\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-user\"\n    })], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h3\", null, _toDisplayString($setup.user.firstname) + \" \" + _toDisplayString($setup.user.lastname), 1 /* TEXT */), _createVNode(_component_Badge, {\n      value: $setup.getRoleLabel($setup.user.role),\n      severity: $setup.getRoleSeverity($setup.user.role)\n    }, null, 8 /* PROPS */, [\"value\", \"severity\"])])]), _createVNode(_component_Divider), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_cache[4] || (_cache[4] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-id-card\"\n    }), _createTextVNode(\" รหัสพนักงาน\")], -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_7, _toDisplayString($setup.user.employee_id || '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_8, [_cache[5] || (_cache[5] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-user\"\n    }), _createTextVNode(\" Username\")], -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_9, _toDisplayString($setup.user.username), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_10, [_cache[6] || (_cache[6] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-envelope\"\n    }), _createTextVNode(\" Email\")], -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_11, _toDisplayString($setup.user.email || '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_12, [_cache[7] || (_cache[7] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-phone\"\n    }), _createTextVNode(\" เบอร์โทร\")], -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_13, _toDisplayString($setup.user.phone || '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_14, [_cache[8] || (_cache[8] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-building\"\n    }), _createTextVNode(\" แผนก\")], -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_15, _toDisplayString($setup.user.department || '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_16, [_cache[9] || (_cache[9] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-briefcase\"\n    }), _createTextVNode(\" ตำแหน่ง\")], -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_17, _toDisplayString($setup.user.position || '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_18, [_cache[10] || (_cache[10] = _createElementVNode(\"span\", {\n      class: \"detail-label\"\n    }, [_createElementVNode(\"i\", {\n      class: \"pi pi-circle-fill\"\n    }), _createTextVNode(\" สถานะ\")], -1 /* CACHED */)), _createVNode(_component_Badge, {\n      value: $setup.user.is_active ? 'ใช้งาน' : 'ปิดใช้งาน',\n      severity: $setup.user.is_active ? 'success' : 'danger'\n    }, null, 8 /* PROPS */, [\"value\", \"severity\"])])])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [...(_cache[11] || (_cache[11] = [_createElementVNode(\"i\", {\n      class: \"pi pi-exclamation-triangle\",\n      style: {\n        \"font-size\": \"2rem\",\n        \"color\": \"#f59e0b\"\n      }\n    }, null, -1 /* CACHED */), _createElementVNode(\"p\", null, \"ไม่พบข้อมูลผู้ใช้\", -1 /* CACHED */)]))]))]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"visible\"]);\n}","map":{"version":3,"names":["class","_createBlock","_component_Dialog","visible","$props","modal","header","style","width","_cache","$event","_ctx","$emit","footer","_withCtx","_createVNode","_component_Button","label","icon","onClick","$setup","loading","_createElementBlock","_hoisted_1","_createElementVNode","user","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","firstname","lastname","_component_Badge","value","getRoleLabel","role","severity","getRoleSeverity","_component_Divider","_hoisted_5","_hoisted_6","_hoisted_7","employee_id","_hoisted_8","_hoisted_9","username","_hoisted_10","_hoisted_11","email","_hoisted_12","_hoisted_13","phone","_hoisted_14","_hoisted_15","department","_hoisted_16","_hoisted_17","position","_hoisted_18","is_active","_hoisted_19"],"sources":["D:\\frontend_cem\\src\\components\\UserInfoDialog.vue"],"sourcesContent":["<template>\n  <Dialog :visible=\"visible\" modal header=\"ข้อมูลผู้ใช้\" :style=\"{ width: '500px' }\" @update:visible=\"$emit('update:visible', $event)\">\n    <div v-if=\"loading\" class=\"loading-state\">\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2rem\"></i>\n      <p>กำลังโหลดข้อมูล...</p>\n    </div>\n\n    <div v-else-if=\"user\" class=\"user-info-content\">\n      <div class=\"user-header\">\n        <div class=\"user-avatar\">\n          <i class=\"pi pi-user\"></i>\n        </div>\n        <div class=\"user-title\">\n          <h3>{{ user.firstname }} {{ user.lastname }}</h3>\n          <Badge :value=\"getRoleLabel(user.role)\" :severity=\"getRoleSeverity(user.role)\" />\n        </div>\n      </div>\n\n      <Divider />\n\n      <div class=\"user-details\">\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-id-card\"></i> รหัสพนักงาน</span>\n          <span class=\"detail-value\">{{ user.employee_id || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-user\"></i> Username</span>\n          <span class=\"detail-value\">{{ user.username }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-envelope\"></i> Email</span>\n          <span class=\"detail-value\">{{ user.email || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-phone\"></i> เบอร์โทร</span>\n          <span class=\"detail-value\">{{ user.phone || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-building\"></i> แผนก</span>\n          <span class=\"detail-value\">{{ user.department || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-briefcase\"></i> ตำแหน่ง</span>\n          <span class=\"detail-value\">{{ user.position || '-' }}</span>\n        </div>\n\n        <div class=\"detail-row\">\n          <span class=\"detail-label\"><i class=\"pi pi-circle-fill\"></i> สถานะ</span>\n          <Badge :value=\"user.is_active ? 'ใช้งาน' : 'ปิดใช้งาน'\" :severity=\"user.is_active ? 'success' : 'danger'\" />\n        </div>\n      </div>\n    </div>\n\n    <div v-else class=\"error-state\">\n      <i class=\"pi pi-exclamation-triangle\" style=\"font-size: 2rem; color: #f59e0b\"></i>\n      <p>ไม่พบข้อมูลผู้ใช้</p>\n    </div>\n\n    <template #footer>\n      <Button label=\"ปิด\" icon=\"pi pi-times\" @click=\"$emit('update:visible', false)\" />\n    </template>\n  </Dialog>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport axios from 'axios'\n\nconst props = defineProps({\n  visible: Boolean,\n  userName: String,\n  userId: Number\n})\n\nconst emit = defineEmits(['update:visible'])\n\nconst user = ref(null)\nconst loading = ref(false)\n\nconst loadUserInfo = async () => {\n  if (!props.userName && !props.userId) return\n\n  loading.value = true\n  user.value = null\n\n  try {\n    let response\n    if (props.userId) {\n      // ถ้ามี userId ให้ดึงจาก API โดยตรง\n      response = await axios.get(`/api/users`)\n      user.value = response.data.find(u => u.id === props.userId)\n    } else {\n      // ถ้ามีแค่ชื่อ ให้ค้นหาจากชื่อ\n      response = await axios.get(`/api/users`)\n      const fullName = props.userName.trim()\n      user.value = response.data.find(u => {\n        const userName = `${u.firstname} ${u.lastname}`.trim()\n        return userName === fullName\n      })\n    }\n  } catch (error) {\n    console.error('Error loading user info:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nwatch(() => props.visible, (newVal) => {\n  if (newVal) {\n    loadUserInfo()\n  }\n})\n\nconst getRoleLabel = (role) => {\n  const roles = {\n    'admin': 'ผู้ดูแลระบบ',\n    'manager': 'ผู้จัดการ',\n    'hr': 'ฝ่ายบุคคล',\n    'user': 'ผู้ใช้งาน'\n  }\n  return roles[role?.toLowerCase()] || role\n}\n\nconst getRoleSeverity = (role) => {\n  const severities = {\n    'admin': 'danger',\n    'manager': 'warning',\n    'hr': 'info',\n    'user': 'success'\n  }\n  return severities[role?.toLowerCase()] || 'secondary'\n}\n</script>\n\n<style scoped>\n.loading-state,\n.error-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  gap: 1rem;\n  color: #6c757d;\n}\n\n.user-info-content {\n  padding: 1rem 0;\n}\n\n.user-header {\n  display: flex;\n  align-items: center;\n  gap: 1.5rem;\n  margin-bottom: 1rem;\n}\n\n.user-avatar {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 2.5rem;\n}\n\n.user-title h3 {\n  margin: 0 0 0.5rem 0;\n  font-size: 1.5rem;\n  color: #2c3e50;\n}\n\n.user-details {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.detail-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem;\n  background: #f8f9fa;\n  border-radius: 8px;\n}\n\n.detail-label {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-weight: 600;\n  color: #495057;\n}\n\n.detail-label i {\n  color: #6c757d;\n}\n\n.detail-value {\n  color: #2c3e50;\n  font-weight: 500;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}