{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport router from '@/router';\n\n// Configure axios defaults\naxios.defaults.baseURL = 'http://localhost:3001';\naxios.defaults.withCredentials = true;\naxios.defaults.timeout = 30000; // 30 seconds\n\n// Request interceptor\naxios.interceptors.request.use(config => {\n  // Add timestamp to prevent caching\n  config.params = {\n    ...config.params,\n    _t: Date.now()\n  };\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor\naxios.interceptors.response.use(response => {\n  return response;\n}, error => {\n  // Handle different error types\n  if (error.response) {\n    // Server responded with error status\n    const {\n      status,\n      data\n    } = error.response;\n    switch (status) {\n      case 401:\n        // Unauthorized - redirect to login\n        localStorage.clear();\n        router.push('/login');\n        error.userMessage = 'กรุณาเข้าสู่ระบบใหม่อีกครั้ง';\n        break;\n      case 403:\n        // Forbidden\n        error.userMessage = 'คุณไม่มีสิทธิ์เข้าถึงข้อมูลนี้';\n        break;\n      case 404:\n        // Not found\n        error.userMessage = 'ไม่พบข้อมูลที่ต้องการ';\n        break;\n      case 422:\n        // Validation error\n        error.userMessage = data.error || 'ข้อมูลไม่ถูกต้อง กรุณาตรวจสอบอีกครั้ง';\n        break;\n      case 429:\n        // Too many requests\n        error.userMessage = 'คำขอมากเกินไป กรุณารอสักครู่แล้วลองใหม่';\n        break;\n      case 500:\n      case 502:\n      case 503:\n      case 504:\n        // Server error\n        error.userMessage = 'เกิดข้อผิดพลาดจากเซิร์ฟเวอร์ กรุณาลองใหม่อีกครั้ง';\n        break;\n      default:\n        error.userMessage = data.error || 'เกิดข้อผิดพลาด กรุณาลองใหม่อีกครั้ง';\n    }\n  } else if (error.request) {\n    // Request was made but no response\n    if (error.code === 'ECONNABORTED') {\n      error.userMessage = 'การเชื่อมต่อหมดเวลา กรุณาลองใหม่อีกครั้ง';\n    } else if (error.code === 'ERR_NETWORK') {\n      error.userMessage = 'ไม่สามารถเชื่อมต่อได้ กรุณาตรวจสอบอินเทอร์เน็ต';\n    } else {\n      error.userMessage = 'ไม่สามารถเชื่อมต่อกับเซิร์ฟเวอร์ได้';\n    }\n  } else {\n    // Something else happened\n    error.userMessage = 'เกิดข้อผิดพลาดที่ไม่คาดคิด';\n  }\n\n  // Log error for debugging\n  console.error('API Error:', {\n    url: error.config?.url,\n    method: error.config?.method,\n    status: error.response?.status,\n    message: error.message,\n    userMessage: error.userMessage\n  });\n  return Promise.reject(error);\n});\nexport default axios;","map":{"version":3,"names":["axios","router","defaults","baseURL","withCredentials","timeout","interceptors","request","use","config","params","_t","Date","now","error","Promise","reject","response","status","data","localStorage","clear","push","userMessage","code","console","url","method","message"],"sources":["D:/frontend_cem/src/utils/axiosConfig.js"],"sourcesContent":["import axios from 'axios'\nimport router from '@/router'\n\n// Configure axios defaults\naxios.defaults.baseURL = 'http://localhost:3001'\naxios.defaults.withCredentials = true\naxios.defaults.timeout = 30000 // 30 seconds\n\n// Request interceptor\naxios.interceptors.request.use(\n  (config) => {\n    // Add timestamp to prevent caching\n    config.params = {\n      ...config.params,\n      _t: Date.now()\n    }\n    return config\n  },\n  (error) => {\n    return Promise.reject(error)\n  }\n)\n\n// Response interceptor\naxios.interceptors.response.use(\n  (response) => {\n    return response\n  },\n  (error) => {\n    // Handle different error types\n    if (error.response) {\n      // Server responded with error status\n      const { status, data } = error.response\n      \n      switch (status) {\n        case 401:\n          // Unauthorized - redirect to login\n          localStorage.clear()\n          router.push('/login')\n          error.userMessage = 'กรุณาเข้าสู่ระบบใหม่อีกครั้ง'\n          break\n          \n        case 403:\n          // Forbidden\n          error.userMessage = 'คุณไม่มีสิทธิ์เข้าถึงข้อมูลนี้'\n          break\n          \n        case 404:\n          // Not found\n          error.userMessage = 'ไม่พบข้อมูลที่ต้องการ'\n          break\n          \n        case 422:\n          // Validation error\n          error.userMessage = data.error || 'ข้อมูลไม่ถูกต้อง กรุณาตรวจสอบอีกครั้ง'\n          break\n          \n        case 429:\n          // Too many requests\n          error.userMessage = 'คำขอมากเกินไป กรุณารอสักครู่แล้วลองใหม่'\n          break\n          \n        case 500:\n        case 502:\n        case 503:\n        case 504:\n          // Server error\n          error.userMessage = 'เกิดข้อผิดพลาดจากเซิร์ฟเวอร์ กรุณาลองใหม่อีกครั้ง'\n          break\n          \n        default:\n          error.userMessage = data.error || 'เกิดข้อผิดพลาด กรุณาลองใหม่อีกครั้ง'\n      }\n    } else if (error.request) {\n      // Request was made but no response\n      if (error.code === 'ECONNABORTED') {\n        error.userMessage = 'การเชื่อมต่อหมดเวลา กรุณาลองใหม่อีกครั้ง'\n      } else if (error.code === 'ERR_NETWORK') {\n        error.userMessage = 'ไม่สามารถเชื่อมต่อได้ กรุณาตรวจสอบอินเทอร์เน็ต'\n      } else {\n        error.userMessage = 'ไม่สามารถเชื่อมต่อกับเซิร์ฟเวอร์ได้'\n      }\n    } else {\n      // Something else happened\n      error.userMessage = 'เกิดข้อผิดพลาดที่ไม่คาดคิด'\n    }\n    \n    // Log error for debugging\n    console.error('API Error:', {\n      url: error.config?.url,\n      method: error.config?.method,\n      status: error.response?.status,\n      message: error.message,\n      userMessage: error.userMessage\n    })\n    \n    return Promise.reject(error)\n  }\n)\n\nexport default axios\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,UAAU;;AAE7B;AACAD,KAAK,CAACE,QAAQ,CAACC,OAAO,GAAG,uBAAuB;AAChDH,KAAK,CAACE,QAAQ,CAACE,eAAe,GAAG,IAAI;AACrCJ,KAAK,CAACE,QAAQ,CAACG,OAAO,GAAG,KAAK,EAAC;;AAE/B;AACAL,KAAK,CAACM,YAAY,CAACC,OAAO,CAACC,GAAG,CAC3BC,MAAM,IAAK;EACV;EACAA,MAAM,CAACC,MAAM,GAAG;IACd,GAAGD,MAAM,CAACC,MAAM;IAChBC,EAAE,EAAEC,IAAI,CAACC,GAAG,CAAC;EACf,CAAC;EACD,OAAOJ,MAAM;AACf,CAAC,EACAK,KAAK,IAAK;EACT,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACAd,KAAK,CAACM,YAAY,CAACW,QAAQ,CAACT,GAAG,CAC5BS,QAAQ,IAAK;EACZ,OAAOA,QAAQ;AACjB,CAAC,EACAH,KAAK,IAAK;EACT;EACA,IAAIA,KAAK,CAACG,QAAQ,EAAE;IAClB;IACA,MAAM;MAAEC,MAAM;MAAEC;IAAK,CAAC,GAAGL,KAAK,CAACG,QAAQ;IAEvC,QAAQC,MAAM;MACZ,KAAK,GAAG;QACN;QACAE,YAAY,CAACC,KAAK,CAAC,CAAC;QACpBpB,MAAM,CAACqB,IAAI,CAAC,QAAQ,CAAC;QACrBR,KAAK,CAACS,WAAW,GAAG,8BAA8B;QAClD;MAEF,KAAK,GAAG;QACN;QACAT,KAAK,CAACS,WAAW,GAAG,gCAAgC;QACpD;MAEF,KAAK,GAAG;QACN;QACAT,KAAK,CAACS,WAAW,GAAG,uBAAuB;QAC3C;MAEF,KAAK,GAAG;QACN;QACAT,KAAK,CAACS,WAAW,GAAGJ,IAAI,CAACL,KAAK,IAAI,uCAAuC;QACzE;MAEF,KAAK,GAAG;QACN;QACAA,KAAK,CAACS,WAAW,GAAG,yCAAyC;QAC7D;MAEF,KAAK,GAAG;MACR,KAAK,GAAG;MACR,KAAK,GAAG;MACR,KAAK,GAAG;QACN;QACAT,KAAK,CAACS,WAAW,GAAG,mDAAmD;QACvE;MAEF;QACET,KAAK,CAACS,WAAW,GAAGJ,IAAI,CAACL,KAAK,IAAI,qCAAqC;IAC3E;EACF,CAAC,MAAM,IAAIA,KAAK,CAACP,OAAO,EAAE;IACxB;IACA,IAAIO,KAAK,CAACU,IAAI,KAAK,cAAc,EAAE;MACjCV,KAAK,CAACS,WAAW,GAAG,0CAA0C;IAChE,CAAC,MAAM,IAAIT,KAAK,CAACU,IAAI,KAAK,aAAa,EAAE;MACvCV,KAAK,CAACS,WAAW,GAAG,gDAAgD;IACtE,CAAC,MAAM;MACLT,KAAK,CAACS,WAAW,GAAG,qCAAqC;IAC3D;EACF,CAAC,MAAM;IACL;IACAT,KAAK,CAACS,WAAW,GAAG,4BAA4B;EAClD;;EAEA;EACAE,OAAO,CAACX,KAAK,CAAC,YAAY,EAAE;IAC1BY,GAAG,EAAEZ,KAAK,CAACL,MAAM,EAAEiB,GAAG;IACtBC,MAAM,EAAEb,KAAK,CAACL,MAAM,EAAEkB,MAAM;IAC5BT,MAAM,EAAEJ,KAAK,CAACG,QAAQ,EAAEC,MAAM;IAC9BU,OAAO,EAAEd,KAAK,CAACc,OAAO;IACtBL,WAAW,EAAET,KAAK,CAACS;EACrB,CAAC,CAAC;EAEF,OAAOR,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAed,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}