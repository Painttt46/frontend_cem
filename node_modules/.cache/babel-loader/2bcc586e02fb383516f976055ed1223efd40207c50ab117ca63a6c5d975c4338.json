{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport { ref, onMounted, nextTick } from 'vue';\nimport { useErrorHandler } from '@/composables/useErrorHandler';\nimport { Chart } from 'chart.js/auto';\nimport axios from 'axios';\nimport userService from '@/services/userService';\nimport dailyWorkService from '@/services/dailyWorkService';\nexport default {\n  __name: 'Dashboard',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const {\n      handleError\n    } = useErrorHandler();\n    const loading = ref(false);\n    const leaveTypeColors = ref({});\n    const stats = ref({\n      totalUsers: 0,\n      workingToday: 0,\n      todayLeaves: 0,\n      activeCars: 0,\n      activeTasks: 0,\n      completedTasks: 0,\n      dueSoon: 0,\n      overdue: 0\n    });\n    const workStatistics = ref([]);\n    const expandedRows = ref([]);\n    const leaveChart = ref(null);\n    const taskChart = ref(null);\n    let leaveChartInstance = null;\n    let taskChartInstance = null;\n    onMounted(() => {\n      loadLeaveTypeColors();\n      loadData();\n    });\n    const loadLeaveTypeColors = async () => {\n      try {\n        const response = await axios.get('/api/leave/leave-types');\n        const colorMap = {};\n        response.data.forEach(type => {\n          colorMap[type.value] = type.color;\n        });\n        leaveTypeColors.value = colorMap;\n      } catch (error) {\n        handleError(error, {\n          customMessage: 'ไม่สามารถโหลดสีประเภทการลาได้',\n          showToast: false // ไม่แสดง toast เพราะไม่สำคัญมาก\n        });\n      }\n    };\n    const loadData = async () => {\n      loading.value = true;\n      try {\n        // ใช้ service layer พร้อม cache\n        const [users, leaves, cars, tasks, dailyWork] = await Promise.all([userService.getUsers(),\n        // มี cache 5 นาที\n        axios.get('/api/leave').then(r => r.data), axios.get('/api/car-booking').then(r => r.data), axios.get('/api/tasks').then(r => r.data), dailyWorkService.getDailyWork() // มี cache 2 นาที\n        ]);\n\n        // Calculate stats\n        const activeUsers = users.filter(u => u.is_active);\n        stats.value.totalUsers = activeUsers.length;\n        const today = new Date().toISOString().split('T')[0];\n        const todayDate = new Date(today + 'T00:00:00'); // Local midnight\n        const weekFromNow = new Date(todayDate);\n        weekFromNow.setDate(weekFromNow.getDate() + 7);\n\n        // Helper function to parse date as local\n        const parseLocalDate = dateStr => {\n          if (!dateStr) return null;\n          const datePart = dateStr.split('T')[0];\n          return new Date(datePart + 'T00:00:00');\n        };\n\n        // Get unique user IDs who have approved leave today\n        const todayLeavesUsers = leaves.filter(l => {\n          if (l.status !== 'approved') return false;\n          if (!l.start_datetime || !l.end_datetime) return false;\n\n          // แปลง UTC เป็น local date\n          const startDate = new Date(l.start_datetime);\n          const endDate = new Date(l.end_datetime);\n\n          // เปรียบเทียบแบบ local date (ไม่สนเวลา)\n          const startLocalDate = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());\n          const endLocalDate = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate());\n          return startLocalDate <= todayDate && endLocalDate >= todayDate;\n        });\n\n        // Count unique users (DISTINCT user_id)\n        const uniqueUserIds = [...new Set(todayLeavesUsers.map(l => l.user_id))];\n        stats.value.todayLeaves = uniqueUserIds.length;\n\n        // พนักงานที่ทำงานวันนี้ = คนที่ลงงานรายวันวันนี้\n        const todayWorkUsers = dailyWork.filter(w => {\n          const workDate = w.work_date?.split('T')[0];\n          return workDate === today;\n        });\n        const uniqueWorkUserIds = [...new Set(todayWorkUsers.map(w => w.user_id))];\n        stats.value.workingToday = uniqueWorkUserIds.length;\n        stats.value.activeCars = cars.filter(c => c.status === 'active').length;\n        stats.value.activeTasks = tasks.filter(t => t.status !== 'completed' && t.status !== 'done').length;\n        stats.value.completedTasks = tasks.filter(t => t.status === 'completed' || t.status === 'done').length;\n\n        // งานที่ครบกำหนดสัปดาห์นี้\n        stats.value.dueSoon = tasks.filter(t => {\n          if (!t.project_end_date) return false;\n          const endDate = parseLocalDate(t.project_end_date);\n          return endDate >= todayDate && endDate <= weekFromNow && t.status !== 'completed' && t.status !== 'done';\n        }).length;\n\n        // งานที่เลยกำหนด\n        stats.value.overdue = tasks.filter(t => {\n          if (!t.project_end_date) return false;\n          const endDate = parseLocalDate(t.project_end_date);\n          return endDate < todayDate && t.status !== 'completed' && t.status !== 'done';\n        }).length;\n\n        // Work Statistics - คำนวณเวลาทำงานของแต่ละคน (รายปี)\n        const currentYear = new Date().getFullYear();\n        const userWorkData = {};\n        dailyWork.forEach(w => {\n          const workYear = new Date(w.work_date).getFullYear();\n          if (workYear !== currentYear) return;\n          const userId = w.user_id;\n          if (!userWorkData[userId]) {\n            const user = users.find(u => u.id === userId);\n            userWorkData[userId] = {\n              userName: user ? `${user.firstname} ${user.lastname}` : 'N/A',\n              department: user?.department || 'N/A',\n              totalHours: 0,\n              taskCount: 0,\n              taskHours: {} // เก็บชั่วโมงของแต่ละงาน\n            };\n          }\n\n          // คำนวณชั่วโมงจาก start_time และ end_time\n          if (w.start_time && w.end_time) {\n            const [startH, startM] = w.start_time.split(':').map(Number);\n            const [endH, endM] = w.end_time.split(':').map(Number);\n            const hours = endH + endM / 60 - (startH + startM / 60);\n            if (hours > 0) {\n              userWorkData[userId].totalHours += hours;\n\n              // เก็บชั่วโมงของแต่ละงาน\n              const taskName = w.task_name || w.project_name || 'ไม่ระบุ';\n              if (!userWorkData[userId].taskHours[taskName]) {\n                userWorkData[userId].taskHours[taskName] = 0;\n              }\n              userWorkData[userId].taskHours[taskName] += hours;\n            }\n          }\n          userWorkData[userId].taskCount += 1;\n        });\n        workStatistics.value = Object.values(userWorkData).map(data => {\n          // สร้างรายละเอียดงานทั้งหมด\n          const taskDetails = Object.entries(data.taskHours).map(([taskName, hours]) => ({\n            taskName: taskName,\n            hours: hours,\n            percentage: hours / data.totalHours * 100\n          })).sort((a, b) => b.hours - a.hours);\n          return {\n            userName: data.userName,\n            department: data.department,\n            totalHours: data.totalHours,\n            taskCount: data.taskCount,\n            avgHoursPerTask: data.taskCount > 0 ? data.totalHours / data.taskCount : 0,\n            taskDetails: taskDetails\n          };\n        }).sort((a, b) => b.totalHours - a.totalHours);\n        await nextTick();\n        renderCharts(leaves.data, tasks.data);\n      } catch (error) {\n        handleError(error, {\n          customMessage: 'ไม่สามารถโหลดข้อมูล Dashboard ได้ กรุณาลองใหม่อีกครั้ง'\n        });\n      } finally {\n        loading.value = false;\n      }\n    };\n    const renderCharts = (leaves, tasks) => {\n      // Leave Chart - แสดงจำนวนวันลาของแต่ละคนแยกตามประเภท (รายปี)\n      if (leaveChartInstance) leaveChartInstance.destroy();\n      const currentYear = new Date().getFullYear();\n      const users = {};\n      const leaveTypes = new Set();\n\n      // รวบรวมข้อมูล\n      leaves.forEach(l => {\n        if (l.status !== 'approved') return;\n        const leaveYear = new Date(l.start_datetime).getFullYear();\n        if (leaveYear !== currentYear) return;\n        const userName = l.user_name || 'ไม่ระบุ';\n        const leaveType = l.leave_type || 'อื่นๆ';\n        const days = parseFloat(l.total_days) || 0;\n        if (!users[userName]) {\n          users[userName] = {};\n        }\n        if (!users[userName][leaveType]) {\n          users[userName][leaveType] = 0;\n        }\n        users[userName][leaveType] += days;\n        leaveTypes.add(leaveType);\n      });\n\n      // สร้าง datasets สำหรับแต่ละประเภทการลา\n      const datasets = Array.from(leaveTypes).map(type => ({\n        label: type,\n        data: Object.keys(users).map(userName => users[userName][type] || 0),\n        backgroundColor: leaveTypeColors.value[type] || '#' + Math.floor(Math.random() * 16777215).toString(16)\n      }));\n      leaveChartInstance = new Chart(leaveChart.value, {\n        type: 'bar',\n        data: {\n          labels: Object.keys(users),\n          datasets: datasets\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          scales: {\n            x: {\n              stacked: false\n            },\n            y: {\n              beginAtZero: true,\n              title: {\n                display: true,\n                text: 'จำนวนวัน'\n              }\n            }\n          },\n          plugins: {\n            legend: {\n              display: true,\n              position: 'top'\n            }\n          }\n        }\n      });\n\n      // Task Chart\n      if (taskChartInstance) taskChartInstance.destroy();\n      const taskStatus = {};\n      tasks.forEach(t => {\n        taskStatus[t.status || 'pending'] = (taskStatus[t.status || 'pending'] || 0) + 1;\n      });\n      taskChartInstance = new Chart(taskChart.value, {\n        type: 'doughnut',\n        data: {\n          labels: Object.keys(taskStatus),\n          datasets: [{\n            data: Object.values(taskStatus),\n            backgroundColor: ['#f59e0b', '#4A90E2', '#10b981', '#ef4444']\n          }]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false\n        }\n      });\n    };\n    const __returned__ = {\n      handleError,\n      loading,\n      leaveTypeColors,\n      stats,\n      workStatistics,\n      expandedRows,\n      leaveChart,\n      taskChart,\n      get leaveChartInstance() {\n        return leaveChartInstance;\n      },\n      set leaveChartInstance(v) {\n        leaveChartInstance = v;\n      },\n      get taskChartInstance() {\n        return taskChartInstance;\n      },\n      set taskChartInstance(v) {\n        taskChartInstance = v;\n      },\n      loadLeaveTypeColors,\n      loadData,\n      renderCharts,\n      ref,\n      onMounted,\n      nextTick,\n      get useErrorHandler() {\n        return useErrorHandler;\n      },\n      get Chart() {\n        return Chart;\n      },\n      get axios() {\n        return axios;\n      },\n      get userService() {\n        return userService;\n      },\n      get dailyWorkService() {\n        return dailyWorkService;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","nextTick","useErrorHandler","Chart","axios","userService","dailyWorkService","handleError","loading","leaveTypeColors","stats","totalUsers","workingToday","todayLeaves","activeCars","activeTasks","completedTasks","dueSoon","overdue","workStatistics","expandedRows","leaveChart","taskChart","leaveChartInstance","taskChartInstance","loadLeaveTypeColors","loadData","response","get","colorMap","data","forEach","type","value","color","error","customMessage","showToast","users","leaves","cars","tasks","dailyWork","Promise","all","getUsers","then","r","getDailyWork","activeUsers","filter","u","is_active","length","today","Date","toISOString","split","todayDate","weekFromNow","setDate","getDate","parseLocalDate","dateStr","datePart","todayLeavesUsers","l","status","start_datetime","end_datetime","startDate","endDate","startLocalDate","getFullYear","getMonth","endLocalDate","uniqueUserIds","Set","map","user_id","todayWorkUsers","w","workDate","work_date","uniqueWorkUserIds","c","t","project_end_date","currentYear","userWorkData","workYear","userId","user","find","id","userName","firstname","lastname","department","totalHours","taskCount","taskHours","start_time","end_time","startH","startM","Number","endH","endM","hours","taskName","task_name","project_name","Object","values","taskDetails","entries","percentage","sort","a","b","avgHoursPerTask","renderCharts","destroy","leaveTypes","leaveYear","user_name","leaveType","leave_type","days","parseFloat","total_days","add","datasets","Array","from","label","keys","backgroundColor","Math","floor","random","toString","labels","options","responsive","maintainAspectRatio","scales","x","stacked","y","beginAtZero","title","display","text","plugins","legend","position","taskStatus"],"sources":["D:/frontend_cem/src/views/management/Dashboard.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div class=\"dashboard-container\">\n    <Toast />\n    \n    <!-- Header -->\n    <Card class=\"header-card mb-4\">\n      <template #content>\n        <div class=\"header-content\">\n          <div class=\"header-left\">\n            <Button icon=\"pi pi-arrow-left\" @click=\"$router.go(-1)\" text class=\"back-btn\" />\n            <div class=\"header-title\">\n              <i class=\"pi pi-chart-bar header-icon\"></i>\n              <h1>Dashboard</h1>\n            </div>\n          </div>\n        </div>\n      </template>\n    </Card>\n\n    <!-- Summary Cards -->\n    <div class=\"summary-grid mb-4\">\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-users summary-icon\" style=\"color: #4A90E2\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.totalUsers }}</h3>\n              <p>ผู้ใช้งานทั้งหมด</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-user-plus summary-icon\" style=\"color: #10b981\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.workingToday }}</h3>\n              <p>พนักงานทำงานวันนี้</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-calendar-times summary-icon\" style=\"color: #f59e0b\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.todayLeaves }}</h3>\n              <p>ลางานวันนี้</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-car summary-icon\" style=\"color: #06b6d4\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.activeCars }}</h3>\n              <p>รถกำลังใช้งาน</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-clock summary-icon\" style=\"color: #3b82f6\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.dueSoon }}</h3>\n              <p>งานครบกำหนดสัปดาห์นี้</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-exclamation-triangle summary-icon\" style=\"color: #ef4444\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.overdue }}</h3>\n              <p>งานเลยกำหนด</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-briefcase summary-icon\" style=\"color: #8b5cf6\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.activeTasks }}</h3>\n              <p>งานกำลังดำเนินการ</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n\n      <Card class=\"summary-card\">\n        <template #content>\n          <div class=\"summary-content\">\n            <i class=\"pi pi-check-circle summary-icon\" style=\"color: #22c55e\"></i>\n            <div class=\"summary-info\">\n              <h3>{{ stats.completedTasks }}</h3>\n              <p>งานเสร็จสิ้น</p>\n            </div>\n          </div>\n        </template>\n      </Card>\n    </div>\n\n    <!-- Charts -->\n    <div class=\"charts-grid mb-4\">\n      <Card class=\"chart-card\">\n        <template #content>\n          <h3>จำนวนวันลาของพนักงาน (รายปี)</h3>\n          <canvas ref=\"leaveChart\"></canvas>\n        </template>\n      </Card>\n\n      <Card class=\"chart-card\">\n        <template #content>\n          <h3>สถานะงาน</h3>\n          <canvas ref=\"taskChart\"></canvas>\n        </template>\n      </Card>\n    </div>\n\n    <!-- Work Statistics -->\n    <Card>\n      <template #content>\n        <h3 class=\"mb-3\">สถิติเวลาทำงานของพนักงาน (รายปี)</h3>\n        <DataTable :value=\"workStatistics\" :loading=\"loading\" paginator :rows=\"10\" sortField=\"totalHours\" :sortOrder=\"-1\"\n                   :expandedRows=\"expandedRows\">\n          <Column :expander=\"true\" style=\"width: 3rem\" />\n          <Column field=\"userName\" header=\"ชื่อพนักงาน\" sortable style=\"min-width: 150px\" />\n          <Column field=\"department\" header=\"แผนก\" sortable style=\"min-width: 120px\" />\n          <Column field=\"totalHours\" header=\"รวมชั่วโมง\" sortable style=\"min-width: 120px\">\n            <template #body=\"{ data }\">\n              <span style=\"font-weight: 600; color: #4A90E2\">{{ data.totalHours.toFixed(1) }} ชม.</span>\n            </template>\n          </Column>\n          <Column field=\"taskCount\" header=\"จำนวนงาน\" sortable style=\"min-width: 100px\" />\n          <Column field=\"avgHoursPerTask\" header=\"เฉลี่ย/งาน\" sortable style=\"min-width: 100px\">\n            <template #body=\"{ data }\">\n              {{ data.avgHoursPerTask.toFixed(1) }} ชม.\n            </template>\n          </Column>\n          \n          <template #expansion=\"{ data }\">\n            <div class=\"task-breakdown\">\n              <h4>รายละเอียดงานทั้งหมด</h4>\n              <DataTable :value=\"data.taskDetails\" class=\"p-datatable-sm\">\n                <Column field=\"taskName\" header=\"ชื่องาน\" style=\"min-width: 200px\" />\n                <Column field=\"hours\" header=\"ชั่วโมง\" sortable>\n                  <template #body=\"{ data: task }\">\n                    <span style=\"font-weight: 600; color: #10b981\">{{ task.hours.toFixed(1) }} ชม.</span>\n                  </template>\n                </Column>\n                <Column field=\"percentage\" header=\"สัดส่วน\" sortable>\n                  <template #body=\"{ data: task }\">\n                    <div style=\"display: flex; align-items: center; gap: 0.5rem\">\n                      <div style=\"flex: 1; background: #e9ecef; border-radius: 4px; height: 20px; overflow: hidden\">\n                        <div :style=\"{ width: task.percentage + '%', background: '#4A90E2', height: '100%' }\"></div>\n                      </div>\n                      <span style=\"min-width: 50px; text-align: right\">{{ task.percentage.toFixed(1) }}%</span>\n                    </div>\n                  </template>\n                </Column>\n              </DataTable>\n            </div>\n          </template>\n        </DataTable>\n      </template>\n    </Card>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, nextTick } from 'vue'\nimport { useErrorHandler } from '@/composables/useErrorHandler'\nimport { Chart } from 'chart.js/auto'\nimport axios from 'axios'\nimport userService from '@/services/userService'\nimport dailyWorkService from '@/services/dailyWorkService'\n\nconst { handleError } = useErrorHandler()\nconst loading = ref(false)\nconst leaveTypeColors = ref({})\n\nconst stats = ref({\n  totalUsers: 0,\n  workingToday: 0,\n  todayLeaves: 0,\n  activeCars: 0,\n  activeTasks: 0,\n  completedTasks: 0,\n  dueSoon: 0,\n  overdue: 0\n})\n\nconst workStatistics = ref([])\nconst expandedRows = ref([])\nconst leaveChart = ref(null)\nconst taskChart = ref(null)\nlet leaveChartInstance = null\nlet taskChartInstance = null\n\nonMounted(() => {\n  loadLeaveTypeColors()\n  loadData()\n})\n\nconst loadLeaveTypeColors = async () => {\n  try {\n    const response = await axios.get('/api/leave/leave-types')\n    const colorMap = {}\n    response.data.forEach(type => {\n      colorMap[type.value] = type.color\n    })\n    leaveTypeColors.value = colorMap\n  } catch (error) {\n    handleError(error, {\n      customMessage: 'ไม่สามารถโหลดสีประเภทการลาได้',\n      showToast: false // ไม่แสดง toast เพราะไม่สำคัญมาก\n    })\n  }\n}\n\nconst loadData = async () => {\n  loading.value = true\n  \n  try {\n    // ใช้ service layer พร้อม cache\n    const [users, leaves, cars, tasks, dailyWork] = await Promise.all([\n      userService.getUsers(),  // มี cache 5 นาที\n      axios.get('/api/leave').then(r => r.data),\n      axios.get('/api/car-booking').then(r => r.data),\n      axios.get('/api/tasks').then(r => r.data),\n      dailyWorkService.getDailyWork()  // มี cache 2 นาที\n    ])\n\n    // Calculate stats\n    const activeUsers = users.filter(u => u.is_active)\n    stats.value.totalUsers = activeUsers.length\n    \n    const today = new Date().toISOString().split('T')[0]\n    const todayDate = new Date(today + 'T00:00:00') // Local midnight\n    const weekFromNow = new Date(todayDate)\n    weekFromNow.setDate(weekFromNow.getDate() + 7)\n    \n    // Helper function to parse date as local\n    const parseLocalDate = (dateStr) => {\n      if (!dateStr) return null\n      const datePart = dateStr.split('T')[0]\n      return new Date(datePart + 'T00:00:00')\n    }\n    \n    // Get unique user IDs who have approved leave today\n    const todayLeavesUsers = leaves.filter(l => {\n      if (l.status !== 'approved') return false\n      if (!l.start_datetime || !l.end_datetime) return false\n      \n      // แปลง UTC เป็น local date\n      const startDate = new Date(l.start_datetime)\n      const endDate = new Date(l.end_datetime)\n      \n      // เปรียบเทียบแบบ local date (ไม่สนเวลา)\n      const startLocalDate = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate())\n      const endLocalDate = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate())\n      \n      return startLocalDate <= todayDate && endLocalDate >= todayDate\n    })\n    \n    // Count unique users (DISTINCT user_id)\n    const uniqueUserIds = [...new Set(todayLeavesUsers.map(l => l.user_id))]\n    stats.value.todayLeaves = uniqueUserIds.length\n    \n    // พนักงานที่ทำงานวันนี้ = คนที่ลงงานรายวันวันนี้\n    const todayWorkUsers = dailyWork.filter(w => {\n      const workDate = w.work_date?.split('T')[0]\n      return workDate === today\n    })\n    const uniqueWorkUserIds = [...new Set(todayWorkUsers.map(w => w.user_id))]\n    stats.value.workingToday = uniqueWorkUserIds.length\n    \n    stats.value.activeCars = cars.filter(c => c.status === 'active').length\n    stats.value.activeTasks = tasks.filter(t => t.status !== 'completed' && t.status !== 'done').length\n    stats.value.completedTasks = tasks.filter(t => t.status === 'completed' || t.status === 'done').length\n    \n    // งานที่ครบกำหนดสัปดาห์นี้\n    stats.value.dueSoon = tasks.filter(t => {\n      if (!t.project_end_date) return false\n      const endDate = parseLocalDate(t.project_end_date)\n      return endDate >= todayDate && endDate <= weekFromNow && (t.status !== 'completed' && t.status !== 'done')\n    }).length\n    \n    // งานที่เลยกำหนด\n    stats.value.overdue = tasks.filter(t => {\n      if (!t.project_end_date) return false\n      const endDate = parseLocalDate(t.project_end_date)\n      return endDate < todayDate && (t.status !== 'completed' && t.status !== 'done')\n    }).length\n\n    // Work Statistics - คำนวณเวลาทำงานของแต่ละคน (รายปี)\n    const currentYear = new Date().getFullYear()\n    const userWorkData = {}\n    \n    dailyWork.forEach(w => {\n      const workYear = new Date(w.work_date).getFullYear()\n      if (workYear !== currentYear) return\n      \n      const userId = w.user_id\n      if (!userWorkData[userId]) {\n        const user = users.find(u => u.id === userId)\n        userWorkData[userId] = {\n          userName: user ? `${user.firstname} ${user.lastname}` : 'N/A',\n          department: user?.department || 'N/A',\n          totalHours: 0,\n          taskCount: 0,\n          taskHours: {} // เก็บชั่วโมงของแต่ละงาน\n        }\n      }\n      \n      // คำนวณชั่วโมงจาก start_time และ end_time\n      if (w.start_time && w.end_time) {\n        const [startH, startM] = w.start_time.split(':').map(Number)\n        const [endH, endM] = w.end_time.split(':').map(Number)\n        const hours = (endH + endM/60) - (startH + startM/60)\n        \n        if (hours > 0) {\n          userWorkData[userId].totalHours += hours\n          \n          // เก็บชั่วโมงของแต่ละงาน\n          const taskName = w.task_name || w.project_name || 'ไม่ระบุ'\n          if (!userWorkData[userId].taskHours[taskName]) {\n            userWorkData[userId].taskHours[taskName] = 0\n          }\n          userWorkData[userId].taskHours[taskName] += hours\n        }\n      }\n      \n      userWorkData[userId].taskCount += 1\n    })\n    \n    workStatistics.value = Object.values(userWorkData).map(data => {\n      // สร้างรายละเอียดงานทั้งหมด\n      const taskDetails = Object.entries(data.taskHours)\n        .map(([taskName, hours]) => ({\n          taskName: taskName,\n          hours: hours,\n          percentage: (hours / data.totalHours) * 100\n        }))\n        .sort((a, b) => b.hours - a.hours)\n      \n      return {\n        userName: data.userName,\n        department: data.department,\n        totalHours: data.totalHours,\n        taskCount: data.taskCount,\n        avgHoursPerTask: data.taskCount > 0 ? data.totalHours / data.taskCount : 0,\n        taskDetails: taskDetails\n      }\n    }).sort((a, b) => b.totalHours - a.totalHours)\n\n    await nextTick()\n    renderCharts(leaves.data, tasks.data)\n  } catch (error) {\n    handleError(error, {\n      customMessage: 'ไม่สามารถโหลดข้อมูล Dashboard ได้ กรุณาลองใหม่อีกครั้ง'\n    })\n  } finally {\n    loading.value = false\n  }\n}\n\nconst renderCharts = (leaves, tasks) => {\n  // Leave Chart - แสดงจำนวนวันลาของแต่ละคนแยกตามประเภท (รายปี)\n  if (leaveChartInstance) leaveChartInstance.destroy()\n  \n  const currentYear = new Date().getFullYear()\n  const users = {}\n  const leaveTypes = new Set()\n  \n  // รวบรวมข้อมูล\n  leaves.forEach(l => {\n    if (l.status !== 'approved') return\n    const leaveYear = new Date(l.start_datetime).getFullYear()\n    if (leaveYear !== currentYear) return\n    \n    const userName = l.user_name || 'ไม่ระบุ'\n    const leaveType = l.leave_type || 'อื่นๆ'\n    const days = parseFloat(l.total_days) || 0\n    \n    if (!users[userName]) {\n      users[userName] = {}\n    }\n    if (!users[userName][leaveType]) {\n      users[userName][leaveType] = 0\n    }\n    users[userName][leaveType] += days\n    leaveTypes.add(leaveType)\n  })\n\n  // สร้าง datasets สำหรับแต่ละประเภทการลา\n  const datasets = Array.from(leaveTypes).map(type => ({\n    label: type,\n    data: Object.keys(users).map(userName => users[userName][type] || 0),\n    backgroundColor: leaveTypeColors.value[type] || '#' + Math.floor(Math.random()*16777215).toString(16)\n  }))\n\n  leaveChartInstance = new Chart(leaveChart.value, {\n    type: 'bar',\n    data: {\n      labels: Object.keys(users),\n      datasets: datasets\n    },\n    options: {\n      responsive: true,\n      maintainAspectRatio: false,\n      scales: {\n        x: {\n          stacked: false\n        },\n        y: {\n          beginAtZero: true,\n          title: {\n            display: true,\n            text: 'จำนวนวัน'\n          }\n        }\n      },\n      plugins: {\n        legend: {\n          display: true,\n          position: 'top'\n        }\n      }\n    }\n  })\n\n  // Task Chart\n  if (taskChartInstance) taskChartInstance.destroy()\n  \n  const taskStatus = {}\n  tasks.forEach(t => {\n    taskStatus[t.status || 'pending'] = (taskStatus[t.status || 'pending'] || 0) + 1\n  })\n\n  taskChartInstance = new Chart(taskChart.value, {\n    type: 'doughnut',\n    data: {\n      labels: Object.keys(taskStatus),\n      datasets: [{\n        data: Object.values(taskStatus),\n        backgroundColor: ['#f59e0b', '#4A90E2', '#10b981', '#ef4444']\n      }]\n    },\n    options: {\n      responsive: true,\n      maintainAspectRatio: false\n    }\n  })\n}\n</script>\n\n<style scoped>\n.dashboard-container {\n  padding: 1rem;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.header-card {\n  background: linear-gradient(135deg, #4A90E2, #D73527);\n  color: white;\n  border: none;\n}\n\n.header-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.header-title {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n.header-icon {\n  font-size: 1.5rem;\n}\n\n.header-title h1 {\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 600;\n}\n\n.back-btn {\n  color: white !important;\n  background: rgba(255, 255, 255, 0.2) !important;\n  border: 1px solid rgba(255, 255, 255, 0.3) !important;\n  border-radius: 8px !important;\n  padding: 0.5rem !important;\n}\n\n.back-btn:hover {\n  background: rgba(255, 255, 255, 0.3) !important;\n}\n\n.summary-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\n  gap: 1rem;\n}\n\n.summary-card {\n  border: 1px solid #e9ecef;\n  transition: all 0.3s;\n}\n\n.summary-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 20px rgba(0,0,0,0.1);\n}\n\n.summary-content {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.summary-icon {\n  font-size: 2.5rem;\n}\n\n.summary-info h3 {\n  margin: 0;\n  font-size: 2rem;\n  font-weight: 600;\n}\n\n.summary-info p {\n  margin: 0;\n  color: #6c757d;\n  font-size: 0.9rem;\n}\n\n.charts-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n  gap: 1rem;\n}\n\n.chart-card {\n  border: 1px solid #e9ecef;\n  min-height: 350px;\n}\n\n.chart-card h3 {\n  margin: 0 0 1rem 0;\n  font-size: 1.1rem;\n  color: #2c3e50;\n}\n\ncanvas {\n  max-height: 300px;\n}\n\n.task-breakdown {\n  padding: 1rem;\n  background: #f8f9fa;\n  border-radius: 8px;\n}\n\n.task-breakdown h4 {\n  margin: 0 0 1rem 0;\n  color: #2c3e50;\n  font-size: 1rem;\n}\n\n@media (max-width: 768px) {\n  .summary-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .charts-grid {\n    grid-template-columns: 1fr;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}