{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport axios from 'axios';\nimport EnhancedDataTable from '@/components/EnhancedDataTable.vue';\nexport default {\n  name: 'TaskList',\n  components: {\n    EnhancedDataTable\n  },\n  created() {\n    this.$http = axios.create({\n      baseURL: ''\n    });\n  },\n  async mounted() {\n    // Listen for task updates\n    window.addEventListener('taskUpdated', this.handleTaskUpdate);\n    window.addEventListener('workRecordUpdated', this.handleTaskUpdate);\n    window.addEventListener('taskStatusChanged', this.handleTaskUpdate);\n    window.addEventListener('categoriesUpdated', this.handleCategoriesUpdate);\n    window.addEventListener('statusesUpdated', this.handleStatusesUpdate);\n\n    // Load categories and statuses first, then tasks\n    await this.loadCategoriesFromStorage();\n    await this.loadStatusesFromStorage();\n    this.loadTasks();\n  },\n  beforeUnmount() {\n    window.removeEventListener('taskUpdated', this.handleTaskUpdate);\n    window.removeEventListener('workRecordUpdated', this.handleTaskUpdate);\n    window.removeEventListener('taskStatusChanged', this.handleTaskUpdate);\n    window.removeEventListener('categoriesUpdated', this.handleCategoriesUpdate);\n    window.removeEventListener('statusesUpdated', this.handleStatusesUpdate);\n  },\n  data() {\n    return {\n      tasks: [],\n      detailDialog: false,\n      selectedTask: null,\n      filesDialog: false,\n      selectedTaskFiles: [],\n      editDialog: false,\n      taskWorksDialog: false,\n      taskWorks: [],\n      loadingWorks: false,\n      workFilesDialog: false,\n      selectedWorkFiles: [],\n      workStatusFilter: null,\n      workSortBy: 'date_desc',\n      workStatusFilterOptions: [{\n        label: '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',\n        value: null\n      }, {\n        label: '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå',\n        value: 'completed'\n      }, {\n        label: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',\n        value: 'in_progress'\n      }, {\n        label: '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',\n        value: 'pending'\n      }, {\n        label: '‡∏£‡∏∞‡∏á‡∏±‡∏ö',\n        value: 'on_hold'\n      }],\n      workSortOptions: [{\n        label: '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î',\n        value: 'date_desc'\n      }, {\n        label: '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î',\n        value: 'date_asc'\n      }, {\n        label: '‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞',\n        value: 'status'\n      }],\n      editFormData: {\n        id: null,\n        task_name: '',\n        so_number: '',\n        contract_number: '',\n        sale_owner: '',\n        description: '',\n        category: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',\n        project_start_date: null,\n        project_end_date: null,\n        existingFiles: [],\n        newFiles: []\n      },\n      categoryOptions: [{\n        label: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',\n        value: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ'\n      }, {\n        label: '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö',\n        value: '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö'\n      }, {\n        label: '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤',\n        value: '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤'\n      }, {\n        label: '‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°',\n        value: '‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°'\n      }, {\n        label: '‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°',\n        value: '‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°'\n      }, {\n        label: '‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢',\n        value: '‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢'\n      }, {\n        label: '‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£',\n        value: '‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£'\n      }, {\n        label: '‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤',\n        value: '‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤'\n      }],\n      categories: [],\n      workStatuses: []\n    };\n  },\n  computed: {\n    enrichedTasks() {\n      // Add status and category labels to tasks for better search\n      return this.tasks.map(task => ({\n        ...task,\n        statusLabel: this.getStatusLabel(task.status),\n        categoryLabel: this.getCategoryLabel(task.category)\n      }));\n    },\n    filteredAndSortedWorks() {\n      let works = [...this.taskWorks];\n\n      // Filter by status\n      if (this.workStatusFilter) {\n        works = works.filter(work => work.work_status === this.workStatusFilter);\n      }\n\n      // Sort\n      if (this.workSortBy === 'date_desc') {\n        works.sort((a, b) => new Date(b.work_date) - new Date(a.work_date));\n      } else if (this.workSortBy === 'date_asc') {\n        works.sort((a, b) => new Date(a.work_date) - new Date(b.work_date));\n      } else if (this.workSortBy === 'status') {\n        const statusOrder = {\n          'completed': 1,\n          'in_progress': 2,\n          'pending': 3,\n          'on_hold': 4\n        };\n        works.sort((a, b) => (statusOrder[a.work_status] || 5) - (statusOrder[b.work_status] || 5));\n      }\n      return works;\n    }\n  },\n  methods: {\n    confirmDeleteTask(task) {\n      this.$confirm.require({\n        message: `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏á‡∏≤‡∏ô \"${task.task_name}\" ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`,\n        header: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö',\n        icon: 'pi pi-exclamation-triangle',\n        acceptLabel: '‡∏•‡∏ö',\n        rejectLabel: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',\n        acceptClass: 'p-button-danger',\n        accept: () => {\n          this.deleteTask(task.id);\n        }\n      });\n    },\n    async deleteTask(taskId) {\n      try {\n        await this.$http.delete(`/api/tasks/${taskId}`);\n        this.$toast.add({\n          severity: 'success',\n          summary: '‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',\n          detail: '‡∏•‡∏ö‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß',\n          life: 3000\n        });\n        this.loadTasks();\n        window.dispatchEvent(new CustomEvent('taskUpdated'));\n      } catch (error) {\n        console.error('Error deleting task:', error);\n        this.$toast.add({\n          severity: 'error',\n          summary: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\n          detail: error.response?.data?.error || '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ',\n          life: 5000\n        });\n      }\n    },\n    async loadCategoriesFromStorage() {\n      try {\n        const response = await this.$http.get('/api/settings/categories');\n        this.categories = response.data;\n      } catch (error) {\n        console.error('Error loading categories:', error);\n        // Fallback to default\n        this.categories = [{\n          label: 'üíº ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',\n          value: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',\n          icon: 'emoji:üíº',\n          color: '#6366f1'\n        }, {\n          label: 'üíª ‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤',\n          value: '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤',\n          icon: 'emoji:üíª',\n          color: '#14b8a6'\n        }, {\n          label: 'üîß ‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤',\n          value: '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤',\n          icon: 'emoji:üîß',\n          color: '#f97316'\n        }];\n      }\n    },\n    async loadStatusesFromStorage() {\n      try {\n        const response = await this.$http.get('/api/settings/statuses');\n        this.workStatuses = response.data;\n      } catch (error) {\n        console.error('Error loading statuses:', error);\n        // Fallback to default\n        this.workStatuses = [{\n          label: '‚è≥ ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',\n          value: 'pending',\n          icon: 'emoji:‚è≥',\n          color: '#f59e0b'\n        }, {\n          label: 'üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',\n          value: 'in_progress',\n          icon: 'emoji:üîÑ',\n          color: '#3b82f6'\n        }, {\n          label: '‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô',\n          value: 'completed',\n          icon: 'emoji:‚úÖ',\n          color: '#10b981'\n        }, {\n          label: '‚è∏Ô∏è ‡∏£‡∏∞‡∏á‡∏±‡∏ö',\n          value: 'on_hold',\n          icon: 'emoji:‚è∏Ô∏è',\n          color: '#6c757d'\n        }];\n      }\n    },\n    getCategoryIcon(categoryValue) {\n      const category = this.categories.find(cat => cat.value === categoryValue);\n      return category ? category.icon : 'pi pi-tag';\n    },\n    getCategoryLabel(categoryValue) {\n      const category = this.categories.find(cat => cat.value === categoryValue);\n      if (category && category.label) {\n        // Remove all emoji and special characters\n        return category.label.replace(/[\\u{1F000}-\\u{1FFFF}]|[\\u{2600}-\\u{27BF}]|[\\u{2300}-\\u{23FF}]|[\\u{2B50}]|[\\u{203C}-\\u{3299}]/gu, '').trim();\n      }\n      return categoryValue;\n    },\n    getCategoryColor(categoryValue) {\n      if (!this.categories || this.categories.length === 0) {\n        return '#6c757d';\n      }\n      const category = this.categories.find(cat => cat.value === categoryValue);\n      return category && category.color ? category.color : '#6c757d';\n    },\n    getStatusIcon(statusValue) {\n      const status = this.workStatuses.find(s => s.value === statusValue);\n      return status ? status.icon : 'pi pi-circle';\n    },\n    getStatusLabel(statusValue) {\n      const status = this.workStatuses.find(s => s.value === statusValue);\n      if (status && status.label) {\n        // Remove all emoji and special characters\n        return status.label.replace(/[\\u{1F000}-\\u{1FFFF}]|[\\u{2600}-\\u{27BF}]|[\\u{2300}-\\u{23FF}]|[\\u{2B50}]|[\\u{203C}-\\u{3299}]/gu, '').trim();\n      }\n      return statusValue;\n    },\n    getStatusColor(statusValue) {\n      const status = this.workStatuses.find(s => s.value === statusValue);\n      return status?.color || '#6c757d';\n    },\n    async loadTasks() {\n      try {\n        const response = await this.$http.get('/api/tasks');\n        // ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á format array ‡∏ï‡∏£‡∏á‡πÜ ‡πÅ‡∏•‡∏∞ format ‡∏ó‡∏µ‡πà‡∏°‡∏µ wrapper\n        this.tasks = response.data.data || response.data || [];\n      } catch (error) {\n        this.tasks = [];\n        this.$toast.add({\n          severity: 'error',\n          summary: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\n          detail: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ',\n          life: 5000\n        });\n      }\n    },\n    formatDate(date) {\n      if (!date) return '-';\n      try {\n        // For date-only strings (YYYY-MM-DD), parse manually to avoid timezone issues\n        if (typeof date === 'string' && date.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n          const [year, month, day] = date.split('-');\n          const d = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n          return d.toLocaleDateString('th-TH', {\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric'\n          });\n        }\n        return new Date(date).toLocaleDateString('th-TH', {\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric'\n        });\n      } catch (error) {\n        return date;\n      }\n    },\n    showTaskDetails(task) {\n      this.selectedTask = task;\n      this.detailDialog = true;\n    },\n    hasFiles(task) {\n      return task.files && Array.isArray(task.files) && task.files.length > 0;\n    },\n    downloadTaskFiles(task) {\n      if (this.hasFiles(task)) {\n        this.selectedTaskFiles = task.files;\n        this.filesDialog = true;\n      }\n    },\n    downloadFile(fileName) {\n      // Create download link\n      const link = document.createElement('a');\n      link.href = `/api/files/download/${fileName}`;\n      link.download = fileName;\n      link.target = '_blank';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    },\n    editTask(task) {\n      // Parse dates from string to Date object\n      const parseDate = dateStr => {\n        if (!dateStr) return null;\n        if (typeof dateStr === 'string' && dateStr.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n          const [year, month, day] = dateStr.split('-');\n          // Create date at noon to avoid timezone issues\n          return new Date(parseInt(year), parseInt(month) - 1, parseInt(day), 12, 0, 0);\n        }\n        return new Date(dateStr);\n      };\n      this.editFormData = {\n        id: task.id,\n        task_name: task.task_name,\n        so_number: task.so_number || '',\n        contract_number: task.contract_number || '',\n        sale_owner: task.sale_owner || '',\n        description: task.description || '',\n        category: task.category || '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',\n        status: task.status || 'pending',\n        project_start_date: parseDate(task.project_start_date),\n        project_end_date: parseDate(task.project_end_date),\n        existingFiles: [...(task.files || [])],\n        newFiles: []\n      };\n      this.editDialog = true;\n    },\n    handleEditFileUpload(event) {\n      const files = Array.from(event.target.files);\n      this.editFormData.newFiles = [...this.editFormData.newFiles, ...files];\n    },\n    removeExistingFile(index) {\n      this.editFormData.existingFiles.splice(index, 1);\n    },\n    removeNewFile(index) {\n      this.editFormData.newFiles.splice(index, 1);\n    },\n    async uploadNewFiles() {\n      if (this.editFormData.newFiles.length === 0) return [];\n      const formData = new FormData();\n      this.editFormData.newFiles.forEach(file => {\n        formData.append('files', file);\n      });\n      try {\n        const response = await this.$http.post('/api/files/upload', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        return response.data.files || [];\n      } catch (error) {\n        return [];\n      }\n    },\n    async updateTask() {\n      try {\n        // Upload ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà\n        const newUploadedFiles = await this.uploadNewFiles();\n\n        // ‡∏£‡∏ß‡∏°‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà\n        const allFiles = [...this.editFormData.existingFiles, ...newUploadedFiles];\n\n        // Format dates to YYYY-MM-DD\n        const formatDate = date => {\n          if (!date) return null;\n          const d = new Date(date);\n          const year = d.getFullYear();\n          const month = String(d.getMonth() + 1).padStart(2, '0');\n          const day = String(d.getDate()).padStart(2, '0');\n          return `${year}-${month}-${day}`;\n        };\n        const updateData = {\n          ...this.editFormData,\n          project_start_date: formatDate(this.editFormData.project_start_date),\n          project_end_date: formatDate(this.editFormData.project_end_date),\n          files: allFiles\n        };\n        delete updateData.existingFiles;\n        delete updateData.newFiles;\n        await this.$http.put(`/api/tasks/${this.editFormData.id}`, updateData);\n        this.$toast.add({\n          severity: 'success',\n          summary: '‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',\n          detail: '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß',\n          life: 3000\n        });\n        this.editDialog = false;\n\n        // Auto-refresh data\n        await this.loadTasks();\n\n        // Dispatch global event for real-time update\n        window.dispatchEvent(new CustomEvent('taskUpdated'));\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\n          detail: error.response?.data?.error || '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ',\n          life: 5000\n        });\n      }\n    },\n    handleTaskUpdate() {\n      // Auto-refresh tasks when updated\n      this.loadTasks();\n    },\n    handleCategoriesUpdate() {\n      this.loadCategoriesFromStorage();\n    },\n    handleStatusesUpdate() {\n      this.loadStatusesFromStorage();\n    },\n    async refreshData() {\n      // Method for external refresh calls\n      await this.loadTasks();\n    },\n    async viewTaskWorks(task) {\n      this.selectedTask = task;\n      this.taskWorks = [];\n      this.loadingWorks = true;\n      this.taskWorksDialog = true;\n      this.workStatusFilter = null;\n      this.workSortBy = 'date_desc';\n      try {\n        const response = await this.$http.get(`/api/daily-work?task_id=${task.id}`);\n        this.taskWorks = response.data || [];\n      } catch (error) {\n        this.$toast.add({\n          severity: 'error',\n          summary: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\n          detail: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡πÑ‡∏î‡πâ',\n          life: 3000\n        });\n        this.taskWorks = [];\n      } finally {\n        this.loadingWorks = false;\n      }\n    },\n    formatDateTime(date) {\n      try {\n        return new Date(date).toLocaleString('th-TH', {\n          year: 'numeric',\n          month: 'short',\n          day: 'numeric',\n          hour: '2-digit',\n          minute: '2-digit'\n        });\n      } catch (error) {\n        return date;\n      }\n    },\n    getTotalHours() {\n      if (!this.taskWorks || this.taskWorks.length === 0) return '0.0';\n      const total = this.taskWorks.reduce((sum, work) => sum + (parseFloat(work.total_hours) || 0), 0);\n      return total.toFixed(1);\n    },\n    showWorkFiles(work) {\n      this.selectedWorkFiles = work.files || [];\n      this.workFilesDialog = true;\n    },\n    downloadWorkFile(fileName) {\n      const link = document.createElement('a');\n      link.href = `/api/files/download/${fileName}`;\n      link.download = fileName;\n      link.target = '_blank';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n  }\n};","map":{"version":3,"names":["axios","EnhancedDataTable","name","components","created","$http","create","baseURL","mounted","window","addEventListener","handleTaskUpdate","handleCategoriesUpdate","handleStatusesUpdate","loadCategoriesFromStorage","loadStatusesFromStorage","loadTasks","beforeUnmount","removeEventListener","data","tasks","detailDialog","selectedTask","filesDialog","selectedTaskFiles","editDialog","taskWorksDialog","taskWorks","loadingWorks","workFilesDialog","selectedWorkFiles","workStatusFilter","workSortBy","workStatusFilterOptions","label","value","workSortOptions","editFormData","id","task_name","so_number","contract_number","sale_owner","description","category","project_start_date","project_end_date","existingFiles","newFiles","categoryOptions","categories","workStatuses","computed","enrichedTasks","map","task","statusLabel","getStatusLabel","status","categoryLabel","getCategoryLabel","filteredAndSortedWorks","works","filter","work","work_status","sort","a","b","Date","work_date","statusOrder","methods","confirmDeleteTask","$confirm","require","message","header","icon","acceptLabel","rejectLabel","acceptClass","accept","deleteTask","taskId","delete","$toast","add","severity","summary","detail","life","dispatchEvent","CustomEvent","error","console","response","get","color","getCategoryIcon","categoryValue","find","cat","replace","trim","getCategoryColor","length","getStatusIcon","statusValue","s","getStatusColor","formatDate","date","match","year","month","day","split","d","parseInt","toLocaleDateString","showTaskDetails","hasFiles","files","Array","isArray","downloadTaskFiles","downloadFile","fileName","link","document","createElement","href","download","target","body","appendChild","click","removeChild","editTask","parseDate","dateStr","handleEditFileUpload","event","from","removeExistingFile","index","splice","removeNewFile","uploadNewFiles","formData","FormData","forEach","file","append","post","headers","updateTask","newUploadedFiles","allFiles","getFullYear","String","getMonth","padStart","getDate","updateData","put","refreshData","viewTaskWorks","formatDateTime","toLocaleString","hour","minute","getTotalHours","total","reduce","sum","parseFloat","total_hours","toFixed","showWorkFiles","downloadWorkFile"],"sources":["D:\\frontend_cem\\src\\views\\daily_work\\TaskList.vue"],"sourcesContent":["<template>\r\n  <Card class=\"history-card\">\r\n    <template #content>\r\n      <div v-if=\"tasks.length === 0\" class=\"empty-state\">\r\n        <i class=\"pi pi-briefcase\" style=\"font-size: 4rem; color: #ccc;\"></i>\r\n        <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ß‡πâ</p>\r\n      </div>\r\n\r\n      <EnhancedDataTable v-else-if=\"categories.length > 0\" :data=\"enrichedTasks\" \r\n        :paginator=\"true\" :rows=\"10\" :rowsPerPageOptions=\"[5, 10, 20]\" \r\n        responsiveLayout=\"scroll\" class=\"history-table\" stripedRows>\r\n        \r\n        <Column field=\"id\" header=\"‡∏£‡∏´‡∏±‡∏™‡∏á‡∏≤‡∏ô\" :sortable=\"true\">\r\n          <template #body=\"slotProps\">\r\n            <div style=\"text-align: center;\">\r\n              <Badge :value=\"slotProps.data.id\" class=\"custom-id-badge\" />\r\n            </div>\r\n          </template>\r\n        </Column>\r\n\r\n        <Column field=\"task_name\" header=\"‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£\" :sortable=\"true\" style=\"min-width: 150px; max-width: 250px;\">\r\n          <template #body=\"slotProps\">\r\n            <div class=\"task-name\">{{ slotProps.data.task_name }}</div>\r\n          </template>\r\n        </Column>\r\n\r\n        <Column field=\"so_number\" header=\"‡πÄ‡∏•‡∏Ç SO\" class=\"hide-mobile\">\r\n          <template #body=\"slotProps\">\r\n            <div v-if=\"slotProps.data.so_number\" class=\"so-number\">\r\n              {{ slotProps.data.so_number }}\r\n            </div>\r\n            <span v-else class=\"text-muted\">-</span>\r\n          </template>\r\n        </Column>\r\n\r\n        <Column field=\"contract_number\" header=\"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏ç‡∏ç‡∏≤\" class=\"hide-mobile\">\r\n          <template #body=\"slotProps\">\r\n            {{ slotProps.data.contract_number || '-' }}\r\n          </template>\r\n        </Column>\r\n\r\n        <Column field=\"sale_owner\" header=\"Sale ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô\" class=\"hide-mobile\">\r\n          <template #body=\"slotProps\">\r\n            <div v-if=\"slotProps.data.sale_owner\" class=\"sale-info\">\r\n              <i class=\"pi pi-user\"></i>\r\n              {{ slotProps.data.sale_owner }}\r\n            </div>\r\n            <span v-else class=\"text-muted\">-</span>\r\n          </template>\r\n        </Column>\r\n\r\n        <Column field=\"category\" header=\"‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà\" :sortable=\"true\" style=\"min-width: 120px; text-align: center;\">\r\n          <template #body=\"slotProps\">\r\n            <Badge :value=\"getCategoryLabel(slotProps.data.category)\" \r\n                   :style=\"{ backgroundColor: getCategoryColor(slotProps.data.category), color: '#fff', fontWeight: 'bold' }\" \r\n                   class=\"category-badge\" />\r\n          </template>\r\n        </Column>\r\n\r\n        <Column field=\"project_start_date\" header=\"‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£\" :sortable=\"true\">\r\n          <template #body=\"slotProps\">\r\n            {{ slotProps.data.project_start_date ? formatDate(slotProps.data.project_start_date) : '-' }}\r\n          </template>\r\n        </Column>\r\n\r\n        <Column field=\"project_end_date\" header=\"‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£\" :sortable=\"true\" class=\"hide-mobile\">\r\n          <template #body=\"slotProps\">\r\n            {{ slotProps.data.project_end_date ? formatDate(slotProps.data.project_end_date) : '-' }}\r\n          </template>\r\n        </Column>\r\n\r\n        <Column header=\"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î\" class=\"hide-mobile\">\r\n          <template #body=\"slotProps\">\r\n            <Button \r\n              label=\"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î\" \r\n              icon=\"pi pi-info-circle\" \r\n              size=\"small\" \r\n              severity=\"info\" \r\n              outlined \r\n              @click=\"showTaskDetails(slotProps.data)\"\r\n              :disabled=\"!slotProps.data.description\" />\r\n          </template>\r\n        </Column>\r\n\r\n        <Column header=\"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞\" style=\"text-align: center; min-width: 140px;\">\r\n          <template #body=\"slotProps\">\r\n            <div class=\"badge-container\">\r\n              <Badge :value=\"getStatusLabel(slotProps.data.status)\" \r\n                     :style=\"{ backgroundColor: getStatusColor(slotProps.data.status), color: '#fff', fontWeight: 'bold' }\" />\r\n            </div>\r\n          </template>\r\n        </Column>\r\n\r\n        <Column header=\"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£\" style=\"width: 200px;\">\r\n          <template #body=\"slotProps\">\r\n            <div class=\"action-buttons\">\r\n              <Button \r\n                icon=\"pi pi-eye\" \r\n                size=\"small\" \r\n                severity=\"info\" \r\n                outlined\r\n                @click=\"viewTaskWorks(slotProps.data)\"\r\n                v-tooltip=\"'‡∏î‡∏π‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô'\"\r\n              />\r\n              <Button \r\n                icon=\"pi pi-pencil\" \r\n                size=\"small\" \r\n                severity=\"warning\" \r\n                outlined\r\n                @click=\"editTask(slotProps.data)\"\r\n                v-tooltip=\"'‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç'\"\r\n              />\r\n              <Button \r\n                icon=\"pi pi-trash\" \r\n                size=\"small\" \r\n                severity=\"danger\" \r\n                outlined\r\n                @click=\"confirmDeleteTask(slotProps.data)\"\r\n                v-tooltip=\"'‡∏•‡∏ö'\"\r\n              />\r\n            </div>\r\n          </template>\r\n        </Column>\r\n\r\n        <Column header=\"‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö\" style=\"width: 80px;\">\r\n        </Column>\r\n      </EnhancedDataTable>\r\n    </template>\r\n  </Card>\r\n\r\n  <!-- Dialog ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô -->\r\n  <div v-if=\"detailDialog\" class=\"dialog-overlay\" @click=\"detailDialog = false\">\r\n    <div class=\"dialog-content\" @click.stop>\r\n      <div class=\"dialog-header\">\r\n        <h3>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô</h3>\r\n        <button class=\"dialog-close\" @click=\"detailDialog = false\">&times;</button>\r\n      </div>\r\n      <div class=\"dialog-body\">\r\n        <div class=\"work-description\">\r\n          {{ selectedTask?.description || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î' }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Files Dialog -->\r\n  <Dialog v-model:visible=\"filesDialog\" modal header=\"‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö\" :style=\"{ width: '50rem' }\">\r\n    <div v-if=\"selectedTaskFiles && selectedTaskFiles.length > 0\" class=\"files-list\">\r\n      <div v-for=\"(file, index) in selectedTaskFiles\" :key=\"index\" class=\"file-item\">\r\n        <div class=\"file-info\">\r\n          <i class=\"pi pi-file\"></i>\r\n          <span class=\"file-name\">{{ file }}</span>\r\n        </div>\r\n        <Button \r\n          icon=\"pi pi-download\" \r\n          size=\"small\" \r\n          severity=\"success\" \r\n          outlined\r\n          @click=\"downloadFile(file)\"\r\n          v-tooltip=\"'‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î'\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"no-files\">\r\n      <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö</p>\r\n    </div>\r\n  </Dialog>\r\n\r\n  <!-- Task Works Dialog -->\r\n  <Dialog v-model:visible=\"taskWorksDialog\" modal :header=\"`‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£: ${selectedTask?.task_name || ''}`\" \r\n          :style=\"{ width: '90vw', maxWidth: '1200px' }\" :draggable=\"false\" position=\"center\">\r\n    <div v-if=\"loadingWorks\" class=\"loading-state\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2rem;\"></i>\r\n      <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>\r\n    </div>\r\n    \r\n    <div v-else-if=\"taskWorks.length === 0\" class=\"empty-works\">\r\n      <i class=\"pi pi-inbox\" style=\"font-size: 3rem; color: #ccc;\"></i>\r\n      <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ</p>\r\n    </div>\r\n    \r\n    <div v-else class=\"works-container\">\r\n      <div class=\"works-summary\">\r\n        <div class=\"summary-item\">\r\n          <i class=\"pi pi-calendar\"></i>\r\n          <span>‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <strong>{{ taskWorks.length }}</strong> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>\r\n        </div>\r\n        <div class=\"summary-item\">\r\n          <i class=\"pi pi-clock\"></i>\r\n          <span>‡∏£‡∏ß‡∏°: <strong>{{ getTotalHours() }}</strong> ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"works-filters\">\r\n        <div class=\"filter-group\">\r\n          <label>‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</label>\r\n          <Dropdown v-model=\"workStatusFilter\" :options=\"workStatusFilterOptions\" \r\n                    optionLabel=\"label\" optionValue=\"value\" placeholder=\"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\" \r\n                    class=\"filter-dropdown\" />\r\n        </div>\r\n        <div class=\"filter-group\">\r\n          <label>‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°:</label>\r\n          <Dropdown v-model=\"workSortBy\" :options=\"workSortOptions\" \r\n                    optionLabel=\"label\" optionValue=\"value\" \r\n                    class=\"filter-dropdown\" />\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"works-table-wrapper\">\r\n        <table class=\"works-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>\r\n              <th>‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô</th>\r\n              <th>‡πÄ‡∏ß‡∏•‡∏≤</th>\r\n              <th>‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</th>\r\n              <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>\r\n              <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</th>\r\n              <th>‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"work in filteredAndSortedWorks\" :key=\"work.id\">\r\n              <td class=\"text-center\">\r\n                <Badge :value=\"work.id\" severity=\"info\" />\r\n              </td>\r\n              <td>{{ formatDate(work.work_date) }}</td>\r\n              <td>{{ work.employee_name || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏' }}</td>\r\n              <td>{{ work.start_time }} - {{ work.end_time }}</td>\r\n              <td class=\"text-center\">{{ parseFloat(work.total_hours || 0).toFixed(1) }} ‡∏ä‡∏°.</td>\r\n              <td class=\"text-center\">\r\n                <Badge :value=\"getStatusLabel(work.work_status)\" \r\n                       :style=\"{ backgroundColor: getStatusColor(work.work_status), color: '#fff', fontWeight: 'bold' }\" />\r\n              </td>\r\n              <td>{{ work.location || '-' }}</td>\r\n              <td class=\"text-center\">\r\n                <Button v-if=\"work.files && work.files.length > 0\"\r\n                        icon=\"pi pi-paperclip\" \r\n                        :label=\"work.files.length.toString()\"\r\n                        size=\"small\" \r\n                        severity=\"success\" \r\n                        outlined\r\n                        @click=\"showWorkFiles(work)\"\r\n                        v-tooltip=\"`${work.files.length} ‡πÑ‡∏ü‡∏•‡πå`\" />\r\n                <span v-else>-</span>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n    \r\n    <template #footer>\r\n      <Button label=\"‡∏õ‡∏¥‡∏î\" icon=\"pi pi-times\" @click=\"taskWorksDialog = false\" />\r\n    </template>\r\n  </Dialog>\r\n\r\n  <!-- Work Files Dialog -->\r\n  <Dialog v-model:visible=\"workFilesDialog\" modal header=\"‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö\" \r\n          :style=\"{ width: '500px' }\" :draggable=\"false\">\r\n    <div v-if=\"selectedWorkFiles && selectedWorkFiles.length > 0\" class=\"files-list\">\r\n      <div v-for=\"(file, index) in selectedWorkFiles\" :key=\"index\" class=\"file-item\">\r\n        <div class=\"file-info\">\r\n          <i class=\"pi pi-file\"></i>\r\n          <span class=\"file-name\">{{ file }}</span>\r\n        </div>\r\n        <Button icon=\"pi pi-download\" size=\"small\" severity=\"success\" outlined\r\n                @click=\"downloadWorkFile(file)\" v-tooltip=\"'‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î'\" />\r\n      </div>\r\n    </div>\r\n  </Dialog>\r\n\r\n  <!-- Edit Task Dialog -->\r\n  <Dialog v-model:visible=\"editDialog\" modal header=\"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô\" :style=\"{ width: '50rem' }\" :draggable=\"false\" position=\"center\">\r\n    <form @submit.prevent=\"updateTask\" class=\"edit-form\">\r\n      <div class=\"form-grid\">\r\n        <div class=\"input-group\">\r\n          <label class=\"input-label\">‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô *</label>\r\n          <InputText v-model=\"editFormData.task_name\" required class=\"corporate-input\" />\r\n        </div>\r\n        \r\n        <div class=\"input-group\">\r\n          <label class=\"input-label\">SO Number</label>\r\n          <InputText v-model=\"editFormData.so_number\" class=\"corporate-input\" />\r\n        </div>\r\n        \r\n        <div class=\"input-group\">\r\n          <label class=\"input-label\">Contract Number</label>\r\n          <InputText v-model=\"editFormData.contract_number\" class=\"corporate-input\" />\r\n        </div>\r\n        \r\n        <div class=\"input-group\">\r\n          <label class=\"input-label\">Sale Owner</label>\r\n          <InputText v-model=\"editFormData.sale_owner\" class=\"corporate-input\" />\r\n        </div>\r\n\r\n        <div class=\"input-group\">\r\n          <label class=\"input-label\">‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£</label>\r\n          <Calendar v-model=\"editFormData.project_start_date\" dateFormat=\"dd/mm/yy\" class=\"corporate-input\" />\r\n        </div>\r\n\r\n        <div class=\"input-group\">\r\n          <label class=\"input-label\">‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£</label>\r\n          <Calendar v-model=\"editFormData.project_end_date\" dateFormat=\"dd/mm/yy\" \r\n                    :minDate=\"editFormData.project_start_date\" class=\"corporate-input\" />\r\n        </div>\r\n\r\n        <div class=\"input-group\">\r\n          <label class=\"input-label\">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏á‡∏≤‡∏ô *</label>\r\n          <Dropdown v-model=\"editFormData.category\" :options=\"categories\" \r\n                    optionLabel=\"label\" optionValue=\"value\" placeholder=\"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏á‡∏≤‡∏ô\" \r\n                    class=\"corporate-input\" required>\r\n            <template #value=\"slotProps\">\r\n              <span v-if=\"slotProps.value\">{{ getCategoryLabel(slotProps.value) }}</span>\r\n            </template>\r\n            <template #option=\"slotProps\">\r\n              <span>{{ slotProps.option.label }}</span>\r\n            </template>\r\n          </Dropdown>\r\n        </div>\r\n\r\n        <div class=\"input-group\">\r\n          <label class=\"input-label\">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô</label>\r\n          <Dropdown v-model=\"editFormData.status\" :options=\"workStatuses\" \r\n                    optionLabel=\"label\" optionValue=\"value\" placeholder=\"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô\" \r\n                    class=\"corporate-input\">\r\n            <template #value=\"slotProps\">\r\n              <span v-if=\"slotProps.value\">{{ getStatusLabel(slotProps.value) }}</span>\r\n            </template>\r\n            <template #option=\"slotProps\">\r\n              <span>{{ slotProps.option.label }}</span>\r\n            </template>\r\n          </Dropdown>\r\n        </div>\r\n        \r\n        <div class=\"input-group full-width\">\r\n          <label class=\"input-label\">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>\r\n          <Textarea v-model=\"editFormData.description\" rows=\"4\" class=\"corporate-input\" />\r\n        </div>\r\n\r\n        <div class=\"input-group full-width\">\r\n          <label class=\"input-label\">‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö</label>\r\n          <div class=\"file-upload-section\">\r\n            <input type=\"file\" ref=\"editFileInput\" @change=\"handleEditFileUpload\" \r\n              accept=\"image/*,.pdf,.doc,.docx,.xls,.xlsx\" multiple class=\"file-input\" style=\"display: none;\">\r\n            <Button type=\"button\" \r\n              label=\"‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå\" \r\n              icon=\"pi pi-upload\" \r\n              severity=\"secondary\" \r\n              outlined \r\n              @click=\"$refs.editFileInput.click()\" />\r\n          </div>\r\n          \r\n          <!-- ‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏° -->\r\n          <div v-if=\"editFormData.existingFiles?.length > 0\" class=\"existing-files\">\r\n            <h4>‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°:</h4>\r\n            <div v-for=\"(file, index) in editFormData.existingFiles\" :key=\"index\" class=\"file-item\">\r\n              <i class=\"pi pi-file\"></i>\r\n              <span class=\"file-name\">{{ file }}</span>\r\n              <Button icon=\"pi pi-times\" size=\"small\" severity=\"danger\" text @click=\"removeExistingFile(index)\" />\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- ‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà -->\r\n          <div v-if=\"editFormData.newFiles?.length > 0\" class=\"new-files\">\r\n            <h4>‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà:</h4>\r\n            <div v-for=\"(file, index) in editFormData.newFiles\" :key=\"index\" class=\"file-item\">\r\n              <i class=\"pi pi-file\"></i>\r\n              <span class=\"file-name\">{{ file.name }}</span>\r\n              <Button icon=\"pi pi-times\" size=\"small\" severity=\"danger\" text @click=\"removeNewFile(index)\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"form-actions\">\r\n        <Button type=\"button\" label=\"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å\" severity=\"secondary\" outlined @click=\"editDialog = false\" />\r\n        <Button type=\"submit\" label=\"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å\" severity=\"success\" />\r\n      </div>\r\n    </form>\r\n  </Dialog>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport EnhancedDataTable from '@/components/EnhancedDataTable.vue'\r\n\r\nexport default {\r\n  name: 'TaskList',\r\n  components: {\r\n    EnhancedDataTable\r\n  },\r\n  created() {\r\n    this.$http = axios.create({\r\n      baseURL: ''\r\n    })\r\n  },\r\n  async mounted() {\r\n    // Listen for task updates\r\n    window.addEventListener('taskUpdated', this.handleTaskUpdate)\r\n    window.addEventListener('workRecordUpdated', this.handleTaskUpdate)\r\n    window.addEventListener('taskStatusChanged', this.handleTaskUpdate)\r\n    window.addEventListener('categoriesUpdated', this.handleCategoriesUpdate)\r\n    window.addEventListener('statusesUpdated', this.handleStatusesUpdate)\r\n    \r\n    // Load categories and statuses first, then tasks\r\n    await this.loadCategoriesFromStorage()\r\n    await this.loadStatusesFromStorage()\r\n    this.loadTasks()\r\n  },\r\n  beforeUnmount() {\r\n    window.removeEventListener('taskUpdated', this.handleTaskUpdate)\r\n    window.removeEventListener('workRecordUpdated', this.handleTaskUpdate)\r\n    window.removeEventListener('taskStatusChanged', this.handleTaskUpdate)\r\n    window.removeEventListener('categoriesUpdated', this.handleCategoriesUpdate)\r\n    window.removeEventListener('statusesUpdated', this.handleStatusesUpdate)\r\n  },\r\n  data() {\r\n    return {\r\n      tasks: [],\r\n      detailDialog: false,\r\n      selectedTask: null,\r\n      filesDialog: false,\r\n      selectedTaskFiles: [],\r\n      editDialog: false,\r\n      taskWorksDialog: false,\r\n      taskWorks: [],\r\n      loadingWorks: false,\r\n      workFilesDialog: false,\r\n      selectedWorkFiles: [],\r\n      workStatusFilter: null,\r\n      workSortBy: 'date_desc',\r\n      workStatusFilterOptions: [\r\n        { label: '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î', value: null },\r\n        { label: '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå', value: 'completed' },\r\n        { label: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£', value: 'in_progress' },\r\n        { label: '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£', value: 'pending' },\r\n        { label: '‡∏£‡∏∞‡∏á‡∏±‡∏ö', value: 'on_hold' }\r\n      ],\r\n      workSortOptions: [\r\n        { label: '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î', value: 'date_desc' },\r\n        { label: '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î', value: 'date_asc' },\r\n        { label: '‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞', value: 'status' }\r\n      ],\r\n      editFormData: {\r\n        id: null,\r\n        task_name: '',\r\n        so_number: '',\r\n        contract_number: '',\r\n        sale_owner: '',\r\n        description: '',\r\n        category: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',\r\n        project_start_date: null,\r\n        project_end_date: null,\r\n        existingFiles: [],\r\n        newFiles: []\r\n      },\r\n      categoryOptions: [\r\n        { label: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ', value: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ' },\r\n        { label: '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö', value: '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö' },\r\n        { label: '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤', value: '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤' },\r\n        { label: '‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°', value: '‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°' },\r\n        { label: '‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°', value: '‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°' },\r\n        { label: '‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢', value: '‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢' },\r\n        { label: '‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£', value: '‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£' },\r\n        { label: '‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤', value: '‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤' }\r\n      ],\r\n      categories: [],\r\n      workStatuses: []\r\n    }\r\n  },\r\n  computed: {\r\n    enrichedTasks() {\r\n      // Add status and category labels to tasks for better search\r\n      return this.tasks.map(task => ({\r\n        ...task,\r\n        statusLabel: this.getStatusLabel(task.status),\r\n        categoryLabel: this.getCategoryLabel(task.category)\r\n      }))\r\n    },\r\n    filteredAndSortedWorks() {\r\n      let works = [...this.taskWorks]\r\n      \r\n      // Filter by status\r\n      if (this.workStatusFilter) {\r\n        works = works.filter(work => work.work_status === this.workStatusFilter)\r\n      }\r\n      \r\n      // Sort\r\n      if (this.workSortBy === 'date_desc') {\r\n        works.sort((a, b) => new Date(b.work_date) - new Date(a.work_date))\r\n      } else if (this.workSortBy === 'date_asc') {\r\n        works.sort((a, b) => new Date(a.work_date) - new Date(b.work_date))\r\n      } else if (this.workSortBy === 'status') {\r\n        const statusOrder = { 'completed': 1, 'in_progress': 2, 'pending': 3, 'on_hold': 4 }\r\n        works.sort((a, b) => (statusOrder[a.work_status] || 5) - (statusOrder[b.work_status] || 5))\r\n      }\r\n      \r\n      return works\r\n    }\r\n  },\r\n  methods: {\r\n    confirmDeleteTask(task) {\r\n      this.$confirm.require({\r\n        message: `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏á‡∏≤‡∏ô \"${task.task_name}\" ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`,\r\n        header: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö',\r\n        icon: 'pi pi-exclamation-triangle',\r\n        acceptLabel: '‡∏•‡∏ö',\r\n        rejectLabel: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',\r\n        acceptClass: 'p-button-danger',\r\n        accept: () => {\r\n          this.deleteTask(task.id)\r\n        }\r\n      })\r\n    },\r\n    async deleteTask(taskId) {\r\n      try {\r\n        await this.$http.delete(`/api/tasks/${taskId}`)\r\n        \r\n        this.$toast.add({\r\n          severity: 'success',\r\n          summary: '‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',\r\n          detail: '‡∏•‡∏ö‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß',\r\n          life: 3000\r\n        })\r\n        \r\n        this.loadTasks()\r\n        window.dispatchEvent(new CustomEvent('taskUpdated'))\r\n      } catch (error) {\r\n        console.error('Error deleting task:', error)\r\n        this.$toast.add({\r\n          severity: 'error',\r\n          summary: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\r\n          detail: error.response?.data?.error || '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ',\r\n          life: 5000\r\n        })\r\n      }\r\n    },\r\n    async loadCategoriesFromStorage() {\r\n      try {\r\n        const response = await this.$http.get('/api/settings/categories')\r\n        this.categories = response.data\r\n      } catch (error) {\r\n        console.error('Error loading categories:', error)\r\n        // Fallback to default\r\n        this.categories = [\r\n          { label: 'üíº ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ', value: '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ', icon: 'emoji:üíº', color: '#6366f1' },\r\n          { label: 'üíª ‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤', value: '‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤', icon: 'emoji:üíª', color: '#14b8a6' },\r\n          { label: 'üîß ‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤', value: '‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤', icon: 'emoji:üîß', color: '#f97316' }\r\n        ]\r\n      }\r\n    },\r\n    async loadStatusesFromStorage() {\r\n      try {\r\n        const response = await this.$http.get('/api/settings/statuses')\r\n        this.workStatuses = response.data\r\n      } catch (error) {\r\n        console.error('Error loading statuses:', error)\r\n        // Fallback to default\r\n        this.workStatuses = [\r\n          { label: '‚è≥ ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£', value: 'pending', icon: 'emoji:‚è≥', color: '#f59e0b' },\r\n          { label: 'üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£', value: 'in_progress', icon: 'emoji:üîÑ', color: '#3b82f6' },\r\n          { label: '‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô', value: 'completed', icon: 'emoji:‚úÖ', color: '#10b981' },\r\n          { label: '‚è∏Ô∏è ‡∏£‡∏∞‡∏á‡∏±‡∏ö', value: 'on_hold', icon: 'emoji:‚è∏Ô∏è', color: '#6c757d' }\r\n        ]\r\n      }\r\n    },\r\n    getCategoryIcon(categoryValue) {\r\n      const category = this.categories.find(cat => cat.value === categoryValue)\r\n      return category ? category.icon : 'pi pi-tag'\r\n    },\r\n    getCategoryLabel(categoryValue) {\r\n      const category = this.categories.find(cat => cat.value === categoryValue)\r\n      if (category && category.label) {\r\n        // Remove all emoji and special characters\r\n        return category.label.replace(/[\\u{1F000}-\\u{1FFFF}]|[\\u{2600}-\\u{27BF}]|[\\u{2300}-\\u{23FF}]|[\\u{2B50}]|[\\u{203C}-\\u{3299}]/gu, '').trim()\r\n      }\r\n      return categoryValue\r\n    },\r\n    getCategoryColor(categoryValue) {\r\n      if (!this.categories || this.categories.length === 0) {\r\n        return '#6c757d'\r\n      }\r\n      const category = this.categories.find(cat => cat.value === categoryValue)\r\n      return category && category.color ? category.color : '#6c757d'\r\n    },\r\n    getStatusIcon(statusValue) {\r\n      const status = this.workStatuses.find(s => s.value === statusValue)\r\n      return status ? status.icon : 'pi pi-circle'\r\n    },\r\n    getStatusLabel(statusValue) {\r\n      const status = this.workStatuses.find(s => s.value === statusValue)\r\n      if (status && status.label) {\r\n        // Remove all emoji and special characters\r\n        return status.label.replace(/[\\u{1F000}-\\u{1FFFF}]|[\\u{2600}-\\u{27BF}]|[\\u{2300}-\\u{23FF}]|[\\u{2B50}]|[\\u{203C}-\\u{3299}]/gu, '').trim()\r\n      }\r\n      return statusValue\r\n    },\r\n    getStatusColor(statusValue) {\r\n      const status = this.workStatuses.find(s => s.value === statusValue)\r\n      return status?.color || '#6c757d'\r\n    },\r\n    async loadTasks() {\r\n      try {\r\n        const response = await this.$http.get('/api/tasks')\r\n        // ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á format array ‡∏ï‡∏£‡∏á‡πÜ ‡πÅ‡∏•‡∏∞ format ‡∏ó‡∏µ‡πà‡∏°‡∏µ wrapper\r\n        this.tasks = response.data.data || response.data || []\r\n      } catch (error) {\r\n        this.tasks = []\r\n        this.$toast.add({\r\n          severity: 'error',\r\n          summary: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\r\n          detail: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ',\r\n          life: 5000\r\n        })\r\n      }\r\n    },\r\n    formatDate(date) {\r\n      if (!date) return '-'\r\n      try {\r\n        // For date-only strings (YYYY-MM-DD), parse manually to avoid timezone issues\r\n        if (typeof date === 'string' && date.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\r\n          const [year, month, day] = date.split('-')\r\n          const d = new Date(parseInt(year), parseInt(month) - 1, parseInt(day))\r\n          return d.toLocaleDateString('th-TH', {\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric'\r\n          })\r\n        }\r\n        return new Date(date).toLocaleDateString('th-TH', {\r\n          year: 'numeric',\r\n          month: 'long',\r\n          day: 'numeric'\r\n        })\r\n      } catch (error) {\r\n        return date\r\n      }\r\n    },\r\n    showTaskDetails(task) {\r\n      this.selectedTask = task\r\n      this.detailDialog = true\r\n    },\r\n    hasFiles(task) {\r\n      return task.files && Array.isArray(task.files) && task.files.length > 0\r\n    },\r\n    downloadTaskFiles(task) {\r\n      if (this.hasFiles(task)) {\r\n        this.selectedTaskFiles = task.files\r\n        this.filesDialog = true\r\n      }\r\n    },\r\n    downloadFile(fileName) {\r\n      // Create download link\r\n      const link = document.createElement('a')\r\n      link.href = `/api/files/download/${fileName}`\r\n      link.download = fileName\r\n      link.target = '_blank'\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      document.body.removeChild(link)\r\n    },\r\n    editTask(task) {\r\n      // Parse dates from string to Date object\r\n      const parseDate = (dateStr) => {\r\n        if (!dateStr) return null\r\n        if (typeof dateStr === 'string' && dateStr.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\r\n          const [year, month, day] = dateStr.split('-')\r\n          // Create date at noon to avoid timezone issues\r\n          return new Date(parseInt(year), parseInt(month) - 1, parseInt(day), 12, 0, 0)\r\n        }\r\n        return new Date(dateStr)\r\n      }\r\n      \r\n      this.editFormData = {\r\n        id: task.id,\r\n        task_name: task.task_name,\r\n        so_number: task.so_number || '',\r\n        contract_number: task.contract_number || '',\r\n        sale_owner: task.sale_owner || '',\r\n        description: task.description || '',\r\n        category: task.category || '‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',\r\n        status: task.status || 'pending',\r\n        project_start_date: parseDate(task.project_start_date),\r\n        project_end_date: parseDate(task.project_end_date),\r\n        existingFiles: [...(task.files || [])],\r\n        newFiles: []\r\n      }\r\n      this.editDialog = true\r\n    },\r\n    handleEditFileUpload(event) {\r\n      const files = Array.from(event.target.files)\r\n      this.editFormData.newFiles = [...this.editFormData.newFiles, ...files]\r\n    },\r\n    removeExistingFile(index) {\r\n      this.editFormData.existingFiles.splice(index, 1)\r\n    },\r\n    removeNewFile(index) {\r\n      this.editFormData.newFiles.splice(index, 1)\r\n    },\r\n    async uploadNewFiles() {\r\n      if (this.editFormData.newFiles.length === 0) return []\r\n      \r\n      const formData = new FormData()\r\n      this.editFormData.newFiles.forEach(file => {\r\n        formData.append('files', file)\r\n      })\r\n      \r\n      try {\r\n        const response = await this.$http.post('/api/files/upload', formData, {\r\n          headers: { 'Content-Type': 'multipart/form-data' }\r\n        })\r\n        return response.data.files || []\r\n      } catch (error) {\r\n        return []\r\n      }\r\n    },\r\n    async updateTask() {\r\n      try {\r\n        // Upload ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà\r\n        const newUploadedFiles = await this.uploadNewFiles()\r\n        \r\n        // ‡∏£‡∏ß‡∏°‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà\r\n        const allFiles = [...this.editFormData.existingFiles, ...newUploadedFiles]\r\n        \r\n        // Format dates to YYYY-MM-DD\r\n        const formatDate = (date) => {\r\n          if (!date) return null\r\n          const d = new Date(date)\r\n          const year = d.getFullYear()\r\n          const month = String(d.getMonth() + 1).padStart(2, '0')\r\n          const day = String(d.getDate()).padStart(2, '0')\r\n          return `${year}-${month}-${day}`\r\n        }\r\n        \r\n        const updateData = {\r\n          ...this.editFormData,\r\n          project_start_date: formatDate(this.editFormData.project_start_date),\r\n          project_end_date: formatDate(this.editFormData.project_end_date),\r\n          files: allFiles\r\n        }\r\n        delete updateData.existingFiles\r\n        delete updateData.newFiles\r\n        \r\n        await this.$http.put(`/api/tasks/${this.editFormData.id}`, updateData)\r\n        \r\n        this.$toast.add({\r\n          severity: 'success',\r\n          summary: '‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',\r\n          detail: '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß',\r\n          life: 3000\r\n        })\r\n        \r\n        this.editDialog = false\r\n        \r\n        // Auto-refresh data\r\n        await this.loadTasks()\r\n        \r\n        // Dispatch global event for real-time update\r\n        window.dispatchEvent(new CustomEvent('taskUpdated'))\r\n        \r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: 'error',\r\n          summary: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\r\n          detail: error.response?.data?.error || '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ',\r\n          life: 5000\r\n        })\r\n      }\r\n    },\r\n    handleTaskUpdate() {\r\n      // Auto-refresh tasks when updated\r\n      this.loadTasks()\r\n    },\r\n    handleCategoriesUpdate() {\r\n      this.loadCategoriesFromStorage()\r\n    },\r\n    handleStatusesUpdate() {\r\n      this.loadStatusesFromStorage()\r\n    },\r\n    async refreshData() {\r\n      // Method for external refresh calls\r\n      await this.loadTasks()\r\n    },\r\n    async viewTaskWorks(task) {\r\n      this.selectedTask = task\r\n      this.taskWorks = []\r\n      this.loadingWorks = true\r\n      this.taskWorksDialog = true\r\n      this.workStatusFilter = null\r\n      this.workSortBy = 'date_desc'\r\n      \r\n      try {\r\n        const response = await this.$http.get(`/api/daily-work?task_id=${task.id}`)\r\n        this.taskWorks = response.data || []\r\n      } catch (error) {\r\n        this.$toast.add({\r\n          severity: 'error',\r\n          summary: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\r\n          detail: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡πÑ‡∏î‡πâ',\r\n          life: 3000\r\n        })\r\n        this.taskWorks = []\r\n      } finally {\r\n        this.loadingWorks = false\r\n      }\r\n    },\r\n    formatDateTime(date) {\r\n      try {\r\n        return new Date(date).toLocaleString('th-TH', {\r\n          year: 'numeric',\r\n          month: 'short',\r\n          day: 'numeric',\r\n          hour: '2-digit',\r\n          minute: '2-digit'\r\n        })\r\n      } catch (error) {\r\n        return date\r\n      }\r\n    },\r\n    getTotalHours() {\r\n      if (!this.taskWorks || this.taskWorks.length === 0) return '0.0'\r\n      const total = this.taskWorks.reduce((sum, work) => sum + (parseFloat(work.total_hours) || 0), 0)\r\n      return total.toFixed(1)\r\n    },\r\n    showWorkFiles(work) {\r\n      this.selectedWorkFiles = work.files || []\r\n      this.workFilesDialog = true\r\n    },\r\n    downloadWorkFile(fileName) {\r\n      const link = document.createElement('a')\r\n      link.href = `/api/files/download/${fileName}`\r\n      link.download = fileName\r\n      link.target = '_blank'\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      document.body.removeChild(link)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.history-card {\r\n  width: 100%;\r\n  margin: 0;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\r\n  border: 1px solid #e9ecef;\r\n}\r\n\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 4rem 2rem;\r\n  color: #6c757d;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  margin: 1rem;\r\n}\r\n\r\n.empty-state p {\r\n  margin-top: 1rem;\r\n  font-size: 1.1rem;\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n}\r\n\r\n.history-table :deep(.p-datatable) {\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n}\r\n\r\n.history-table :deep(.p-datatable-thead > tr > th) {\r\n  background: #f8f9fa;\r\n  color: #495057;\r\n  font-weight: 600;\r\n  border-bottom: 2px solid #e9ecef;\r\n  padding: 1rem 0.75rem;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.history-table :deep(.p-datatable-tbody > tr > td) {\r\n  padding: 1rem 0.75rem;\r\n  border-bottom: 1px solid #f1f3f4;\r\n  vertical-align: middle;\r\n}\r\n\r\n.history-table :deep(.p-datatable-tbody > tr:hover) {\r\n  background: #f8f9fa;\r\n}\r\n\r\n.history-table :deep(.p-paginator) {\r\n  background: #f8f9fa;\r\n  border-top: 2px solid #e9ecef;\r\n  padding: 1rem;\r\n}\r\n\r\n.custom-id-badge {\r\n  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\r\n  color: white;\r\n  font-weight: 600;\r\n  padding: 0.5rem 0.75rem;\r\n  border-radius: 20px;\r\n  font-size: 0.8rem;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  min-width: 40px;\r\n}\r\n\r\n.task-name {\r\n  font-weight: 600;\r\n  color: #495057;\r\n}\r\n\r\n.so-number {\r\n  font-size: 0.9rem;\r\n  color: #6c757d;\r\n  background: #e3f2fd;\r\n  padding: 0.2rem 0.5rem;\r\n  border-radius: 12px;\r\n  display: inline-block;\r\n  width: fit-content;\r\n}\r\n\r\n.sale-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  color: #495057;\r\n}\r\n\r\n.sale-info i {\r\n  color: #667eea;\r\n}\r\n\r\n.text-muted {\r\n  color: #6c757d;\r\n}\r\n\r\n.dialog-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.dialog-content {\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\r\n  max-width: 600px;\r\n  width: 90%;\r\n  max-height: 80vh;\r\n  overflow: hidden;\r\n  animation: dialogSlideIn 0.3s ease-out;\r\n}\r\n\r\n@keyframes dialogSlideIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: scale(0.8) translateY(-20px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: scale(1) translateY(0);\r\n  }\r\n}\r\n\r\n.dialog-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 1.5rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n  background: #f8f9fa;\r\n}\r\n\r\n.dialog-header h3 {\r\n  margin: 0;\r\n  color: #495057;\r\n  font-size: 1.25rem;\r\n}\r\n\r\n.dialog-close {\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n  color: #6c757d;\r\n  padding: 0;\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.dialog-close:hover {\r\n  background: #e9ecef;\r\n  color: #495057;\r\n}\r\n\r\n.dialog-body {\r\n  padding: 1.5rem;\r\n}\r\n\r\n.work-description {\r\n  background: #f8f9fa;\r\n  padding: 1rem;\r\n  border-radius: 6px;\r\n  border-left: 4px solid #28a745;\r\n  white-space: pre-wrap;\r\n  line-height: 1.6;\r\n  color: #495057;\r\n  font-size: 0.95rem;\r\n}\r\n\r\n/* Mobile Responsive */\r\n.files-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.file-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.75rem;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 6px;\r\n  background-color: #f9f9f9;\r\n}\r\n\r\n.file-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.file-name {\r\n  font-weight: 500;\r\n}\r\n\r\n.no-files {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  color: #666;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  :deep(.hide-mobile) {\r\n    display: none !important;\r\n  }\r\n  \r\n  .history-table :deep(.p-datatable-tbody > tr > td) {\r\n    padding: 0.75rem 0.5rem;\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .history-table :deep(.p-datatable-thead > tr > th) {\r\n    padding: 0.75rem 0.5rem;\r\n    font-size: 0.85rem;\r\n  }\r\n  \r\n  .task-name {\r\n    font-size: 0.9rem;\r\n    line-height: 1.2;\r\n  }\r\n}\r\n\r\n.edit-form {\r\n  padding: 1rem 0;\r\n}\r\n\r\n.form-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 1rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.input-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.input-group.full-width {\r\n  grid-column: 1 / -1;\r\n}\r\n\r\n.input-label {\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.corporate-input, .corporate-dropdown {\r\n  width: 100%;\r\n}\r\n\r\n.file-upload-section {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.existing-files, .new-files {\r\n  margin-top: 1rem;\r\n}\r\n\r\n.existing-files h4, .new-files h4 {\r\n  margin: 0 0 0.5rem 0;\r\n  font-size: 0.9rem;\r\n  color: #666;\r\n}\r\n\r\n.file-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  padding: 0.5rem;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 4px;\r\n  margin-bottom: 0.5rem;\r\n  background-color: #f9f9f9;\r\n}\r\n\r\n.file-name {\r\n  flex: 1;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 1rem;\r\n  padding-top: 1rem;\r\n  border-top: 1px solid #e0e0e0;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  justify-content: center;\r\n}\r\n\r\n.loading-state,\r\n.empty-works {\r\n  text-align: center;\r\n  padding: 3rem 2rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.loading-state p,\r\n.empty-works p {\r\n  margin-top: 1rem;\r\n  font-size: 1rem;\r\n}\r\n\r\n.works-container {\r\n  max-height: 70vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.works-summary {\r\n  display: flex;\r\n  gap: 2rem;\r\n  padding: 1rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.works-filters {\r\n  display: flex;\r\n  gap: 1rem;\r\n  padding: 1rem;\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  margin-bottom: 1rem;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.filter-group {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.filter-group label {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  color: #495057;\r\n  white-space: nowrap;\r\n}\r\n\r\n.filter-dropdown {\r\n  min-width: 180px;\r\n}\r\n\r\n.summary-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  color: #495057;\r\n}\r\n\r\n.summary-item i {\r\n  color: #4A90E2;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.summary-item strong {\r\n  color: #4A90E2;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.works-table-wrapper {\r\n  overflow-x: auto;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n}\r\n\r\n.works-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  background: white;\r\n}\r\n\r\n.works-table thead {\r\n  background: #f8f9fa;\r\n}\r\n\r\n.works-table th {\r\n  padding: 1rem 0.75rem;\r\n  text-align: left;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  border-bottom: 2px solid #e9ecef;\r\n  white-space: nowrap;\r\n}\r\n\r\n.works-table td {\r\n  padding: 0.75rem;\r\n  border-bottom: 1px solid #f1f3f4;\r\n  color: #495057;\r\n}\r\n\r\n.works-table tbody tr:hover {\r\n  background: #f8f9fa;\r\n}\r\n\r\n.works-table .text-center {\r\n  text-align: center;\r\n}\r\n\r\n.files-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.file-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.75rem;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 6px;\r\n  background: #f8f9fa;\r\n}\r\n\r\n.file-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  flex: 1;\r\n}\r\n\r\n.file-info i {\r\n  color: #6c757d;\r\n  font-size: 1rem;\r\n}\r\n\r\n.file-name {\r\n  font-size: 0.9rem;\r\n  color: #495057;\r\n  word-break: break-all;\r\n}\r\n\r\n.description-preview {\r\n  font-size: 0.9rem;\r\n  color: #666;\r\n}\r\n\r\n.attachments-info {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.no-files {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: #999;\r\n  font-size: 0.9rem;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n\r\n.category-badge {\r\n  white-space: nowrap;\r\n  overflow: visible;\r\n  text-overflow: unset;\r\n  max-width: none;\r\n  width: auto;\r\n  color: white !important;\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .history-table :deep(.p-datatable-tbody > tr > td) {\r\n    padding: 0.5rem 0.25rem;\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .history-table :deep(.p-datatable-thead > tr > th) {\r\n    padding: 0.5rem 0.25rem;\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .custom-id-badge {\r\n    font-size: 0.7rem;\r\n    padding: 0.3rem 0.5rem;\r\n  }\r\n}\r\n\r\n.badge-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n  min-height: 40px;\r\n}\r\n\r\n.badge-container :deep(.p-badge) {\r\n  white-space: normal !important;\r\n  word-break: keep-all !important;\r\n  overflow-wrap: break-word !important;\r\n  text-align: center;\r\n  font-weight: 600;\r\n  font-size: 0.9rem;\r\n  padding: 0.25rem 0.4rem !important;\r\n  line-height: 1.5 !important;\r\n  display: inline-block !important;\r\n  max-width: 100%;\r\n  height: auto !important;\r\n}\r\n\r\n.category-display,\r\n.category-option,\r\n.status-display,\r\n.status-option {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.category-display .emoji,\r\n.category-option .emoji,\r\n.status-display .emoji,\r\n.status-option .emoji {\r\n  font-size: 16px;\r\n}\r\n\r\n.category-display i,\r\n.category-option i,\r\n.status-display i,\r\n.status-option i {\r\n  color: #4A90E2;\r\n  font-size: 14px;\r\n}\r\n\r\n/* Lock edit dialog position */\r\n.p-dialog .p-dialog-header {\r\n  cursor: default !important;\r\n}\r\n\r\n.p-dialog .p-dialog-header .p-dialog-title {\r\n  cursor: default !important;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}