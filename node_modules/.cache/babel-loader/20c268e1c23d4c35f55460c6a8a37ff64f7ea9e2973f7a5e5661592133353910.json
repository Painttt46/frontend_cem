{"ast":null,"code":"import axios from '@/utils/axiosConfig';\nimport UserInfoDialog from '@/components/UserInfoDialog.vue';\nimport EnhancedDataTable from '@/components/EnhancedDataTable.vue';\nexport default {\n  name: 'LeaveHistory',\n  components: {\n    UserInfoDialog,\n    EnhancedDataTable\n  },\n  emits: ['view-attachments', 'request-deleted'],\n  inject: ['$confirm', '$toast'],\n  props: {\n    records: Array\n  },\n  data() {\n    return {\n      showWorkDetailsDialog: false,\n      selectedWorkDetails: '',\n      showAttachmentsDialog: false,\n      selectedAttachments: [],\n      fullImageDialog: false,\n      fullImageUrl: '',\n      leaveTypes: [],\n      showUserInfoDialog: false,\n      selectedUserName: '',\n      selectedUserId: null,\n      showRejectReasonDialog: false,\n      selectedRejectReason: ''\n    };\n  },\n  async mounted() {\n    await this.loadLeaveTypes();\n  },\n  created() {\n    this.$http = axios;\n  },\n  methods: {\n    async loadLeaveTypes() {\n      try {\n        const response = await this.$http.get('/api/leave/leave-types');\n        this.leaveTypes = response.data;\n      } catch {// ignore\n      }\n    },\n    getLeaveTypeColor(type) {\n      const leaveType = this.leaveTypes.find(lt => lt.value === type);\n      return leaveType?.color || '#6c757d';\n    },\n    canDeleteRequest(record) {\n      // ตรวจสอบว่าเป็นคำขอของตัวเองและยัง pending\n      const currentUserName = `${localStorage.getItem('soc_firstname')} ${localStorage.getItem('soc_lastname')}`.trim();\n      return record.employee_name === currentUserName && record.status === 'pending';\n    },\n    confirmDelete(record) {\n      this.$confirm.require({\n        message: `คุณต้องการลบคำขอลางานนี้หรือไม่?\\n\\nประเภท: ${this.getLeaveTypeLabel(record.leave_type)}\\nวันที่: ${this.formatDateTime(record.start_datetime)}`,\n        header: 'ยืนยันการลบ',\n        icon: 'pi pi-exclamation-triangle',\n        acceptClass: 'p-button-danger',\n        acceptLabel: 'ลบ',\n        rejectLabel: 'ยกเลิก',\n        accept: () => {\n          this.deleteRequest(record.id);\n        }\n      });\n    },\n    async deleteRequest(id) {\n      try {\n        await this.$http.delete(`/api/leave/${id}`, {\n          headers: {}\n        });\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: 'ลบคำขอลางานเรียบร้อยแล้ว',\n          life: 3000\n        });\n\n        // Emit event เพื่อ refresh ข้อมูล\n        this.$emit('request-deleted');\n      } catch (err) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'ลบไม่สำเร็จ',\n          detail: err.response?.data?.error || 'กรุณาลองใหม่อีกครั้ง',\n          life: 4000\n        });\n      }\n    },\n    showWorkDetails(workDetails) {\n      this.selectedWorkDetails = workDetails;\n      this.showWorkDetailsDialog = true;\n    },\n    showAttachments(attachments) {\n      this.selectedAttachments = attachments || [];\n      this.showAttachmentsDialog = true;\n    },\n    async downloadFile(fileName) {\n      try {\n        const response = await this.$http.get(`/api/files/download/${fileName}`, {\n          responseType: 'blob'\n        });\n\n        // Create download link\n        const url = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement('a');\n        link.href = url;\n        // Extract original filename (remove timestamp prefix)\n        const originalName = fileName.split('-').slice(2).join('-') || fileName;\n        link.download = originalName;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(url);\n        this.$toast.add({\n          severity: 'success',\n          summary: 'ดาวน์โหลดสำเร็จ',\n          detail: originalName,\n          life: 3000\n        });\n      } catch {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'ดาวน์โหลดไม่สำเร็จ',\n          detail: 'ไฟล์อาจถูกลบหรือไม่พร้อมใช้งาน',\n          life: 4000\n        });\n      }\n    },\n    isImageFile(fileName) {\n      const extension = fileName.split('.').pop()?.toLowerCase();\n      return ['jpg', 'jpeg', 'png', 'gif', 'webp', 'bmp'].includes(extension);\n    },\n    getFileUrl(fileName) {\n      const token = localStorage.getItem('soc_token');\n      return `/api/files/download/${fileName}?token=${token}`;\n    },\n    viewFullImage(fileName) {\n      this.fullImageUrl = this.getFileUrl(fileName);\n      this.fullImageDialog = true;\n    },\n    handleImageError(e) {\n      e.target.style.display = 'none';\n      e.target.nextElementSibling?.style?.removeProperty('display');\n    },\n    getFileIcon(fileName) {\n      const extension = fileName.split('.').pop()?.toLowerCase();\n      const icons = {\n        pdf: 'pi pi-file-pdf',\n        doc: 'pi pi-file-word',\n        docx: 'pi pi-file-word',\n        xls: 'pi pi-file-excel',\n        xlsx: 'pi pi-file-excel',\n        jpg: 'pi pi-image',\n        jpeg: 'pi pi-image',\n        png: 'pi pi-image',\n        gif: 'pi pi-image'\n      };\n      return icons[extension] || 'pi pi-file';\n    },\n    getFileType(fileName) {\n      const extension = fileName.split('.').pop()?.toLowerCase();\n      const types = {\n        pdf: 'PDF Document',\n        doc: 'Word Document',\n        docx: 'Word Document',\n        xls: 'Excel Spreadsheet',\n        xlsx: 'Excel Spreadsheet',\n        jpg: 'JPEG Image',\n        jpeg: 'JPEG Image',\n        png: 'PNG Image',\n        gif: 'GIF Image'\n      };\n      return types[extension] || 'Unknown File';\n    },\n    formatDate(date) {\n      if (!date) return '-';\n      return new Date(date).toLocaleDateString('th-TH', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        timeZone: 'Asia/Bangkok'\n      });\n    },\n    formatDateTime(datetime) {\n      if (!datetime) return '-';\n      const date = new Date(datetime);\n      return date.toLocaleString('th-TH', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n        timeZone: 'Asia/Bangkok'\n      });\n    },\n    calculateDays(startDateTime, endDateTime) {\n      if (!startDateTime || !endDateTime) return 0;\n      const start = new Date(startDateTime);\n      const end = new Date(endDateTime);\n      const diffMs = end - start;\n      const diffHours = diffMs / (1000 * 60 * 60);\n      return diffHours / 8;\n    },\n    getLeaveTypeLabel(type) {\n      const types = {\n        sick: 'ลาป่วย',\n        personal: 'ลากิจ',\n        vacation: 'ลาพักร้อน',\n        maternity: 'ลาคลอด',\n        other: 'ลาอื่นๆ'\n      };\n      return types[type] || type;\n    },\n    getStatusSeverity(status) {\n      const severities = {\n        'pending': 'warning',\n        'pending_level2': 'info',\n        'approved': 'success',\n        'rejected': 'danger',\n        'รอการอนุมัติ': 'warning',\n        'อนุมัติ': 'success',\n        'ไม่อนุมัติ': 'danger'\n      };\n      return severities[status] || 'secondary';\n    },\n    getStatusLabel(status) {\n      const labels = {\n        'pending': 'รอหัวหน้างานอนุมัติ',\n        'pending_level2': 'รอ HR อนุมัติ',\n        'approved': 'อนุมัติแล้ว',\n        'rejected': 'ไม่อนุมัติ'\n      };\n      return labels[status] || status;\n    },\n    viewAttachments(attachments) {\n      this.$emit('view-attachments', attachments);\n    },\n    showUserInfo(userName, userId) {\n      this.selectedUserName = userName;\n      this.selectedUserId = userId;\n      this.showUserInfoDialog = true;\n    },\n    showApproverInfo(approverInfo) {\n      // approved_by format: \"ชื่อ นามสกุล (ตำแหน่ง)\"\n      // แยกเอาแค่ชื่อออกมา\n      const approverName = approverInfo.split('(')[0].trim();\n      this.selectedUserName = approverName;\n      this.selectedUserId = null;\n      this.showUserInfoDialog = true;\n    },\n    showRejectReason(reason) {\n      this.selectedRejectReason = reason;\n      this.showRejectReasonDialog = true;\n    }\n  }\n};","map":{"version":3,"names":["axios","UserInfoDialog","EnhancedDataTable","name","components","emits","inject","props","records","Array","data","showWorkDetailsDialog","selectedWorkDetails","showAttachmentsDialog","selectedAttachments","fullImageDialog","fullImageUrl","leaveTypes","showUserInfoDialog","selectedUserName","selectedUserId","showRejectReasonDialog","selectedRejectReason","mounted","loadLeaveTypes","created","$http","methods","response","get","getLeaveTypeColor","type","leaveType","find","lt","value","color","canDeleteRequest","record","currentUserName","localStorage","getItem","trim","employee_name","status","confirmDelete","$confirm","require","message","getLeaveTypeLabel","leave_type","formatDateTime","start_datetime","header","icon","acceptClass","acceptLabel","rejectLabel","accept","deleteRequest","id","delete","headers","$toast","add","severity","summary","detail","life","$emit","err","error","showWorkDetails","workDetails","showAttachments","attachments","downloadFile","fileName","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","originalName","split","slice","join","download","body","appendChild","click","removeChild","revokeObjectURL","isImageFile","extension","pop","toLowerCase","includes","getFileUrl","token","viewFullImage","handleImageError","e","target","style","display","nextElementSibling","removeProperty","getFileIcon","icons","pdf","doc","docx","xls","xlsx","jpg","jpeg","png","gif","getFileType","types","formatDate","date","Date","toLocaleDateString","year","month","day","timeZone","datetime","toLocaleString","hour","minute","calculateDays","startDateTime","endDateTime","start","end","diffMs","diffHours","sick","personal","vacation","maternity","other","getStatusSeverity","severities","getStatusLabel","labels","viewAttachments","showUserInfo","userName","userId","showApproverInfo","approverInfo","approverName","showRejectReason","reason"],"sources":["D:\\frontend_cem\\src\\views\\leave_work\\LeaveHistory.vue"],"sourcesContent":["<template>\n  <Card class=\"history-card\">\n    <template #content>\n      <div v-if=\"records.length === 0\" class=\"empty-state\">\n        <i class=\"pi pi-calendar-times\" style=\"font-size: 4rem; color: #ccc;\"></i>\n        <p>ยังไม่มีข้อมูลการลางาน</p>\n      </div>\n\n      <EnhancedDataTable v-else :data=\"records\"  :paginator=\"true\" :rows=\"10\" \n        :rowsPerPageOptions=\"[5, 10, 20]\" responsiveLayout=\"scroll\" class=\"history-table\" stripedRows>\n\n        <Column field=\"id\" header=\"รหัสคำขอ\" :sortable=\"true\">\n          <template #body=\"slotProps\">\n            <Badge :value=\"`#${slotProps.data.id}`\" class=\"custom-id-badge\" />\n          </template>\n        </Column>\n\n        <Column field=\"user_name\" header=\"ชื่อ-นามสกุล\" :sortable=\"true\">\n          <template #body=\"slotProps\">\n            <span class=\"clickable-name\" @click=\"showUserInfo(slotProps.data.user_name, slotProps.data.user_id)\">\n              {{ slotProps.data.user_name }}\n            </span>\n          </template>\n        </Column>\n        <Column field=\"employee_position\" header=\"ตำแหน่ง\" :sortable=\"true\" />\n\n        <Column field=\"leave_type\" header=\"ประเภทการลา\" :sortable=\"true\">\n          <template #body=\"slotProps\">\n            <Badge :value=\"getLeaveTypeLabel(slotProps.data.leave_type)\"\n              :style=\"{ backgroundColor: getLeaveTypeColor(slotProps.data.leave_type), color: '#fff', fontWeight: 'bold' }\" />\n          </template>\n        </Column>\n\n        <Column header=\"วันเวลาเริ่มลา\" :sortable=\"true\">\n          <template #body=\"slotProps\">\n            {{ formatDateTime(slotProps.data.start_datetime) }}\n          </template>\n        </Column>\n\n        <Column header=\"วันเวลาสิ้นสุด\" :sortable=\"true\">\n          <template #body=\"slotProps\">\n            {{ formatDateTime(slotProps.data.end_datetime) }}\n          </template>\n        </Column>\n\n        <Column header=\"จำนวน\" :sortable=\"true\">\n          <template #body=\"slotProps\">\n            {{ slotProps.data.total_days }} วัน ({{ (slotProps.data.total_days * 8).toFixed(1) }} ชม.)\n          </template>\n        </Column>\n\n        <Column header=\"ผู้รับผิดชอบแทน\" style=\"min-width: 200px;\">\n          <template #body=\"slotProps\">\n            <div v-if=\"slotProps.data.has_delegation\" class=\"delegate-info\">\n              <div class=\"delegate-name\">\n                <i class=\"pi pi-user\"></i>\n                <strong>{{ slotProps.data.delegate_name || 'ไม่ระบุ' }}</strong>\n              </div>\n              <div class=\"delegate-position\">\n                <i class=\"pi pi-briefcase\"></i>\n                <small>{{ slotProps.data.delegate_position || 'ไม่ระบุตำแหน่ง' }}</small>\n              </div>\n              <div class=\"delegate-department\">\n                <i class=\"pi pi-building\"></i>\n                <small>{{ slotProps.data.delegate_department || 'ไม่ระบุแผนก' }}</small>\n              </div>\n              <div class=\"delegate-contact\">\n                <i class=\"pi pi-phone\"></i>\n                <small class=\"contact-info\">{{ slotProps.data.delegate_contact || 'ไม่ระบุ' }}</small>\n              </div>\n              <div v-if=\"slotProps.data.work_details\" class=\"work-details-btn\">\n                <Button icon=\"pi pi-list\" label=\"ดูรายละเอียดงาน\" size=\"small\" severity=\"info\" outlined\n                  @click=\"showWorkDetails(slotProps.data.work_details)\" />\n              </div>\n            </div>\n            <span v-else class=\"no-delegation\">\n              <i class=\"pi pi-times-circle\"></i>\n              ไม่มีการมอบหมายงาน\n            </span>\n          </template>\n        </Column>\n\n        <Column field=\"reason\" header=\"เหตุผล\" style=\"min-width: 160px; width: 160px;\">\n          <template #body=\"slotProps\">\n            <span class=\"reason-text-wrap\">{{ slotProps.data.reason }}</span>\n          </template>\n        </Column>\n\n        <Column header=\"เอกสารแนบ\" style=\"width: 80px;\">\n          <template #body=\"slotProps\">\n            <div v-if=\"slotProps.data.attachments && slotProps.data.attachments.length > 0\" class=\"attachments-info\">\n              <Button icon=\"pi pi-paperclip\" size=\"small\" severity=\"info\" outlined\n                @click=\"showAttachments(slotProps.data.attachments)\"\n                v-tooltip=\"`${slotProps.data.attachments.length} ไฟล์`\" />\n            </div>\n            <span v-else>-</span>\n          </template>\n        </Column>\n\n        <Column header=\"สถานะ\" style=\"min-width: 180px;\">\n          <template #body=\"slotProps\">\n            <div class=\"status-container\">\n              <Badge :value=\"getStatusLabel(slotProps.data.status)\"\n                :severity=\"getStatusSeverity(slotProps.data.status)\" \n                class=\"status-badge-large\" />\n              <Button v-if=\"canDeleteRequest(slotProps.data)\" \n                icon=\"pi pi-trash\" \n                size=\"small\" \n                severity=\"danger\" \n                text\n                @click=\"confirmDelete(slotProps.data)\" \n                v-tooltip=\"'ลบคำขอ'\" \n                class=\"delete-btn\" />\n            </div>\n          </template>\n        </Column>\n\n        <Column header=\"ผู้อนุมัติ\" style=\"min-width: 280px;\">\n          <template #body=\"slotProps\">\n            <div class=\"approver-container\">\n              <!-- Step 1: หัวหน้างาน -->\n              <div class=\"approver-item\" :class=\"{ \n                'approved': slotProps.data.approved_by_level1,\n                'rejected': slotProps.data.status === 'rejected' && slotProps.data.rejected_level === 1\n              }\">\n                <div class=\"approver-badge-wrapper\">\n                  <i v-if=\"slotProps.data.approved_by_level1\" class=\"pi pi-check-circle\" style=\"color: #10b981;\"></i>\n                  <i v-else-if=\"slotProps.data.status === 'rejected' && slotProps.data.rejected_level === 1\" class=\"pi pi-times-circle\" style=\"color: #ef4444;\"></i>\n                  <i v-else class=\"pi pi-clock\" style=\"color: #94a3b8;\"></i>\n                  <Badge value=\"หัวหน้างาน\" :severity=\"slotProps.data.approved_by_level1 ? 'info' : (slotProps.data.status === 'rejected' && slotProps.data.rejected_level === 1 ? 'danger' : 'secondary')\" />\n                </div>\n                <span v-if=\"slotProps.data.approved_by_level1\" class=\"approver-text clickable-name\" @click=\"showUserInfo(slotProps.data.approved_by_level1, slotProps.data.approved_by_level1_id)\">\n                  {{ slotProps.data.approved_by_level1 }}\n                </span>\n                <span v-else-if=\"slotProps.data.status === 'rejected' && slotProps.data.rejected_level === 1\" class=\"approver-text rejected-text clickable-name\" @click=\"showApproverInfo(slotProps.data.rejected_by)\">\n                  {{ slotProps.data.rejected_by }}\n                  <Button v-if=\"slotProps.data.reject_reason\" icon=\"pi pi-info-circle\" severity=\"danger\" text size=\"small\" @click.stop=\"showRejectReason(slotProps.data.reject_reason)\" v-tooltip=\"'ดูเหตุผล'\" />\n                </span>\n                <span v-else class=\"approver-text pending-text\">รอดำเนินการ</span>\n              </div>\n\n              <!-- Step 2: HR (ไม่แสดงถ้าถูกปฏิเสธตั้งแต่ step 1) -->\n              <div v-if=\"!(slotProps.data.status === 'rejected' && slotProps.data.rejected_level === 1)\" class=\"approver-item\" :class=\"{ \n                'approved': slotProps.data.approved_by_level2,\n                'rejected': slotProps.data.status === 'rejected' && slotProps.data.rejected_level === 2,\n                'disabled': !slotProps.data.approved_by_level1 && !(slotProps.data.status === 'rejected' && slotProps.data.rejected_level === 2)\n              }\">\n                <div class=\"approver-badge-wrapper\">\n                  <i v-if=\"slotProps.data.approved_by_level2\" class=\"pi pi-check-circle\" style=\"color: #10b981;\"></i>\n                  <i v-else-if=\"slotProps.data.status === 'rejected' && slotProps.data.rejected_level === 2\" class=\"pi pi-times-circle\" style=\"color: #ef4444;\"></i>\n                  <i v-else class=\"pi pi-clock\" style=\"color: #94a3b8;\"></i>\n                  <Badge value=\"HR\" :severity=\"slotProps.data.approved_by_level2 ? 'success' : (slotProps.data.status === 'rejected' && slotProps.data.rejected_level === 2 ? 'danger' : 'secondary')\" />\n                </div>\n                <span v-if=\"slotProps.data.approved_by_level2\" class=\"approver-text clickable-name\" @click=\"showUserInfo(slotProps.data.approved_by_level2, slotProps.data.approved_by_level2_id)\">\n                  {{ slotProps.data.approved_by_level2 }}\n                </span>\n                <span v-else-if=\"slotProps.data.status === 'rejected' && slotProps.data.rejected_level === 2\" class=\"approver-text rejected-text clickable-name\" @click=\"showApproverInfo(slotProps.data.rejected_by)\">\n                  {{ slotProps.data.rejected_by }}\n                  <Button v-if=\"slotProps.data.reject_reason\" icon=\"pi pi-info-circle\" severity=\"danger\" text size=\"small\" @click.stop=\"showRejectReason(slotProps.data.reject_reason)\" v-tooltip=\"'ดูเหตุผล'\" />\n                </span>\n                <span v-else class=\"approver-text pending-text\">รอดำเนินการ</span>\n              </div>\n            </div>\n          </template>\n        </Column>\n\n        <Column header=\"วันที่ส่งคำขอ\" :sortable=\"true\">\n          <template #body=\"slotProps\">\n            {{ formatDateTime(slotProps.data.created_at) }}\n          </template>\n        </Column>\n      </EnhancedDataTable>\n    </template>\n  </Card>\n\n  <!-- Work Details Dialog -->\n  <Dialog v-model:visible=\"showWorkDetailsDialog\" modal header=\"รายละเอียดงานที่มอบหมาย\" :style=\"{ width: '90vw', maxWidth: '800px' }\" :draggable=\"false\">\n    <div class=\"work-details-content\">\n      <p>{{ selectedWorkDetails }}</p>\n    </div>\n    <template #footer>\n      <Button label=\"ปิด\" icon=\"pi pi-times\" @click=\"showWorkDetailsDialog = false\" />\n    </template>\n  </Dialog>\n\n  <!-- Attachments Dialog -->\n  <Dialog v-model:visible=\"showAttachmentsDialog\" modal header=\"เอกสารแนบ\" :style=\"{ width: '90vw', maxWidth: '900px' }\" :draggable=\"false\">\n    <div class=\"attachments-content\">\n      <div v-if=\"selectedAttachments.length === 0\" class=\"no-attachments\">\n        <i class=\"pi pi-file\" style=\"font-size: 3rem; color: #ccc;\"></i>\n        <p>ไม่มีเอกสารแนบ</p>\n      </div>\n      <div v-else class=\"attachments-list\">\n        <div v-for=\"(file, index) in selectedAttachments\" :key=\"index\" class=\"attachment-item\">\n          <div class=\"file-info\">\n            <img v-if=\"isImageFile(file)\" :src=\"getFileUrl(file)\" class=\"file-preview\" @click=\"viewFullImage(file)\" />\n            <i v-else :class=\"getFileIcon(file)\" class=\"file-icon\"></i>\n            <div class=\"file-details\">\n              <span class=\"file-name\">{{ file }}</span>\n              <small class=\"file-type\">{{ getFileType(file) }}</small>\n            </div>\n          </div>\n          <div class=\"file-actions\">\n            <Button icon=\"pi pi-download\" size=\"small\" severity=\"success\" outlined @click=\"downloadFile(file)\"\n              v-tooltip=\"'ดาวน์โหลด'\" />\n          </div>\n        </div>\n      </div>\n    </div>\n    <template #footer>\n      <Button label=\"ปิด\" icon=\"pi pi-times\" @click=\"showAttachmentsDialog = false\" />\n    </template>\n  </Dialog>\n\n  <!-- Full Image Dialog -->\n  <Dialog v-model:visible=\"fullImageDialog\" modal header=\"รูปภาพ\" :style=\"{ width: '90vw', maxWidth: '900px' }\" :draggable=\"false\">\n    <img :src=\"fullImageUrl\" class=\"full-image\" />\n  </Dialog>\n\n  <!-- User Info Dialog -->\n  <UserInfoDialog \n    v-model:visible=\"showUserInfoDialog\" \n    :user-name=\"selectedUserName\"\n    :user-id=\"selectedUserId\"\n  />\n\n  <!-- Reject Reason Dialog -->\n  <Dialog v-model:visible=\"showRejectReasonDialog\" modal header=\"เหตุผลที่ไม่อนุมัติ\" :style=\"{ width: '400px' }\" :draggable=\"false\">\n    <div class=\"reject-reason-content\">\n      <i class=\"pi pi-info-circle\"></i>\n      <p>{{ selectedRejectReason }}</p>\n    </div>\n  </Dialog>\n</template>\n\n<script>\nimport axios from '@/utils/axiosConfig'\nimport UserInfoDialog from '@/components/UserInfoDialog.vue'\nimport EnhancedDataTable from '@/components/EnhancedDataTable.vue'\n\nexport default {\n  name: 'LeaveHistory',\n  components: {\n    UserInfoDialog,\n    EnhancedDataTable\n  },\n  emits: ['view-attachments', 'request-deleted'],\n  inject: ['$confirm', '$toast'],\n  props: {\n    records: Array\n  },\n  data() {\n    return {\n      showWorkDetailsDialog: false,\n      selectedWorkDetails: '',\n      showAttachmentsDialog: false,\n      selectedAttachments: [],\n      fullImageDialog: false,\n      fullImageUrl: '',\n      leaveTypes: [],\n      showUserInfoDialog: false,\n      selectedUserName: '',\n      selectedUserId: null,\n      showRejectReasonDialog: false,\n      selectedRejectReason: ''\n    }\n  },\n  async mounted() {\n    await this.loadLeaveTypes()\n  },\n  created() {\n    this.$http = axios\n  },\n  methods: {\n    async loadLeaveTypes() {\n      try {\n        const response = await this.$http.get('/api/leave/leave-types')\n        this.leaveTypes = response.data\n      } catch { // ignore\n        \n      }\n    },\n    getLeaveTypeColor(type) {\n      const leaveType = this.leaveTypes.find(lt => lt.value === type)\n      return leaveType?.color || '#6c757d'\n    },\n    canDeleteRequest(record) {\n      // ตรวจสอบว่าเป็นคำขอของตัวเองและยัง pending\n      const currentUserName = `${localStorage.getItem('soc_firstname')} ${localStorage.getItem('soc_lastname')}`.trim()\n      return record.employee_name === currentUserName && record.status === 'pending'\n    },\n\n    confirmDelete(record) {\n      this.$confirm.require({\n        message: `คุณต้องการลบคำขอลางานนี้หรือไม่?\\n\\nประเภท: ${this.getLeaveTypeLabel(record.leave_type)}\\nวันที่: ${this.formatDateTime(record.start_datetime)}`,\n        header: 'ยืนยันการลบ',\n        icon: 'pi pi-exclamation-triangle',\n        acceptClass: 'p-button-danger',\n        acceptLabel: 'ลบ',\n        rejectLabel: 'ยกเลิก',\n        accept: () => {\n          this.deleteRequest(record.id)\n        }\n      })\n    },\n\n    async deleteRequest(id) {\n      try {\n        await this.$http.delete(`/api/leave/${id}`, {\n          headers: {\n          }\n        })\n\n        this.$toast.add({\n          severity: 'success',\n          summary: 'สำเร็จ',\n          detail: 'ลบคำขอลางานเรียบร้อยแล้ว',\n          life: 3000\n        })\n\n        // Emit event เพื่อ refresh ข้อมูล\n        this.$emit('request-deleted')\n\n      } catch (err) {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'ลบไม่สำเร็จ',\n          detail: err.response?.data?.error || 'กรุณาลองใหม่อีกครั้ง',\n          life: 4000\n        })\n      }\n    },\n\n    showWorkDetails(workDetails) {\n      this.selectedWorkDetails = workDetails\n      this.showWorkDetailsDialog = true\n    },\n\n    showAttachments(attachments) {\n      this.selectedAttachments = attachments || []\n      this.showAttachmentsDialog = true\n    },\n\n    async downloadFile(fileName) {\n      try {\n        const response = await this.$http.get(`/api/files/download/${fileName}`, {\n          responseType: 'blob'\n        })\n        \n        // Create download link\n        const url = window.URL.createObjectURL(new Blob([response.data]))\n        const link = document.createElement('a')\n        link.href = url\n        // Extract original filename (remove timestamp prefix)\n        const originalName = fileName.split('-').slice(2).join('-') || fileName\n        link.download = originalName\n        document.body.appendChild(link)\n        link.click()\n        document.body.removeChild(link)\n        window.URL.revokeObjectURL(url)\n\n        this.$toast.add({\n          severity: 'success',\n          summary: 'ดาวน์โหลดสำเร็จ',\n          detail: originalName,\n          life: 3000\n        })\n      } catch {\n        this.$toast.add({\n          severity: 'error',\n          summary: 'ดาวน์โหลดไม่สำเร็จ',\n          detail: 'ไฟล์อาจถูกลบหรือไม่พร้อมใช้งาน',\n          life: 4000\n        })\n      }\n    },\n\n    isImageFile(fileName) {\n      const extension = fileName.split('.').pop()?.toLowerCase()\n      return ['jpg', 'jpeg', 'png', 'gif', 'webp', 'bmp'].includes(extension)\n    },\n\n    getFileUrl(fileName) {\n      const token = localStorage.getItem('soc_token')\n      return `/api/files/download/${fileName}?token=${token}`\n    },\n\n    viewFullImage(fileName) {\n      this.fullImageUrl = this.getFileUrl(fileName)\n      this.fullImageDialog = true\n    },\n\n    handleImageError(e) {\n      e.target.style.display = 'none'\n      e.target.nextElementSibling?.style?.removeProperty('display')\n    },\n\n    getFileIcon(fileName) {\n      const extension = fileName.split('.').pop()?.toLowerCase()\n      const icons = {\n        pdf: 'pi pi-file-pdf',\n        doc: 'pi pi-file-word',\n        docx: 'pi pi-file-word',\n        xls: 'pi pi-file-excel',\n        xlsx: 'pi pi-file-excel',\n        jpg: 'pi pi-image',\n        jpeg: 'pi pi-image',\n        png: 'pi pi-image',\n        gif: 'pi pi-image'\n      }\n      return icons[extension] || 'pi pi-file'\n    },\n\n    getFileType(fileName) {\n      const extension = fileName.split('.').pop()?.toLowerCase()\n      const types = {\n        pdf: 'PDF Document',\n        doc: 'Word Document',\n        docx: 'Word Document',\n        xls: 'Excel Spreadsheet',\n        xlsx: 'Excel Spreadsheet',\n        jpg: 'JPEG Image',\n        jpeg: 'JPEG Image',\n        png: 'PNG Image',\n        gif: 'GIF Image'\n      }\n      return types[extension] || 'Unknown File'\n    },\n    formatDate(date) {\n      if (!date) return '-'\n      return new Date(date).toLocaleDateString('th-TH', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        timeZone: 'Asia/Bangkok'\n      })\n    },\n    formatDateTime(datetime) {\n      if (!datetime) return '-'\n      const date = new Date(datetime)\n      return date.toLocaleString('th-TH', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n        timeZone: 'Asia/Bangkok'\n      })\n    },\n    calculateDays(startDateTime, endDateTime) {\n      if (!startDateTime || !endDateTime) return 0\n      const start = new Date(startDateTime)\n      const end = new Date(endDateTime)\n      const diffMs = end - start\n      const diffHours = diffMs / (1000 * 60 * 60)\n      return diffHours / 8\n    },\n    getLeaveTypeLabel(type) {\n      const types = {\n        sick: 'ลาป่วย',\n        personal: 'ลากิจ',\n        vacation: 'ลาพักร้อน',\n        maternity: 'ลาคลอด',\n        other: 'ลาอื่นๆ'\n      }\n      return types[type] || type\n    },\n    getStatusSeverity(status) {\n      const severities = {\n        'pending': 'warning',\n        'pending_level2': 'info',\n        'approved': 'success',\n        'rejected': 'danger',\n        'รอการอนุมัติ': 'warning',\n        'อนุมัติ': 'success',\n        'ไม่อนุมัติ': 'danger'\n      }\n      return severities[status] || 'secondary'\n    },\n\n    getStatusLabel(status) {\n      const labels = {\n        'pending': 'รอหัวหน้างานอนุมัติ',\n        'pending_level2': 'รอ HR อนุมัติ',\n        'approved': 'อนุมัติแล้ว',\n        'rejected': 'ไม่อนุมัติ'\n      }\n      return labels[status] || status\n    },\n    viewAttachments(attachments) {\n      this.$emit('view-attachments', attachments)\n    },\n\n    showUserInfo(userName, userId) {\n      this.selectedUserName = userName\n      this.selectedUserId = userId\n      this.showUserInfoDialog = true\n    },\n\n    showApproverInfo(approverInfo) {\n      // approved_by format: \"ชื่อ นามสกุล (ตำแหน่ง)\"\n      // แยกเอาแค่ชื่อออกมา\n      const approverName = approverInfo.split('(')[0].trim()\n      this.selectedUserName = approverName\n      this.selectedUserId = null\n      this.showUserInfoDialog = true\n    },\n\n    showRejectReason(reason) {\n      this.selectedRejectReason = reason\n      this.showRejectReasonDialog = true\n    }\n  }\n}\n</script>\n\n<style scoped>\n.history-card {\n  width: 100%;\n  margin: 0;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  border: 1px solid #e9ecef;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 4rem 2rem;\n  color: #6c757d;\n  background: #f8f9fa;\n  border-radius: 8px;\n  margin: 1rem;\n}\n\n.empty-state p {\n  margin-top: 1rem;\n  font-size: 1.1rem;\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n}\n\n.history-table :deep(.p-datatable) {\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n}\n\n.history-table :deep(.p-datatable-thead > tr > th) {\n  background: #f8f9fa;\n  color: #495057;\n  font-weight: 600;\n  border-bottom: 2px solid #e9ecef;\n  padding: 1rem 0.75rem;\n  font-size: 0.9rem;\n}\n\n.history-table :deep(.p-datatable-tbody > tr > td) {\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #f1f3f4;\n  vertical-align: middle;\n  text-align: center;\n}\n\n.history-table :deep(.p-datatable-tbody > tr:hover) {\n  background: #f8f9fa;\n}\n\n.history-table :deep(.p-badge) {\n  font-weight: 500;\n  padding: 0.5rem 0.75rem;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 2.5rem;\n  white-space: normal;\n  text-align: center;\n  line-height: 1.2;\n}\n\n.reason-text {\n  max-width: 200px;\n  display: inline-block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.reason-text-wrap {\n  width: 100%;\n  display: block;\n  word-wrap: break-word;\n  white-space: normal;\n  line-height: 1.4;\n  text-align: left;\n}\n\n.delegate-info {\n  text-align: left;\n  padding: 0.5rem;\n  background: #f8f9fa;\n  border-radius: 8px;\n  border-left: 4px solid #28a745;\n}\n\n.delegate-info>div {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n\n.delegate-info>div:last-child {\n  margin-bottom: 0;\n}\n\n.delegate-info i {\n  color: #6c757d;\n  width: 16px;\n  text-align: center;\n}\n\n.delegate-name strong {\n  color: #495057;\n  font-size: 0.95rem;\n}\n\n.delegate-role small {\n  color: #6c757d;\n  font-weight: 500;\n}\n\n.delegate-contact .contact-info {\n  color: #28a745 !important;\n  font-weight: 500;\n}\n\n.work-details-btn {\n  margin-top: 0.5rem;\n}\n\n.work-details-btn .p-button {\n  font-size: 0.75rem;\n  padding: 0.25rem 0.5rem;\n}\n\n.work-details-content {\n  padding: 1rem;\n  background: #f8f9fa;\n  border-radius: 8px;\n  border-left: 4px solid #17a2b8;\n  line-height: 1.6;\n  font-size: 0.95rem;\n}\n\n.attachments-content {\n  padding: 1rem;\n}\n\n.no-attachments {\n  text-align: center;\n  padding: 2rem;\n  color: #6c757d;\n}\n\n.attachments-list {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.attachment-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8f9fa;\n  border-radius: 8px;\n  border: 1px solid #e9ecef;\n}\n\n.file-info {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.file-preview {\n  width: 60px;\n  height: 60px;\n  object-fit: contain;\n  border-radius: 6px;\n  border: 1px solid #e9ecef;\n  cursor: pointer;\n}\n\n.file-preview:hover {\n  opacity: 0.8;\n}\n\n.full-image {\n  width: 100%;\n  max-height: 80vh;\n  object-fit: contain;\n}\n\n.file-icon {\n  font-size: 2rem;\n  color: #6c757d;\n}\n\n.file-details {\n  display: flex;\n  flex-direction: column;\n}\n\n.file-name {\n  font-weight: 600;\n  color: #495057;\n}\n\n.file-type {\n  color: #6c757d;\n  font-size: 0.85rem;\n}\n\n.file-actions {\n  display: flex;\n  gap: 0.5rem;\n}\n\n.approver-info {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: #28a745;\n  font-weight: 500;\n}\n\n.approver-info i {\n  color: #28a745;\n}\n\n.no-approver {\n  color: #6c757d;\n  font-style: italic;\n}\n\n.no-delegation {\n  color: #6c757d;\n  font-style: italic;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.attachments-info {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: #495057;\n  font-size: 0.9rem;\n}\n\n.attachments-info i {\n  color: #6c757d;\n}\n\n.view-icon {\n  font-size: 1.2rem;\n  color: #28a745;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.view-icon:hover {\n  color: #20c997;\n  transform: scale(1.1);\n}\n\n.custom-id-badge :deep(.p-badge) {\n  background: #87CEEB !important;\n  color: #2c3e50 !important;\n  font-weight: 600 !important;\n  border-radius: 20px !important;\n  padding: 0.5rem 0.75rem !important;\n  font-size: 0.875rem !important;\n}\n\n.clickable-name {\n  color: #4A90E2;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.clickable-name:hover {\n  color: #2563eb;\n  text-decoration: underline;\n}\n\n.no-delegation {\n  color: #6c757d;\n  font-style: italic;\n}\n\n.approver-info {\n  text-align: left;\n}\n\n.approver-info strong {\n  color: #495057;\n}\n\n.approval-comment {\n  margin-top: 0.5rem;\n  padding: 0.5rem;\n  background: #f8f9fa;\n  border-radius: 8px;\n  border-left: 3px solid #28a745;\n}\n\n.approval-comment small {\n  color: #495057;\n  line-height: 1.4;\n}\n\n@media (max-width: 768px) {\n  .history-table :deep(.p-datatable-tbody > tr > td) {\n    padding: 0.75rem 0.5rem;\n    font-size: 0.9rem;\n  }\n\n  .reason-text {\n    max-width: 150px;\n  }\n\n  .delegate-info {\n    font-size: 0.85rem;\n  }\n\n  .history-table :deep(.p-datatable-thead > tr > th) {\n    padding: 0.75rem 0.5rem;\n    font-size: 0.85rem;\n  }\n\n  .history-table :deep(.p-badge) {\n    padding: 0.4rem 0.6rem;\n    font-size: 0.8rem;\n  }\n\n  .empty-state {\n    padding: 3rem 1rem;\n  }\n\n  .empty-state p {\n    font-size: 1rem;\n  }\n\n  .approver-info {\n    font-size: 0.85rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .history-card {\n    margin: 0;\n    border-radius: 8px;\n  }\n\n  .history-table :deep(.p-datatable) {\n    font-size: 0.8rem;\n  }\n\n  .history-table :deep(.p-datatable-wrapper) {\n    overflow-x: auto;\n  }\n\n  .history-table :deep(.p-datatable-tbody > tr > td) {\n    padding: 0.5rem 0.25rem;\n    font-size: 0.8rem;\n    min-width: 100px;\n  }\n\n  .history-table :deep(.p-datatable-thead > tr > th) {\n    padding: 0.5rem 0.25rem;\n    font-size: 0.75rem;\n    min-width: 100px;\n  }\n\n  .reason-text {\n    max-width: 100px;\n  }\n\n  .delegate-info {\n    font-size: 0.75rem;\n    padding: 0.25rem;\n  }\n\n  .history-table :deep(.p-badge) {\n    padding: 0.3rem 0.5rem;\n    font-size: 0.7rem;\n  }\n\n  .empty-state {\n    padding: 2rem 0.5rem;\n  }\n\n  .empty-state i {\n    font-size: 3rem !important;\n  }\n\n  .empty-state p {\n    font-size: 0.9rem;\n  }\n\n  .approver-info {\n    font-size: 0.75rem;\n  }\n\n  .history-table :deep(.p-paginator) {\n    padding: 0.5rem;\n    flex-wrap: wrap;\n  }\n\n  .history-table :deep(.p-paginator .p-paginator-pages .p-paginator-page) {\n    min-width: 2rem;\n    height: 2rem;\n    font-size: 0.8rem;\n  }\n}\n.status-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.75rem;\n}\n\n.status-badge-large {\n  font-size: 0.9rem !important;\n  padding: 0.5rem 1rem !important;\n  font-weight: 600 !important;\n  border-radius: 20px !important;\n}\n\n.delete-btn {\n  width: 2rem !important;\n  height: 2rem !important;\n  padding: 0 !important;\n}\n\n.delete-btn .p-button-icon {\n  font-size: 0.9rem;\n}\n\n.approver-container {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.approver-item {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.5rem;\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  border-radius: 8px;\n  border-left: 3px solid #94a3b8;\n}\n\n.approver-item.approved {\n  border-left-color: #10b981;\n}\n\n.approver-item.rejected {\n  border-left-color: #ef4444;\n  background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);\n}\n\n.approver-badge-wrapper {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n}\n\n.approver-badge-wrapper i {\n  color: #10b981;\n  font-size: 1rem;\n}\n\n.approver-badge-wrapper .p-badge {\n  font-size: 0.75rem !important;\n  padding: 0.3rem 0.6rem !important;\n  font-weight: 600 !important;\n}\n\n.approver-text {\n  font-size: 0.9rem;\n  color: #1e293b;\n  font-weight: 500;\n}\n\n.no-approver {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: #94a3b8;\n  font-size: 0.85rem;\n  font-style: italic;\n  padding: 0.5rem;\n}\n\n.no-approver i {\n  font-size: 1rem;\n}\n\n.approver-name {\n  font-size: 0.85rem;\n  color: #495057;\n}\n\n.no-approver {\n  color: #adb5bd;\n}\n\n.approver-item.disabled {\n  opacity: 0.5;\n}\n\n.rejected-text {\n  color: #ef4444;\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n}\n\n.pending-text {\n  color: #94a3b8;\n  font-style: italic;\n}\n\n.reject-reason-content {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n  padding: 1rem;\n  background: #fef2f2;\n  border-radius: 8px;\n  border-left: 3px solid #ef4444;\n}\n\n.reject-reason-content i {\n  color: #ef4444;\n  font-size: 1.25rem;\n  margin-top: 2px;\n}\n\n.reject-reason-content p {\n  margin: 0;\n  color: #991b1b;\n  line-height: 1.5;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}