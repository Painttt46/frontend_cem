{"ast":null,"code":"import axios from '@/utils/axiosConfig';\nexport default {\n  name: 'UserInfoDialog',\n  props: {\n    visible: Boolean,\n    userName: String,\n    userId: Number\n  },\n  emits: ['update:visible'],\n  mounted() {\n    if (this.visible && (this.userId || this.userName)) {\n      this.loadUserInfo();\n    }\n  },\n  data() {\n    return {\n      user: null,\n      loading: false\n    };\n  },\n  watch: {\n    visible(newVal) {\n      if (newVal) {\n        this.loadUserInfo();\n      }\n    }\n  },\n  methods: {\n    async loadUserInfo() {\n      if (!this.userName && !this.userId) return;\n      this.loading = true;\n      this.user = null;\n      try {\n        const response = await axios.get('/api/users');\n        if (this.userId) {\n          this.user = response.data.find(u => u.id === this.userId);\n        } else {\n          const fullName = this.userName.trim();\n          this.user = response.data.find(u => {\n            const userName = `${u.firstname} ${u.lastname}`.trim();\n            return userName === fullName;\n          });\n        }\n      } catch (error) {\n        console.error('Error loading user info:', error);\n      } finally {\n        this.loading = false;\n      }\n    },\n    getRoleLabel(role) {\n      const roles = {\n        'admin': 'ผู้ดูแลระบบ',\n        'manager': 'ผู้จัดการ',\n        'hr': 'ฝ่ายบุคคล',\n        'user': 'ผู้ใช้งาน'\n      };\n      return roles[role?.toLowerCase()] || role;\n    },\n    getRoleSeverity(role) {\n      const severities = {\n        'admin': 'danger',\n        'manager': 'warning',\n        'hr': 'info',\n        'user': 'success'\n      };\n      return severities[role?.toLowerCase()] || 'secondary';\n    }\n  }\n};","map":{"version":3,"names":["axios","name","props","visible","Boolean","userName","String","userId","Number","emits","mounted","loadUserInfo","data","user","loading","watch","newVal","methods","response","get","find","u","id","fullName","trim","firstname","lastname","error","console","getRoleLabel","role","roles","toLowerCase","getRoleSeverity","severities"],"sources":["D:\\frontend_cem\\src\\components\\UserInfoDialog.vue"],"sourcesContent":["<template>\r\n  <Dialog :visible=\"visible\" modal header=\"ข้อมูลผู้ใช้\" :style=\"{ width: '400px', maxWidth: '95vw' }\" position=\"center\" :draggable=\"false\" @update:visible=\"$emit('update:visible', $event)\">\r\n    <div v-if=\"loading\" class=\"loading-state\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2rem\"></i>\r\n      <p>กำลังโหลดข้อมูล...</p>\r\n    </div>\r\n\r\n    <div v-else-if=\"user\" class=\"user-info-content\">\r\n      <div class=\"user-header\">\r\n        <div class=\"user-avatar\">\r\n          <i class=\"pi pi-user\"></i>\r\n        </div>\r\n        <div class=\"user-title\">\r\n          <h3>{{ user.firstname }} {{ user.lastname }}</h3>\r\n          <Badge :value=\"getRoleLabel(user.role)\" :severity=\"getRoleSeverity(user.role)\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"user-details\">\r\n        <div class=\"detail-row\">\r\n          <span class=\"detail-label\"><i class=\"pi pi-id-card\"></i> รหัสพนักงาน</span>\r\n          <span class=\"detail-value\">{{ user.employee_id || '-' }}</span>\r\n        </div>\r\n\r\n        <div class=\"detail-row\">\r\n          <span class=\"detail-label\"><i class=\"pi pi-envelope\"></i> Email</span>\r\n          <span class=\"detail-value\">{{ user.email || '-' }}</span>\r\n        </div>\r\n\r\n        <div class=\"detail-row\">\r\n          <span class=\"detail-label\"><i class=\"pi pi-phone\"></i> เบอร์โทร</span>\r\n          <span class=\"detail-value\">{{ user.phone || '-' }}</span>\r\n        </div>\r\n\r\n        <div class=\"detail-row\">\r\n          <span class=\"detail-label\"><i class=\"pi pi-briefcase\"></i> ตำแหน่ง</span>\r\n          <span class=\"detail-value\">{{ user.position || '-' }}</span>\r\n        </div>\r\n\r\n        <div class=\"detail-row\">\r\n          <span class=\"detail-label\"><i class=\"pi pi-building\"></i> แผนก</span>\r\n          <span class=\"detail-value\">{{ user.department || '-' }}</span>\r\n        </div>\r\n\r\n        <div class=\"detail-row\">\r\n          <span class=\"detail-label\"><i class=\"pi pi-circle-fill\"></i> สถานะ</span>\r\n          <Badge :value=\"user.is_active ? 'ใช้งาน' : 'ปิดใช้งาน'\" :severity=\"user.is_active ? 'success' : 'danger'\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-else class=\"error-state\">\r\n      <i class=\"pi pi-exclamation-triangle\" style=\"font-size: 2rem; color: #f59e0b\"></i>\r\n      <p>ไม่พบข้อมูลผู้ใช้</p>\r\n    </div>\r\n  </Dialog>\r\n</template>\r\n\r\n<script>\r\nimport axios from '@/utils/axiosConfig'\r\n\r\nexport default {\r\n  name: 'UserInfoDialog',\r\n  props: {\r\n    visible: Boolean,\r\n    userName: String,\r\n    userId: Number\r\n  },\r\n  emits: ['update:visible'],\r\n  mounted() {\r\n    if (this.visible && (this.userId || this.userName)) {\r\n      this.loadUserInfo()\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      user: null,\r\n      loading: false\r\n    }\r\n  },\r\n  watch: {\r\n    visible(newVal) {\r\n      if (newVal) {\r\n        this.loadUserInfo()\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async loadUserInfo() {\r\n      if (!this.userName && !this.userId) return\r\n\r\n      this.loading = true\r\n      this.user = null\r\n\r\n      try {\r\n        const response = await axios.get('/api/users')\r\n        \r\n        if (this.userId) {\r\n          this.user = response.data.find(u => u.id === this.userId)\r\n        } else {\r\n          const fullName = this.userName.trim()\r\n          this.user = response.data.find(u => {\r\n            const userName = `${u.firstname} ${u.lastname}`.trim()\r\n            return userName === fullName\r\n          })\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading user info:', error)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    getRoleLabel(role) {\r\n      const roles = {\r\n        'admin': 'ผู้ดูแลระบบ',\r\n        'manager': 'ผู้จัดการ',\r\n        'hr': 'ฝ่ายบุคคล',\r\n        'user': 'ผู้ใช้งาน'\r\n      }\r\n      return roles[role?.toLowerCase()] || role\r\n    },\r\n    getRoleSeverity(role) {\r\n      const severities = {\r\n        'admin': 'danger',\r\n        'manager': 'warning',\r\n        'hr': 'info',\r\n        'user': 'success'\r\n      }\r\n      return severities[role?.toLowerCase()] || 'secondary'\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.loading-state,\r\n.error-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 1.5rem;\r\n  gap: 0.75rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.user-info-content {\r\n  padding: 0.5rem 0;\r\n}\r\n\r\n.user-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n}\r\n\r\n.user-avatar {\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 50%;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: white;\r\n  font-size: 1.8rem;\r\n}\r\n\r\n.user-title h3 {\r\n  margin: 0 0 0.4rem 0;\r\n  font-size: 1.2rem;\r\n  color: #2c3e50;\r\n}\r\n\r\n.user-details {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.6rem;\r\n}\r\n\r\n.detail-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.5rem 0.75rem;\r\n  background: #f8f9fa;\r\n  border-radius: 6px;\r\n}\r\n\r\n.detail-label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.4rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.detail-label i {\r\n  color: #6c757d;\r\n  font-size: 0.85rem;\r\n}\r\n\r\n.detail-value {\r\n  color: #2c3e50;\r\n  font-weight: 500;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .user-avatar {\r\n    width: 50px;\r\n    height: 50px;\r\n    font-size: 1.5rem;\r\n  }\r\n\r\n  .user-title h3 {\r\n    font-size: 1rem;\r\n  }\r\n\r\n  .detail-row {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.25rem;\r\n  }\r\n\r\n  .detail-label,\r\n  .detail-value {\r\n    font-size: 0.85rem;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"AA2DA,OAAOA,KAAI,MAAO,qBAAoB;AAEtC,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,KAAK,EAAE;IACLC,OAAO,EAAEC,OAAO;IAChBC,QAAQ,EAAEC,MAAM;IAChBC,MAAM,EAAEC;EACV,CAAC;EACDC,KAAK,EAAE,CAAC,gBAAgB,CAAC;EACzBC,OAAOA,CAAA,EAAG;IACR,IAAI,IAAI,CAACP,OAAM,KAAM,IAAI,CAACI,MAAK,IAAK,IAAI,CAACF,QAAQ,CAAC,EAAE;MAClD,IAAI,CAACM,YAAY,CAAC;IACpB;EACF,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,IAAI;MACVC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,KAAK,EAAE;IACLZ,OAAOA,CAACa,MAAM,EAAE;MACd,IAAIA,MAAM,EAAE;QACV,IAAI,CAACL,YAAY,CAAC;MACpB;IACF;EACF,CAAC;EACDM,OAAO,EAAE;IACP,MAAMN,YAAYA,CAAA,EAAG;MACnB,IAAI,CAAC,IAAI,CAACN,QAAO,IAAK,CAAC,IAAI,CAACE,MAAM,EAAE;MAEpC,IAAI,CAACO,OAAM,GAAI,IAAG;MAClB,IAAI,CAACD,IAAG,GAAI,IAAG;MAEf,IAAI;QACF,MAAMK,QAAO,GAAI,MAAMlB,KAAK,CAACmB,GAAG,CAAC,YAAY;QAE7C,IAAI,IAAI,CAACZ,MAAM,EAAE;UACf,IAAI,CAACM,IAAG,GAAIK,QAAQ,CAACN,IAAI,CAACQ,IAAI,CAACC,CAAA,IAAKA,CAAC,CAACC,EAAC,KAAM,IAAI,CAACf,MAAM;QAC1D,OAAO;UACL,MAAMgB,QAAO,GAAI,IAAI,CAAClB,QAAQ,CAACmB,IAAI,CAAC;UACpC,IAAI,CAACX,IAAG,GAAIK,QAAQ,CAACN,IAAI,CAACQ,IAAI,CAACC,CAAA,IAAK;YAClC,MAAMhB,QAAO,GAAI,GAAGgB,CAAC,CAACI,SAAS,IAAIJ,CAAC,CAACK,QAAQ,EAAE,CAACF,IAAI,CAAC;YACrD,OAAOnB,QAAO,KAAMkB,QAAO;UAC7B,CAAC;QACH;MACF,EAAE,OAAOI,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK;MACjD,UAAU;QACR,IAAI,CAACb,OAAM,GAAI,KAAI;MACrB;IACF,CAAC;IACDe,YAAYA,CAACC,IAAI,EAAE;MACjB,MAAMC,KAAI,GAAI;QACZ,OAAO,EAAE,aAAa;QACtB,SAAS,EAAE,WAAW;QACtB,IAAI,EAAE,WAAW;QACjB,MAAM,EAAE;MACV;MACA,OAAOA,KAAK,CAACD,IAAI,EAAEE,WAAW,CAAC,CAAC,KAAKF,IAAG;IAC1C,CAAC;IACDG,eAAeA,CAACH,IAAI,EAAE;MACpB,MAAMI,UAAS,GAAI;QACjB,OAAO,EAAE,QAAQ;QACjB,SAAS,EAAE,SAAS;QACpB,IAAI,EAAE,MAAM;QACZ,MAAM,EAAE;MACV;MACA,OAAOA,UAAU,CAACJ,IAAI,EAAEE,WAAW,CAAC,CAAC,KAAK,WAAU;IACtD;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}