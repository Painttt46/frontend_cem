{"ast":null,"code":"import LayoutView from './components/LayoutView.vue';\nexport default {\n  name: 'App',\n  components: {\n    LayoutView\n  },\n  data() {\n    return {\n      tokenCheckInterval: null\n    };\n  },\n  mounted() {\n    // ตรวจสอบ token expiration ทุก 1 นาที\n    this.tokenCheckInterval = setInterval(() => {\n      this.checkTokenExpiration();\n    }, 60000);\n  },\n  beforeUnmount() {\n    if (this.tokenCheckInterval) {\n      clearInterval(this.tokenCheckInterval);\n    }\n  },\n  methods: {\n    checkTokenExpiration() {\n      const token = localStorage.getItem('soc_token');\n      if (!token) return;\n      try {\n        const parts = token.split('.');\n        if (parts.length !== 3) return;\n        const payload = JSON.parse(atob(parts[1]));\n        if (Date.now() >= payload.exp * 1000) {\n          // Token หมดอายุ - logout\n          localStorage.clear();\n          sessionStorage.clear();\n          document.cookie.split(\";\").forEach(c => {\n            document.cookie = c.replace(/^ +/, \"\").replace(/=.*/, \"=;expires=\" + new Date().toUTCString() + \";path=/\");\n          });\n          this.$router.push('/login');\n        }\n      } catch {\n        // ignore parse errors\n      }\n    }\n  }\n};","map":{"version":3,"names":["LayoutView","name","components","data","tokenCheckInterval","mounted","setInterval","checkTokenExpiration","beforeUnmount","clearInterval","methods","token","localStorage","getItem","parts","split","length","payload","JSON","parse","atob","Date","now","exp","clear","sessionStorage","document","cookie","forEach","c","replace","toUTCString","$router","push"],"sources":["D:\\frontend_cem\\src\\App.vue"],"sourcesContent":["<!-- App.vue -->\n<template>\n  <div id=\"app\" style=\"height: 100vh; overflow: hidden;\">\n    <!-- Global Loading Overlay -->\n    <div v-if=\"$store.state.loading\" class=\"loading-overlay\">\n      <div class=\"spinner\"></div>\n    </div>\n    \n    <!-- Show only router-view for login page -->\n    <div v-if=\"$router.currentRoute.value.fullPath == '/login'\">\n      <router-view />\n    </div>\n    <!-- Show LayoutView with sidebar for other pages -->\n    <div v-else>\n      <LayoutView />\n    </div>\n  </div>\n</template>\n\n<script>\nimport LayoutView from './components/LayoutView.vue';\n\nexport default {\n  name: 'App',\n  components: {\n    LayoutView,\n  },\n  data() {\n    return {\n      tokenCheckInterval: null\n    }\n  },\n  mounted() {\n    // ตรวจสอบ token expiration ทุก 1 นาที\n    this.tokenCheckInterval = setInterval(() => {\n      this.checkTokenExpiration()\n    }, 60000)\n  },\n  beforeUnmount() {\n    if (this.tokenCheckInterval) {\n      clearInterval(this.tokenCheckInterval)\n    }\n  },\n  methods: {\n    checkTokenExpiration() {\n      const token = localStorage.getItem('soc_token')\n      if (!token) return\n      \n      try {\n        const parts = token.split('.')\n        if (parts.length !== 3) return\n        \n        const payload = JSON.parse(atob(parts[1]))\n        if (Date.now() >= payload.exp * 1000) {\n          // Token หมดอายุ - logout\n          localStorage.clear()\n          sessionStorage.clear()\n          document.cookie.split(\";\").forEach((c) => {\n            document.cookie = c.replace(/^ +/, \"\").replace(/=.*/, \"=;expires=\" + new Date().toUTCString() + \";path=/\")\n          })\n          this.$router.push('/login')\n        }\n      } catch {\n        // ignore parse errors\n      }\n    }\n  }\n};\n</script>\n\n<style>\n@import '/src/assets/styles/main.css';\n\n:root {\n  --label-color: #64748b;\n  --status-closed-red: #A90F0A;\n  --table-font-size: 1rem;\n  --default-font-size: 0.8rem;\n  font-size: var(--default-font-size);\n  \n  /* Light mode (default) */\n  --bg-primary: #ffffff;\n  --bg-secondary: #e5e7eb;\n  --bg-card: #ffffff;\n  --text-primary: #1f2937;\n  --text-secondary: #6b7280;\n  --border-color: #e5e7eb;\n}\n\n[data-theme=\"dark\"] {\n  --bg-primary: #1f2937;\n  --bg-secondary: #111827;\n  --bg-card: #374151;\n  --text-primary: #f9fafb;\n  --text-secondary: #d1d5db;\n  --border-color: #4b5563;\n  --label-color: #9ca3af;\n}\n\nlabel {\n  margin-bottom: 2px;\n  color: var(--label-color);\n  font-size: 0.875rem;\n}\n\n* {\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  padding: 0;\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n}\n\n/* Loading Overlay */\n.loading-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 9999;\n}\n\n.spinner {\n  width: 50px;\n  height: 50px;\n  border: 5px solid rgba(255, 255, 255, 0.3);\n  border-top-color: #fff;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n/* Scrollbar */\n::-webkit-scrollbar {\n  width: 6px;\n  height: 6px;\n}\n\n::-webkit-scrollbar-track {\n  background: #f1f1f1;\n  border-radius: 3px;\n}\n\n::-webkit-scrollbar-thumb {\n  background: #c1c1c1;\n  border-radius: 3px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: #a1a1a1;\n}\n\n/* Dark Mode Styles */\n[data-theme=\"dark\"] body,\n.dark-mode {\n  background-color: var(--bg-secondary);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .bg-light {\n  background-color: var(--bg-primary) !important;\n}\n\n/* Cards & Dialogs */\n[data-theme=\"dark\"] .p-card,\n[data-theme=\"dark\"] .p-dialog {\n  background-color: var(--bg-card);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .p-card .p-card-title,\n[data-theme=\"dark\"] .p-card .p-card-subtitle,\n[data-theme=\"dark\"] .p-dialog .p-dialog-header {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .p-dialog .p-dialog-content {\n  background-color: var(--bg-card);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .p-dialog .p-dialog-header {\n  background-color: var(--bg-primary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-dialog .p-dialog-footer {\n  background-color: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n/* DataTable */\n[data-theme=\"dark\"] .p-datatable {\n  background-color: var(--bg-card);\n}\n\n[data-theme=\"dark\"] .p-datatable .p-datatable-thead > tr > th {\n  background-color: var(--bg-primary);\n  color: var(--text-primary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-datatable .p-datatable-tbody > tr {\n  background-color: var(--bg-card);\n  color: var(--text-primary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-datatable .p-datatable-tbody > tr:nth-child(even) {\n  background-color: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .p-datatable .p-datatable-tbody > tr:hover {\n  background-color: #4b5563 !important;\n}\n\n[data-theme=\"dark\"] .p-datatable .p-datatable-tbody > tr > td {\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-paginator {\n  background-color: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-paginator .p-paginator-element {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .p-paginator .p-paginator-element:hover {\n  background-color: var(--bg-primary);\n}\n\n/* Form Inputs */\n[data-theme=\"dark\"] .p-inputtext,\n[data-theme=\"dark\"] .p-dropdown,\n[data-theme=\"dark\"] .p-calendar,\n[data-theme=\"dark\"] .p-textarea,\n[data-theme=\"dark\"] .p-inputnumber-input,\n[data-theme=\"dark\"] .p-multiselect,\n[data-theme=\"dark\"] .p-chips-input-token input {\n  background-color: var(--bg-primary) !important;\n  color: var(--text-primary) !important;\n  border-color: var(--border-color) !important;\n}\n\n[data-theme=\"dark\"] .p-inputtext:focus,\n[data-theme=\"dark\"] .p-dropdown:focus,\n[data-theme=\"dark\"] .p-textarea:focus {\n  border-color: #4A90E2 !important;\n  box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.3) !important;\n}\n\n[data-theme=\"dark\"] .p-inputtext::placeholder {\n  color: var(--text-secondary) !important;\n}\n\n/* Dropdown Panel */\n[data-theme=\"dark\"] .p-dropdown-panel,\n[data-theme=\"dark\"] .p-multiselect-panel,\n[data-theme=\"dark\"] .p-autocomplete-panel {\n  background-color: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-dropdown-items .p-dropdown-item,\n[data-theme=\"dark\"] .p-multiselect-items .p-multiselect-item {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .p-dropdown-items .p-dropdown-item:hover,\n[data-theme=\"dark\"] .p-multiselect-items .p-multiselect-item:hover {\n  background-color: var(--bg-primary) !important;\n}\n\n[data-theme=\"dark\"] .p-dropdown-items .p-dropdown-item.p-highlight,\n[data-theme=\"dark\"] .p-multiselect-items .p-multiselect-item.p-highlight {\n  background-color: #4A90E2 !important;\n  color: white !important;\n}\n\n/* Calendar */\n[data-theme=\"dark\"] .p-datepicker {\n  background-color: var(--bg-card);\n  color: var(--text-primary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-datepicker .p-datepicker-header {\n  background-color: var(--bg-primary);\n  color: var(--text-primary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-datepicker table td > span {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .p-datepicker table td > span:hover {\n  background-color: var(--bg-primary) !important;\n}\n\n[data-theme=\"dark\"] .p-datepicker table td.p-datepicker-today > span {\n  background-color: var(--border-color);\n}\n\n/* Buttons */\n[data-theme=\"dark\"] .p-button.p-button-secondary {\n  background-color: var(--bg-primary);\n  border-color: var(--border-color);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .p-button.p-button-secondary:hover {\n  background-color: var(--border-color) !important;\n}\n\n[data-theme=\"dark\"] .p-button.p-button-text {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .p-button.p-button-text:hover {\n  background-color: var(--bg-primary) !important;\n}\n\n/* Tabs */\n[data-theme=\"dark\"] .p-tabview .p-tabview-nav {\n  background-color: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-tabview .p-tabview-nav li .p-tabview-nav-link {\n  background-color: transparent;\n  color: var(--text-secondary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-tabview .p-tabview-nav li .p-tabview-nav-link:hover {\n  background-color: var(--bg-primary);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .p-tabview .p-tabview-nav li.p-highlight .p-tabview-nav-link {\n  background-color: var(--bg-primary);\n  color: #4A90E2;\n  border-color: #4A90E2;\n}\n\n[data-theme=\"dark\"] .p-tabview .p-tabview-panels {\n  background-color: var(--bg-card);\n  color: var(--text-primary);\n}\n\n/* Sidebar & Navigation */\n[data-theme=\"dark\"] .sidebar-container {\n  background-color: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .nav-link,\n[data-theme=\"dark\"] .nav-link h5 {\n  color: var(--text-primary) !important;\n}\n\n[data-theme=\"dark\"] .nav-link:hover {\n  background-color: var(--bg-card) !important;\n  border-radius: 8px;\n}\n\n[data-theme=\"dark\"] .nav-link.active,\n[data-theme=\"dark\"] .nav-link.active h5 {\n  color: #4A90E2 !important;\n  background-color: rgba(74, 144, 226, 0.1);\n  border-radius: 8px;\n}\n\n/* Main Content Areas */\n[data-theme=\"dark\"] .main-content,\n[data-theme=\"dark\"] .content-padding {\n  background-color: var(--bg-secondary);\n}\n\n[data-theme=\"dark\"] .daily-work-container,\n[data-theme=\"dark\"] .leave-work-container,\n[data-theme=\"dark\"] .projects-container,\n[data-theme=\"dark\"] .car-booking-container,\n[data-theme=\"dark\"] .management-container {\n  background-color: var(--bg-secondary);\n}\n\n/* Text Colors */\n[data-theme=\"dark\"] h1, [data-theme=\"dark\"] h2, [data-theme=\"dark\"] h3,\n[data-theme=\"dark\"] h4, [data-theme=\"dark\"] h5, [data-theme=\"dark\"] h6 {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] p, [data-theme=\"dark\"] span, [data-theme=\"dark\"] div {\n  color: inherit;\n}\n\n[data-theme=\"dark\"] label {\n  color: var(--label-color) !important;\n}\n\n[data-theme=\"dark\"] .text-muted {\n  color: var(--text-secondary) !important;\n}\n\n/* Badges & Tags */\n[data-theme=\"dark\"] .p-tag {\n  color: white;\n}\n\n/* Tooltip */\n[data-theme=\"dark\"] .p-tooltip .p-tooltip-text {\n  background-color: var(--bg-primary);\n  color: var(--text-primary);\n}\n\n/* Panel & Accordion */\n[data-theme=\"dark\"] .p-panel,\n[data-theme=\"dark\"] .p-accordion {\n  background-color: var(--bg-card);\n}\n\n[data-theme=\"dark\"] .p-panel .p-panel-header,\n[data-theme=\"dark\"] .p-accordion .p-accordion-header a {\n  background-color: var(--bg-primary);\n  color: var(--text-primary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-panel .p-panel-content,\n[data-theme=\"dark\"] .p-accordion .p-accordion-content {\n  background-color: var(--bg-card);\n  color: var(--text-primary);\n  border-color: var(--border-color);\n}\n\n/* Menu */\n[data-theme=\"dark\"] .p-menu {\n  background-color: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-menu .p-menuitem-link {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .p-menu .p-menuitem-link:hover {\n  background-color: var(--bg-primary) !important;\n}\n\n/* Toast */\n[data-theme=\"dark\"] .p-toast .p-toast-message {\n  background-color: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-toast .p-toast-message-content {\n  color: var(--text-primary);\n}\n\n/* Checkbox & Radio */\n[data-theme=\"dark\"] .p-checkbox .p-checkbox-box,\n[data-theme=\"dark\"] .p-radiobutton .p-radiobutton-box {\n  background-color: var(--bg-primary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-checkbox .p-checkbox-box:hover,\n[data-theme=\"dark\"] .p-radiobutton .p-radiobutton-box:hover {\n  border-color: #4A90E2;\n}\n\n/* Scrollbar Dark */\n[data-theme=\"dark\"] ::-webkit-scrollbar-track {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] ::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n}\n\n[data-theme=\"dark\"] ::-webkit-scrollbar-thumb:hover {\n  background: #6b7280;\n}\n\n/* Fieldset */\n[data-theme=\"dark\"] .p-fieldset {\n  background-color: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-fieldset .p-fieldset-legend {\n  background-color: var(--bg-primary);\n  color: var(--text-primary);\n  border-color: var(--border-color);\n}\n\n/* Divider */\n[data-theme=\"dark\"] .p-divider {\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-divider .p-divider-content {\n  background-color: var(--bg-card);\n  color: var(--text-secondary);\n}\n\n/* Chip */\n[data-theme=\"dark\"] .p-chip {\n  background-color: var(--bg-primary);\n  color: var(--text-primary);\n}\n\n/* Timeline */\n[data-theme=\"dark\"] .p-timeline .p-timeline-event-content {\n  color: var(--text-primary);\n}\n\n/* FileUpload */\n[data-theme=\"dark\"] .p-fileupload {\n  background-color: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .p-fileupload .p-fileupload-content {\n  background-color: var(--bg-primary);\n  border-color: var(--border-color);\n}\n</style>\n"],"mappings":"AAoBA,OAAOA,UAAS,MAAO,6BAA6B;AAEpD,eAAe;EACbC,IAAI,EAAE,KAAK;EACXC,UAAU,EAAE;IACVF;EACF,CAAC;EACDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,kBAAkB,EAAE;IACtB;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR;IACA,IAAI,CAACD,kBAAiB,GAAIE,WAAW,CAAC,MAAM;MAC1C,IAAI,CAACC,oBAAoB,CAAC;IAC5B,CAAC,EAAE,KAAK;EACV,CAAC;EACDC,aAAaA,CAAA,EAAG;IACd,IAAI,IAAI,CAACJ,kBAAkB,EAAE;MAC3BK,aAAa,CAAC,IAAI,CAACL,kBAAkB;IACvC;EACF,CAAC;EACDM,OAAO,EAAE;IACPH,oBAAoBA,CAAA,EAAG;MACrB,MAAMI,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,WAAW;MAC9C,IAAI,CAACF,KAAK,EAAE;MAEZ,IAAI;QACF,MAAMG,KAAI,GAAIH,KAAK,CAACI,KAAK,CAAC,GAAG;QAC7B,IAAID,KAAK,CAACE,MAAK,KAAM,CAAC,EAAE;QAExB,MAAMC,OAAM,GAAIC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,KAAK,CAAC,CAAC,CAAC,CAAC;QACzC,IAAIO,IAAI,CAACC,GAAG,CAAC,KAAKL,OAAO,CAACM,GAAE,GAAI,IAAI,EAAE;UACpC;UACAX,YAAY,CAACY,KAAK,CAAC;UACnBC,cAAc,CAACD,KAAK,CAAC;UACrBE,QAAQ,CAACC,MAAM,CAACZ,KAAK,CAAC,GAAG,CAAC,CAACa,OAAO,CAAEC,CAAC,IAAK;YACxCH,QAAQ,CAACC,MAAK,GAAIE,CAAC,CAACC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAACA,OAAO,CAAC,KAAK,EAAE,YAAW,GAAI,IAAIT,IAAI,CAAC,CAAC,CAACU,WAAW,CAAC,IAAI,SAAS;UAC3G,CAAC;UACD,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,QAAQ;QAC5B;MACF,EAAE,MAAM;QACN;MAAA;IAEJ;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}