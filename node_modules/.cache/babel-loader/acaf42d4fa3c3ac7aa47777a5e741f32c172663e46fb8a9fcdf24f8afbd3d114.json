{"ast":null,"code":"import UserInfoDialog from '@/components/UserInfoDialog.vue';\nimport EnhancedDataTable from '@/components/EnhancedDataTable.vue';\nexport default {\n  name: 'CarHistory',\n  components: {\n    UserInfoDialog,\n    EnhancedDataTable\n  },\n  props: {\n    records: Array\n  },\n  data() {\n    return {\n      showColleaguesModal: false,\n      selectedColleagues: [],\n      showDescriptionModal: false,\n      selectedDescription: '',\n      showUserDialog: false,\n      selectedUserId: null,\n      selectedUserName: null\n    };\n  },\n  computed: {\n    groupedRecords() {\n      if (!this.records || !Array.isArray(this.records)) return [];\n      const borrowRecords = this.records.filter(r => r && r.status !== undefined);\n      const groups = borrowRecords.map(borrow => {\n        const returned = borrow.status === 'returned';\n        const imgs = borrow.images || {};\n        const borrowImages = Array.isArray(imgs) ? imgs : imgs.borrow || [];\n        const returnImages = imgs.return || [];\n        return {\n          id: borrow.id,\n          license: borrow.license,\n          borrowDate: borrow.selected_date,\n          borrowRecord: {\n            ...borrow,\n            images: borrowImages\n          },\n          returnRecord: returned ? {\n            name: borrow.return_name,\n            location: borrow.return_location,\n            time: borrow.return_time,\n            date: borrow.return_date,\n            created_at: borrow.updated_at,\n            images: returnImages\n          } : null,\n          returned: returned\n        };\n      });\n      return groups.sort((a, b) => b.id - a.id);\n    },\n    groupedRecordsWithDuration() {\n      return this.groupedRecords.map(group => {\n        let duration = 'ยังไม่คืน';\n        if (group.returned) {\n          const borrowDate = new Date(group.borrowDate);\n          const [borrowHour, borrowMin] = group.borrowRecord.time.split(':').map(Number);\n          const borrowTime = new Date(borrowDate);\n          borrowTime.setHours(borrowHour, borrowMin, 0, 0);\n          const returnTime = group.returnRecord.created_at ? new Date(group.returnRecord.created_at) : new Date();\n          const diffMs = returnTime - borrowTime;\n          if (diffMs > 0) {\n            const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n            const diffMinutes = Math.floor(diffMs % (1000 * 60 * 60) / (1000 * 60));\n            if (diffHours > 0) {\n              duration = `${diffHours} ชั่วโมง ${diffMinutes} นาที`;\n            } else {\n              duration = `${diffMinutes} นาที`;\n            }\n          } else {\n            duration = 'ข้อมูลเวลาไม่ถูกต้อง';\n          }\n        }\n        return {\n          ...group,\n          duration\n        };\n      });\n    }\n  },\n  methods: {\n    showUserInfo(userId) {\n      if (userId) {\n        this.selectedUserId = userId;\n        this.showUserDialog = true;\n      }\n    },\n    showUserByName(name) {\n      if (name) {\n        this.selectedUserId = null;\n        this.selectedUserName = name;\n        this.showUserDialog = true;\n      }\n    },\n    showColleagueInfo(colleague) {\n      // colleague อาจเป็น object {id, name, value} หรือ string (ชื่อ)\n      if (typeof colleague === 'object') {\n        // ถ้ามี id ใช้ id\n        if (colleague.id) {\n          this.selectedUserId = colleague.id;\n          this.showUserDialog = true;\n        } else {\n          // ถ้าไม่มี id ใช้ name หรือ value\n          const name = colleague.name || colleague.value;\n          if (name) {\n            this.selectedUserId = null;\n            this.selectedUserName = name;\n            this.showUserDialog = true;\n          }\n        }\n      } else if (typeof colleague === 'string') {\n        // ถ้าเป็น string ค้นหาจากชื่อ\n        this.selectedUserId = null;\n        this.selectedUserName = colleague;\n        this.showUserDialog = true;\n      }\n    },\n    showColleaguesDialog(colleagues) {\n      this.selectedColleagues = colleagues || [];\n      this.showColleaguesModal = true;\n    },\n    hasColleagues(record) {\n      return record.colleagues && Array.isArray(record.colleagues) && record.colleagues.length > 0;\n    },\n    getColleagueName(colleague) {\n      if (typeof colleague === 'string') return colleague;\n      return colleague?.name || colleague;\n    },\n    getColleaguePosition(colleague) {\n      if (typeof colleague === 'string') return '';\n      return colleague?.position || '';\n    },\n    getColleagueDepartment(colleague) {\n      if (typeof colleague === 'string') return '';\n      return colleague?.department || '';\n    },\n    formatTime(dateString) {\n      if (!dateString) return '-';\n      return new Date(dateString).toLocaleTimeString('th-TH', {\n        hour: '2-digit',\n        minute: '2-digit',\n        hour12: false\n      });\n    },\n    canUploadImages(group) {\n      return group.borrowRecord.status === 'active';\n    },\n    handleImageUpload(event, bookingId) {\n      const files = Array.from(event.target.files);\n      if (files.length === 0) return;\n      this.$emit('upload-images', {\n        files,\n        bookingId\n      });\n\n      // Clear file input\n      event.target.value = '';\n    },\n    formatDate(date) {\n      return new Date(date).toLocaleDateString('th-TH', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    },\n    hasImages(data) {\n      return data.borrowRecord.images?.length > 0 || data.returned && data.returnRecord.images?.length > 0;\n    },\n    isWaitingToUse(data) {\n      const now = new Date();\n      const borrowDate = new Date(data.borrowDate);\n      const [hour, minute] = data.borrowRecord.time.split(':').map(Number);\n      const borrowDateTime = new Date(borrowDate);\n      borrowDateTime.setHours(hour, minute, 0, 0);\n\n      // If current time is before booking time, show \"รอใช้งาน\"\n      return now < borrowDateTime;\n    },\n    viewImages(data) {\n      const images = [];\n      if (data.borrowRecord.images?.length > 0) {\n        images.push(...data.borrowRecord.images.map(img => ({\n          src: img,\n          type: 'ใช้รถ'\n        })));\n      }\n      if (data.returned && data.returnRecord.images?.length > 0) {\n        images.push(...data.returnRecord.images.map(img => ({\n          src: img,\n          type: 'คืนรถ'\n        })));\n      }\n      this.$emit('view-images', images, data);\n    },\n    viewDescription(description) {\n      this.selectedDescription = description;\n      this.showDescriptionModal = true;\n    }\n  }\n};","map":{"version":3,"names":["UserInfoDialog","EnhancedDataTable","name","components","props","records","Array","data","showColleaguesModal","selectedColleagues","showDescriptionModal","selectedDescription","showUserDialog","selectedUserId","selectedUserName","computed","groupedRecords","isArray","borrowRecords","filter","r","status","undefined","groups","map","borrow","returned","imgs","images","borrowImages","returnImages","return","id","license","borrowDate","selected_date","borrowRecord","returnRecord","return_name","location","return_location","time","return_time","date","return_date","created_at","updated_at","sort","a","b","groupedRecordsWithDuration","group","duration","Date","borrowHour","borrowMin","split","Number","borrowTime","setHours","returnTime","diffMs","diffHours","Math","floor","diffMinutes","methods","showUserInfo","userId","showUserByName","showColleagueInfo","colleague","value","showColleaguesDialog","colleagues","hasColleagues","record","length","getColleagueName","getColleaguePosition","position","getColleagueDepartment","department","formatTime","dateString","toLocaleTimeString","hour","minute","hour12","canUploadImages","handleImageUpload","event","bookingId","files","from","target","$emit","formatDate","toLocaleDateString","year","month","day","hasImages","isWaitingToUse","now","borrowDateTime","viewImages","push","img","src","type","viewDescription","description"],"sources":["D:\\frontend_cem\\src\\views\\car_booking\\History.vue"],"sourcesContent":["<template>\n  <Card class=\"history-card\">\n    <template #content>\n      <div v-if=\"groupedRecordsWithDuration.length === 0\" class=\"empty-state\">\n        <i class=\"pi pi-car\" style=\"font-size: 4rem; color: #ccc;\"></i>\n        <p>ยังไม่มีข้อมูลการใช้รถ</p>\n      </div>\n\n      <EnhancedDataTable v-else :data=\"groupedRecordsWithDuration\" :paginator=\"true\" :rows=\"10\"\n        :rowsPerPageOptions=\"[5, 10, 20]\" responsiveLayout=\"scroll\" class=\"history-table\" stripedRows>\n        <Column field=\"id\" header=\"Ticket ID\" :sortable=\"true\">\n          <template #body=\"slotProps\">\n            <span class=\"ticket-id\">{{ slotProps.data.id }}</span>\n          </template>\n        </Column>\n\n        <Column field=\"borrowDate\" header=\"วันที่\" :sortable=\"true\">\n          <template #body=\"slotProps\">\n            {{ formatDate(slotProps.data.borrowDate) }}\n          </template>\n        </Column>\n\n        <Column field=\"borrowRecord.name\" header=\"ผู้ใช้\" :sortable=\"true\">\n          <template #body=\"slotProps\">\n            <span class=\"clickable-name\" @click=\"showUserInfo(slotProps.data.borrowRecord.user_id)\">\n              {{ slotProps.data.borrowRecord.name }}\n            </span>\n          </template>\n        </Column>\n        <Column field=\"borrowRecord.time\" header=\"เวลาใช้\" />\n        <Column field=\"borrowRecord.location\" header=\"สถานที่\" />\n        <Column field=\"borrowRecord.project\" header=\"โครงการ\" />\n        \n        <Column header=\"ผู้ร่วมงาน\" style=\"min-width: 120px;\">\n          <template #body=\"slotProps\">\n            <Button \n              v-if=\"hasColleagues(slotProps.data.borrowRecord)\" \n              @click=\"showColleaguesDialog(slotProps.data.borrowRecord.colleagues)\"\n              severity=\"info\" \n              size=\"small\"\n              outlined\n            >\n              <i class=\"pi pi-users\"></i>\n              <Badge :value=\"slotProps.data.borrowRecord.colleagues.length\" severity=\"info\" />\n            </Button>\n            <span v-else class=\"no-colleagues\">\n              <i class=\"pi pi-user-minus\"></i> ไม่มี\n            </span>\n          </template>\n        </Column>\n\n        <Column header=\"ผู้คืน\">\n          <template #body=\"slotProps\">\n            <span v-if=\"slotProps.data.returned && slotProps.data.returnRecord.name\" \n                  class=\"clickable-name\" \n                  @click=\"showUserByName(slotProps.data.returnRecord.name)\">\n              {{ slotProps.data.returnRecord.name }}\n            </span>\n            <span v-else>-</span>\n          </template>\n        </Column>\n\n        <Column header=\"วันที่คืน\">\n          <template #body=\"slotProps\">\n            <span v-if=\"slotProps.data.returned && slotProps.data.returnRecord.date\">\n              {{ formatDate(slotProps.data.returnRecord.date) }}\n            </span>\n            <span v-else-if=\"slotProps.data.returned\">\n              {{ formatDate(slotProps.data.borrowRecord.updated_at) }}\n            </span>\n            <span v-else>-</span>\n          </template>\n        </Column>\n\n        <Column header=\"เวลาคืน\">\n          <template #body=\"slotProps\">\n            <span v-if=\"slotProps.data.returned\">\n              {{ slotProps.data.returnRecord.time || formatTime(slotProps.data.borrowRecord.updated_at) }}\n            </span>\n            <span v-else>-</span>\n          </template>\n        </Column>\n\n        <Column header=\"สถานที่คืน\">\n          <template #body=\"slotProps\">\n            {{ slotProps.data.returned ? slotProps.data.returnRecord.location : '-' }}\n          </template>\n        </Column>\n\n        <Column field=\"duration\" header=\"ระยะเวลา\" />\n\n        <Column header=\"รูปภาพ\">\n          <template #body=\"slotProps\">\n            <i v-if=\"(slotProps.data.borrowRecord.images?.length > 0) || (slotProps.data.returned && slotProps.data.returnRecord.images?.length > 0)\" \n               class=\"pi pi-eye view-icon\" \n               @click=\"viewImages(slotProps.data)\"></i>\n            <span v-else>-</span>\n          </template>\n        </Column>\n\n        <Column header=\"ข้อมูลเพิ่มเติม\">\n          <template #body=\"slotProps\">\n            <Button \n              v-if=\"slotProps.data.borrowRecord.discription\" \n              icon=\"pi pi-info-circle\" \n              severity=\"info\" \n              text \n              rounded \n              size=\"small\"\n              @click=\"viewDescription(slotProps.data.borrowRecord.discription)\"\n              v-tooltip=\"'ดูข้อมูลเพิ่มเติม'\"\n            />\n            <span v-else class=\"no-description\">-</span>\n          </template>\n        </Column>\n\n        <Column header=\"สถานะ\">\n          <template #body=\"slotProps\">\n            <Badge v-if=\"slotProps.data.returned\" value=\"คืนแล้ว\" severity=\"success\" icon=\"pi pi-check\" />\n            <Badge v-else-if=\"isWaitingToUse(slotProps.data)\" value=\"รอใช้งาน\" severity=\"info\" icon=\"pi pi-clock\" />\n            <Badge v-else value=\"ยังไม่คืน\" severity=\"warning\" icon=\"pi pi-clock\" />\n          </template>\n        </Column>\n      </EnhancedDataTable>\n    </template>\n  </Card>\n\n  <!-- Colleagues Dialog -->\n  <Dialog v-model:visible=\"showColleaguesModal\" modal header=\"รายชื่อผู้ร่วมงาน\" :style=\"{ width: '90vw', maxWidth: '600px' }\" :draggable=\"false\">\n    <div class=\"colleagues-list\">\n      <div v-for=\"(colleague, index) in selectedColleagues\" :key=\"index\" class=\"colleague-card clickable-card\" @click=\"showColleagueInfo(colleague)\">\n        <div class=\"colleague-details\">\n          <div class=\"colleague-name\">\n            {{ getColleagueName(colleague) }}\n          </div>\n          <div v-if=\"getColleaguePosition(colleague) || getColleagueDepartment(colleague)\" class=\"colleague-info\">\n            <span v-if=\"getColleaguePosition(colleague)\" class=\"position\">{{ getColleaguePosition(colleague) }}</span>\n            <span v-if=\"getColleagueDepartment(colleague)\" class=\"department\">{{ getColleagueDepartment(colleague) }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </Dialog>\n\n  <!-- Description Dialog -->\n  <Dialog v-model:visible=\"showDescriptionModal\" modal header=\"ข้อมูลเพิ่มเติม\" :style=\"{ width: '90vw', maxWidth: '500px' }\" :draggable=\"false\">\n    <div class=\"description-content\">\n      <p>{{ selectedDescription }}</p>\n    </div>\n  </Dialog>\n\n  <UserInfoDialog v-model:visible=\"showUserDialog\" :userId=\"selectedUserId\" :userName=\"selectedUserName\" />\n</template>\n\n<script>\nimport UserInfoDialog from '@/components/UserInfoDialog.vue'\nimport EnhancedDataTable from '@/components/EnhancedDataTable.vue'\n\nexport default {\n  name: 'CarHistory',\n  components: {\n    UserInfoDialog,\n    EnhancedDataTable\n  },\n  props: {\n    records: Array\n  },\n  data() {\n    return {\n      showColleaguesModal: false,\n      selectedColleagues: [],\n      showDescriptionModal: false,\n      selectedDescription: '',\n      showUserDialog: false,\n      selectedUserId: null,\n      selectedUserName: null\n    }\n  },\n  computed: {\n    groupedRecords() {\n      if (!this.records || !Array.isArray(this.records)) return []\n      \n      const borrowRecords = this.records.filter(r => r && r.status !== undefined)\n      const groups = borrowRecords.map(borrow => {\n        const returned = borrow.status === 'returned'\n        const imgs = borrow.images || {}\n        const borrowImages = Array.isArray(imgs) ? imgs : (imgs.borrow || [])\n        const returnImages = imgs.return || []\n        return {\n          id: borrow.id,\n          license: borrow.license,\n          borrowDate: borrow.selected_date,\n          borrowRecord: { ...borrow, images: borrowImages },\n          returnRecord: returned ? {\n            name: borrow.return_name,\n            location: borrow.return_location,\n            time: borrow.return_time,\n            date: borrow.return_date,\n            created_at: borrow.updated_at,\n            images: returnImages\n          } : null,\n          returned: returned\n        }\n      })\n      return groups.sort((a, b) => b.id - a.id)\n    },\n    groupedRecordsWithDuration() {\n      return this.groupedRecords.map(group => {\n        let duration = 'ยังไม่คืน'\n        if (group.returned) {\n          const borrowDate = new Date(group.borrowDate)\n          const [borrowHour, borrowMin] = group.borrowRecord.time.split(':').map(Number)\n          const borrowTime = new Date(borrowDate)\n          borrowTime.setHours(borrowHour, borrowMin, 0, 0)\n\n          const returnTime = group.returnRecord.created_at\n            ? new Date(group.returnRecord.created_at)\n            : new Date()\n\n          const diffMs = returnTime - borrowTime\n          if (diffMs > 0) {\n            const diffHours = Math.floor(diffMs / (1000 * 60 * 60))\n            const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60))\n            if (diffHours > 0) {\n              duration = `${diffHours} ชั่วโมง ${diffMinutes} นาที`\n            } else {\n              duration = `${diffMinutes} นาที`\n            }\n          } else {\n            duration = 'ข้อมูลเวลาไม่ถูกต้อง'\n          }\n        }\n        return { ...group, duration }\n      })\n    }\n  },\n  methods: {\n    showUserInfo(userId) {\n      if (userId) {\n        this.selectedUserId = userId\n        this.showUserDialog = true\n      }\n    },\n    showUserByName(name) {\n      if (name) {\n        this.selectedUserId = null\n        this.selectedUserName = name\n        this.showUserDialog = true\n      }\n    },\n\n    showColleagueInfo(colleague) {\n      // colleague อาจเป็น object {id, name, value} หรือ string (ชื่อ)\n      if (typeof colleague === 'object') {\n        // ถ้ามี id ใช้ id\n        if (colleague.id) {\n          this.selectedUserId = colleague.id\n          this.showUserDialog = true\n        } else {\n          // ถ้าไม่มี id ใช้ name หรือ value\n          const name = colleague.name || colleague.value\n          if (name) {\n            this.selectedUserId = null\n            this.selectedUserName = name\n            this.showUserDialog = true\n          }\n        }\n      } else if (typeof colleague === 'string') {\n        // ถ้าเป็น string ค้นหาจากชื่อ\n        this.selectedUserId = null\n        this.selectedUserName = colleague\n        this.showUserDialog = true\n      }\n    },\n\n    showColleaguesDialog(colleagues) {\n      this.selectedColleagues = colleagues || []\n      this.showColleaguesModal = true\n    },\n    \n    hasColleagues(record) {\n      return record.colleagues && Array.isArray(record.colleagues) && record.colleagues.length > 0\n    },\n    \n    getColleagueName(colleague) {\n      if (typeof colleague === 'string') return colleague\n      return colleague?.name || colleague\n    },\n    \n    getColleaguePosition(colleague) {\n      if (typeof colleague === 'string') return ''\n      return colleague?.position || ''\n    },\n    \n    getColleagueDepartment(colleague) {\n      if (typeof colleague === 'string') return ''\n      return colleague?.department || ''\n    },\n    \n    formatTime(dateString) {\n      if (!dateString) return '-'\n      return new Date(dateString).toLocaleTimeString('th-TH', {\n        hour: '2-digit',\n        minute: '2-digit',\n        hour12: false\n      })\n    },\n    canUploadImages(group) {\n      return group.borrowRecord.status === 'active'\n    },\n    handleImageUpload(event, bookingId) {\n      const files = Array.from(event.target.files)\n      if (files.length === 0) return\n\n      this.$emit('upload-images', { files, bookingId })\n      \n      // Clear file input\n      event.target.value = ''\n    },\n    formatDate(date) {\n      return new Date(date).toLocaleDateString('th-TH', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      })\n    },\n    hasImages(data) {\n      return (data.borrowRecord.images?.length > 0) ||\n        (data.returned && data.returnRecord.images?.length > 0)\n    },\n    isWaitingToUse(data) {\n      const now = new Date()\n      const borrowDate = new Date(data.borrowDate)\n      const [hour, minute] = data.borrowRecord.time.split(':').map(Number)\n      const borrowDateTime = new Date(borrowDate)\n      borrowDateTime.setHours(hour, minute, 0, 0)\n      \n      // If current time is before booking time, show \"รอใช้งาน\"\n      return now < borrowDateTime\n    },\n    viewImages(data) {\n      const images = []\n      if (data.borrowRecord.images?.length > 0) {\n        images.push(...data.borrowRecord.images.map(img => ({ src: img, type: 'ใช้รถ' })))\n      }\n      if (data.returned && data.returnRecord.images?.length > 0) {\n        images.push(...data.returnRecord.images.map(img => ({ src: img, type: 'คืนรถ' })))\n      }\n      this.$emit('view-images', images, data)\n    },\n    \n    viewDescription(description) {\n      this.selectedDescription = description\n      this.showDescriptionModal = true\n    }\n  }\n}\n</script>\n\n<style scoped>\n.colleagues-compact {\n  padding: 0.25rem;\n}\n\n.colleagues-names {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n\n.colleague-item {\n  background: #f8f9fa;\n  border: 1px solid #e9ecef;\n  border-radius: 6px;\n  padding: 0.25rem 0.375rem;\n}\n\n.colleague-name {\n  font-weight: 600;\n  color: #495057;\n  font-size: 0.75rem;\n  margin-bottom: 0.125rem;\n}\n\n.colleague-info {\n  color: #6c757d;\n  font-size: 0.65rem;\n  line-height: 1.2;\n}\n\n.no-colleagues {\n  color: #a0aec0;\n  font-size: 0.75rem;\n  text-align: center;\n}\n\n.no-colleagues i {\n  font-size: 0.8rem;\n  margin-right: 0.25rem;\n}\n\n.colleagues-list {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  max-height: 450px;\n  overflow-y: auto;\n}\n\n.colleague-card {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.75rem 1rem;\n  background: #f8f9fa;\n  border: 1px solid #e9ecef;\n  border-radius: 8px;\n  transition: all 0.2s ease;\n}\n\n.clickable-card {\n  cursor: pointer;\n}\n\n.clickable-card:hover {\n  background: #e3f2fd;\n  border-color: #667eea;\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.15);\n}\n\n\n.colleague-avatar {\n  width: 50px;\n  height: 50px;\n  background: #667eea;\n  color: white;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n}\n\n.colleague-details {\n  flex: 1;\n}\n\n.colleague-name {\n  font-weight: 600;\n  color: #495057;\n  font-size: 1.1rem;\n  margin-bottom: 0.5rem;\n}\n\n.colleague-info {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n\n.position {\n  color: #6c757d;\n  font-size: 0.95rem;\n  font-weight: 500;\n}\n\n.department {\n  color: #868e96;\n  font-size: 0.9rem;\n}\n</style>\n<style scoped>\n.history-card {\n  width: 100%;\n  margin: 0;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  border: 1px solid #e9ecef;\n}\n\n.card-header {\n  background: #87CEEB;\n  color: white;\n  padding: 1.5rem;\n  text-align: center;\n  border-radius: 8px 8px 0 0;\n}\n\n.card-header h3 {\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 600;\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n}\n\n.card-header i {\n  margin-right: 0.5rem;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 4rem 2rem;\n  color: #6c757d;\n  background: #f8f9fa;\n  border-radius: 8px;\n  margin: 1rem;\n}\n\n.empty-state p {\n  margin-top: 1rem;\n  font-size: 1.1rem;\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n}\n\n.history-table :deep(.p-datatable) {\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n}\n\n.history-table :deep(.p-datatable-header) {\n  background: #f8f9fa;\n  border-bottom: 2px solid #e9ecef;\n  padding: 1rem;\n}\n\n.history-table :deep(.p-datatable-thead > tr > th) {\n  background: #f8f9fa;\n  color: #495057;\n  font-weight: 600;\n  border-bottom: 2px solid #e9ecef;\n  padding: 1rem 0.75rem;\n  font-size: 0.9rem;\n}\n\n.history-table :deep(.p-datatable-tbody > tr > td) {\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #f1f3f4;\n  vertical-align: middle;\n  text-align: center;\n}\n\n.history-table :deep(.p-datatable-tbody > tr:hover) {\n  background: #f8f9fa;\n}\n\n.history-table :deep(.p-paginator) {\n  background: #f8f9fa;\n  border-top: 2px solid #e9ecef;\n  padding: 1rem;\n}\n\n.history-table :deep(.p-badge) {\n  font-weight: 500;\n  padding: 0.5rem 0.75rem;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 2.5rem;\n  white-space: normal;\n  text-align: center;\n  line-height: 1.2;\n}\n\n.view-icon {\n  font-size: 1.2rem;\n  color: #667eea;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.view-icon:hover {\n  color: #5a67d8;\n  transform: scale(1.1);\n}\n\n.ticket-id {\n  font-weight: 600;\n  color: #495057;\n  padding: 0.25rem 0.5rem;\n  background: #e3f2fd;\n  border-radius: 4px;\n  border: 1px solid #bbdefb;\n}\n\n@media (max-width: 768px) {\n  .history-table :deep(.p-datatable-tbody > tr > td) {\n    padding: 0.75rem 0.5rem;\n    font-size: 0.9rem;\n  }\n}\n\n.description-content {\n  padding: 1rem;\n  background: #f8f9fa;\n  border-radius: 8px;\n  border-left: 4px solid #007bff;\n}\n\n.description-content p {\n  margin: 0;\n  line-height: 1.6;\n  color: #495057;\n}\n\n.no-description {\n  color: #6c757d;\n  font-style: italic;\n}\n\n.clickable-name {\n  cursor: pointer;\n  color: #667eea;\n  font-weight: 600;\n  transition: all 0.2s;\n}\n\n.clickable-name:hover {\n  color: #764ba2;\n  text-decoration: underline;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}