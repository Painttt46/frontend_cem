(function(){"use strict";var e={1305:function(e,a,t){var l=t(3751),s=t(641);const o={id:"app"},i={key:0},r={key:1};function n(e,a,t,l,n,d){const c=(0,s.g2)("router-view"),u=(0,s.g2)("LayoutView");return(0,s.uX)(),(0,s.CE)("div",o,["/login"==e.$router.currentRoute.value.fullPath?((0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(c)])):((0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(u)]))])}var d=t(953),c=t(33),u=t.p+"img/GENT.d1d29138.png",p=t(4335),m=t(7109);const v=(0,d.KR)([]),h=(0,d.KR)(!1);function k(){const e=async()=>{try{const e=localStorage.getItem("soc_role");if(!e)return!1;const a=await p.A.get(`/api/role-permissions/${e}`);return v.value=a.data.permissions||[],h.value=!0,!0}catch(e){return console.error("Error loading permissions:",e),v.value=[],h.value=!0,!1}},a=e=>{const a=localStorage.getItem("soc_role");if("superadmin"===a)return!0;if(!h.value)return!1;const t=v.value.find(a=>a.page_path===e);return!!t&&t.has_access},t=e=>a(e),l=()=>{const e=v.value.find(e=>e.has_access);return e?e.page_path:"/profile"};return{permissions:v,permissionsLoaded:h,loadPermissions:e,hasAccess:a,canAccessRoute:t,getFirstAccessibleRoute:l}}const g={class:"flex flex-column align-items-center w-full gap-3 border-bottom-1 surface-border p-3 mb-3 pb-0"},b={class:"row",style:{height:"100%"}},f={class:"flex align-items-center gap-3 mb-3 mt-3"},y={class:"flex align-items-center gap-3 mb-3"},w={class:"flex justify-content-end dialog-footer"},L={class:"col-3 col-sm-3 col-md-2 col-lg-2 col-xl-2 bg-light p-0 sidebar-column"},F={class:"p-4 sidebar-container",style:{height:"100%","padding-top":"0px !important"}},D={class:"datetime-section"},C={class:"datetime-display"},_={class:"nav-menu"},A={key:0,class:"nav-item ml-2 mt-2"},E={key:1,class:"nav-item ml-2 mt-2"},R={key:2,class:"nav-item ml-2 mt-2"},x={key:3,class:"nav-item ml-2 mt-2"},T={key:4,class:"nav-item ml-2 mt-2"},I={class:"nav-item ml-2",style:{width:"100%",color:"white","vertical-align":"bottom",display:"flex","justify-content":"center"}},U={class:"pt-1 pb-3 container-fluid h-100"},V={class:"main-content-wrapper"};var S={__name:"LayoutView",setup(e){const{loadPermissions:a,hasAccess:t}=k(),o=(0,d.KR)("center"),i=(0,d.KR)(!1),r=(0,d.KR)(!1),n=(0,d.KR)(!0),v=(0,d.KR)(window.innerWidth<=768),h=e=>{o.value=e,i.value=!0},S=()=>{n.value=!n.value},$=()=>{window.innerWidth<=768&&(n.value=!1)},X=()=>{v.value=window.innerWidth<=768},j=(0,s.EW)(()=>n.value?"col-9 col-sm-9 col-md-10 col-lg-10 col-xl-10":"col-12");var W=(0,d.KR)(),O=(0,d.KR)(),N=(0,d.KR)(),K=(0,d.KR)(),M=(0,d.KR)(),H=(0,d.KR)(),P=((0,d.KR)(),(0,d.KR)(new Date));const Q=(0,s.EW)(()=>P.value.toLocaleString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}));const q=()=>{z.value=300};(0,s.sV)(()=>{a(),ae(),window.addEventListener("mousemove",q),window.addEventListener("keydown",q),window.addEventListener("resize",X),W.value=localStorage.getItem("soc_user_id"),O.value=localStorage.getItem("soc_user"),K.value=localStorage.getItem("soc_role"),M.value=localStorage.getItem("soc_firstname")||"No data",H.value=localStorage.getItem("soc_lastname")||"No data",null!=O.value&&(N.value=B(O.value.charAt(0))),setInterval(()=>{P.value=new Date},1e3)}),(0,s.hi)(()=>{clearInterval(G),window.removeEventListener("mousemove",q),window.removeEventListener("keydown",q),window.removeEventListener("resize",X)});const Y=()=>{r.value=!0},z=(0,d.KR)(300);let G=null;const J=()=>{Y.value=!0},Z=()=>{localStorage.clear(),sessionStorage.clear(),window.location.href="/login"},ee=async()=>{try{await p.A.post("/api/auth/logout")}catch(e){console.error("Logout error:",e)}finally{localStorage.clear(),sessionStorage.clear(),window.location.href="/login"}},ae=()=>{G=setInterval(()=>{z.value--,z.value<=0&&(clearInterval(G),J())},2e3)};return(e,a)=>{const p=(0,s.g2)("Toast"),k=(0,s.g2)("ConfirmPopup"),X=(0,s.g2)("Button"),W=(0,s.g2)("Dialog"),B=(0,s.g2)("router-link"),O=(0,s.g2)("RouterView"),N=(0,s.g2)("ScrollPanel");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(p),(0,s.bF)((0,d.R1)(m.A),{draggable:!1}),(0,s.bF)(k,{group:"templating"},{message:(0,s.k6)(e=>[(0,s.Lk)("div",g,[(0,s.Lk)("i",{class:(0,c.C4)([e.message.icon,"text-6xl text-primary-500"])},null,2),(0,s.Lk)("p",null,(0,c.v_)(e.message.message),1)])]),_:1}),(0,s.bF)(W,{visible:r.value,"onUpdate:visible":a[0]||(a[0]=e=>r.value=e),header:"Session ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏!",modal:"",closable:!1,closeOnEscape:!1},{footer:(0,s.k6)(()=>[(0,s.bF)(X,{label:"OK",class:"p-button-danger",onClick:Z})]),default:(0,s.k6)(()=>[a[5]||(a[5]=(0,s.Lk)("div",{class:"flex align-items-center gap-2"},[(0,s.Lk)("i",{class:"pi pi-info-circle text-primary text-xl"}),(0,s.Lk)("span",null,"session ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ó‡πç‡∏≤‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á")],-1))]),_:1},8,["visible"]),(0,s.Lk)("div",{class:(0,c.C4)(["flex flex-column card",{"sidebar-hidden":!n.value}]),style:{height:"100vh",width:"100vw"}},[(0,s.Lk)("div",b,[(0,s.bF)(X,{onClick:S,class:"sidebar-toggle-btn",icon:n.value?"pi pi-chevron-left":"pi pi-chevron-right",severity:"secondary",text:"","v-tooltip":n.value?"‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π":"‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏ô‡∏π"},null,8,["icon","v-tooltip"]),(0,s.bF)(W,{visible:i.value,"onUpdate:visible":a[3]||(a[3]=e=>i.value=e),header:"Setting",style:(0,c.Tr)({width:v.value?"90vw":"400px",maxWidth:"90vw",bottom:"20px"}),position:o.value,modal:!0,draggable:!1},{default:(0,s.k6)(()=>[(0,s.Lk)("div",f,[(0,s.bF)(B,{to:"/profile",onClick:a[1]||(a[1]=e=>i.value=!1),class:"nav-link"},{default:(0,s.k6)(()=>[...a[6]||(a[6]=[(0,s.Lk)("h5",null,[(0,s.Lk)("i",{class:"pi pi-megaphone px-2",style:{"font-size":"1.5rem"}}),(0,s.eW)("Profile ")],-1)])]),_:1})]),(0,s.Lk)("div",y,[(0,s.bF)(B,{to:"/login",onClick:ee,class:"nav-link"},{default:(0,s.k6)(()=>[...a[7]||(a[7]=[(0,s.Lk)("h5",null,[(0,s.Lk)("i",{class:"pi pi-sign-out px-2",style:{"font-size":"1.2rem"}}),(0,s.eW)("Logout ")],-1)])]),_:1})]),(0,s.Lk)("div",w,[(0,s.bF)(X,{type:"button",label:"Cancel",severity:"danger",onClick:a[2]||(a[2]=e=>i.value=!1)})])]),_:1},8,["visible","style","position"]),(0,s.bo)((0,s.Lk)("div",L,[(0,s.Lk)("div",F,[a[15]||(a[15]=(0,s.Lk)("div",{class:"logo-section"},[(0,s.Lk)("img",{src:u,alt:"GENT Logo",style:{"max-width":"150px",height:"auto"}})],-1)),(0,s.Lk)("div",D,[(0,s.Lk)("div",C,[a[8]||(a[8]=(0,s.Lk)("i",{class:"pi pi-calendar"},null,-1)),(0,s.Lk)("span",null,(0,c.v_)(Q.value),1)])]),(0,s.Lk)("ul",_,[(0,d.R1)(t)("/car_booking")?((0,s.uX)(),(0,s.CE)("li",A,[(0,s.bF)(B,{to:"/car_booking",onClick:$,class:"nav-link","active-class":"active"},{default:(0,s.k6)(()=>[...a[9]||(a[9]=[(0,s.Lk)("h5",{class:"mt-2"},[(0,s.Lk)("i",{class:"pi pi-car px-2",style:{"font-size":"1.5rem"}}),(0,s.eW)("‡πÄ‡πÄ‡∏à‡πâ‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏ñ ")],-1)])]),_:1})])):(0,s.Q3)("",!0),(0,d.R1)(t)("/leave_work")?((0,s.uX)(),(0,s.CE)("li",E,[(0,s.bF)(B,{to:"/leave_work",onClick:$,class:"nav-link","active-class":"active"},{default:(0,s.k6)(()=>[...a[10]||(a[10]=[(0,s.Lk)("h5",{class:"mt-2"},[(0,s.Lk)("i",{class:"pi pi-sign-out px-2",style:{"font-size":"1.5rem"}}),(0,s.eW)("‡∏•‡∏≤‡∏á‡∏≤‡∏ô ")],-1)])]),_:1})])):(0,s.Q3)("",!0),(0,d.R1)(t)("/daily_work")?((0,s.uX)(),(0,s.CE)("li",R,[(0,s.bF)(B,{to:"/daily_work",onClick:$,class:"nav-link","active-class":"active"},{default:(0,s.k6)(()=>[...a[11]||(a[11]=[(0,s.Lk)("h5",{class:"mt-2"},[(0,s.Lk)("i",{class:"pi pi-calendar px-2",style:{"font-size":"1.5rem"}}),(0,s.eW)("‡∏•‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô ")],-1)])]),_:1})])):(0,s.Q3)("",!0),(0,d.R1)(t)("/projects")?((0,s.uX)(),(0,s.CE)("li",x,[(0,s.bF)(B,{to:"/projects",onClick:$,class:"nav-link","active-class":"active"},{default:(0,s.k6)(()=>[...a[12]||(a[12]=[(0,s.Lk)("h5",{class:"mt-2"},[(0,s.Lk)("i",{class:"pi pi-briefcase px-2",style:{"font-size":"1.5rem"}}),(0,s.eW)("‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ ")],-1)])]),_:1})])):(0,s.Q3)("",!0),(0,d.R1)(t)("/management")?((0,s.uX)(),(0,s.CE)("li",T,[(0,s.bF)(B,{to:"/management",onClick:$,class:"nav-link","active-class":"active"},{default:(0,s.k6)(()=>[...a[13]||(a[13]=[(0,s.Lk)("h5",{class:"mt-2"},[(0,s.Lk)("i",{class:"pi pi-cog px-2",style:{"font-size":"1.5rem"}}),(0,s.eW)("‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö ")],-1)])]),_:1})])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",I,[(0,s.bF)(X,{onClick:a[4]||(a[4]=e=>h("bottom")),style:{width:"80%","min-width":"8rem",color:"white",background:"linear-gradient(135deg, #4A90E2, #D73527)",border:"none","border-radius":"8px","box-shadow":"0 2px 8px rgba(74, 144, 226, 0.3)",transition:"all 0.3s ease",display:"flex","align-items":"center","justify-content":"center",padding:"8px 16px"},class:"setting-button"},{default:(0,s.k6)(()=>[...a[14]||(a[14]=[(0,s.Lk)("h5",{style:{margin:"0",display:"flex","align-items":"center","justify-content":"center"}},[(0,s.Lk)("i",{class:"pi pi-cog px-2",style:{"font-size":"1.2rem"}}),(0,s.eW)("Setting ")],-1)])]),_:1})])])],512),[[l.aG,n.value]]),(0,s.Lk)("div",{class:(0,c.C4)(j.value),style:{height:"100%"}},[(0,s.Lk)("div",U,[(0,s.Lk)("div",V,[(0,s.bF)(N,{style:{width:"100%",height:"calc(100vh)","padding-right":"2rem","padding-bottom":"2rem"}},{default:(0,s.k6)(()=>[(0,s.bF)(O)]),_:1})])])],2)])],2)],64)}}},$=t(6262);const X=(0,$.A)(S,[["__scopeId","data-v-4582594a"]]);var j=X,W={name:"App",components:{LayoutView:j}};function B(e){var a="";return null!=e?(a=e.toUpperCase(),a):null}(0,d.KR)(!0);const O=(0,$.A)(W,[["render",n]]);var N=O,K=t(5499),M=t(4842),H=t(9225),P=t(3847),Q=t(8437),q=t(3080);const Y={class:""},z={class:"row bg-card justify-content-center"},G={class:"col-11 col-sm-8 col-md-6 col-xl-3 justify-content-center"},J={class:"card-body-1"},Z={class:"card-body-2"},ee={class:"mt-3 pt-3"},ae={class:"mt-3 pt-3"},te={style:{"text-align":"center"}},le={class:"mt-3"},se={class:"dialog-body"},oe={class:"input-wrapper"},ie={class:"dialog-footer"};var re={__name:"LoginPage",setup(e){const a=(0,q.d)();var t=!1,o=!1,i=(0,d.KR)(""),r=(0,d.KR)(""),n=(0,d.KR)(!1),m=(0,d.KR)(""),v=(0,d.KR)(!1),h=(0,d.KR)(!1),k=(0,d.KR)(""),g=(0,d.KR)("");(0,s.sV)(()=>{});const b=()=>{n.value=!0},f=()=>{n.value=!1,m.value=""},y=async()=>{if(m.value){v.value=!0;try{const e=await p.A.post("/api/auth/forgot-password",{email:m.value});if(e.data.fallback){const t=e.data.userData;a.add({severity:"warn",summary:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏î‡πâ",detail:`Username: ${t.username}\n‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô: ${t.password}\n(‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏á)`,life:15e3})}else a.add({severity:"success",summary:"‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß",life:5e3});f()}catch(e){let t="‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î";t=404===e.response?.status?"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö":e.response?.data?.error||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ",a.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:t,life:5e3})}finally{v.value=!1}}else a.add({severity:"warn",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•",life:3e3})};function w(){L(i.value,r.value)}function L(e,t){h.value=!0,k.value="",g.value="";var l={username:e,password:t};p.A.post("/api/auth/login",l).then(function(e){k.value="pi pi-check",g.value="login-success",localStorage.removeItem("soc_token"),localStorage.removeItem("soc_user"),localStorage.removeItem("soc_role"),localStorage.removeItem("soc_user_id"),localStorage.removeItem("soc_firstname"),localStorage.removeItem("soc_lastname"),localStorage.setItem("soc_user",e.data.username),localStorage.setItem("soc_token",e.data.access_token),localStorage.setItem("soc_role",e.data.role),localStorage.setItem("soc_position",e.data.position),localStorage.setItem("soc_firstname",e.data.firstname),localStorage.setItem("soc_lastname",e.data.lastname),localStorage.setItem("soc_user_id",e.data.user),setTimeout(()=>{bu.push("/daily_work")},800)}).catch(function(e){k.value="pi pi-times",g.value="login-error",setTimeout(()=>{h.value=!1,k.value="",g.value=""},1500),"Network Error"==e.message?a.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ",life:3e3}):e.message.includes("timeout")?a.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠",life:3e3}):a.add({severity:"error",summary:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",life:3e3})})}return(e,a)=>{const p=(0,s.g2)("Toast"),L=(0,s.g2)("Button"),F=(0,s.g2)("Dialog");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(p),(0,s.Lk)("div",Y,[(0,s.Lk)("div",z,[(0,s.Lk)("div",G,[(0,s.Lk)("div",J,[a[7]||(a[7]=(0,s.Lk)("div",{class:"text-center mb-3"},[(0,s.Lk)("img",{src:u,alt:"GENT Logo",style:{"max-width":"200px",height:"auto"}})],-1)),a[8]||(a[8]=(0,s.Lk)("div",{class:""},[(0,s.Lk)("h3",{class:"text-center text-white"},"GenT Customer Excellency Management")],-1)),(0,s.Lk)("div",Z,[(0,s.Lk)("form",{onSubmit:(0,l.D$)(w,["prevent"])},[(0,s.Lk)("div",ee,[(0,s.bF)((0,d.R1)(P.A),null,{default:(0,s.k6)(()=>[(0,s.bF)((0,d.R1)(Q.A),null,{default:(0,s.k6)(()=>[...a[4]||(a[4]=[(0,s.Lk)("i",{class:"pi pi-user"},null,-1)])]),_:1}),(0,s.bF)((0,d.R1)(M.A),{type:"text",class:"w-100",id:"username",modelValue:(0,d.R1)(i),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,d.i9)(i)?i.value=e:i=e),invalid:(0,d.R1)(t),placeholder:"Username"},null,8,["modelValue","invalid"])]),_:1})]),(0,s.Lk)("div",ae,[(0,s.bF)((0,d.R1)(P.A),null,{default:(0,s.k6)(()=>[(0,s.bF)((0,d.R1)(Q.A),null,{default:(0,s.k6)(()=>[...a[5]||(a[5]=[(0,s.Lk)("i",{class:"pi pi-key"},null,-1)])]),_:1}),(0,s.bF)((0,d.R1)(H.A),{modelValue:(0,d.R1)(r),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,d.i9)(r)?r.value=e:r=e),feedback:!1,id:"password","toggle-mask":"",invalid:(0,d.R1)(o),placeholder:"Password",class:"w-100"},null,8,["modelValue","invalid"])]),_:1})]),(0,s.Lk)("div",te,[(0,s.bF)(L,{type:"submit",label:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö",icon:(0,d.R1)(k),loading:(0,d.R1)(h),class:(0,c.C4)(["login-btn w-100 mt-4",(0,d.R1)(g)])},null,8,["icon","loading","class"]),(0,s.Lk)("div",le,[(0,s.Lk)("a",{href:"#",onClick:(0,l.D$)(b,["prevent"]),class:"text-white text-decoration-none"},[...a[6]||(a[6]=[(0,s.Lk)("i",{class:"pi pi-question-circle me-1"},null,-1),(0,s.eW)(" ‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô? ",-1)])])])])],32)])])])])]),(0,s.bF)(F,{visible:(0,d.R1)(n),"onUpdate:visible":a[3]||(a[3]=e=>(0,d.i9)(n)?n.value=e:n=e),header:"",style:{width:"400px",maxWidth:"90vw"},modal:"",draggable:!1,position:"center",class:"forgot-password-dialog"},{header:(0,s.k6)(()=>[...a[9]||(a[9]=[(0,s.Lk)("div",{class:"dialog-header"},[(0,s.Lk)("div",{class:"header-icon"},[(0,s.Lk)("i",{class:"pi pi-key"})]),(0,s.Lk)("h3",null,"‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô")],-1)])]),footer:(0,s.k6)(()=>[(0,s.Lk)("div",ie,[(0,s.bF)(L,{label:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",class:"p-button-outlined p-button-secondary cancel-btn",onClick:f}),(0,s.bF)(L,{label:"‡∏™‡πà‡∏á",icon:"pi pi-send",class:"send-btn",onClick:y,loading:(0,d.R1)(v),disabled:!(0,d.R1)(m)},null,8,["loading","disabled"])])]),default:(0,s.k6)(()=>[(0,s.Lk)("div",se,[(0,s.Lk)("div",oe,[a[10]||(a[10]=(0,s.Lk)("div",{class:"input-icon"},[(0,s.Lk)("i",{class:"pi pi-envelope"})],-1)),(0,s.bF)((0,d.R1)(M.A),{id:"forgot-email",modelValue:(0,d.R1)(m),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,d.i9)(m)?m.value=e:m=e),placeholder:"‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì",class:"w-full email-input",type:"email"},null,8,["modelValue"])]),a[11]||(a[11]=(0,s.Lk)("div",{class:"info-text"},[(0,s.Lk)("i",{class:"pi pi-info-circle"}),(0,s.Lk)("span",null,"‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡πà‡∏á Username ‡πÅ‡∏•‡∏∞ Password ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì")],-1))])]),_:1},8,["visible"])],64)}}};const ne=re;var de=ne,ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZwAAAIACAMAAACB0yquAAAAqFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAs30iGAAAAN3RSTlMAZNqXSMZxbP2v+eDQywL25dbD7fG/CzwjEAcUMpAZYEKCWwSn6aIniFctHbqdfVK1TpR4OKzcsRlcMgAADo1JREFUeNrt3elao0oUheEVzUBIAomZyTzPgxrd939n5+n2se0+ZiCKYUOt9wL44RewoKgCV6i1e4NpNV+s2JZEj+2W71LZTjrZRdy0Fk95S+Kh+JJuIzYa24Il8VLcJEeIvmYmL7E06SwRbbN7V+LrYecgspYvlsTbXS+ieVZjS+Kv9IjoqQ1cMcN6hojp34kx7K2HCKk9WWKS/AyRsSyJYdwEImJREfNMa4iCgSUmKnShnjcWQ+WWUK62F2OV28rbVMVglQMU89YiIjx3NHKyYrjJDFp1xHivLeiUYRuRlAeNDjbTiMgTFGoVGea3IfR5YZY3lQa06bHKuwcHunTLjPJHhhc1vSoraNJnkb9NoYiTZ5C/WQfoMWSPf1WhxuiOOf6nzxOHp85l/I/zWZtDNQ7YLhkzxWduCxq0+DT6mDQ0SDDEMQVoUGWIY6wGwteyGOKoZ97k8FbnnCkzHGfXEDrOTp+SRNgajHDKAGFbMMIpa4RtzginFBG2PSOc1ELIOJVzWh3hcvhgTe/rhV0mOG2LcLWZ4LQOJ9r0GiNcOyY4bc/HnrwL5fvrX/DAaVC9UozDOIzDOIzDOIxDjMM4jMM4jMM4jEOMwziME4c4lXujPaiOcwejZRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcRiHcX7r1v+xZBxiHMYhxmEcYhxiHMYhxmEcYhxiHMYhxmEcYhxiHMYhxmEcYhxiHMYhxmEcYhxiHMa5vVUyMd9kH/Kl19wpr3dHlD7Lf1I4InXEwznVN+v9+GmQ6DccM+I0H+fVskSNW9gkZjGPM9s+2BJZk+mwGdc43ee8RJ29X3gxjNPP2hIL5U4jXnGcYV7iw3o5xCjOoiQxs2/HJM4hJfFjTbsxiNO8tySWKmkn6nEeixJbhWWk49SeLIkxO+1EN84sLzG3b0Y1zmNFYu91Gc04aUsMUElGMU5HzGAnIhfH2YgprHTE4jhTMchztOI8iVHSUYozELNYw+jE6Ylp7H5U4tRtMU65EY043aIYKF+LQhynKkbaRCHOsxhqoT/O0hZDlbva4zgFMVZWe5y0GGynO06rLAbL1VTHuRejbTXHadhitEpLcZypGG6uN07DEsNVmsfjcKJAg63WOE2XcYre0Ti8x1FhoTROnmlE1jrjtFlGRKyVyjhzlvklrTLOK8P8UtAYZ8kuv1ndI3E4yaZET2GcNbO8GeuL41SY5U3xSBwOpLVYqYuTYJR3u89x+NBTi4G6OFVGeZdVF6fIKO9K2uJ4FqO8c7XFabDJh5ayOAcm+bBUFueRST7UP8Xheik1Hj/F4T2oGgtlcTJM8qH3KQ5f7lAjwTiMwziMwziMwzjEOIzDOIzDOIzDOMQ4jMM4jMM4jMM4xDiMc7s4k9Q6uy6U5VuKqf23D2L9Pki+wjhvyve7Ft50F5vKF8N0Hpt4sxpOv3yQZBNvGr2xyzj5hYe/1XoluVrqcYS/1RKvcrVq0sHfmpmi2XGKC3ziJMpyldwjPhmlK3KVuyQ+8Z5dg+O8NHFMay1X2NRwzOpBrvDk4ZhGwdQ41jNOcObil5XACaN78cse4gRvbGYcqxfA2mx7F8AnFewkTnKejIyTxjlzn4ED2NXS2uEMZ2xgnA3Oy4oP8yB2h9/iLK9gXJxSDec1i3JRYYTzumW5qOrgvIZrWpw+LlnIJVY7gBfs7RkueTYsThaXpeSCKS5ySnJBBxd5ObPiHAJYkGXNcNlQzrNXuCxjVJwCfHByctYaPnhlOesFPtRck+Jkgvj0Wy+I3Sse4cfYpDgN+FGXc6xWAKtV7Rr8GBoUpwhfRq6cUYIvTUvOeIAvK4PirIPYb3ccxPaW9/CnbE6cDvD9S/0giF360vCnYE6cQRBffEkHUbgHf/bmxEkHsRtyAv5s5Iwd/HkxJ842iM/2Z4L4bswQ/mTNiTMP4kf/DH+yQRSumhNnDH+qQQy08kH8THLmxMkHscNeFb44rpyRhS81y5w4VjOATdxcL4BteyfwpS/mxJHHIHY76gexU3wbfsxNijMO4r/wPfzIBzE2eTUpjtsM4Pt85VoAm5EXR7isb9Zk2yCIL8Kmg3jY38Nle7PilFsBfBG22MQlS0suePVwSV3MiiPTIH6uHVzgpAI4iUd50+LILoB5eysZwHsz9gHnzcW4OOUZzjm44sNkhXP6tviQ6+KcnWVeHMmtcNqsLL6UWjitXRFf8k2cVnfFwDiSm+GU9kR8Kp1OXC+LT/kuTkm6YmQcmSRx3KIivhX7OC7him+5A45L22JoHLGemvisNZVrWPMaPuu+yDXsrYfPGnuj14QWMzX8q/ZclivlEh7+1dxW5Ep3vRH+1Zq7pq+mnnTaDt459afylxrPl/hjVP/amuzcYIY/vP7U5VJ3ESln54nF4zAx31fkyybZwa+DZDrrbxyk+DLo/T5I1eU+BNzBg3EYhxiHcRiHcRiHcRiHGIdxGIdxGIdxGIdJGIdxGIdxGIdxGIdxGIdxGIdxGIdxGIdxGIdxGIdxGOdmMkzyoacsToJJPiyUxRkyyYdHZXGSTPKhrixOm0k+zJTFWTHJh5ayOI7NJu8qUBYHd4zyLq8uTpZR3r2oizNglHdbdXEWjPJudyQOh2tKdNXFQZFV3uSgL86YWd5MFcbpMcubocI4XYtdfrFaCuMgxTC/POB4HE6GKpA5GofXNQ2srso42DONyB464+yYRmSnNM4oxza50Yk4HBKELw2tcZplMVy5qTYOtpwt0BunNuGJcy4OX/wMURqa44xKYrDSSHUc9C0xVxK642AjxppCe5xmUQw1aZ2LwwtbmKwk9MfBXIz0hCjEGVXFQCkvEnHQyolxJitEIw6WFTGMe0BU4qBvi1GsHaITBzvbqDY9RCkOFrZBbTK4HIfnTiisBKIWB8mKGMFeIHpx0C6KAcp1RDEOuimJvXwD0YwDr2NJvI1riGocIDmRGKv0gAjHQWsssVVtINpxgMecxFK5B0Q+DmrbisSO3WkiDnGAVseVWLGmMyAmcYDuoCyx4W5mQIziALVEQWIht+0CV8dRbzl/lYgrb/oOEEAcjdrbB1uiqtRJegACiKOWV09P81ErNKl2dl0ACCCOes6qvshs5537KxQlCNXsNcabp0F6127ijYI4OnkVCcALvoRxbrDFa77GOFpfwp40wDg/YFSWb7PrYBylVzVrCMbRelUbgHG0jtU2YJyf8SjftR4xzg95kW9K1cA4P6Nly/eUWmAcpUvoX1dgnJ9SkG/JNcA4Sj8AU5yBcX7M5rttGOfHNN1vtmEcpfu45RpgHKU7IN6twDhKv6SY74JxflJevuyhCcZROlmQrYFxlN6APjlgHJ27VVtpgHF07n1YeQTjKP0ieW4JxvlhzYl8SbUFxvlpHfmSzgiM89PalnxBZQEwzk8b5eULSjMwjtLP9t7XwDg/r27L1coLgHF0bkdZXYFxbmC0lmu5aQeMo3MUXZgBjKNyFsd9HoFxdO7hWm0AjHMT7YpcZdIDGOc2GhO5hvXUBOPcSKMo10i1Aca5kUZOrlAcAoyjsk3luQbGuZllUXyzOy2AcW6mXvafZrMCGOd2kq74ZE0bAONofBBtbxoA49xSLSe+uJ0VwDga1xNMti2AcW4tJZflex7AODfn2HKBO64DYJwQ1OS8UroFMI7CM8ed1gEwjr4VBda61wQYR+ForZDuAmAcdfc5VuF5BoBxwld3/y3zkF4BYBwd+hN5Vx73ugAYR4/WfPL7YjY4OAAYRxlnVj80AYBxiHEYhxiHGIdxiHEYhxgnApKMo5U3TTGOUt2UMI5Sh6IwjlJDVxhHJ2cuwjg6NffCOErNSsI4SiUrwjhKpS1hHJ28qQjj6NQtCOPoXeXLOFplhHEYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3EYh3H+KCaNdq8tDv2FcRiHcRiHcRiHcYhxGIdxGIdxGIdxiHEYh3EYh3EYh3GIcU7KZefp3jCznRZsxlEVJ5Vp4I/m49hlHCVxrPES/9PcThhHQ5xUG0c0OxbjSMjsZwfHHXKmx+lJuMp9nNSsSrgeEK6hhGqyxBm1rIRqjXDtJEyVNs7yqhKmPcLVlxBZfVxQK0mIxghXW0I0wEVLV8LTQbi6Ep7SCJc9S3i2CJdjS2j68MG7k9AMEbI7Ccta/XiyjpDtdZ84wCgnYWkhZHMJySt8GkhIigjbQulQ7UPD1HtQoKH/gv6q4OcTkqKEwvXg10bC0UfoxhKKPHzLSCjsGkI3VP9oJCmhqCJ8LUvC8KT+EVMaClQlDHPtYxarAQUyEoaB9jgFaNCyJQQd7Ze1DFQYKx8Q9CUEbhMq9CUEBeXX3SmUyMvtuSP4dS8haEOJnoTgAL9KBt7kfBi9ap5mXCl4dGPaqVOCT89GnziAk9f7WNopyc1ZByjS1/tW2M7UodqHFwU/TzUndaULVbplubmCo/QmJwFlEnJ7z7ioUZGbqzrQJis3Z9dxgZeXmyuvoE6rKDc3meEs50VubwGF6rbcXK5xts1Gx+NyUyd2Jm1ly3MeRtCpI7fnZnDCsiS3d9eCUk5WQrBu4Ahv64qCf4KKeGsJgf20wv94iVcJQbkNxWpVCYOdXTTxh3PoTCQMlQNUq+0lHFbhPj18TC4S831FRHjeHONNxVC5JfQbWGKiQhdRsKuIeaY1RMMsL4ZxM4gMr2OJSfJLREn/ToxhDzxEizdwxQzVJaJnNbYk/u52iKblixX3NL0RImt270p8pXYOIq2ZyUsslZ+WiIHZtmBJvBQ3yRHiojV8yltxCfOSbiNuau3eYFrNTyp2FDPZbvkule2kk93I/MH/AyXWCEIIWT5tAAAAAElFTkSuQmCC";const ue={class:"",style:{"margin-top":"calc(5vh)"}},pe={class:"row justify-content-center"},me={class:"col-12 justify-content-center"},ve={key:0},he={class:"row justify-content-center"},ke={class:"col-2 justify-content-center",style:{"text-align":"center"}},ge=["src"],be={class:"row justify-content-center mt-5"},fe={class:"col-4"},ye={class:"row justify-content-center mt-5"},we={class:"col-4"},Le={key:1},Fe={class:"row justify-content-center mt-5"},De={class:"col-4 justify-content-center text-center"};var Ce={__name:"TwoFAAuthPage",setup(e){const a=(0,q.d)();var t=(0,d.KR)(localStorage.getItem("two-authentication")),o=(0,d.KR)(""),i=(0,d.KR)(localStorage.getItem("twofa")),r=(0,d.KR)(localStorage.getItem("secret"));function n(){u(o.value)}function u(e){localStorage.getItem("soc_user_id");var t="/auth/verifyotp",l={totp:e,userId:localStorage.getItem("soc_user_id")};p.A.post(t,l).then(function(e){localStorage.removeItem("two-authentication"),200==e.data.status?bu.push("/dashboard"):a.add({severity:"error",summary:"Fail",detail:"code incorrect.",life:3e3})}).catch(function(e){"Network Error"==e.message?a.add({severity:"error",summary:"Fail",detail:e.message,life:3e3}):e.message.includes("timeout")?a.add({severity:"error",summary:"Fail",detail:"Timeout",life:3e3}):a.add({severity:"error",summary:"Fail",detail:"code incorrect.",life:3e3})})}return(0,s.sV)(()=>{}),(e,a)=>{const u=(0,s.g2)("Toast");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(u),(0,s.Lk)("div",ue,[(0,s.Lk)("div",pe,[(0,s.Lk)("div",me,[a[9]||(a[9]=(0,s.Lk)("h2",{class:"text-center"},"‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô 2 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô",-1)),a[10]||(a[10]=(0,s.Lk)("h3",{class:"text-center"},"‡πÇ‡∏õ‡∏£‡∏î‡πÉ‡∏ä‡πâ‡πÅ‡∏≠‡∏û Microsoft Authenticator ‡∏´‡∏£‡∏∑‡∏≠ Google Authenticator ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏Å‡∏±‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì",-1)),null!==(0,d.R1)(i)&&0==(0,d.R1)(i)?((0,s.uX)(),(0,s.CE)("div",ve,[a[5]||(a[5]=(0,s.Lk)("div",{class:"row justify-content-center mt-5"},[(0,s.Lk)("div",{class:"col-4"},[(0,s.Lk)("h4",null,[(0,s.Lk)("b",null,"‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Authenticator ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ")]),(0,s.Lk)("h5",null,"‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏≠‡∏û ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÅ‡∏•‡∏∞‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ")])],-1)),(0,s.Lk)("div",he,[(0,s.Lk)("div",ke,[(0,s.Lk)("img",{class:"justify-content-center",src:(0,d.R1)(t),style:{width:"70%",height:"auto"}},null,8,ge)])]),(0,s.Lk)("div",be,[(0,s.Lk)("div",fe,[a[2]||(a[2]=(0,s.Lk)("h5",null,"‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏≠‡∏û ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å key ‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏Å key ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ",-1)),(0,s.Lk)("h5",null,"Key: "+(0,c.v_)((0,d.R1)(r)),1)])]),(0,s.Lk)("form",{onSubmit:(0,l.D$)(n,["prevent"])},[(0,s.Lk)("div",ye,[(0,s.Lk)("div",we,[a[3]||(a[3]=(0,s.Lk)("h4",null,[(0,s.Lk)("b",null,"‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å Authenticator ‡πÉ‡∏™‡πà‡∏•‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á")],-1)),(0,s.bF)((0,d.R1)(M.A),{modelValue:(0,d.R1)(o),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,d.i9)(o)?o.value=e:o=e),feedback:!1,id:"password","toggle-mask":"",placeholder:"Authentication code"},null,8,["modelValue"]),a[4]||(a[4]=(0,s.Lk)("div",{class:"row"},[(0,s.Lk)("div",{class:"col-4"},[(0,s.Lk)("button",{type:"submit",class:"btn btn-primary btn-block mt-3"},"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô")])],-1))])])],32)])):(0,s.Q3)("",!0),null!==(0,d.R1)(i)&&1==(0,d.R1)(i)?((0,s.uX)(),(0,s.CE)("div",Le,[(0,s.Lk)("form",{onSubmit:(0,l.D$)(n,["prevent"])},[(0,s.Lk)("div",Fe,[(0,s.Lk)("div",De,[a[6]||(a[6]=(0,s.Lk)("img",{src:ce,style:{height:"200px","margin-left":"50px"}},null,-1)),a[7]||(a[7]=(0,s.Lk)("h4",{class:"text-center mt-5"},[(0,s.Lk)("b",null,"‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å Authenticator ‡πÉ‡∏™‡πà‡∏•‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á")],-1)),(0,s.bF)((0,d.R1)(M.A),{modelValue:(0,d.R1)(o),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,d.i9)(o)?o.value=e:o=e),feedback:!1,id:"password","toggle-mask":"",placeholder:"Authentication code"},null,8,["modelValue"]),a[8]||(a[8]=(0,s.Lk)("div",{class:"row justify-content-center"},[(0,s.Lk)("div",{class:"col-4 justify-content-center"},[(0,s.Lk)("button",{type:"submit",class:"btn btn-primary btn-block mt-3"},"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô")])],-1))])])],32)])):(0,s.Q3)("",!0)])])])],64)}}};const _e=Ce;var Ae=_e,Ee=t(2689),Re=t(7226),xe=t(5094);const Te={class:"flex flex-column"},Ie={class:"row mt-4"},Ue={class:"col-5 mt-2 pt-2"},Ve={class:"col-5 mt-2 pt-2"},Se={class:"col-5 mt-2 pt-2"},$e={class:"col-5 mt-2 pt-2"},Xe={class:"col-5 mt-2 pt-2"},je={class:"col-5 mt-2 pt-2"},We={class:"col-5 mt-2 pt-2"},Be={class:"flex flex-column"},Oe={class:"row"},Ne={class:"col-12 mt-3"},Ke={class:"row"},Me={class:"col-12 col-md-4 mt-2"},He={class:"col-12 col-md-4 mt-2"},Pe={class:"col-12 col-md-4 mt-2"},Qe={class:"mt-4"};var qe={__name:"ProfileView",setup(e){const a=(0,K.rd)(),t=(0,q.d)(),o=(0,xe.S)(),i=(0,d.KR)(!1),r=(0,s.EW)(()=>b.value&&f.value&&y.value&&f.value===y.value&&f.value.length>=6);(0,s.sV)(()=>{F()});const n=(0,d.KR)([]);var u=(0,d.KR)(),p=(0,d.KR)(),m=(0,d.KR)(),v=(0,d.KR)(),h=(0,d.KR)(),k=(0,d.KR)(),g=(0,d.KR)(),b=(0,d.KR)(""),f=(0,d.KR)(),y=(0,d.KR)(""),w=(0,d.KR)(),L=(0,d.KR)();function F(){const e=localStorage.getItem("soc_user_id");if(!e)return t.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà",life:3e3}),void a.push("/login");i.value=!0,window.axios.get("/api/users").then(a=>{const l=a.data,s=l.find(a=>a.id==e);if(!s)return t.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ",life:3e3}),void(i.value=!1);p.value=s.username,m.value=s.email,v.value=s.firstname,h.value=s.lastname,k.value=s.employee_id,g.value={name:s.role},w.value=s.position,L.value=s.department,u.value=s.id,i.value=!1}).catch(e=>{console.error("Error fetching user data:",e),t.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ",life:3e3}),i.value=!1})}function D(){const e={username:p.value,firstname:v.value,lastname:h.value,email:m.value,employee_id:k.value||null,position:w.value||null,department:L.value||null,role:g.value?.name||"user"};window.axios.put(`/api/users/${u.value}`,e,{headers:{}}).then(()=>{t.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3}),localStorage.setItem("soc_firstname",v.value),localStorage.setItem("soc_lastname",h.value),localStorage.setItem("soc_position",w.value),localStorage.setItem("soc_department",L.value)}).catch(e=>{t.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:e.response?.data?.error||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ",life:3e3})})}function C(){o.require({message:"‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?",header:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô",icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",acceptLabel:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",accept:()=>{_()}})}function _(){if(b.value)if(!f.value||f.value.length<6)t.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£",life:3e3});else if(f.value===y.value){var e={currentPassword:b.value,password:f.value};window.axios.put(`/api/users/${u.value}/password`,e,{headers:{}}).then(e=>{b.value="",f.value="",y.value="",t.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3})}).catch(e=>{const a=e.response?.data?.error||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ";t.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:a,life:3e3})})}else t.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô",life:3e3});else t.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô",life:3e3})}return(e,a)=>{const t=(0,s.g2)("Divider"),o=(0,s.g2)("Button");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)((0,d.R1)(Re.A)),(0,s.bF)(l.F,{name:"p-message",tag:"div"},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.value,e=>((0,s.uX)(),(0,s.Wv)((0,d.R1)(Ee.A),{key:e.id,severity:e.severity},{default:(0,s.k6)(()=>[(0,s.eW)((0,c.v_)(e.content),1)]),_:2},1032,["severity"]))),128))]),_:1}),(0,s.Lk)("form",{onSubmit:(0,l.D$)(D,["prevent"])},[(0,s.Lk)("div",Te,[(0,s.Lk)("div",Ie,[a[17]||(a[17]=(0,s.Lk)("h5",{class:"col-12"}," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß ",-1)),(0,s.Lk)("div",Ue,[a[10]||(a[10]=(0,s.Lk)("label",{for:"username"},"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ",-1)),(0,s.bF)((0,d.R1)(M.A),{class:"w-100",type:"text",id:"username",modelValue:(0,d.R1)(p),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,d.i9)(p)?p.value=e:p=e)},null,8,["modelValue"])]),(0,s.Lk)("div",Ve,[a[11]||(a[11]=(0,s.Lk)("label",{for:"firstName"},[(0,s.eW)("‡∏ä‡∏∑‡πà‡∏≠ "),(0,s.Lk)("span",{class:"required"},"*")],-1)),(0,s.bF)((0,d.R1)(M.A),{class:"w-100",type:"text",id:"firstName",modelValue:(0,d.R1)(v),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,d.i9)(v)?v.value=e:v=e),required:""},null,8,["modelValue"])]),(0,s.Lk)("div",Se,[a[12]||(a[12]=(0,s.Lk)("label",{for:"lastName"},[(0,s.eW)("‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• "),(0,s.Lk)("span",{class:"required"},"*")],-1)),(0,s.bF)((0,d.R1)(M.A),{class:"w-100",type:"text",id:"lastName",modelValue:(0,d.R1)(h),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,d.i9)(h)?h.value=e:h=e),required:""},null,8,["modelValue"])]),(0,s.Lk)("div",$e,[a[13]||(a[13]=(0,s.Lk)("label",{for:"email"},[(0,s.eW)("Email "),(0,s.Lk)("span",{class:"required"},"*")],-1)),(0,s.bF)((0,d.R1)(M.A),{class:"w-100",type:"email",id:"email",modelValue:(0,d.R1)(m),"onUpdate:modelValue":a[3]||(a[3]=e=>(0,d.i9)(m)?m.value=e:m=e),required:""},null,8,["modelValue"])]),(0,s.Lk)("div",Xe,[a[14]||(a[14]=(0,s.Lk)("label",{for:"employeeId"},"‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô",-1)),(0,s.bF)((0,d.R1)(M.A),{class:"w-100",type:"text",id:"employeeId",modelValue:(0,d.R1)(k),"onUpdate:modelValue":a[4]||(a[4]=e=>(0,d.i9)(k)?k.value=e:k=e),disabled:""},null,8,["modelValue"])]),(0,s.Lk)("div",je,[a[15]||(a[15]=(0,s.Lk)("label",{for:"position"},"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",-1)),(0,s.bF)((0,d.R1)(M.A),{class:"w-100",type:"text",id:"position",modelValue:(0,d.R1)(w),"onUpdate:modelValue":a[5]||(a[5]=e=>(0,d.i9)(w)?w.value=e:w=e),disabled:""},null,8,["modelValue"])]),(0,s.Lk)("div",We,[a[16]||(a[16]=(0,s.Lk)("label",{for:"department"},"‡πÅ‡∏ú‡∏ô‡∏Å",-1)),(0,s.bF)((0,d.R1)(M.A),{class:"w-100",type:"text",id:"department",modelValue:(0,d.R1)(L),"onUpdate:modelValue":a[6]||(a[6]=e=>(0,d.i9)(L)?L.value=e:L=e),disabled:""},null,8,["modelValue"])])]),a[18]||(a[18]=(0,s.Lk)("div",{class:"row"},[(0,s.Lk)("div",{class:"col-1 ml-8"},[(0,s.Lk)("button",{type:"submit",class:"btn btn-success btn-block mt-4"},"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å")])],-1))])],32),(0,s.bF)(t,{class:"mt-3 pt-3"}),(0,s.Lk)("form",null,[(0,s.Lk)("div",Be,[(0,s.Lk)("div",Oe,[a[22]||(a[22]=(0,s.Lk)("h5",{class:"col-12"}," ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô ",-1)),(0,s.Lk)("div",Ne,[(0,s.Lk)("div",Ke,[(0,s.Lk)("div",Me,[a[19]||(a[19]=(0,s.Lk)("label",{for:"currentPassword"},"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô",-1)),(0,s.bF)((0,d.R1)(H.A),{class:"w-100",id:"currentPassword",modelValue:(0,d.R1)(b),"onUpdate:modelValue":a[7]||(a[7]=e=>(0,d.i9)(b)?b.value=e:b=e),"toggle-mask":"",feedback:!1,placeholder:"‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô"},null,8,["modelValue"])]),(0,s.Lk)("div",He,[a[20]||(a[20]=(0,s.Lk)("label",{for:"newPassword"},"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà",-1)),(0,s.bF)((0,d.R1)(H.A),{class:"w-100",id:"newPassword",modelValue:(0,d.R1)(f),"onUpdate:modelValue":a[8]||(a[8]=e=>(0,d.i9)(f)?f.value=e:f=e),"toggle-mask":"",feedback:!0,placeholder:"‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà"},null,8,["modelValue"])]),(0,s.Lk)("div",Pe,[a[21]||(a[21]=(0,s.Lk)("label",{for:"confirmPassword"},"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà",-1)),(0,s.bF)((0,d.R1)(H.A),{class:"w-100",id:"confirmPassword",modelValue:(0,d.R1)(y),"onUpdate:modelValue":a[9]||(a[9]=e=>(0,d.i9)(y)?y.value=e:y=e),"toggle-mask":"",feedback:!1,placeholder:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà"},null,8,["modelValue"])])])])]),(0,s.Lk)("div",Qe,[(0,s.bF)(o,{type:"button",onClick:C,disabled:!r.value,class:"btn btn-danger btn-block"},{default:(0,s.k6)(()=>[...a[23]||(a[23]=[(0,s.eW)(" ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô ",-1)])]),_:1},8,["disabled"])])])])],64)}}};const Ye=qe;var ze=Ye;const Ge={class:"app-container"},Je={class:"main-tabs"},Ze={class:"tabs-header"},ea={class:"tab-header"},aa={key:0,class:"action-buttons-header"},ta={class:"tab-content-area"},la={key:0,class:"tab-content"},sa={key:1,class:"tab-content"},oa={key:0,class:"no-images-state"},ia={key:1,class:"image-viewer"},ra={class:"section-header"},na={class:"images-grid"},da=["src","onClick"],ca={key:2,class:"upload-section"},ua={class:"upload-controls"},pa={key:0,class:"no-image-placeholder"},ma=["src"];function va(e,a,t,l,o,i){const r=(0,s.g2)("TabPanel"),n=(0,s.g2)("Badge"),d=(0,s.g2)("TabView"),u=(0,s.g2)("Button"),p=(0,s.g2)("Calendar"),m=(0,s.g2)("History"),v=(0,s.g2)("BookingForm"),h=(0,s.g2)("Divider"),k=(0,s.g2)("Dialog"),g=(0,s.g2)("Toast");return(0,s.uX)(),(0,s.CE)("div",Ge,[(0,s.Lk)("div",Je,[(0,s.Lk)("div",Ze,[a[11]||(a[11]=(0,s.Lk)("div",{class:"header-title"},[(0,s.Lk)("i",{class:"pi pi-car"}),(0,s.Lk)("h1",null,"‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏ñ/‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡∏ñ")],-1)),(0,s.bF)(d,{activeIndex:o.activeTabIndex,"onUpdate:activeIndex":a[0]||(a[0]=e=>o.activeTabIndex=e),class:"tab-navigation"},{default:(0,s.k6)(()=>[(0,s.bF)(r,null,{header:(0,s.k6)(()=>[...a[6]||(a[6]=[(0,s.Lk)("div",{class:"tab-header"},[(0,s.Lk)("i",{class:"pi pi-calendar"}),(0,s.Lk)("span",null,"‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô")],-1)])]),_:1}),(0,s.bF)(r,null,{header:(0,s.k6)(()=>[(0,s.Lk)("div",ea,[a[7]||(a[7]=(0,s.Lk)("i",{class:"pi pi-history"},null,-1)),a[8]||(a[8]=(0,s.Lk)("span",null,"‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏£‡∏ñ",-1)),i.borrowRecordsCount>0?((0,s.uX)(),(0,s.Wv)(n,{key:0,value:i.borrowRecordsCount,severity:"info"},null,8,["value"])):(0,s.Q3)("",!0)])]),_:1})]),_:1},8,["activeIndex"]),0===o.activeTabIndex?((0,s.uX)(),(0,s.CE)("div",aa,[(0,s.bF)(u,{onClick:i.showReturnForm,disabled:0===i.availableBorrows.length,severity:"warning",icon:"pi pi-upload",raised:""},{default:(0,s.k6)(()=>[i.availableBorrows.length>0?((0,s.uX)(),(0,s.Wv)(n,{key:0,value:i.availableBorrows.length,severity:"warning"},null,8,["value"])):(0,s.Q3)("",!0),a[9]||(a[9]=(0,s.eW)(" ‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡∏ñ ",-1))]),_:1},8,["onClick","disabled"]),(0,s.bF)(u,{onClick:i.showCancelForm,disabled:0===i.pendingBorrows.length,severity:"danger",icon:"pi pi-times-circle",raised:""},{default:(0,s.k6)(()=>[a[10]||(a[10]=(0,s.eW)(" ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á ",-1)),i.pendingBorrows.length>0?((0,s.uX)(),(0,s.Wv)(n,{key:0,value:i.pendingBorrows.length,style:{backgroundColor:"white",color:"black",fontSize:"0.75rem",width:"1.2rem",height:"1.2rem",borderRadius:"50%",display:"inline-flex",alignItems:"center",justifyContent:"center",lineHeight:"1",fontWeight:"bold",border:"2px solid white"}},null,8,["value"])):(0,s.Q3)("",!0)]),_:1},8,["onClick","disabled"])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ta,[0===o.activeTabIndex?((0,s.uX)(),(0,s.CE)("div",la,[(0,s.bF)(p,{records:o.records,"available-borrows":i.availableBorrows,"pending-borrows":i.pendingBorrows,"has-active-borrow":i.hasActiveBorrow,onSelectDate:i.selectDate,onShowReturnForm:i.showReturnForm,onShowCancelForm:i.showCancelForm},null,8,["records","available-borrows","pending-borrows","has-active-borrow","onSelectDate","onShowReturnForm","onShowCancelForm"])])):(0,s.Q3)("",!0),1===o.activeTabIndex?((0,s.uX)(),(0,s.CE)("div",sa,[(0,s.bF)(m,{records:o.records,onViewImages:i.viewImages,onUploadImages:i.handleAdditionalImageUploadFromHistory},null,8,["records","onViewImages","onUploadImages"])])):(0,s.Q3)("",!0)])]),o.showForm?((0,s.uX)(),(0,s.Wv)(v,{key:0,ref:"bookingForm","show-form":o.showForm,"selected-date":o.selectedDate,"active-form":o.activeForm,"borrow-form":o.borrowForm,"return-form":o.returnForm,"cancel-form":o.cancelForm,"available-borrows":i.availableBorrows,"pending-borrows":i.pendingBorrows,"current-return-time":i.currentReturnTime,"selected-borrow-project":i.selectedBorrowProject,"selected-borrow-description":i.selectedBorrowDescription,onCloseForm:i.closeForm,onSubmitBorrow:i.submitBorrow,onSubmitReturn:i.submitReturn,onSubmitCancel:i.submitCancel,onHandleImageUpload:i.handleImageUpload,onUpdateBorrowForm:i.updateBorrowForm,onUpdateReturnForm:i.updateReturnForm,onUpdateCancelForm:i.updateCancelForm},null,8,["show-form","selected-date","active-form","borrow-form","return-form","cancel-form","available-borrows","pending-borrows","current-return-time","selected-borrow-project","selected-borrow-description","onCloseForm","onSubmitBorrow","onSubmitReturn","onSubmitCancel","onHandleImageUpload","onUpdateBorrowForm","onUpdateReturnForm","onUpdateCancelForm"])):(0,s.Q3)("",!0),(0,s.bF)(k,{visible:o.showImageModal,"onUpdate:visible":a[2]||(a[2]=e=>o.showImageModal=e),modal:"",header:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",style:{width:"80vw"},draggable:!1},{default:(0,s.k6)(()=>[0===o.selectedImages.length?((0,s.uX)(),(0,s.CE)("div",oa,[...a[12]||(a[12]=[(0,s.Lk)("i",{class:"pi pi-image",style:{"font-size":"4rem",color:"#ccc"}},null,-1),(0,s.Lk)("p",null,"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",-1)])])):((0,s.uX)(),(0,s.CE)("div",ia,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.groupedImages,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.type,class:(0,c.C4)(["image-section","‡πÉ‡∏ä‡πâ"===e.type?"borrow-section":"return-section"])},[(0,s.Lk)("div",ra,[(0,s.Lk)("i",{class:(0,c.C4)("‡πÉ‡∏ä‡πâ"===e.type?"pi pi-download":"pi pi-upload")},null,2),(0,s.eW)(" ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ï‡∏≠‡∏ô"+(0,c.v_)(e.type),1)]),(0,s.Lk)("div",na,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.images,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"image-container"},[(0,s.Lk)("img",{src:e.src?.src||e.src,class:"grid-image",onClick:a=>i.viewFullImage(e),alt:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û"},null,8,da)]))),128))])],2))),128))])),o.currentBookingData&&i.canUploadForBooking(o.currentBookingData)?((0,s.uX)(),(0,s.CE)("div",ca,[(0,s.bF)(h),(0,s.Lk)("div",ua,[(0,s.Lk)("input",{type:"file",id:"modal-upload",onChange:a[1]||(a[1]=(...e)=>i.handleModalImageUpload&&i.handleModalImageUpload(...e)),accept:"image/*",multiple:"",style:{display:"none"}},null,32),(0,s.bF)(u,{label:"‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÄ‡∏û‡∏¥‡πà‡∏°",icon:"pi pi-camera",onClick:i.triggerFileUpload,severity:"secondary"},null,8,["onClick"])])])):(0,s.Q3)("",!0)]),_:1},8,["visible"]),(0,s.bF)(k,{visible:o.showFullImageModal,"onUpdate:visible":a[5]||(a[5]=e=>o.showFullImageModal=e),modal:"",header:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà",style:{width:"90vw"},draggable:!1},{default:(0,s.k6)(()=>[o.fullSizeImage?((0,s.uX)(),(0,s.CE)("img",{key:1,src:"string"===typeof o.fullSizeImage?o.fullSizeImage:o.fullSizeImage.src,class:"full-size-image",onError:a[3]||(a[3]=(...e)=>i.handleImageError&&i.handleImageError(...e)),onLoad:a[4]||(a[4]=(...e)=>i.handleImageLoad&&i.handleImageLoad(...e))},null,40,ma)):((0,s.uX)(),(0,s.CE)("div",pa,[...a[13]||(a[13]=[(0,s.Lk)("p",null,"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ",-1)])]))]),_:1},8,["visible"]),(0,s.bF)(g)])}const ha={class:"calendar-header"},ka={class:"month-title-container"},ga={class:"month-title"},ba={class:"calendar-container"},fa={class:"calendar"},ya=["onClick"],wa={key:0,class:"booking-indicator"},La={key:1,class:"booking-text-center"},Fa={key:2,class:"car-indicator"},Da={key:0,class:"car-details"},Ca={class:"details-grid"},_a={class:"detail-row"},Aa={class:"detail-value"},Ea={class:"detail-row"},Ra={class:"detail-value"},xa={class:"detail-row"},Ta={class:"detail-value"},Ia={class:"detail-row"},Ua={class:"detail-value"},Va={class:"dialog-footer"},Sa={key:0,class:"car-details"},$a={class:"details-grid"},Xa={class:"detail-row"},ja={class:"detail-value"},Wa={class:"detail-row"},Ba={class:"detail-value"},Oa={class:"detail-row"},Na={class:"detail-value"},Ka={class:"detail-row"},Ma={class:"detail-value"},Ha={class:"dialog-footer"};function Pa(e,a,t,l,o,i){const r=(0,s.g2)("Button"),n=(0,s.g2)("Dialog"),d=(0,s.g2)("Card");return(0,s.uX)(),(0,s.Wv)(d,null,{content:(0,s.k6)(()=>[(0,s.Lk)("div",ha,[(0,s.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>i.previousMonth&&i.previousMonth(...e)),class:"nav-btn"},[...a[6]||(a[6]=[(0,s.Lk)("i",{class:"pi pi-chevron-left"},null,-1)])]),(0,s.Lk)("div",ka,[(0,s.Lk)("h2",ga,(0,c.v_)(i.monthYear),1),a[7]||(a[7]=(0,s.Lk)("div",{class:"calendar-subtitle"},"‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏£‡∏ñ",-1))]),(0,s.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>i.nextMonth&&i.nextMonth(...e)),class:"nav-btn"},[...a[8]||(a[8]=[(0,s.Lk)("i",{class:"pi pi-chevron-right"},null,-1)])])]),(0,s.Lk)("div",ba,[(0,s.Lk)("div",fa,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.dayNames,e=>((0,s.uX)(),(0,s.CE)("div",{class:"day-header",key:e},(0,c.v_)(e),1))),128)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.calendarDates,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.key,class:(0,c.C4)(["calendar-day",{"other-month":!e.isCurrentMonth,"has-booking":i.hasBookingOnDate(e.date),"active-usage":i.isActiveUsage(e.date),today:i.isToday(e.date),"past-date":i.isPastDate(e.date)}]),onClick:a=>i.selectDate(e.date)},[(0,s.eW)((0,c.v_)(e.day)+" ",1),i.hasBookingOnDate(e.date)&&!i.isActiveUsage(e.date)?((0,s.uX)(),(0,s.CE)("div",wa,[...a[9]||(a[9]=[(0,s.Lk)("span",{class:"booking-emoji"},"üìÖ",-1)])])):(0,s.Q3)("",!0),i.hasBookingOnDate(e.date)&&!i.isActiveUsage(e.date)?((0,s.uX)(),(0,s.CE)("div",La,[...a[10]||(a[10]=[(0,s.Lk)("div",{class:"booking-text"},"‡∏à‡∏≠‡∏á‡πÄ‡πÄ‡∏•‡πâ‡∏ß",-1)])])):(0,s.Q3)("",!0),i.isActiveUsage(e.date)?((0,s.uX)(),(0,s.CE)("div",Fa,[...a[11]||(a[11]=[(0,s.Lk)("div",null,[(0,s.Lk)("span",{class:"car-emoji"},"üöó")],-1),(0,s.Lk)("div",null,[(0,s.Lk)("p",null,"‡∏Å‡πç‡∏≤‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô")],-1)])])):(0,s.Q3)("",!0)],10,ya))),128))])]),(0,s.bF)(n,{visible:o.showCarDialog,"onUpdate:visible":a[3]||(a[3]=e=>o.showCarDialog=e),modal:"",header:"üöó ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏£‡∏ñ",style:{width:"450px"},draggable:!1,closable:!1},{footer:(0,s.k6)(()=>[(0,s.Lk)("div",Va,[(0,s.bF)(r,{label:"‡∏õ‡∏¥‡∏î",icon:"pi pi-times",onClick:a[2]||(a[2]=e=>o.showCarDialog=!1),class:"p-button-secondary"})])]),default:(0,s.k6)(()=>[o.selectedCarRecord?((0,s.uX)(),(0,s.CE)("div",Da,[a[16]||(a[16]=(0,s.Lk)("div",{class:"car-header"},[(0,s.Lk)("div",{class:"car-plate-display"},[(0,s.Lk)("i",{class:"pi pi-car"}),(0,s.Lk)("span",null,"FXAG-2032")]),(0,s.Lk)("div",{class:"status-badge"},[(0,s.Lk)("i",{class:"pi pi-circle-fill"}),(0,s.eW)(" ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ")])],-1)),(0,s.Lk)("div",Ca,[(0,s.Lk)("div",_a,[a[12]||(a[12]=(0,s.Lk)("div",{class:"detail-label"},[(0,s.Lk)("i",{class:"pi pi-user"}),(0,s.eW)(" ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ")],-1)),(0,s.Lk)("div",Aa,(0,c.v_)(o.selectedCarRecord.user_name||o.selectedCarRecord.username||o.selectedCarRecord.name||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"),1)]),(0,s.Lk)("div",Ea,[a[13]||(a[13]=(0,s.Lk)("div",{class:"detail-label"},[(0,s.Lk)("i",{class:"pi pi-calendar"}),(0,s.eW)(" ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ")],-1)),(0,s.Lk)("div",Ra,(0,c.v_)(i.formatDate(o.selectedCarRecord.selected_date)),1)]),(0,s.Lk)("div",xa,[a[14]||(a[14]=(0,s.Lk)("div",{class:"detail-label"},[(0,s.Lk)("i",{class:"pi pi-clock"}),(0,s.eW)(" ‡πÄ‡∏ß‡∏•‡∏≤ ")],-1)),(0,s.Lk)("div",Ta,(0,c.v_)(o.selectedCarRecord.time||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"),1)]),(0,s.Lk)("div",Ia,[a[15]||(a[15]=(0,s.Lk)("div",{class:"detail-label"},[(0,s.Lk)("i",{class:"pi pi-briefcase"}),(0,s.eW)(" ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ ")],-1)),(0,s.Lk)("div",Ua,(0,c.v_)(o.selectedCarRecord.project||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"),1)])])])):(0,s.Q3)("",!0)]),_:1},8,["visible"]),(0,s.bF)(n,{visible:o.showBookingDialog,"onUpdate:visible":a[5]||(a[5]=e=>o.showBookingDialog=e),modal:"",header:"üìÖ ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏£‡∏ñ",style:{width:"450px"},draggable:!1,closable:!1},{footer:(0,s.k6)(()=>[(0,s.Lk)("div",Ha,[(0,s.bF)(r,{label:"‡∏õ‡∏¥‡∏î",icon:"pi pi-times",onClick:a[4]||(a[4]=e=>o.showBookingDialog=!1),class:"p-button-secondary"})])]),default:(0,s.k6)(()=>[o.selectedCarRecord?((0,s.uX)(),(0,s.CE)("div",Sa,[a[21]||(a[21]=(0,s.Lk)("div",{class:"booking-header"},[(0,s.Lk)("div",{class:"car-plate-display"},[(0,s.Lk)("i",{class:"pi pi-calendar"}),(0,s.Lk)("span",null,"FXAG-2032")]),(0,s.Lk)("div",{class:"status-badge booking-status"},[(0,s.Lk)("i",{class:"pi pi-clock"}),(0,s.eW)(" ‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß ")])],-1)),(0,s.Lk)("div",$a,[(0,s.Lk)("div",Xa,[a[17]||(a[17]=(0,s.Lk)("div",{class:"detail-label"},[(0,s.Lk)("i",{class:"pi pi-user"}),(0,s.eW)(" ‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á ")],-1)),(0,s.Lk)("div",ja,(0,c.v_)(o.selectedCarRecord.user_name||o.selectedCarRecord.username||o.selectedCarRecord.name||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"),1)]),(0,s.Lk)("div",Wa,[a[18]||(a[18]=(0,s.Lk)("div",{class:"detail-label"},[(0,s.Lk)("i",{class:"pi pi-calendar"}),(0,s.eW)(" ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á ")],-1)),(0,s.Lk)("div",Ba,(0,c.v_)(i.formatDate(o.selectedCarRecord.selected_date)),1)]),(0,s.Lk)("div",Oa,[a[19]||(a[19]=(0,s.Lk)("div",{class:"detail-label"},[(0,s.Lk)("i",{class:"pi pi-clock"}),(0,s.eW)(" ‡πÄ‡∏ß‡∏•‡∏≤ ")],-1)),(0,s.Lk)("div",Na,(0,c.v_)(o.selectedCarRecord.time||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"),1)]),(0,s.Lk)("div",Ka,[a[20]||(a[20]=(0,s.Lk)("div",{class:"detail-label"},[(0,s.Lk)("i",{class:"pi pi-briefcase"}),(0,s.eW)(" ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ ")],-1)),(0,s.Lk)("div",Ma,(0,c.v_)(o.selectedCarRecord.project||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"),1)])])])):(0,s.Q3)("",!0)]),_:1},8,["visible"])]),_:1})}var Qa={name:"CarCalendar",props:{records:Array,availableBorrows:Array,pendingBorrows:Array,hasActiveBorrow:Boolean},data(){return{currentDate:new Date,dayNames:["‡∏≠‡∏≤","‡∏à","‡∏≠","‡∏û","‡∏û‡∏§","‡∏®","‡∏™"],showCarDialog:!1,showBookingDialog:!1,selectedCarRecord:null}},computed:{monthYear(){return this.currentDate.toLocaleDateString("th-TH",{year:"numeric",month:"long"})},calendarDates(){const e=this.currentDate.getFullYear(),a=this.currentDate.getMonth(),t=new Date(e,a,1),l=new Date(t);l.setDate(l.getDate()-t.getDay());const s=[],o=new Date(l);for(let i=0;i<42;i++)s.push({date:new Date(o),day:o.getDate(),isCurrentMonth:o.getMonth()===a,key:`${o.getFullYear()}-${o.getMonth()}-${o.getDate()}`}),o.setDate(o.getDate()+1);return s}},methods:{previousMonth(){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()-1,1)},nextMonth(){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+1,1)},selectDate(e){this.isActiveUsage(e)?this.showCarDetails(e):this.hasBookingOnDate(e)?this.showBookingDetails(e):this.isPastDate(e)||this.hasBookingOnDate(e)||this.$emit("select-date",e)},showCarDetails(e){const a=new Date;a.setHours(0,0,0,0);const t=new Date(e);if(t.setHours(0,0,0,0),t.getTime()!==a.getTime())return;const l=this.records.find(e=>"active"===e.status);l&&(this.selectedCarRecord=l,this.showCarDialog=!0)},showBookingDetails(e){const a=e.toDateString(),t=this.records.find(e=>("pending"===e.status||"active"===e.status)&&new Date(e.selected_date).toDateString()===a);t&&(this.selectedCarRecord=t,this.showBookingDialog=!0)},formatDate(e){const a=new Date(e);return a.toLocaleDateString("th-TH")},isPastDate(e){const a=new Date;a.setHours(0,0,0,0);const t=new Date(e);return t.setHours(0,0,0,0),t<a},hasBookingOnDate(e){const a=e.toDateString();return this.records.some(e=>("pending"===e.status||"active"===e.status)&&new Date(e.selected_date).toDateString()===a)},isActiveUsage(e){const a=this.records.find(e=>"active"===e.status);if(!a)return!1;const t=new Date(a.selected_date),l=new Date;let s;return s=a.return_date?new Date(a.return_date):l,e>=t&&e<=s&&e<=l},isToday(e){const a=new Date;return e.toDateString()===a.toDateString()}}};const qa=(0,$.A)(Qa,[["render",Pa],["__scopeId","data-v-136023cb"]]);var Ya=qa;const za={class:"search-box mb-3"},Ga={key:0,class:"empty-state"},Ja={class:"ticket-id"},Za={key:1,class:"no-colleagues"},et={key:0},at={key:1},tt={key:2},lt={key:0},st={key:1},ot=["onClick"],it={key:1,class:"no-description"},rt={class:"colleagues-list"},nt={class:"colleague-details"},dt={class:"colleague-name"},ct={key:0,class:"colleague-info"},ut={key:0,class:"position"},pt={key:1,class:"department"},mt={class:"description-content"};function vt(e,a,t,l,o,i){const r=(0,s.g2)("InputIcon"),n=(0,s.g2)("InputText"),d=(0,s.g2)("IconField"),u=(0,s.g2)("Column"),p=(0,s.g2)("Badge"),m=(0,s.g2)("Button"),v=(0,s.g2)("DataTable"),h=(0,s.g2)("Card"),k=(0,s.g2)("Dialog"),g=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(h,{class:"history-card"},{content:(0,s.k6)(()=>[(0,s.Lk)("div",za,[(0,s.bF)(d,{iconPosition:"left"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{class:"pi pi-search"}),(0,s.bF)(n,{modelValue:o.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e),placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...",class:"w-full"},null,8,["modelValue"])]),_:1})]),0===i.filteredRecords.length?((0,s.uX)(),(0,s.CE)("div",Ga,[a[3]||(a[3]=(0,s.Lk)("i",{class:"pi pi-car",style:{"font-size":"4rem",color:"#ccc"}},null,-1)),(0,s.Lk)("p",null,(0,c.v_)(o.searchQuery?"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤":"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏£‡∏ñ"),1)])):((0,s.uX)(),(0,s.Wv)(v,{key:1,value:i.filteredRecords,paginator:!0,rows:10,rowsPerPageOptions:[5,10,20],responsiveLayout:"scroll",class:"history-table",stripedRows:""},{default:(0,s.k6)(()=>[(0,s.bF)(u,{field:"id",header:"Ticket ID",sortable:!0},{body:(0,s.k6)(e=>[(0,s.Lk)("span",Ja,(0,c.v_)(e.data.id),1)]),_:1}),(0,s.bF)(u,{field:"borrowDate",header:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà",sortable:!0},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(i.formatDate(e.data.borrowDate)),1)]),_:1}),(0,s.bF)(u,{field:"borrowRecord.name",header:"‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ",sortable:!0}),(0,s.bF)(u,{field:"borrowRecord.time",header:"‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ä‡πâ"}),(0,s.bF)(u,{field:"borrowRecord.location",header:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà"}),(0,s.bF)(u,{field:"borrowRecord.project",header:"‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£"}),(0,s.bF)(u,{header:"‡∏ú‡∏π‡πâ‡∏£‡πà‡∏ß‡∏°‡∏á‡∏≤‡∏ô",style:{"min-width":"120px"}},{body:(0,s.k6)(e=>[i.hasColleagues(e.data.borrowRecord)?((0,s.uX)(),(0,s.Wv)(m,{key:0,onClick:a=>i.showColleaguesDialog(e.data.borrowRecord.colleagues),severity:"info",size:"small",outlined:""},{default:(0,s.k6)(()=>[a[4]||(a[4]=(0,s.Lk)("i",{class:"pi pi-users"},null,-1)),(0,s.bF)(p,{value:e.data.borrowRecord.colleagues.length,severity:"info"},null,8,["value"])]),_:2},1032,["onClick"])):((0,s.uX)(),(0,s.CE)("span",Za,[...a[5]||(a[5]=[(0,s.Lk)("i",{class:"pi pi-user-minus"},null,-1),(0,s.eW)(" ‡πÑ‡∏°‡πà‡∏°‡∏µ ",-1)])]))]),_:1}),(0,s.bF)(u,{header:"‡∏ú‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô"},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(e.data.returned?e.data.returnRecord.name:"-"),1)]),_:1}),(0,s.bF)(u,{header:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô"},{body:(0,s.k6)(e=>[e.data.returned&&e.data.returnRecord.date?((0,s.uX)(),(0,s.CE)("span",et,(0,c.v_)(i.formatDate(e.data.returnRecord.date)),1)):e.data.returned?((0,s.uX)(),(0,s.CE)("span",at,(0,c.v_)(i.formatDate(e.data.borrowRecord.updated_at)),1)):((0,s.uX)(),(0,s.CE)("span",tt,"-"))]),_:1}),(0,s.bF)(u,{header:"‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏∑‡∏ô"},{body:(0,s.k6)(e=>[e.data.returned?((0,s.uX)(),(0,s.CE)("span",lt,(0,c.v_)(e.data.returnRecord.time||i.formatTime(e.data.borrowRecord.updated_at)),1)):((0,s.uX)(),(0,s.CE)("span",st,"-"))]),_:1}),(0,s.bF)(u,{header:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô"},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(e.data.returned?e.data.returnRecord.location:"-"),1)]),_:1}),(0,s.bF)(u,{field:"duration",header:"‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤"}),(0,s.bF)(u,{header:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û"},{body:(0,s.k6)(e=>[(0,s.Lk)("i",{class:"pi pi-eye view-icon",onClick:a=>i.viewImages(e.data)},null,8,ot)]),_:1}),(0,s.bF)(u,{header:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"},{body:(0,s.k6)(e=>[e.data.borrowRecord.discription?(0,s.bo)(((0,s.uX)(),(0,s.Wv)(m,{key:0,icon:"pi pi-info-circle",severity:"info",text:"",rounded:"",size:"small",onClick:a=>i.viewDescription(e.data.borrowRecord.discription)},null,8,["onClick"])),[[g,"‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"]]):((0,s.uX)(),(0,s.CE)("span",it,"-"))]),_:1}),(0,s.bF)(u,{header:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"},{body:(0,s.k6)(e=>[e.data.returned?((0,s.uX)(),(0,s.Wv)(p,{key:0,value:"‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß",severity:"success",icon:"pi pi-check"})):i.isWaitingToUse(e.data)?((0,s.uX)(),(0,s.Wv)(p,{key:1,value:"‡∏£‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô",severity:"info",icon:"pi pi-clock"})):((0,s.uX)(),(0,s.Wv)(p,{key:2,value:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô",severity:"warning",icon:"pi pi-clock"}))]),_:1})]),_:1},8,["value"]))]),_:1}),(0,s.bF)(k,{visible:o.showColleaguesModal,"onUpdate:visible":a[1]||(a[1]=e=>o.showColleaguesModal=e),modal:"",header:"‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡πà‡∏ß‡∏°‡∏á‡∏≤‡∏ô",style:{width:"600px"},draggable:!1},{default:(0,s.k6)(()=>[(0,s.Lk)("div",rt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.selectedColleagues,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"colleague-card"},[(0,s.Lk)("div",nt,[(0,s.Lk)("div",dt,(0,c.v_)(i.getColleagueName(e)),1),i.getColleaguePosition(e)||i.getColleagueDepartment(e)?((0,s.uX)(),(0,s.CE)("div",ct,[i.getColleaguePosition(e)?((0,s.uX)(),(0,s.CE)("span",ut,(0,c.v_)(i.getColleaguePosition(e)),1)):(0,s.Q3)("",!0),i.getColleagueDepartment(e)?((0,s.uX)(),(0,s.CE)("span",pt,(0,c.v_)(i.getColleagueDepartment(e)),1)):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])]))),128))])]),_:1},8,["visible"]),(0,s.bF)(k,{visible:o.showDescriptionModal,"onUpdate:visible":a[2]||(a[2]=e=>o.showDescriptionModal=e),modal:"",header:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",style:{width:"500px"},draggable:!1},{default:(0,s.k6)(()=>[(0,s.Lk)("div",mt,[(0,s.Lk)("p",null,(0,c.v_)(o.selectedDescription),1)])]),_:1},8,["visible"])],64)}var ht={name:"CarHistory",props:{records:Array},data(){return{searchQuery:"",showColleaguesModal:!1,selectedColleagues:[],showDescriptionModal:!1,selectedDescription:""}},computed:{groupedRecords(){if(!this.records||!Array.isArray(this.records))return[];const e=this.records.filter(e=>e&&void 0!==e.status),a=e.map(e=>{const a="returned"===e.status;return{id:e.id,license:e.license,borrowDate:e.selected_date,borrowRecord:e,returnRecord:a?{name:e.return_name,location:e.return_location,time:e.return_time,date:e.return_date,created_at:e.updated_at}:null,returned:a}});return a.sort((e,a)=>a.id-e.id)},groupedRecordsWithDuration(){return this.groupedRecords.map(e=>{let a="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô";if(e.returned){const t=new Date(e.borrowDate),[l,s]=e.borrowRecord.time.split(":").map(Number),o=new Date(t);o.setHours(l,s,0,0);const i=e.returnRecord.created_at?new Date(e.returnRecord.created_at):new Date,r=i-o;if(r>0){const e=Math.floor(r/36e5),t=Math.floor(r%36e5/6e4);a=e>0?`${e} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ${t} ‡∏ô‡∏≤‡∏ó‡∏µ`:`${t} ‡∏ô‡∏≤‡∏ó‡∏µ`}else a="‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"}return{...e,duration:a}})},filteredRecords(){const e=this.groupedRecordsWithDuration||[];if(!this.searchQuery)return e;const a=this.searchQuery.toLowerCase().trim();return e.filter(e=>{const t=this.formatDate(e.borrowDate),l=e.borrowRecord?.colleagues?e.borrowRecord.colleagues.map(e=>e.name).join(" "):"",s={id:e.id||"",license:e.license||"",borrower_name:e.borrowRecord?.name||"",borrow_time:e.borrowRecord?.time||"",borrow_location:e.borrowRecord?.location||"",project:e.borrowRecord?.project||"",description:e.borrowRecord?.description||"",colleagues:l,returner_name:e.returnRecord?.name||"",return_time:e.returnRecord?.time||"",return_location:e.returnRecord?.location||"",duration:e.duration||"",borrow_date:t};return Object.values(s).some(e=>{if(null===e||void 0===e)return!1;const t=String(e).toLowerCase();return t.includes(a)||t.replace(/\s/g,"").includes(a.replace(/\s/g,""))})})}},methods:{showColleaguesDialog(e){this.selectedColleagues=e||[],this.showColleaguesModal=!0},hasColleagues(e){return e.colleagues&&Array.isArray(e.colleagues)&&e.colleagues.length>0},getColleagueName(e){return"string"===typeof e?e:e?.name||e},getColleaguePosition(e){return"string"===typeof e?"":e?.position||""},getColleagueDepartment(e){return"string"===typeof e?"":e?.department||""},formatTime(e){return e?new Date(e).toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit",hour12:!1}):"-"},canUploadImages(e){return"active"===e.borrowRecord.status},handleImageUpload(e,a){const t=Array.from(e.target.files);0!==t.length&&(this.$emit("upload-images",{files:t,bookingId:a}),e.target.value="")},formatDate(e){return new Date(e).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})},hasImages(e){return e.borrowRecord.images?.length>0||e.returned&&e.returnRecord.images?.length>0},isWaitingToUse(e){const a=new Date,t=new Date(e.borrowDate),[l,s]=e.borrowRecord.time.split(":").map(Number),o=new Date(t);return o.setHours(l,s,0,0),a<o},viewImages(e){const a=[];e.borrowRecord.images?.length>0&&a.push(...e.borrowRecord.images.map(e=>({src:e,type:"‡πÉ‡∏ä‡πâ"}))),e.returned&&e.returnRecord.images?.length>0&&a.push(...e.returnRecord.images.map(e=>({src:e,type:"‡∏Ñ‡∏∑‡∏ô"}))),this.$emit("view-images",a,e)},viewDescription(e){this.selectedDescription=e,this.showDescriptionModal=!0}}};const kt=(0,$.A)(ht,[["render",vt],["__scopeId","data-v-56009cae"]]);var gt=kt;const bt={class:"p-fluid dialog-content"},ft={class:"form-grid"},yt={class:"input-group"},wt={class:"input-group"},Lt={class:"input-group"},Ft={class:"input-group"},Dt={class:"input-group"},Ct={class:"input-group"},_t={class:"input-group full-width"},At={class:"colleagues-section"},Et={class:"colleague-search"},Rt={class:"user-option"},xt={class:"user-name"},Tt={class:"user-role"},It={key:0,class:"selected-colleagues"},Ut={class:"colleagues-list"},Vt={class:"colleague-details"},St={class:"colleague-name"},$t={class:"colleague-position"},Xt={class:"colleague-department"},jt={key:1,class:"no-colleagues"},Wt={class:"file-upload-section"},Bt={class:"file-upload-wrapper"},Ot={class:"form-actions"},Nt={class:"form-grid"},Kt={class:"input-group full-width"},Mt={class:"input-group"},Ht={class:"input-group"},Pt={class:"input-group"},Qt={class:"input-group"},qt={class:"input-group"},Yt={class:"input-group"},zt={class:"file-upload-section"},Gt={class:"file-upload-wrapper"},Jt={class:"form-actions"},Zt={class:"form-grid"},el={class:"input-group full-width"},al={class:"form-actions"},tl={class:"confirm-content"},ll={class:"confirm-message"},sl={class:"confirm-buttons"};function ol(e,a,t,o,i,r){const n=(0,s.g2)("InputText"),d=(0,s.g2)("Dropdown"),u=(0,s.g2)("Textarea"),p=(0,s.g2)("AutoComplete"),m=(0,s.g2)("Button"),v=(0,s.g2)("Divider"),h=(0,s.g2)("Dialog");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(h,{visible:t.showForm,modal:"",header:r.getFormTitle(),style:{width:"700px"},"onUpdate:visible":r.handleDialogClose,closable:!0,draggable:!1,class:"corporate-dialog"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",bt,["borrow"===t.activeForm?((0,s.uX)(),(0,s.CE)("form",{key:0,onSubmit:a[7]||(a[7]=(0,l.D$)(e=>r.confirmSubmit("borrow"),["prevent"])),class:"form-container"},[(0,s.Lk)("div",ft,[(0,s.Lk)("div",yt,[a[17]||(a[17]=(0,s.Lk)("label",{for:"name",class:"input-label"},"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•",-1)),(0,s.bF)(n,{id:"name",value:r.currentUserName,readonly:"",class:"corporate-input readonly-field"},null,8,["value"])]),(0,s.Lk)("div",wt,[a[18]||(a[18]=(0,s.Lk)("label",{for:"license",class:"input-label"},"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",-1)),(0,s.bF)(n,{id:"license",value:t.borrowForm.license,readonly:"",class:"corporate-input readonly-field"},null,8,["value"])]),(0,s.Lk)("div",Lt,[a[19]||(a[19]=(0,s.Lk)("label",{for:"time",class:"input-label"},"‡πÄ‡∏ß‡∏•‡∏≤ *",-1)),(0,s.bF)(n,{id:"time",value:t.borrowForm.time,onInput:a[0]||(a[0]=e=>r.updateBorrowForm("time",e.target.value)),type:"time",required:"",class:"corporate-input"},null,8,["value"])]),(0,s.Lk)("div",Ft,[a[20]||(a[20]=(0,s.Lk)("label",{for:"location",class:"input-label"},"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà *",-1)),(0,s.bF)(n,{id:"location",value:t.borrowForm.location,onInput:a[1]||(a[1]=e=>r.updateBorrowForm("location",e.target.value)),required:"",class:"corporate-input"},null,8,["value"])]),(0,s.Lk)("div",Dt,[a[21]||(a[21]=(0,s.Lk)("label",{for:"project",class:"input-label"},"‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ *",-1)),(0,s.bF)(d,{id:"project",modelValue:r.selectedProject,"onUpdate:modelValue":a[2]||(a[2]=e=>r.selectedProject=e),options:i.projectOptions,optionLabel:"label",optionValue:"value",placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£",required:"",class:"corporate-input",filter:""},null,8,["modelValue","options"])]),(0,s.Lk)("div",Ct,[a[22]||(a[22]=(0,s.Lk)("label",{for:"description",class:"input-label"},"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",-1)),(0,s.bF)(u,{id:"description",value:t.borrowForm.discription,onInput:a[3]||(a[3]=a=>e.$emit("update-borrow-form",{field:"discription",value:a.target.value})),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)",rows:"3",class:"corporate-input"},null,8,["value"])]),(0,s.Lk)("div",_t,[a[27]||(a[27]=(0,s.Lk)("label",{class:"input-label"},"‡∏ú‡∏π‡πâ‡∏£‡πà‡∏ß‡∏°‡∏á‡∏≤‡∏ô",-1)),(0,s.Lk)("div",At,[(0,s.Lk)("div",Et,[(0,s.bF)(p,{modelValue:i.selectedColleague,"onUpdate:modelValue":a[4]||(a[4]=e=>i.selectedColleague=e),suggestions:i.filteredUsers,onComplete:r.searchUsers,onItemSelect:r.onColleagueSelect,onDropdownClick:r.showAllUsers,optionLabel:"displayName",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏£‡πà‡∏ß‡∏°‡∏á‡∏≤‡∏ô...",class:"corporate-input",dropdown:!0,forceSelection:!1,scrollHeight:200},{option:(0,s.k6)(e=>[(0,s.Lk)("div",Rt,[(0,s.Lk)("div",xt,(0,c.v_)(e.option.displayName),1),(0,s.Lk)("div",Tt,(0,c.v_)(e.option.position)+" - "+(0,c.v_)(e.option.department),1)])]),_:1},8,["modelValue","suggestions","onComplete","onItemSelect","onDropdownClick"])]),t.borrowForm.colleagues&&t.borrowForm.colleagues.length>0?((0,s.uX)(),(0,s.CE)("div",It,[a[25]||(a[25]=(0,s.Lk)("h6",{class:"colleagues-title"},"‡∏ú‡∏π‡πâ‡∏£‡πà‡∏ß‡∏°‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:",-1)),(0,s.Lk)("div",Ut,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.borrowForm.colleagues,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"colleague-card"},[(0,s.Lk)("div",Vt,[(0,s.Lk)("div",St,(0,c.v_)(e.name),1),(0,s.Lk)("div",$t,[a[23]||(a[23]=(0,s.Lk)("i",{class:"pi pi-briefcase"},null,-1)),(0,s.eW)(" "+(0,c.v_)(e.position),1)]),(0,s.Lk)("div",Xt,[a[24]||(a[24]=(0,s.Lk)("i",{class:"pi pi-building"},null,-1)),(0,s.eW)(" "+(0,c.v_)(e.department),1)])]),(0,s.bF)(m,{type:"button",icon:"pi pi-times",severity:"danger",text:"",rounded:"",size:"small",onClick:e=>r.removeColleague(t),class:"remove-btn"},null,8,["onClick"])]))),128))])])):((0,s.uX)(),(0,s.CE)("div",jt,[...a[26]||(a[26]=[(0,s.Lk)("i",{class:"pi pi-users"},null,-1),(0,s.Lk)("span",null,"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏£‡πà‡∏ß‡∏°‡∏á‡∏≤‡∏ô",-1)])]))])]),(0,s.Lk)("div",Wt,[a[28]||(a[28]=(0,s.Lk)("label",{class:"upload-label"},"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",-1)),(0,s.Lk)("div",Bt,[(0,s.Lk)("input",{ref:"borrowFileInput",onChange:a[5]||(a[5]=a=>e.$emit("handle-image-upload",a,"borrow")),type:"file",accept:"image/*",multiple:"",class:"file-input",id:"borrowImages"},null,544),(0,s.bF)(m,{type:"button",label:t.borrowForm.images?.length>0?`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ${t.borrowForm.images.length} ‡∏£‡∏π‡∏õ`:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",icon:"pi pi-upload",severity:"secondary",outlined:"",onClick:a[6]||(a[6]=a=>e.$refs.borrowFileInput.click())},null,8,["label"])])])]),(0,s.bF)(v),(0,s.Lk)("div",Ot,[(0,s.bF)(m,{type:"button",label:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",icon:"pi pi-times",severity:"secondary",outlined:"",onClick:r.handleDialogClose},null,8,["onClick"]),(0,s.bF)(m,{type:"submit",label:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏ñ",icon:"pi pi-check",severity:"success"})])],32)):(0,s.Q3)("",!0),"return"===t.activeForm?((0,s.uX)(),(0,s.CE)("form",{key:1,onSubmit:a[13]||(a[13]=(0,l.D$)(e=>r.confirmSubmit("return"),["prevent"])),class:"form-container"},[(0,s.Lk)("div",Nt,[(0,s.Lk)("div",Kt,[a[29]||(a[29]=(0,s.Lk)("label",{class:"input-label"},"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô *",-1)),(0,s.bF)(d,{modelValue:i.selectedReturnBorrow,"onUpdate:modelValue":a[8]||(a[8]=e=>i.selectedReturnBorrow=e),options:r.formattedAvailableBorrows,optionLabel:"displayText",optionValue:"id",class:"corporate-dropdown"},null,8,["modelValue","options"])]),(0,s.Lk)("div",Mt,[a[30]||(a[30]=(0,s.Lk)("label",{for:"returnName",class:"input-label"},"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•",-1)),(0,s.bF)(n,{id:"returnName",value:r.currentUserName,readonly:"",class:"corporate-input readonly-field"},null,8,["value"])]),(0,s.Lk)("div",Ht,[a[31]||(a[31]=(0,s.Lk)("label",{for:"returnLicense",class:"input-label"},"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",-1)),(0,s.bF)(n,{id:"returnLicense",value:t.returnForm.license,readonly:"",class:"corporate-input readonly-field"},null,8,["value"])]),(0,s.Lk)("div",Pt,[a[32]||(a[32]=(0,s.Lk)("label",{for:"returnTime",class:"input-label"},"‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏∑‡∏ô‡∏£‡∏ñ",-1)),(0,s.bF)(n,{id:"returnTime",value:t.currentReturnTime,readonly:"",class:"corporate-input readonly-field"},null,8,["value"])]),(0,s.Lk)("div",Qt,[a[33]||(a[33]=(0,s.Lk)("label",{for:"returnLocation",class:"input-label"},"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô‡∏£‡∏ñ *",-1)),(0,s.bF)(n,{id:"returnLocation",value:t.returnForm.location,onInput:a[9]||(a[9]=a=>e.$emit("updateReturnForm","location",a.target.value)),required:"",class:"corporate-input"},null,8,["value"])]),(0,s.Lk)("div",qt,[a[34]||(a[34]=(0,s.Lk)("label",{for:"returnDescription",class:"input-label"},"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",-1)),(0,s.bF)(u,{id:"returnDescription",value:t.returnForm.discription||t.selectedBorrowDescription,onInput:a[10]||(a[10]=a=>e.$emit("updateReturnForm","discription",a.target.value)),disabled:!i.selectedReturnBorrow,placeholder:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏Å‡πà‡∏≠‡∏ô",rows:"3",class:"corporate-input"},null,8,["value","disabled"])]),(0,s.Lk)("div",Yt,[a[35]||(a[35]=(0,s.Lk)("label",{for:"returnProject",class:"input-label"},"‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£",-1)),(0,s.bF)(n,{id:"returnProject",value:t.selectedBorrowProject,readonly:"",class:"corporate-input readonly-field"},null,8,["value"])]),(0,s.Lk)("div",zt,[a[36]||(a[36]=(0,s.Lk)("label",{class:"upload-label"},"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",-1)),(0,s.Lk)("div",Gt,[(0,s.Lk)("input",{ref:"returnFileInput",onChange:a[11]||(a[11]=a=>e.$emit("handle-image-upload",a,"return")),type:"file",accept:"image/*",multiple:"",class:"file-input",id:"returnImages"},null,544),(0,s.bF)(m,{type:"button",label:t.returnForm.images?.length>0?`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ${t.returnForm.images.length} ‡∏£‡∏π‡∏õ`:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",icon:"pi pi-upload",severity:"secondary",outlined:"",onClick:a[12]||(a[12]=a=>e.$refs.returnFileInput.click())},null,8,["label"])])])]),(0,s.bF)(v),(0,s.Lk)("div",Jt,[(0,s.bF)(m,{type:"button",label:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",icon:"pi pi-times",severity:"secondary",outlined:"",onClick:r.handleDialogClose},null,8,["onClick"]),(0,s.bF)(m,{type:"submit",label:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡∏ñ",icon:"pi pi-check",severity:"success"})])],32)):(0,s.Q3)("",!0),"cancel"===t.activeForm?((0,s.uX)(),(0,s.CE)("form",{key:2,onSubmit:a[15]||(a[15]=(0,l.D$)(e=>r.confirmSubmit("cancel"),["prevent"])),class:"form-container"},[(0,s.Lk)("div",Zt,[(0,s.Lk)("div",el,[a[37]||(a[37]=(0,s.Lk)("label",{class:"input-label"},"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å *",-1)),(0,s.bF)(d,{modelValue:i.selectedCancelBorrow,"onUpdate:modelValue":a[14]||(a[14]=e=>i.selectedCancelBorrow=e),options:r.formattedPendingBorrows,optionLabel:"displayText",optionValue:"id",class:"corporate-dropdown"},null,8,["modelValue","options"])])]),(0,s.bF)(v),(0,s.Lk)("div",al,[(0,s.bF)(m,{type:"button",label:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",icon:"pi pi-times",severity:"secondary",outlined:"",onClick:r.handleDialogClose},null,8,["onClick"]),(0,s.bF)(m,{type:"submit",label:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",icon:"pi pi-trash",severity:"danger"})])],32)):(0,s.Q3)("",!0)])]),_:1},8,["visible","header","onUpdate:visible"]),(0,s.bF)(h,{visible:i.showConfirm,modal:"",header:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",style:{width:"450px"},closable:!1,draggable:!1,class:"confirm-dialog"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",tl,[a[38]||(a[38]=(0,s.Lk)("div",{class:"confirm-icon"},[(0,s.Lk)("i",{class:"pi pi-question-circle"})],-1)),(0,s.Lk)("p",ll,(0,c.v_)(i.confirmMessage),1),(0,s.Lk)("div",sl,[(0,s.bF)(m,{onClick:r.handleConfirm,label:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",icon:"pi pi-check",severity:"success"},null,8,["onClick"]),(0,s.bF)(m,{onClick:a[16]||(a[16]=e=>i.showConfirm=!1),label:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",icon:"pi pi-times",severity:"secondary",outlined:""})])])]),_:1},8,["visible"])],64)}var il=t(8177),rl=t(6181),nl={name:"BookingFormPrime",components:{AutoComplete:il.A,Dropdown:rl.A},emits:["close-form","submit-borrow","submit-return","submit-cancel","handle-image-upload","update-borrow-form","updateReturnForm","update-cancel-form"],props:{showForm:Boolean,selectedDate:Date,activeForm:String,borrowForm:Object,returnForm:Object,cancelForm:Object,availableBorrows:Array,pendingBorrows:Array,currentReturnTime:String,selectedBorrowProject:String,selectedBorrowDescription:String},data(){return{selectedReturnBorrow:"",selectedCancelBorrow:"",showConfirm:!1,confirmMessage:"",pendingAction:null,users:[],filteredUsers:[],maxDisplayUsers:50,selectedColleague:null,projectOptions:[]}},async created(){this.$http=p.A.create({baseURL:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL||""}),await this.loadUsers(),await this.loadProjects(),this.filteredUsers=this.users.slice(0,this.maxDisplayUsers)},computed:{currentUserName(){const e=localStorage.getItem("soc_firstname")||"",a=localStorage.getItem("soc_lastname")||"";return`${e} ${a}`.trim()},formattedAvailableBorrows(){return this.availableBorrows.map(e=>({id:e.id,displayText:`${e.id} - ${e.name} (${e.project}) - ${this.formatDate(e.selected_date)} ${e.time}`}))},formattedPendingBorrows(){return this.pendingBorrows.map(e=>({id:e.id,displayText:`${e.id} - ${e.name} (${e.project}) - ${this.formatDate(e.selected_date)} ${e.time}`}))},selectedProject:{get(){return this.borrowForm.project},set(e){this.$emit("update-borrow-form",{field:"project",value:e})}}},watch:{selectedReturnBorrow(e){this.$emit("updateReturnForm","borrowId",e),e&&this.selectedBorrowDescription&&this.$emit("updateReturnForm","discription",this.selectedBorrowDescription)},selectedCancelBorrow(e){this.$emit("update-cancel-form",{field:"borrowId",value:e})}},methods:{async loadProjects(){try{const e=await this.$http.get("/api/tasks");e.data&&Array.isArray(e.data)&&(this.projectOptions=e.data.filter(e=>"completed"!==e.status).map(e=>({label:e.task_name,value:e.task_name})))}catch(e){console.error(e)}},async loadUsers(){try{const e=await this.$http.get("/api/users");if(e.data&&Array.isArray(e.data)){const a=this.currentUserName;this.users=e.data.filter(e=>{const t=`${e.firstname} ${e.lastname}`.trim();return t!==a}).map(e=>({...e,displayName:`${e.firstname} ${e.lastname}`.trim()})),this.filteredUsers=this.users.slice(0,this.maxDisplayUsers)}}catch(e){console.error(e)}},searchUsers(e){const a=e.query.toLowerCase().trim(),t=this.borrowForm?.colleagues||[],l=t.map(e=>e.name);let s=this.users.filter(e=>!l.includes(e.displayName));if(""===a)this.filteredUsers=s.slice(0,this.maxDisplayUsers);else{const e=s.filter(e=>e.displayName.toLowerCase().includes(a)||e.username.toLowerCase().includes(a)||e.position&&e.position.toLowerCase().includes(a)||e.department&&e.department.toLowerCase().includes(a));this.filteredUsers=e.slice(0,this.maxDisplayUsers)}},showAllUsers(){const e=this.borrowForm?.colleagues||[],a=e.map(e=>e.name),t=this.users.filter(e=>!a.includes(e.displayName));this.filteredUsers=t.slice(0,this.maxDisplayUsers)},onColleagueSelect(e){const a=e.value;if(a&&a.displayName){const e=this.borrowForm?.colleagues||[],t=e.some(e=>e.name===a.displayName);if(!t){const t=[...e,{name:a.displayName,position:a.position||"",department:a.department||""}];this.$emit("update-borrow-form",{field:"colleagues",value:t})}this.selectedColleague=null}},removeColleague(e){const a=[...this.borrowForm?.colleagues||[]];a.splice(e,1),this.$emit("update-borrow-form",{field:"colleagues",value:a})},getFormTitle(){const e={borrow:"‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏ñ",return:"‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡∏ñ",cancel:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á"};return e[this.activeForm]||"‡∏ü‡∏≠‡∏£‡πå‡∏°"},handleDialogClose(){this.$emit("close-form")},confirmSubmit(e){const a={borrow:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏ñ?",return:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡∏ñ?",cancel:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á?"};this.confirmMessage=a[e],this.pendingAction=e,this.showConfirm=!0},handleConfirm(){this.showConfirm=!1,"borrow"===this.pendingAction?this.$emit("submit-borrow"):"return"===this.pendingAction?this.$emit("submit-return"):"cancel"===this.pendingAction&&this.$emit("submit-cancel"),this.pendingAction=null},updateBorrowForm(e,a){this.$emit("update-borrow-form",{field:e,value:a})},updateReturnForm(e,a){this.$emit("update-return-form",{field:e,value:a})},updateCancelForm(e,a){this.$emit("update-cancel-form",{field:e,value:a})},formatDate(e){return new Date(e).toLocaleDateString("th-TH",{day:"2-digit",month:"2-digit",year:"numeric"})}}};const dl=(0,$.A)(nl,[["render",ol],["__scopeId","data-v-248611d0"]]);var cl=dl,ul={components:{Calendar:Ya,History:gt,BookingForm:cl},data(){return{activeTabIndex:0,selectedDate:null,showForm:!1,activeForm:"borrow",borrowForm:{license:"FXAG-2032",time:"",location:"",project:"",discription:"",colleagues:[],images:[]},returnForm:{borrowId:"",license:"FXAG-2032",location:"",discription:"",images:[]},cancelForm:{borrowId:"",reason:""},records:[],currentTime:new Date,currentBookingData:null,showImageModal:!1,selectedImages:[],showFullImageModal:!1,fullSizeImage:"",teamsWebhookUrl:"YOUR_TEAMS_WEBHOOK_URL_HERE",notifiedActiveBookings:new Set}},computed:{currentDateTime(){return this.currentTime.toLocaleString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})},hasActiveBorrow(){return this.records.some(e=>"active"===e.status)},availableBorrows(){const e=this.getCurrentUserName();return this.records.filter(a=>{if("active"!==a.status)return!1;const t=a.name===e,l=a.colleagues&&Array.isArray(a.colleagues)&&a.colleagues.some(a=>{const t="string"===typeof a?a:a?.name;return t===e});return t||l})},pendingBorrows(){const e=this.getCurrentUserName();return this.records.filter(a=>{if("pending"!==a.status)return!1;const t=a.name===e,l=a.colleagues&&Array.isArray(a.colleagues)&&a.colleagues.some(a=>{const t="string"===typeof a?a:a?.name;return t===e});return t||l})},currentReturnTime(){return this.currentTime.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})},selectedBorrowProject(){if(!this.returnForm.borrowId)return"";const e=this.records.find(e=>e.id==this.returnForm.borrowId);return e?e.project:""},selectedBorrowDescription(){if(!this.returnForm.borrowId)return"";const e=this.records.find(e=>e.id==this.returnForm.borrowId);return e?e.discription:""},borrowRecordsCount(){return this.records.filter(e=>"returned"!==e.status).length},bookingsAllowingImageUpload(){const e=this.getCurrentUserName();return this.records.filter(a=>{if("active"!==a.status)return!1;const t=a.name===e,l=a.colleagues&&Array.isArray(a.colleagues)&&a.colleagues.some(a=>{const t="string"===typeof a?a:a?.name;return t===e});return t||l})},groupedImages(){const e={};return this.selectedImages.forEach(a=>{e[a.type]||(e[a.type]=[]),e[a.type].push(a)}),Object.keys(e).map(a=>({type:a,images:e[a]}))}},mounted(){setInterval(()=>{this.currentTime=new Date},1e3),setInterval(()=>{this.loadRecords()},3e4)},created(){this.$http=p.A.create({baseURL:""}),this.loadRecords()},methods:{getCurrentUserName(){const e=localStorage.getItem("soc_firstname")||"",a=localStorage.getItem("soc_lastname")||"";return`${e} ${a}`.trim()},async loadRecords(){try{const e=await p.A.get("/api/car-booking");this.records=e.data}catch(e){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏£‡∏ñ‡πÑ‡∏î‡πâ",life:3e3})}},triggerFileUpload(){document.getElementById("modal-upload").click()},selectDate(e){this.selectedDate=e,this.showForm=!0,this.activeForm="borrow"},showReturnForm(){this.selectedDate=new Date,this.showForm=!0,this.activeForm="return"},showCancelForm(){this.selectedDate=new Date,this.showForm=!0,this.activeForm="cancel"},closeForm(){this.showForm=!1,this.selectedDate=null,this.resetForms()},handleImageUpload(e,a){const t=Array.from(e.target.files),l=[];t.forEach(e=>{const s=new FileReader;s.onload=e=>{l.push(e.target.result),l.length===t.length&&("borrow"===a?this.borrowForm.images=l:this.returnForm.images=l)},s.readAsDataURL(e)})},openImageModal(e){this.selectedImages=[{src:e,type:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û"}],this.showImageModal=!0},calculateUsageDuration(e,a,t){const l=new Date(e),[s,o]=a.split(":").map(Number);l.setHours(s,o,0,0);const i=t-l,r=Math.floor(i/36e5),n=Math.floor(i%36e5/6e4);return r>0?`${r} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ${n} ‡∏ô‡∏≤‡∏ó‡∏µ`:`${n} ‡∏ô‡∏≤‡∏ó‡∏µ`},viewImages(e,a=null){this.selectedImages=e,this.currentBookingData=a,this.showImageModal=!0},handleImageError(){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ",life:3e3})},handleImageLoad(){},viewFullImage(e){let a=e;"object"===typeof e&&e.src&&(a="string"===typeof e.src?e.src:e.src.src),this.fullSizeImage=a,this.showFullImageModal=!0},formatDateForDB(e){const a=new Date(e),t=a.getFullYear(),l=String(a.getMonth()+1).padStart(2,"0"),s=String(a.getDate()).padStart(2,"0");return`${t}-${l}-${s}`},async handleAdditionalImageUpload(e,a){const t=Array.from(e.target.files);if(0!==t.length)try{const l=this.records.find(e=>e.id===a);if(!l)return;const s=[];for(const e of t){const a=new FileReader,t=await new Promise(t=>{a.onload=()=>t(a.result),a.readAsDataURL(e)});s.push({name:e.name,src:t,type:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",timestamp:(new Date).toLocaleString("th-TH")})}const o=l.images||[],i=[...o,...s];await this.$http.put(`/api/car-booking/${a}`,{images:i}),await this.loadRecords(),this.$toast.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:`‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ${t.length} ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢`,life:3e3}),e.target.value=""}catch(l){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ",life:3e3})}},async submitBorrow(){try{const e={type:"borrow",location:this.borrowForm.location,project:this.borrowForm.project,description:this.borrowForm.discription,selected_date:this.formatDateForDB(this.selectedDate),time:this.borrowForm.time,license:"FXAG-2032",colleagues:this.borrowForm.colleagues||[],images:this.borrowForm.images||[],user_id:localStorage.getItem("soc_user_id")};await this.$http.post("/api/car-booking",e),await this.loadRecords(),this.closeForm(),this.$toast.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3})}catch(e){409===e.response?.status?this.$toast.add({severity:"warn",summary:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏≠‡∏á‡πÑ‡∏î‡πâ",detail:e.response.data.details||e.response.data.error,life:5e3}):this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÑ‡∏î‡πâ",life:3e3})}},async submitReturn(){const e=this.returnForm.borrowId||this.$refs.bookingForm?.selectedReturnBorrow;if(e)try{const a=localStorage.getItem("soc_firstname")||"",t=localStorage.getItem("soc_lastname")||"",l=`${a} ${t}`.trim(),s=this.currentTime.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit",hour12:!1}),o={return_name:l,return_location:this.returnForm.location,return_description:this.returnForm.discription,return_time:s,return_date:this.formatDateForDB(new Date)};await p.A.put(`/api/car-booking/${e}`,o),await this.loadRecords(),this.closeForm(),await this.loadRecords(),this.closeForm(),this.$toast.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3})}catch(a){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏£‡∏ñ‡πÑ‡∏î‡πâ",life:3e3})}else this.$toast.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô",life:3e3})},async submitCancel(){if(this.cancelForm.borrowId)try{await this.$http.delete(`/api/car-booking/${this.cancelForm.borrowId}`),await this.loadRecords(),this.closeForm(),this.$toast.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3})}catch(e){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÑ‡∏î‡πâ",life:3e3})}else this.$toast.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",life:3e3})},updateBorrowForm({field:e,value:a}){this.borrowForm[e]=a},updateReturnForm(e,a){this.returnForm[e]=a},updateCancelForm({field:e,value:a}){this.cancelForm[e]=a},async handleAdditionalImageUploadFromHistory({files:e,bookingId:a}){if(0!==e.length)try{const t=this.records.find(e=>e.id===a);if(!t)return;const l=[];for(const a of e){const e=new FileReader,t=await new Promise(t=>{e.onload=()=>t(e.result),e.readAsDataURL(a)});l.push({name:a.name,src:t,type:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",timestamp:(new Date).toLocaleString("th-TH")})}const s=t.images||[],o=[...s,...l];await this.$http.put(`/api/car-booking/${a}`,{images:o}),await this.loadRecords(),this.$toast.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:`‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ${e.length} ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢`,life:3e3})}catch(t){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ",life:3e3})}},resetForms(){this.borrowForm={license:"FXAG-2032",time:"",location:"",project:"",discription:"",colleagues:[],images:[]},this.returnForm={borrowId:"",license:"FXAG-2032",location:"",discription:"",images:[]},this.cancelForm={borrowId:"",reason:""}},canUploadForBooking(e){if(!e)return!1;const a=this.records.find(a=>a.id===e.id);return!!a&&"active"===a.status},async handleModalImageUpload(e){if(!this.currentBookingData)return;const a=Array.from(e.target.files);0!==a.length&&(await this.handleAdditionalImageUploadFromHistory({files:a,bookingId:this.currentBookingData.id}),e.target.value="",this.showImageModal=!1)}}};const pl=(0,$.A)(ul,[["render",va],["__scopeId","data-v-3225434c"]]);var ml=pl;const vl={class:"leave-work-container"},hl={key:0,class:"action-buttons"},kl={class:"main-content"};function gl(e,a,t,l,o,i){const r=(0,s.g2)("Toast"),n=(0,s.g2)("Card"),d=(0,s.g2)("Button"),c=(0,s.g2)("Badge"),u=(0,s.g2)("LeaveHistory"),p=(0,s.g2)("LeaveForm"),m=(0,s.g2)("Dialog"),v=(0,s.g2)("LeaveApproval");return(0,s.uX)(),(0,s.CE)("div",vl,[(0,s.bF)(r),(0,s.bF)(n,{class:"header-card"},{header:(0,s.k6)(()=>[...a[4]||(a[4]=[(0,s.Lk)("div",{class:"main-header"},[(0,s.Lk)("h1",null,[(0,s.Lk)("i",{class:"pi pi-sign-out"}),(0,s.eW)(" ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏•‡∏≤‡∏á‡∏≤‡∏ô")])],-1)])]),_:1}),l.permissionsLoaded?((0,s.uX)(),(0,s.CE)("div",hl,[(0,s.bF)(d,{onClick:i.showLeaveForm,class:"leave-btn",icon:"pi pi-plus",raised:""},{default:(0,s.k6)(()=>[...a[5]||(a[5]=[(0,s.Lk)("span",{class:"btn-text"},"‡πÅ‡∏à‡πâ‡∏á‡∏•‡∏≤‡∏á‡∏≤‡∏ô",-1)])]),_:1},8,["onClick"]),i.canApproveLeave?((0,s.uX)(),(0,s.Wv)(d,{key:0,onClick:i.showApprovalForm,class:"approval-btn",icon:"pi pi-check-circle",raised:""},{default:(0,s.k6)(()=>[a[6]||(a[6]=(0,s.Lk)("span",{class:"btn-text"},"‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏•‡∏≤",-1)),i.pendingLeaveCount>0?((0,s.uX)(),(0,s.Wv)(c,{key:0,value:i.pendingLeaveCount,severity:"danger",class:"pending-badge"},null,8,["value"])):(0,s.Q3)("",!0)]),_:1},8,["onClick"])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),(0,s.Lk)("div",kl,[(0,s.bF)(u,{records:i.filteredLeaveRecords,onViewAttachments:i.viewAttachments,onRequestDeleted:i.loadLeaveRecords},null,8,["records","onViewAttachments","onRequestDeleted"])]),(0,s.bF)(m,{visible:o.showLeaveDialog,"onUpdate:visible":a[1]||(a[1]=e=>o.showLeaveDialog=e),modal:"",header:"‡πÅ‡∏à‡πâ‡∏á‡∏•‡∏≤‡∏á‡∏≤‡∏ô",style:{width:"95vw",height:"90vh"},draggable:!1},{default:(0,s.k6)(()=>[(0,s.bF)(p,{onSubmitLeave:i.submitLeave,onCloseForm:a[0]||(a[0]=e=>o.showLeaveDialog=!1)},null,8,["onSubmitLeave"])]),_:1},8,["visible"]),i.canApproveLeave?((0,s.uX)(),(0,s.Wv)(m,{key:1,visible:o.showApprovalDialog,"onUpdate:visible":a[3]||(a[3]=e=>o.showApprovalDialog=e),modal:"",header:"‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏•‡∏≤",style:{width:"95vw",height:"90vh"},draggable:!1},{default:(0,s.k6)(()=>[(0,s.bF)(v,{records:i.pendingLeaveRecords,onApproveLeave:i.approveLeave,onRejectLeave:i.rejectLeave,onCloseForm:a[2]||(a[2]=e=>o.showApprovalDialog=!1)},null,8,["records","onApproveLeave","onRejectLeave"])]),_:1},8,["visible"])):(0,s.Q3)("",!0)])}const bl={class:"form-grid"},fl={class:"input-group"},yl={class:"input-group"},wl={class:"input-group"},Ll={key:0,class:"quota-status"},Fl={key:0,class:"quota-info"},Dl={class:"quota-total"},Cl={key:1,class:"quota-placeholder-text"},_l={class:"input-group date-range-group"},Al={class:"date-field"},El={class:"date-field"},Rl={class:"input-group"},xl={class:"input-group full-width"},Tl={class:"input-group full-width"},Il={class:"file-upload-wrapper"},Ul={key:0,class:"file-list"},Vl={class:"file-name"},Sl={class:"input-group"},$l={class:"input-group"},Xl={class:"user-option"},jl={class:"user-name"},Wl={class:"user-role"},Bl={class:"input-group"},Ol={class:"input-group"},Nl={class:"input-group full-width"},Kl={class:"input-group full-width"},Ml={class:"form-actions"};function Hl(e,a,t,o,i,r){const n=(0,s.g2)("Toast"),d=(0,s.g2)("InputText"),u=(0,s.g2)("Dropdown"),p=(0,s.g2)("Calendar"),m=(0,s.g2)("Textarea"),v=(0,s.g2)("Button"),h=(0,s.g2)("AutoComplete"),k=(0,s.g2)("Divider"),g=(0,s.g2)("Card");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(n),(0,s.bF)(g,{class:"form-card"},{content:(0,s.k6)(()=>[(0,s.Lk)("form",{onSubmit:a[10]||(a[10]=(0,l.D$)((...e)=>r.submitForm&&r.submitForm(...e),["prevent"])),class:"leave-form"},[(0,s.Lk)("div",bl,[(0,s.Lk)("div",fl,[a[11]||(a[11]=(0,s.Lk)("label",{for:"name",class:"input-label"},"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•",-1)),(0,s.bF)(d,{id:"name",value:r.currentUserName,readonly:"",class:"corporate-input readonly-field"},null,8,["value"])]),(0,s.Lk)("div",yl,[a[12]||(a[12]=(0,s.Lk)("label",{for:"position",class:"input-label"},"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",-1)),(0,s.bF)(d,{id:"position",value:r.currentUserPosition,readonly:"",class:"corporate-input readonly-field"},null,8,["value"])]),(0,s.Lk)("div",wl,[a[13]||(a[13]=(0,s.Lk)("label",{for:"leaveType",class:"input-label"},"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤ *",-1)),(0,s.bF)(u,{modelValue:i.formData.leaveType,"onUpdate:modelValue":a[0]||(a[0]=e=>i.formData.leaveType=e),options:r.leaveTypesWithQuota,optionLabel:"label",optionValue:"value",optionDisabled:r.optionDisabled,class:"corporate-dropdown",required:"",onChange:r.onLeaveTypeChange},{option:(0,s.k6)(e=>[(0,s.Lk)("div",{class:(0,c.C4)(["leave-type-option",{"disabled-option":e.option.disabled}])},[(0,s.Lk)("span",null,(0,c.v_)(e.option.label),1),e.option.disabled?((0,s.uX)(),(0,s.CE)("span",Ll,"‡∏´‡∏°‡∏î‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤")):(0,s.Q3)("",!0)],2)]),_:1},8,["modelValue","options","optionDisabled","onChange"])]),(0,s.Lk)("div",{class:(0,c.C4)(["quota-display",{"quota-placeholder":!i.selectedQuota}])},[i.selectedQuota?((0,s.uX)(),(0,s.CE)("div",Fl,[a[14]||(a[14]=(0,s.Lk)("span",{class:"quota-label"},"‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠:",-1)),(0,s.Lk)("span",{class:(0,c.C4)(["quota-value",r.getQuotaClass(i.selectedQuota.remainingDays)])},(0,c.v_)(i.selectedQuota.remainingDays)+" ‡∏ß‡∏±‡∏ô ",3),(0,s.Lk)("span",Dl,"(‡∏à‡∏≤‡∏Å "+(0,c.v_)(i.selectedQuota.quota)+" ‡∏ß‡∏±‡∏ô)",1)])):((0,s.uX)(),(0,s.CE)("div",Cl," ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤ "))],2),(0,s.Lk)("div",_l,[(0,s.Lk)("div",Al,[a[15]||(a[15]=(0,s.Lk)("label",{for:"startDateTime",class:"input-label"},"‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏≤ *",-1)),(0,s.bF)(p,{modelValue:i.formData.startDateTime,"onUpdate:modelValue":a[1]||(a[1]=e=>i.formData.startDateTime=e),showTime:"",hourFormat:"24",dateFormat:"dd/mm/yy",class:"corporate-input",manualInput:!0,stepHour:1,stepMinute:1,required:""},null,8,["modelValue"])]),(0,s.Lk)("div",El,[a[16]||(a[16]=(0,s.Lk)("label",{for:"endDateTime",class:"input-label"},"‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏•‡∏≤ *",-1)),(0,s.bF)(p,{modelValue:i.formData.endDateTime,"onUpdate:modelValue":a[2]||(a[2]=e=>i.formData.endDateTime=e),showTime:"",hourFormat:"24",dateFormat:"dd/mm/yy",minDate:i.formData.startDateTime,class:"corporate-input",manualInput:!0,stepHour:1,stepMinute:1,required:""},null,8,["modelValue","minDate"])])]),(0,s.Lk)("div",Rl,[a[17]||(a[17]=(0,s.Lk)("label",{for:"totalDays",class:"input-label"},"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏•‡∏≤",-1)),(0,s.bF)(d,{id:"totalDays",value:r.calculateDays,readonly:"",class:"corporate-input readonly-field"},null,8,["value"])]),(0,s.Lk)("div",xl,[a[18]||(a[18]=(0,s.Lk)("label",{for:"reason",class:"input-label"},"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏•‡∏≤",-1)),(0,s.bF)(m,{id:"reason",modelValue:i.formData.reason,"onUpdate:modelValue":a[3]||(a[3]=e=>i.formData.reason=e),rows:"3",class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",Tl,[a[20]||(a[20]=(0,s.Lk)("label",{class:"input-label"},"‡πÅ‡∏ô‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö (Attachments)",-1)),(0,s.Lk)("div",Il,[(0,s.Lk)("input",{ref:"fileInput",onChange:a[4]||(a[4]=(...e)=>r.handleFileUpload&&r.handleFileUpload(...e)),type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif",multiple:"",class:"file-input",id:"attachments"},null,544),(0,s.bF)(v,{type:"button",label:i.formData.attachments?.length>0?`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ${i.formData.attachments.length} ‡πÑ‡∏ü‡∏•‡πå`:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå",icon:"pi pi-upload",severity:"secondary",outlined:"",onClick:a[5]||(a[5]=a=>e.$refs.fileInput.click())},null,8,["label"])]),i.formData.attachments?.length>0?((0,s.uX)(),(0,s.CE)("div",Ul,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.formData.attachments,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"file-item"},[a[19]||(a[19]=(0,s.Lk)("i",{class:"pi pi-file"},null,-1)),(0,s.Lk)("span",Vl,(0,c.v_)(e.name),1),(0,s.bF)(v,{icon:"pi pi-times",severity:"danger",text:"",size:"small",onClick:e=>r.removeFile(t)},null,8,["onClick"])]))),128))])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Sl,[a[21]||(a[21]=(0,s.Lk)("label",{for:"delegationOption",class:"input-label"},"‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏•‡∏≤ *",-1)),(0,s.bF)(u,{modelValue:i.formData.delegationOption,"onUpdate:modelValue":a[6]||(a[6]=e=>i.formData.delegationOption=e),options:i.delegationOptions,optionLabel:"label",optionValue:"value",class:"corporate-dropdown",required:""},null,8,["modelValue","options"])]),"yes"===i.formData.delegationOption?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("div",$l,[a[22]||(a[22]=(0,s.Lk)("label",{for:"delegateUser",class:"input-label"},"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏ó‡∏ô *",-1)),(0,s.bF)(h,{modelValue:i.selectedDelegate,"onUpdate:modelValue":a[7]||(a[7]=e=>i.selectedDelegate=e),suggestions:i.filteredUsers,onComplete:r.searchUsers,onItemSelect:r.onDelegateSelect,onDropdownClick:r.showAllUsers,optionLabel:"displayName",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô...",class:"corporate-input",dropdown:!0,forceSelection:!0,scrollHeight:200,required:""},{option:(0,s.k6)(e=>[(0,s.Lk)("div",Xl,[(0,s.Lk)("div",jl,(0,c.v_)(e.option.displayName),1),(0,s.Lk)("div",Wl,(0,c.v_)(e.option.position)+" - "+(0,c.v_)(e.option.department),1)])]),_:1},8,["modelValue","suggestions","onComplete","onItemSelect","onDropdownClick"])]),(0,s.Lk)("div",Bl,[a[23]||(a[23]=(0,s.Lk)("label",{for:"delegatePosition",class:"input-label"},"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",-1)),(0,s.bF)(d,{id:"delegatePosition",value:i.formData.delegatePosition,readonly:"",class:"corporate-input readonly-field"},null,8,["value"])]),(0,s.Lk)("div",Ol,[a[24]||(a[24]=(0,s.Lk)("label",{for:"delegateDepartment",class:"input-label"},"‡πÅ‡∏ú‡∏ô‡∏Å",-1)),(0,s.bF)(d,{id:"delegateDepartment",value:i.formData.delegateDepartment,readonly:"",class:"corporate-input readonly-field"},null,8,["value"])]),(0,s.Lk)("div",Nl,[a[25]||(a[25]=(0,s.Lk)("label",{for:"delegateContact",class:"input-label"},"‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ *",-1)),(0,s.bF)(d,{id:"delegateContact",modelValue:i.formData.delegateContact,"onUpdate:modelValue":a[8]||(a[8]=e=>i.formData.delegateContact=e),placeholder:"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£, ‡∏≠‡∏µ‡πÄ‡∏°‡∏•, ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",required:"",class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",Kl,[a[26]||(a[26]=(0,s.Lk)("label",{for:"workDetails",class:"input-label"},"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢ *",-1)),(0,s.bF)(m,{id:"workDetails",modelValue:i.formData.workDetails,"onUpdate:modelValue":a[9]||(a[9]=e=>i.formData.workDetails=e),rows:"4",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏•‡∏≤...",required:"",class:"corporate-input"},null,8,["modelValue"])])],64)):(0,s.Q3)("",!0)]),(0,s.bF)(k),(0,s.Lk)("div",Ml,[(0,s.bF)(v,{type:"button",label:"‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",icon:"pi pi-refresh",severity:"secondary",outlined:"",onClick:r.resetForm},null,8,["onClick"]),(0,s.bF)(v,{type:"submit",label:"‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏•‡∏≤‡∏á‡∏≤‡∏ô",icon:"pi pi-check",severity:"success"})])],32)]),_:1})])}var Pl={name:"LeaveForm",components:{AutoComplete:il.A},async created(){await this.loadLeaveTypes(),await this.loadUsers(),await this.loadQuotaData(),this.filteredUsers=this.users.slice(0,this.maxDisplayUsers)},data(){return{formData:{leaveType:"",startDateTime:null,endDateTime:null,reason:"",delegationOption:"no",delegateName:"",delegatePosition:"",delegateDepartment:"",delegateContact:"",workDetails:"",attachments:[]},leaveTypes:[],delegationOptions:[{label:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡∏á‡∏≤‡∏ô",value:"no"},{label:"‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡∏á‡∏≤‡∏ô",value:"yes"}],users:[],filteredUsers:[],selectedDelegate:null,maxDisplayUsers:50,quotaData:{},selectedQuota:null}},computed:{currentUserName(){const e=localStorage.getItem("soc_firstname")||"",a=localStorage.getItem("soc_lastname")||"";return`${e} ${a}`.trim()},currentUserRole(){return localStorage.getItem("soc_role")||""},currentUserPosition(){return localStorage.getItem("soc_position")||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"},calculateDays(){if(this.formData.startDateTime&&this.formData.endDateTime){const e=new Date(this.formData.startDateTime),a=new Date(this.formData.endDateTime);e.setHours(0,0,0,0),a.setHours(0,0,0,0);const t=a-e,l=Math.floor(t/864e5)+1;return l+" ‡∏ß‡∏±‡∏ô"}return"0 ‡∏ß‡∏±‡∏ô"},leaveTypesWithQuota(){return this.leaveTypes.map(e=>{const a=this.quotaData[e.value],t=a&&a.remainingDays<=0;return{...e,disabled:t}})}},methods:{async loadLeaveTypes(){try{const e=await p.A.get("/api/leave/leave-types");this.leaveTypes=e.data}catch(e){console.error("Error loading leave types:",e),this.leaveTypes=[{label:"‡∏•‡∏≤‡∏õ‡πà‡∏ß‡∏¢",value:"sick"},{label:"‡∏•‡∏≤‡∏Å‡∏¥‡∏à",value:"personal"},{label:"‡∏•‡∏≤‡∏û‡∏±‡∏Å‡∏£‡πâ‡∏≠‡∏ô",value:"vacation"}]}},optionDisabled(e){return e.disabled},async loadQuotaData(){try{const e=localStorage.getItem("soc_user_id"),a=await p.A.get(`/api/leave/quota/${e}`);this.quotaData=a.data,this.formData.leaveType&&(this.selectedQuota=this.quotaData[this.formData.leaveType])}catch(e){this.$toast.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡πÑ‡∏î‡πâ",life:3e3})}},onLeaveTypeChange(){this.formData.leaveType&&this.quotaData[this.formData.leaveType]?this.selectedQuota=this.quotaData[this.formData.leaveType]:this.selectedQuota=null},getQuotaClass(e){return e<=0?"quota-zero":e<=2?"quota-low":"quota-normal"},async submitForm(){if(!this.formData.leaveType)return void this.$toast.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤",life:3e3});if(this.selectedQuota&&this.selectedQuota.remainingDays<=0)return void this.$toast.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ô‡∏µ‡πâ‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß",life:3e3});const e=this.calculateTotalDays();if(this.selectedQuota&&e>this.selectedQuota.remainingDays)this.$toast.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:`‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏•‡∏≤ (${e} ‡∏ß‡∏±‡∏ô) ‡πÄ‡∏Å‡∏¥‡∏ô‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (${this.selectedQuota.remainingDays} ‡∏ß‡∏±‡∏ô)`,life:3e3});else if(this.formData.startDateTime&&this.formData.endDateTime&&new Date(this.formData.endDateTime)<new Date(this.formData.startDateTime))this.$toast.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏≤",life:3e3});else try{let e=[];if(this.formData.attachments&&this.formData.attachments.length>0){const a=new FormData;this.formData.attachments.forEach(e=>{a.append("files",e)});const t=await p.A.post("/api/files/upload",a,{headers:{"Content-Type":"multipart/form-data"}});e=t.data.files}const a=this.calculateTotalDays(),t={user_id:localStorage.getItem("soc_user_id"),leave_type:this.formData.leaveType,start_datetime:this.formatDateTime(this.formData.startDateTime),end_datetime:this.formatDateTime(this.formData.endDateTime),total_days:a,reason:this.formData.reason||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏",has_delegation:"yes"===this.formData.delegationOption,delegate_name:this.formData.delegateName||null,delegate_position:this.formData.delegatePosition||null,delegate_department:this.formData.delegateDepartment||null,delegate_contact:this.formData.delegateContact||null,work_details:this.formData.workDetails||null,attachments:e},l=await p.A.post("/api/leave",t,{headers:{}});this.$toast.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏•‡∏≤‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3}),this.$emit("submit-leave",l.data),this.resetForm()}catch(a){let e="‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á";a.response?.data?.error?e=a.response.data.error:a.message&&(e=a.message),this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:e,life:5e3})}},calculateTotalDays(){if(this.formData.startDateTime&&this.formData.endDateTime){const e=new Date(this.formData.startDateTime),a=new Date(this.formData.endDateTime);e.setHours(0,0,0,0),a.setHours(0,0,0,0);const t=a-e;return Math.floor(t/864e5)+1}return 0},formatDateTime(e){return e?new Date(e).toISOString():null},resetForm(){this.formData={leaveType:"",startDateTime:null,endDateTime:null,reason:"",delegationOption:"no",delegateName:"",delegatePosition:"",delegateDepartment:"",delegateContact:"",workDetails:"",attachments:[]},this.selectedDelegate=null},handleFileUpload(e){const a=Array.from(e.target.files);this.formData.attachments=[...this.formData.attachments,...a]},removeFile(e){this.formData.attachments.splice(e,1)},async loadUsers(){try{const e=await p.A.get("/api/users");if(e.data&&Array.isArray(e.data)){const a=this.currentUserName;this.users=e.data.filter(e=>{const t=`${e.firstname} ${e.lastname}`.trim();return t!==a}).map(e=>({...e,displayName:`${e.firstname} ${e.lastname}`.trim()})),this.filteredUsers=this.users.slice(0,this.maxDisplayUsers)}else this.setFallbackUsers()}catch(e){this.setFallbackUsers()}},setFallbackUsers(){this.users=[{id:1,username:"admin",firstname:"Admin",lastname:"User",role:"admin",displayName:"Admin User"},{id:2,username:"hr",firstname:"HR",lastname:"Manager",role:"hr",displayName:"HR Manager"},{id:3,username:"john",firstname:"John",lastname:"Doe",role:"user",displayName:"John Doe"}],this.filteredUsers=this.users},searchUsers(e){const a=e.query.toLowerCase().trim();if(""===a)this.filteredUsers=this.users.slice(0,this.maxDisplayUsers);else{const e=this.users.filter(e=>e.displayName.toLowerCase().includes(a)||e.username.toLowerCase().includes(a)||e.position&&e.position.toLowerCase().includes(a)||e.department&&e.department.toLowerCase().includes(a));this.filteredUsers=e.slice(0,this.maxDisplayUsers)}},showAllUsers(){this.filteredUsers=this.users.slice(0,this.maxDisplayUsers)},onDelegateSelect(e){const a=e.value;a&&(this.formData.delegateName=a.displayName,this.formData.delegatePosition=a.position||"",this.formData.delegateDepartment=a.department||"")}}};const Ql=(0,$.A)(Pl,[["render",Hl],["__scopeId","data-v-28a7a054"]]);var ql=Ql;const Yl={class:"search-box mb-3"},zl={key:0,class:"empty-state"},Gl={key:0,class:"delegate-info"},Jl={class:"delegate-name"},Zl={class:"delegate-position"},es={class:"delegate-department"},as={class:"delegate-contact"},ts={class:"contact-info"},ls={key:0,class:"work-details-btn"},ss={key:1,class:"no-delegation"},os={class:"reason-text-wrap"},is={key:0,class:"attachments-info"},rs={key:1},ns={class:"status-actions"},ds={key:0,class:"approver-info"},cs={key:1,class:"no-approver"},us={class:"work-details-content"},ps={class:"attachments-content"},ms={key:0,class:"no-attachments"},vs={key:1,class:"attachments-list"},hs={class:"file-info"},ks={class:"file-details"},gs={class:"file-name"},bs={class:"file-type"},fs={class:"file-actions"};function ys(e,a,t,l,o,i){const r=(0,s.g2)("InputIcon"),n=(0,s.g2)("InputText"),d=(0,s.g2)("IconField"),u=(0,s.g2)("Badge"),p=(0,s.g2)("Column"),m=(0,s.g2)("Button"),v=(0,s.g2)("DataTable"),h=(0,s.g2)("Card"),k=(0,s.g2)("Dialog"),g=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(h,{class:"history-card"},{content:(0,s.k6)(()=>[(0,s.Lk)("div",Yl,[(0,s.bF)(d,{iconPosition:"left"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{class:"pi pi-search"}),(0,s.bF)(n,{modelValue:o.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e),placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...",class:"w-full"},null,8,["modelValue"])]),_:1})]),0===i.filteredRecords.length?((0,s.uX)(),(0,s.CE)("div",zl,[a[5]||(a[5]=(0,s.Lk)("i",{class:"pi pi-calendar-times",style:{"font-size":"4rem",color:"#ccc"}},null,-1)),(0,s.Lk)("p",null,(0,c.v_)(o.searchQuery?"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤":"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡∏á‡∏≤‡∏ô"),1)])):((0,s.uX)(),(0,s.Wv)(v,{key:1,value:i.filteredRecords,paginator:!0,rows:10,rowsPerPageOptions:[5,10,20],responsiveLayout:"scroll",class:"history-table",stripedRows:""},{default:(0,s.k6)(()=>[(0,s.bF)(p,{field:"id",header:"‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏≥‡∏Ç‡∏≠",sortable:!0},{body:(0,s.k6)(e=>[(0,s.bF)(u,{value:`#${e.data.id}`,class:"custom-id-badge"},null,8,["value"])]),_:1}),(0,s.bF)(p,{field:"employee_name",header:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•",sortable:!0}),(0,s.bF)(p,{field:"employee_position",header:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",sortable:!0}),(0,s.bF)(p,{field:"leave_type",header:"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤",sortable:!0},{body:(0,s.k6)(e=>[(0,s.bF)(u,{value:i.getLeaveTypeLabel(e.data.leave_type),style:(0,c.Tr)({backgroundColor:i.getLeaveTypeColor(e.data.leave_type),color:"#fff",fontWeight:"bold"})},null,8,["value","style"])]),_:1}),(0,s.bF)(p,{header:"‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏≤",sortable:!0},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(i.formatDateTime(e.data.start_datetime)),1)]),_:1}),(0,s.bF)(p,{header:"‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î",sortable:!0},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(i.formatDateTime(e.data.end_datetime)),1)]),_:1}),(0,s.bF)(p,{header:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô",sortable:!0},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(e.data.total_days)+" ‡∏ß‡∏±‡∏ô ",1)]),_:1}),(0,s.bF)(p,{header:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô",style:{"min-width":"200px"}},{body:(0,s.k6)(e=>[e.data.has_delegation?((0,s.uX)(),(0,s.CE)("div",Gl,[(0,s.Lk)("div",Jl,[a[6]||(a[6]=(0,s.Lk)("i",{class:"pi pi-user"},null,-1)),(0,s.Lk)("strong",null,(0,c.v_)(e.data.delegate_name||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"),1)]),(0,s.Lk)("div",Zl,[a[7]||(a[7]=(0,s.Lk)("i",{class:"pi pi-briefcase"},null,-1)),(0,s.Lk)("small",null,(0,c.v_)(e.data.delegate_position||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"),1)]),(0,s.Lk)("div",es,[a[8]||(a[8]=(0,s.Lk)("i",{class:"pi pi-building"},null,-1)),(0,s.Lk)("small",null,(0,c.v_)(e.data.delegate_department||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏ú‡∏ô‡∏Å"),1)]),(0,s.Lk)("div",as,[a[9]||(a[9]=(0,s.Lk)("i",{class:"pi pi-phone"},null,-1)),(0,s.Lk)("small",ts,(0,c.v_)(e.data.delegate_contact||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"),1)]),e.data.work_details?((0,s.uX)(),(0,s.CE)("div",ls,[(0,s.bF)(m,{icon:"pi pi-list",label:"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô",size:"small",severity:"info",outlined:"",onClick:a=>i.showWorkDetails(e.data.work_details)},null,8,["onClick"])])):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("span",ss,[...a[10]||(a[10]=[(0,s.Lk)("i",{class:"pi pi-times-circle"},null,-1),(0,s.eW)(" ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡∏á‡∏≤‡∏ô ",-1)])]))]),_:1}),(0,s.bF)(p,{field:"reason",header:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•",style:{"min-width":"160px",width:"160px"}},{body:(0,s.k6)(e=>[(0,s.Lk)("span",os,(0,c.v_)(e.data.reason),1)]),_:1}),(0,s.bF)(p,{header:"‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏ô‡∏ö",style:{width:"80px"}},{body:(0,s.k6)(e=>[e.data.attachments&&e.data.attachments.length>0?((0,s.uX)(),(0,s.CE)("div",is,[(0,s.bo)((0,s.bF)(m,{icon:"pi pi-paperclip",size:"small",severity:"info",outlined:"",onClick:a=>i.showAttachments(e.data.attachments)},null,8,["onClick"]),[[g,`${e.data.attachments.length} ‡πÑ‡∏ü‡∏•‡πå`]])])):((0,s.uX)(),(0,s.CE)("span",rs,"-"))]),_:1}),(0,s.bF)(p,{field:"status",header:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"},{body:(0,s.k6)(e=>[(0,s.Lk)("div",ns,[(0,s.bF)(u,{value:i.getStatusLabel(e.data.status),severity:i.getStatusSeverity(e.data.status)},null,8,["value","severity"]),i.canDeleteRequest(e.data)?(0,s.bo)(((0,s.uX)(),(0,s.Wv)(m,{key:0,icon:"pi pi-trash",size:"small",severity:"danger",text:"",onClick:a=>i.confirmDelete(e.data),class:"ml-2"},null,8,["onClick"])),[[g,"‡∏•‡∏ö‡∏Ñ‡∏≥‡∏Ç‡∏≠"]]):(0,s.Q3)("",!0)])]),_:1}),(0,s.bF)(p,{header:"‡∏ú‡∏π‡πâ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",style:{"min-width":"150px"}},{body:(0,s.k6)(e=>[e.data.approved_by?((0,s.uX)(),(0,s.CE)("div",ds,[a[11]||(a[11]=(0,s.Lk)("i",{class:"pi pi-user-check"},null,-1)),(0,s.Lk)("span",null,(0,c.v_)(e.data.approved_by),1)])):((0,s.uX)(),(0,s.CE)("span",cs,"-"))]),_:1}),(0,s.bF)(p,{header:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠",sortable:!0},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(i.formatDateTime(e.data.created_at)),1)]),_:1})]),_:1},8,["value"]))]),_:1}),(0,s.bF)(k,{visible:o.showWorkDetailsDialog,"onUpdate:visible":a[2]||(a[2]=e=>o.showWorkDetailsDialog=e),modal:"",header:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢",style:{width:"50rem"}},{footer:(0,s.k6)(()=>[(0,s.bF)(m,{label:"‡∏õ‡∏¥‡∏î",icon:"pi pi-times",onClick:a[1]||(a[1]=e=>o.showWorkDetailsDialog=!1)})]),default:(0,s.k6)(()=>[(0,s.Lk)("div",us,[(0,s.Lk)("p",null,(0,c.v_)(o.selectedWorkDetails),1)])]),_:1},8,["visible"]),(0,s.bF)(k,{visible:o.showAttachmentsDialog,"onUpdate:visible":a[4]||(a[4]=e=>o.showAttachmentsDialog=e),modal:"",header:"‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏ô‡∏ö",style:{width:"60rem"}},{footer:(0,s.k6)(()=>[(0,s.bF)(m,{label:"‡∏õ‡∏¥‡∏î",icon:"pi pi-times",onClick:a[3]||(a[3]=e=>o.showAttachmentsDialog=!1)})]),default:(0,s.k6)(()=>[(0,s.Lk)("div",ps,[0===o.selectedAttachments.length?((0,s.uX)(),(0,s.CE)("div",ms,[...a[12]||(a[12]=[(0,s.Lk)("i",{class:"pi pi-file",style:{"font-size":"3rem",color:"#ccc"}},null,-1),(0,s.Lk)("p",null,"‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏ô‡∏ö",-1)])])):((0,s.uX)(),(0,s.CE)("div",vs,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.selectedAttachments,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"attachment-item"},[(0,s.Lk)("div",hs,[(0,s.Lk)("i",{class:(0,c.C4)([i.getFileIcon(e),"file-icon"])},null,2),(0,s.Lk)("div",ks,[(0,s.Lk)("span",gs,(0,c.v_)(e),1),(0,s.Lk)("small",bs,(0,c.v_)(i.getFileType(e)),1)])]),(0,s.Lk)("div",fs,[(0,s.bo)((0,s.bF)(m,{icon:"pi pi-download",size:"small",severity:"success",outlined:"",onClick:a=>i.downloadFile(e)},null,8,["onClick"]),[[g,"‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î"]])])]))),128))]))])]),_:1},8,["visible"])],64)}var ws={name:"LeaveHistory",emits:["view-attachments","request-deleted"],inject:["$confirm","$toast"],props:{records:Array},data(){return{searchQuery:"",showWorkDetailsDialog:!1,selectedWorkDetails:"",showAttachmentsDialog:!1,selectedAttachments:[],leaveTypes:[]}},async mounted(){await this.loadLeaveTypes()},computed:{filteredRecords(){const e=this.records||[];if(!this.searchQuery)return e;const a=this.searchQuery.toLowerCase().trim();return e.filter(e=>{const t={id:`#${e.id}`||"",request_id:e.id||"",employee_name:e.employee_name||"",employee_position:e.employee_position||"",leave_type:this.getLeaveTypeLabel(e.leave_type)||"",start_datetime:this.formatDateTime(e.start_datetime)||"",end_datetime:this.formatDateTime(e.end_datetime)||"",total_days:e.total_days||"",delegate_name:e.delegate_name||"",delegate_position:e.delegate_position||"",work_details:e.work_details||"",reason:e.reason||"",status:e.status||""};return Object.values(t).some(e=>{if(null===e||void 0===e)return!1;const t=String(e).toLowerCase();return t.includes(a)||t.replace(/\s/g,"").includes(a.replace(/\s/g,""))})})}},created(){this.$http=p.A.create({baseURL:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL||""})},methods:{async loadLeaveTypes(){try{const e=await this.$http.get("/api/leave/leave-types");this.leaveTypes=e.data}catch(e){console.error("Error loading leave types:",e)}},getLeaveTypeColor(e){const a=this.leaveTypes.find(a=>a.value===e);return a?.color||"#6c757d"},canDeleteRequest(e){const a=`${localStorage.getItem("soc_firstname")} ${localStorage.getItem("soc_lastname")}`.trim();return e.employee_name===a&&"pending"===e.status},confirmDelete(e){this.$confirm.require({message:`‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏•‡∏≤‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n\n‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${this.getLeaveTypeLabel(e.leave_type)}\n‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${this.formatDateTime(e.start_datetime)}`,header:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",acceptLabel:"‡∏•‡∏ö",rejectLabel:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",accept:()=>{this.deleteRequest(e.id)}})},async deleteRequest(e){try{await this.$http.delete(`/api/leave/${e}`,{headers:{}}),this.$toast.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏•‡∏ö‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏•‡∏≤‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3}),this.$emit("request-deleted")}catch(a){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:a.response?.data?.error||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÑ‡∏î‡πâ",life:3e3})}},showWorkDetails(e){this.selectedWorkDetails=e,this.showWorkDetailsDialog=!0},showAttachments(e){this.selectedAttachments=e||[],this.showAttachmentsDialog=!0},downloadFile(e){const a=document.createElement("a");a.href=`/api/files/download/${e}`,a.download=e,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a),this.$toast.add({severity:"success",summary:"‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î",detail:`‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î: ${e}`,life:3e3})},getFileIcon(e){const a=e.split(".").pop()?.toLowerCase(),t={pdf:"pi pi-file-pdf",doc:"pi pi-file-word",docx:"pi pi-file-word",xls:"pi pi-file-excel",xlsx:"pi pi-file-excel",jpg:"pi pi-image",jpeg:"pi pi-image",png:"pi pi-image",gif:"pi pi-image"};return t[a]||"pi pi-file"},getFileType(e){const a=e.split(".").pop()?.toLowerCase(),t={pdf:"PDF Document",doc:"Word Document",docx:"Word Document",xls:"Excel Spreadsheet",xlsx:"Excel Spreadsheet",jpg:"JPEG Image",jpeg:"JPEG Image",png:"PNG Image",gif:"GIF Image"};return t[a]||"Unknown File"},formatDate(e){return e?new Date(e).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"}):"-"},formatDateTime(e){return e?new Date(e).toLocaleString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"},calculateDays(e,a){if(!e||!a)return 0;const t=new Date(e),l=new Date(a),s=Math.abs(l-t);return Math.ceil(s/864e5)+1},getLeaveTypeLabel(e){const a={sick:"‡∏•‡∏≤‡∏õ‡πà‡∏ß‡∏¢",personal:"‡∏•‡∏≤‡∏Å‡∏¥‡∏à",vacation:"‡∏•‡∏≤‡∏û‡∏±‡∏Å‡∏£‡πâ‡∏≠‡∏ô",maternity:"‡∏•‡∏≤‡∏Ñ‡∏•‡∏≠‡∏î",other:"‡∏•‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ"};return a[e]||e},getStatusSeverity(e){const a={pending:"warning",approved:"success",rejected:"danger","‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥":"warning","‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥":"success","‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥":"danger"};return a[e]||"secondary"},getStatusLabel(e){const a={pending:"‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",approved:"‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß",rejected:"‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò"};return a[e]||e},viewAttachments(e){this.$emit("view-attachments",e)}}};const Ls=(0,$.A)(ws,[["render",ys],["__scopeId","data-v-451e7bdd"]]);var Fs=Ls;const Ds={key:0,class:"empty-state"},Cs={class:"ticket-id-container"},_s={class:"reason-text-wrap"},As={key:0,class:"delegate-info"},Es={class:"delegate-name"},Rs={class:"delegate-position"},xs={class:"delegate-department"},Ts={class:"delegate-contact"},Is={class:"contact-info"},Us={key:0,class:"work-details-btn"},Vs={key:1,class:"no-delegation"},Ss={key:0,class:"attachments-info"},$s={key:1},Xs={class:"action-buttons"},js={class:"work-details-content"},Ws={class:"attachments-content"},Bs={key:0,class:"no-attachments"},Os={key:1,class:"attachments-list"},Ns={class:"file-info"},Ks={class:"file-details"},Ms={class:"file-name"},Hs={class:"file-type"},Ps={class:"file-actions"};function Qs(e,a,t,l,o,i){const r=(0,s.g2)("Badge"),n=(0,s.g2)("Column"),d=(0,s.g2)("Button"),u=(0,s.g2)("DataTable"),p=(0,s.g2)("Card"),m=(0,s.g2)("Dialog"),v=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(p,{class:"approval-card"},{content:(0,s.k6)(()=>[0===t.records.length?((0,s.uX)(),(0,s.CE)("div",Ds,[...a[4]||(a[4]=[(0,s.Lk)("i",{class:"pi pi-check-circle",style:{"font-size":"4rem",color:"#ccc"}},null,-1),(0,s.Lk)("p",null,"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏•‡∏≤‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",-1)])])):((0,s.uX)(),(0,s.Wv)(u,{key:1,value:t.records,paginator:!0,rows:10,rowsPerPageOptions:[5,10,20],responsiveLayout:"scroll",class:"approval-table",stripedRows:""},{default:(0,s.k6)(()=>[(0,s.bF)(n,{field:"id",header:"Ticket ID",sortable:!0,style:{"min-width":"120px"}},{body:(0,s.k6)(e=>[(0,s.Lk)("div",Cs,[(0,s.bF)(r,{value:`#${String(e.data.id).padStart(4,"0")}`,class:"ticket-badge"},null,8,["value"])])]),_:1}),(0,s.bF)(n,{field:"employee_name",header:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•",sortable:!0}),(0,s.bF)(n,{field:"employee_position",header:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",sortable:!0}),(0,s.bF)(n,{field:"leave_type",header:"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤",sortable:!0},{body:(0,s.k6)(e=>[(0,s.bF)(r,{value:i.getLeaveTypeLabel(e.data.leave_type),style:(0,c.Tr)({backgroundColor:i.getLeaveTypeColor(e.data.leave_type),color:"#fff",fontWeight:"bold"})},null,8,["value","style"])]),_:1}),(0,s.bF)(n,{header:"‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏≤",sortable:!0},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(i.formatDateTime(e.data.start_datetime)),1)]),_:1}),(0,s.bF)(n,{header:"‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î",sortable:!0},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(i.formatDateTime(e.data.end_datetime)),1)]),_:1}),(0,s.bF)(n,{header:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô"},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(e.data.total_days)+" ‡∏ß‡∏±‡∏ô ",1)]),_:1}),(0,s.bF)(n,{field:"reason",header:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•",style:{"min-width":"160px",width:"160px"}},{body:(0,s.k6)(e=>[(0,s.Lk)("span",_s,(0,c.v_)(e.data.reason||"-"),1)]),_:1}),(0,s.bF)(n,{header:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô",style:{"min-width":"200px"}},{body:(0,s.k6)(e=>[e.data.has_delegation?((0,s.uX)(),(0,s.CE)("div",As,[(0,s.Lk)("div",Es,[a[5]||(a[5]=(0,s.Lk)("i",{class:"pi pi-user"},null,-1)),(0,s.Lk)("strong",null,(0,c.v_)(e.data.delegate_name||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"),1)]),(0,s.Lk)("div",Rs,[a[6]||(a[6]=(0,s.Lk)("i",{class:"pi pi-briefcase"},null,-1)),(0,s.Lk)("small",null,(0,c.v_)(e.data.delegate_position||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"),1)]),(0,s.Lk)("div",xs,[a[7]||(a[7]=(0,s.Lk)("i",{class:"pi pi-building"},null,-1)),(0,s.Lk)("small",null,(0,c.v_)(e.data.delegate_department||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏ú‡∏ô‡∏Å"),1)]),(0,s.Lk)("div",Ts,[a[8]||(a[8]=(0,s.Lk)("i",{class:"pi pi-phone"},null,-1)),(0,s.Lk)("small",Is,(0,c.v_)(e.data.delegate_contact||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"),1)]),e.data.work_details?((0,s.uX)(),(0,s.CE)("div",Us,[(0,s.bF)(d,{icon:"pi pi-list",label:"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô",size:"small",severity:"info",outlined:"",onClick:a=>i.showWorkDetails(e.data.work_details)},null,8,["onClick"])])):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("span",Vs,[...a[9]||(a[9]=[(0,s.Lk)("i",{class:"pi pi-times-circle"},null,-1),(0,s.eW)(" ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡∏á‡∏≤‡∏ô ",-1)])]))]),_:1}),(0,s.bF)(n,{header:"‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏ô‡∏ö",style:{width:"80px"}},{body:(0,s.k6)(e=>[e.data.attachments&&e.data.attachments.length>0?((0,s.uX)(),(0,s.CE)("div",Ss,[(0,s.bo)((0,s.bF)(d,{icon:"pi pi-paperclip",size:"small",severity:"info",outlined:"",onClick:a=>i.showAttachments(e.data.attachments)},null,8,["onClick"]),[[v,`${e.data.attachments.length} ‡πÑ‡∏ü‡∏•‡πå`]])])):((0,s.uX)(),(0,s.CE)("span",$s,"-"))]),_:1}),(0,s.bF)(n,{header:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠",sortable:!0},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(i.formatDateTime(e.data.created_at)),1)]),_:1}),(0,s.bF)(n,{header:"‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",frozen:!0,alignFrozen:"right"},{body:(0,s.k6)(a=>[(0,s.Lk)("div",Xs,[(0,s.bo)((0,s.bF)(d,{icon:"pi pi-check",severity:"success",size:"small",onClick:t=>e.$emit("approve-leave",a.data.id)},null,8,["onClick"]),[[v,"‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"]]),(0,s.bo)((0,s.bF)(d,{icon:"pi pi-times",severity:"danger",size:"small",onClick:t=>e.$emit("reject-leave",a.data.id)},null,8,["onClick"]),[[v,"‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"]])])]),_:1})]),_:1},8,["value"]))]),_:1}),(0,s.bF)(m,{visible:o.showWorkDetailsDialog,"onUpdate:visible":a[1]||(a[1]=e=>o.showWorkDetailsDialog=e),modal:"",header:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢",style:{width:"50rem"}},{footer:(0,s.k6)(()=>[(0,s.bF)(d,{label:"‡∏õ‡∏¥‡∏î",icon:"pi pi-times",onClick:a[0]||(a[0]=e=>o.showWorkDetailsDialog=!1)})]),default:(0,s.k6)(()=>[(0,s.Lk)("div",js,[(0,s.Lk)("p",null,(0,c.v_)(o.selectedWorkDetails),1)])]),_:1},8,["visible"]),(0,s.bF)(m,{visible:o.showAttachmentsDialog,"onUpdate:visible":a[3]||(a[3]=e=>o.showAttachmentsDialog=e),modal:"",header:"‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏ô‡∏ö",style:{width:"60rem"}},{footer:(0,s.k6)(()=>[(0,s.bF)(d,{label:"‡∏õ‡∏¥‡∏î",icon:"pi pi-times",onClick:a[2]||(a[2]=e=>o.showAttachmentsDialog=!1)})]),default:(0,s.k6)(()=>[(0,s.Lk)("div",Ws,[0===o.selectedAttachments.length?((0,s.uX)(),(0,s.CE)("div",Bs,[...a[10]||(a[10]=[(0,s.Lk)("i",{class:"pi pi-file",style:{"font-size":"3rem",color:"#ccc"}},null,-1),(0,s.Lk)("p",null,"‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏ô‡∏ö",-1)])])):((0,s.uX)(),(0,s.CE)("div",Os,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.selectedAttachments,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"attachment-item"},[(0,s.Lk)("div",Ns,[(0,s.Lk)("i",{class:(0,c.C4)([i.getFileIcon(e),"file-icon"])},null,2),(0,s.Lk)("div",Ks,[(0,s.Lk)("span",Ms,(0,c.v_)(e),1),(0,s.Lk)("small",Hs,(0,c.v_)(i.getFileType(e)),1)])]),(0,s.Lk)("div",Ps,[(0,s.bo)((0,s.bF)(d,{icon:"pi pi-download",size:"small",severity:"success",outlined:"",onClick:a=>i.downloadFile(e)},null,8,["onClick"]),[[v,"‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î"]])])]))),128))]))])]),_:1},8,["visible"])],64)}var qs={name:"LeaveApproval",props:{records:Array},created(){this.$http=p.A.create({baseURL:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL||""})},data(){return{showWorkDetailsDialog:!1,selectedWorkDetails:"",showAttachmentsDialog:!1,selectedAttachments:[],leaveTypes:[]}},async mounted(){await this.loadLeaveTypes()},methods:{async loadLeaveTypes(){try{const e=await this.$http.get("/api/leave/leave-types");this.leaveTypes=e.data,console.log("Leave types loaded:",this.leaveTypes)}catch(e){console.error("Error loading leave types:",e)}},getLeaveTypeColor(e){const a=this.leaveTypes.find(a=>a.value===e),t=a?.color||"#6c757d";return console.log("Getting color for type:",e,"found:",a,"color:",t),t},showWorkDetails(e){this.selectedWorkDetails=e,this.showWorkDetailsDialog=!0},showAttachments(e){this.selectedAttachments=e||[],this.showAttachmentsDialog=!0},downloadFile(e){this.$toast.add({severity:"success",summary:"‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î",detail:`‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î: ${e}`,life:3e3})},getFileIcon(e){const a=e.split(".").pop()?.toLowerCase(),t={pdf:"pi pi-file-pdf",doc:"pi pi-file-word",docx:"pi pi-file-word",xls:"pi pi-file-excel",xlsx:"pi pi-file-excel",jpg:"pi pi-image",jpeg:"pi pi-image",png:"pi pi-image",gif:"pi pi-image"};return t[a]||"pi pi-file"},getFileType(e){const a=e.split(".").pop()?.toLowerCase(),t={pdf:"PDF Document",doc:"Word Document",docx:"Word Document",xls:"Excel Spreadsheet",xlsx:"Excel Spreadsheet",jpg:"JPEG Image",jpeg:"JPEG Image",png:"PNG Image",gif:"GIF Image"};return t[a]||"Unknown File"},formatDateTime(e){return e?new Date(e).toLocaleString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"},formatDate(e){return e?new Date(e).toLocaleDateString("th-TH",{day:"2-digit",month:"2-digit"}):"-"},calculateDays(e,a){if(!e||!a)return 0;const t=new Date(e),l=new Date(a),s=Math.abs(l-t);return Math.ceil(s/864e5)+1},getLeaveTypeLabel(e){const a={sick:"‡∏•‡∏≤‡∏õ‡πà‡∏ß‡∏¢",personal:"‡∏•‡∏≤‡∏Å‡∏¥‡∏à",vacation:"‡∏•‡∏≤‡∏û‡∏±‡∏Å‡∏£‡πâ‡∏≠‡∏ô",maternity:"‡∏•‡∏≤‡∏Ñ‡∏•‡∏≠‡∏î",other:"‡∏•‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ"};return a[e]||e}}};const Ys=(0,$.A)(qs,[["render",Qs],["__scopeId","data-v-df48cbd2"]]);var zs=Ys,Gs={name:"LeaveWork",components:{LeaveForm:ql,LeaveHistory:Fs,LeaveApproval:zs},setup(){const{hasAccess:e,loadPermissions:a,permissionsLoaded:t}=k();return{hasAccess:e,loadPermissions:a,permissionsLoaded:t}},provide(){return{$confirm:(0,xe.S)(),$toast:(0,q.d)()}},data(){return{leaveRecords:[],loading:!1,showLeaveDialog:!1,showApprovalDialog:!1}},computed:{currentUserRole(){return localStorage.getItem("soc_role")||""},currentUserId(){return localStorage.getItem("soc_user_id")||""},isHROrAdmin(){const e=this.currentUserRole.toLowerCase();return"hr"===e||"admin"===e},canApproveLeave(){return this.hasAccess("/leave_work/approve")},filteredLeaveRecords(){if(this.isHROrAdmin)return this.leaveRecords;const e=`${localStorage.getItem("soc_firstname")} ${localStorage.getItem("soc_lastname")}`.trim(),a=this.leaveRecords.filter(a=>a.employee_name===e);return a},pendingLeaveRecords(){return this.filteredLeaveRecords.filter(e=>"pending"===e.status)},pendingLeaveCount(){return this.pendingLeaveRecords.length}},methods:{showLeaveForm(){this.showLeaveDialog=!0},showApprovalForm(){this.showApprovalDialog=!0},async loadLeaveRecords(){this.loading=!0;try{const e=await this.$http.get("/api/leave");this.leaveRecords=e.data.map(e=>({...e,name:e.employee_name,role:e.employee_role,leaveType:this.getLeaveTypeLabel(e.leave_type),startDate:this.formatDate(e.start_datetime),endDate:this.formatDate(e.end_datetime),submittedAt:new Date(e.created_at).toLocaleString("th-TH")}))}catch(e){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡πÑ‡∏î‡πâ",life:3e3})}finally{this.loading=!1}},async submitLeave(){try{await this.loadLeaveRecords(),this.showLeaveDialog=!1}catch(e){}},async approveLeave(e){this.$confirm.require({message:"‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏•‡∏≤‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?",header:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",icon:"pi pi-check-circle",acceptClass:"p-button-success",acceptLabel:"‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",rejectLabel:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",draggable:!1,accept:async()=>{try{const a=`${localStorage.getItem("soc_firstname")} ${localStorage.getItem("soc_lastname")}`.trim(),t=localStorage.getItem("soc_position")||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",l=`${a} (${t})`;await this.$http.put(`/api/leave/${e}/status`,{status:"approved",approved_by:l}),await this.loadLeaveRecords(),this.$toast.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",life:3e3})}catch(a){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÑ‡∏î‡πâ",life:3e3})}}})},async rejectLeave(e){this.$confirm.require({message:"‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏•‡∏≤‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?",header:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò",icon:"pi pi-times-circle",acceptClass:"p-button-danger",acceptLabel:"‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò",rejectLabel:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",draggable:!1,accept:async()=>{try{const a=`${localStorage.getItem("soc_firstname")} ${localStorage.getItem("soc_lastname")}`.trim(),t=localStorage.getItem("soc_position")||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",l=`${a} (${t})`;await this.$http.put(`/api/leave/${e}/status`,{status:"rejected",approved_by:l}),await this.loadLeaveRecords(),this.$toast.add({severity:"info",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",life:3e3})}catch(a){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÑ‡∏î‡πâ",life:3e3})}}})},viewAttachments(e){e&&e.length>0&&this.$toast.add({severity:"info",summary:"‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö",detail:`‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö ${e.length} ‡πÑ‡∏ü‡∏•‡πå`,life:3e3})},getLeaveTypeLabel(e){const a={sick:"‡∏•‡∏≤‡∏õ‡πà‡∏ß‡∏¢",personal:"‡∏•‡∏≤‡∏Å‡∏¥‡∏à",vacation:"‡∏•‡∏≤‡∏û‡∏±‡∏Å‡∏£‡πâ‡∏≠‡∏ô",maternity:"‡∏•‡∏≤‡∏Ñ‡∏•‡∏≠‡∏î",other:"‡∏•‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ"};return a[e]||e},formatDate(e){return e?new Date(e).toLocaleDateString("th-TH"):""}},created(){this.$http=p.A.create({baseURL:""})},mounted(){this.loadPermissions(),this.loadLeaveRecords()}};const Js=(0,$.A)(Gs,[["render",gl],["__scopeId","data-v-0de97a52"]]);var Zs=Js;const eo={class:"daily-work-container"},ao={class:"main-content"},to={class:"tab-action-buttons"};function lo(e,a,t,l,o,i){const r=(0,s.g2)("Toast"),n=(0,s.g2)("Card"),d=(0,s.g2)("Button"),c=(0,s.g2)("DailyWorkList"),u=(0,s.g2)("DailyWorkForm"),p=(0,s.g2)("Dialog");return(0,s.uX)(),(0,s.CE)("div",eo,[(0,s.bF)(r),(0,s.bF)(n,{class:"header-card"},{header:(0,s.k6)(()=>[...a[2]||(a[2]=[(0,s.Lk)("div",{class:"main-header"},[(0,s.Lk)("h1",null,[(0,s.Lk)("i",{class:"pi pi-calendar"}),(0,s.eW)(" ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô")])],-1)])]),_:1}),(0,s.Lk)("div",ao,[(0,s.Lk)("div",to,[(0,s.bF)(d,{onClick:i.showWorkForm,class:"work-btn",icon:"pi pi-clock",raised:""},{default:(0,s.k6)(()=>[...a[3]||(a[3]=[(0,s.Lk)("span",{class:"btn-text"},"‡∏•‡∏á‡∏á‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ",-1)])]),_:1},8,["onClick"])]),(0,s.bF)(c,{ref:"workList",records:o.workRecords,onRefreshData:i.loadWorkRecords},null,8,["records","onRefreshData"])]),(0,s.bF)(p,{visible:o.showWorkDialog,"onUpdate:visible":a[1]||(a[1]=e=>o.showWorkDialog=e),modal:"",header:"‡∏•‡∏á‡∏á‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ",style:{width:"95vw",height:"90vh"},draggable:!1},{default:(0,s.k6)(()=>[(0,s.bF)(u,{ref:"workForm",onSubmitWork:i.handleWorkSubmit,onCloseForm:a[0]||(a[0]=e=>o.showWorkDialog=!1)},null,8,["onSubmitWork"])]),_:1},8,["visible"])])}const so={class:"form-grid"},oo={class:"input-group"},io={class:"input-group"},ro={class:"input-group"},no={class:"input-group"},co={class:"input-group"},uo={class:"input-group"},po={key:1},mo={class:"input-group full-width"},vo={class:"input-group full-width"},ho={class:"input-group full-width"},ko={class:"file-upload-wrapper"},go={key:0,class:"file-list"},bo={class:"file-name"},fo={class:"calendar-section"},yo={class:"calendar-header"},wo={key:0,class:"calendar-options"},Lo={class:"input-group"},Fo={class:"colleague-search"},Do={class:"user-option"},Co={class:"user-name"},_o={class:"email-input-section mt-2"},Ao={class:"input-with-button"},Eo={key:0,class:"selected-attendees"},Ro={class:"attendees-list"},xo={class:"attendee-details"},To={class:"attendee-name"},Io={key:1,class:"no-attendees"},Uo={class:"input-group full-width event-details-group"},Vo={class:"input-group full-width"},So={class:"teams-meeting-section"},$o={class:"checkbox-group"},Xo={class:"form-actions"};function jo(e,a,t,o,i,r){const n=(0,s.g2)("Toast"),d=(0,s.g2)("Dropdown"),u=(0,s.g2)("Calendar"),p=(0,s.g2)("InputText"),m=(0,s.g2)("Badge"),v=(0,s.g2)("Textarea"),h=(0,s.g2)("Button"),k=(0,s.g2)("Divider"),g=(0,s.g2)("Checkbox"),b=(0,s.g2)("AutoComplete"),f=(0,s.g2)("Card");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(n),(0,s.bF)(f,{class:"form-card"},{content:(0,s.k6)(()=>[(0,s.Lk)("form",{onSubmit:a[15]||(a[15]=(0,l.D$)((...e)=>r.submitForm&&r.submitForm(...e),["prevent"])),class:"daily-work-form"},[(0,s.Lk)("div",so,[(0,s.Lk)("div",oo,[a[16]||(a[16]=(0,s.Lk)("label",{for:"taskId",class:"input-label"},"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô *",-1)),(0,s.bF)(d,{id:"taskId",modelValue:i.formData.taskId,"onUpdate:modelValue":a[0]||(a[0]=e=>i.formData.taskId=e),options:i.tasks,optionLabel:"display",optionValue:"id",class:"corporate-dropdown",required:"",placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤",onChange:r.onTaskChange},null,8,["modelValue","options","onChange"])]),(0,s.Lk)("div",io,[a[17]||(a[17]=(0,s.Lk)("label",{for:"workDate",class:"input-label"},"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏á‡∏≤‡∏ô *",-1)),(0,s.bF)(u,{id:"workDate",modelValue:i.formData.workDate,"onUpdate:modelValue":a[1]||(a[1]=e=>i.formData.workDate=e),dateFormat:"dd/mm/yy",class:"corporate-input",required:""},null,8,["modelValue"])]),(0,s.Lk)("div",ro,[a[18]||(a[18]=(0,s.Lk)("label",{for:"startTime",class:"input-label"},"‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô *",-1)),(0,s.bF)(u,{id:"startTime",modelValue:i.formData.startTime,"onUpdate:modelValue":a[2]||(a[2]=e=>i.formData.startTime=e),timeOnly:"",hourFormat:"24",class:"corporate-input",required:""},null,8,["modelValue"])]),(0,s.Lk)("div",no,[a[19]||(a[19]=(0,s.Lk)("label",{for:"endTime",class:"input-label"},"‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏á‡∏≤‡∏ô *",-1)),(0,s.bF)(u,{id:"endTime",modelValue:i.formData.endTime,"onUpdate:modelValue":a[3]||(a[3]=e=>i.formData.endTime=e),timeOnly:"",hourFormat:"24",class:"corporate-input",required:""},null,8,["modelValue"])]),(0,s.Lk)("div",co,[a[20]||(a[20]=(0,s.Lk)("label",{for:"totalHours",class:"input-label"},"‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°",-1)),(0,s.bF)(p,{id:"totalHours",value:r.calculateHours,readonly:"",class:"corporate-input readonly-field"},null,8,["value"])]),(0,s.Lk)("div",uo,[a[21]||(a[21]=(0,s.Lk)("label",{for:"workStatus",class:"input-label"},"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô *",-1)),(0,s.bF)(d,{id:"workStatus",modelValue:i.formData.workStatus,"onUpdate:modelValue":a[4]||(a[4]=e=>i.formData.workStatus=e),options:i.statusOptions,optionLabel:"label",optionValue:"value",class:"corporate-dropdown",required:""},{value:(0,s.k6)(e=>[e.value?((0,s.uX)(),(0,s.Wv)(m,{key:0,value:r.getStatusLabelOnly(e.value),style:(0,c.Tr)({backgroundColor:r.getStatusColor(e.value),color:"#fff"})},null,8,["value","style"])):((0,s.uX)(),(0,s.CE)("span",po,"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"))]),option:(0,s.k6)(e=>[(0,s.bF)(m,{value:e.option.label,style:(0,c.Tr)({backgroundColor:e.option.color||"#6c757d",color:"#fff"})},null,8,["value","style"])]),_:1},8,["modelValue","options"])]),(0,s.Lk)("div",mo,[a[22]||(a[22]=(0,s.Lk)("label",{for:"location",class:"input-label"},"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà *",-1)),(0,s.bF)(p,{id:"location",modelValue:i.formData.location,"onUpdate:modelValue":a[5]||(a[5]=e=>i.formData.location=e),required:"",class:"corporate-input",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà"},null,8,["modelValue"])]),(0,s.Lk)("div",vo,[a[23]||(a[23]=(0,s.Lk)("label",{for:"workDescription",class:"input-label"},"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ *",-1)),(0,s.bF)(v,{id:"workDescription",modelValue:i.formData.workDescription,"onUpdate:modelValue":a[6]||(a[6]=e=>i.formData.workDescription=e),rows:"4",required:"",class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",ho,[a[25]||(a[25]=(0,s.Lk)("label",{class:"input-label"},"‡πÅ‡∏ô‡∏ö‡πÑ‡∏ü‡∏•‡πå (‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û, ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£)",-1)),(0,s.Lk)("div",ko,[(0,s.Lk)("input",{ref:"fileInput",onChange:a[7]||(a[7]=(...e)=>r.handleFileUpload&&r.handleFileUpload(...e)),type:"file",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",multiple:"",class:"file-input",id:"fileUpload"},null,544),(0,s.bF)(h,{type:"button",label:i.formData.files?.length>0?`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ${i.formData.files.length} ‡πÑ‡∏ü‡∏•‡πå`:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå",icon:"pi pi-upload",severity:"secondary",outlined:"",onClick:a[8]||(a[8]=a=>e.$refs.fileInput.click())},null,8,["label"])]),i.formData.files?.length>0?((0,s.uX)(),(0,s.CE)("div",go,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.formData.files,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"file-item"},[a[24]||(a[24]=(0,s.Lk)("i",{class:"pi pi-file"},null,-1)),(0,s.Lk)("span",bo,(0,c.v_)(e.name),1),(0,s.bF)(h,{icon:"pi pi-times",size:"small",severity:"danger",text:"",onClick:e=>r.removeFile(t)},null,8,["onClick"])]))),128))])):(0,s.Q3)("",!0)])]),(0,s.bF)(k),(0,s.Lk)("div",fo,[(0,s.Lk)("div",yo,[(0,s.bF)(g,{modelValue:i.formData.createCalendarEvent,"onUpdate:modelValue":a[9]||(a[9]=e=>i.formData.createCalendarEvent=e),inputId:"createCalendar",binary:!0},null,8,["modelValue"]),a[26]||(a[26]=(0,s.Lk)("label",{for:"createCalendar",class:"calendar-main-label"},[(0,s.Lk)("i",{class:"pi pi-calendar-plus"}),(0,s.eW)(" ‡∏™‡∏£‡πâ‡∏≤‡∏á Calendar Event ‡πÉ‡∏ô Microsoft Teams ")],-1))])]),i.formData.createCalendarEvent?((0,s.uX)(),(0,s.CE)("div",wo,[a[33]||(a[33]=(0,s.Lk)("div",{class:"options-header"},[(0,s.Lk)("i",{class:"pi pi-cog"}),(0,s.Lk)("span",null,"‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°")],-1)),(0,s.Lk)("div",Lo,[a[29]||(a[29]=(0,s.Lk)("label",{for:"attendees",class:"input-label"},[(0,s.Lk)("i",{class:"pi pi-users"}),(0,s.eW)(" ‡πÄ‡∏ä‡∏¥‡∏ç‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° ")],-1)),(0,s.Lk)("div",Fo,[(0,s.bF)(b,{modelValue:i.selectedAttendee,"onUpdate:modelValue":a[10]||(a[10]=e=>i.selectedAttendee=e),suggestions:i.filteredAttendees,onComplete:r.searchAttendees,onItemSelect:r.onAttendeeSelect,onDropdownClick:r.showAllAttendees,optionLabel:"name",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ...",class:"corporate-input",dropdown:!0,forceSelection:!1,scrollHeight:200},{option:(0,s.k6)(e=>[(0,s.Lk)("div",Do,[(0,s.Lk)("div",Co,(0,c.v_)(e.option.name),1)])]),_:1},8,["modelValue","suggestions","onComplete","onItemSelect","onDropdownClick"])]),(0,s.Lk)("div",_o,[(0,s.Lk)("div",Ao,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[11]||(a[11]=e=>i.newEmail=e),type:"email",placeholder:"‡∏û‡∏¥‡∏°‡∏û‡πå email ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°...",class:"corporate-input",onKeyup:a[12]||(a[12]=(0,l.jR)((...e)=>r.addNewEmail&&r.addNewEmail(...e),["enter"]))},null,544),[[l.Jo,i.newEmail]]),(0,s.bF)(h,{type:"button",icon:"pi pi-plus",onClick:r.addNewEmail,disabled:!r.isValidEmail(i.newEmail),class:"add-email-btn"},null,8,["onClick","disabled"])])]),i.formData.attendees&&i.formData.attendees.length>0?((0,s.uX)(),(0,s.CE)("div",Eo,[a[27]||(a[27]=(0,s.Lk)("h6",{class:"attendees-title"},"‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:",-1)),(0,s.Lk)("div",Ro,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.formData.attendees,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"attendee-card"},[(0,s.Lk)("div",xo,[(0,s.Lk)("div",To,(0,c.v_)(e),1)]),(0,s.bF)(h,{type:"button",icon:"pi pi-times",severity:"danger",text:"",rounded:"",size:"small",onClick:e=>r.removeAttendee(a),class:"remove-btn"},null,8,["onClick"])]))),128))])])):((0,s.uX)(),(0,s.CE)("div",Io,[...a[28]||(a[28]=[(0,s.Lk)("i",{class:"pi pi-users"},null,-1),(0,s.Lk)("span",null,"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°",-1)])]))]),(0,s.Lk)("div",Uo,[a[30]||(a[30]=(0,s.Lk)("label",{for:"eventDetails",class:"input-label"},[(0,s.Lk)("i",{class:"pi pi-file-edit"}),(0,s.eW)(" ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Calendar Event ")],-1)),(0,s.bo)((0,s.Lk)("textarea",{id:"eventDetails","onUpdate:modelValue":a[13]||(a[13]=e=>i.formData.eventDetails=e),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô calendar event...",rows:"4",class:"corporate-textarea"},null,512),[[l.Jo,i.formData.eventDetails]])]),(0,s.Lk)("div",Vo,[(0,s.Lk)("div",So,[(0,s.Lk)("div",$o,[(0,s.bF)(g,{modelValue:i.formData.createTeamsMeeting,"onUpdate:modelValue":a[14]||(a[14]=e=>i.formData.createTeamsMeeting=e),inputId:"createTeams",binary:!0},null,8,["modelValue"]),a[31]||(a[31]=(0,s.Lk)("label",{for:"createTeams",class:"checkbox-label"},[(0,s.Lk)("i",{class:"pi pi-video"}),(0,s.eW)(" ‡∏™‡∏£‡πâ‡∏≤‡∏á MS Teams Meeting ")],-1))]),a[32]||(a[32]=(0,s.Lk)("small",{class:"teams-hint"},[(0,s.Lk)("i",{class:"pi pi-info-circle"}),(0,s.eW)(" ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á Teams Meeting ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô ")],-1))])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Xo,[(0,s.bF)(h,{type:"button",label:"‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",icon:"pi pi-refresh",severity:"secondary",outlined:"",onClick:r.resetForm},null,8,["onClick"]),(0,s.bF)(h,{type:"submit",label:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏á‡∏≤‡∏ô",icon:"pi pi-check",severity:"success"})])],32)]),_:1})])}var Wo=t(653),Bo=t(9193),Oo={name:"DailyWorkForm",components:{Checkbox:Wo.A,AutoComplete:il.A,Button:Bo.A},created(){this.$http=p.A.create({baseURL:""}),this.loadTasks(),this.loadUsers()},data(){return{tasks:[],formData:{taskId:null,workDate:new Date,startTime:new Date,endTime:null,workStatus:null,location:"",workDescription:"",files:[],createCalendarEvent:!1,attendees:[],createTeamsMeeting:!1,eventDetails:""},selectedAttendee:null,filteredAttendees:[],users:[],attendeeOptions:[],newEmail:"",statusOptions:[]}},computed:{calculateHours(){if(this.formData.startTime&&this.formData.endTime){const e=new Date(this.formData.startTime),a=new Date(this.formData.endTime),t=(a-e)/36e5;return t>0?`${t.toFixed(1)} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á`:"0 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á"}return"0 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á"}},async mounted(){await this.loadTasks(),this.loadStatusOptions(),window.addEventListener("statusesUpdated",this.handleStatusesUpdate)},beforeUnmount(){window.removeEventListener("statusesUpdated",this.handleStatusesUpdate)},methods:{async loadUsers(){try{const e=await this.$http.get("/api/users");this.users=e.data.map(e=>({...e,name:`${e.firstname} ${e.lastname}`.trim(),email:e.email})),this.attendeeOptions=this.users}catch(e){console.error(e)}},searchAttendees(e){const a=e.query.toLowerCase().trim();this.filteredAttendees=a?this.users.filter(e=>e.name.toLowerCase().includes(a)||e.email.toLowerCase().includes(a)):this.users.slice()},showAllAttendees(){this.filteredAttendees=this.users.slice()},onAttendeeSelect(e){const a=e.value;a&&a.email&&(this.formData.attendees.includes(a.email)||this.formData.attendees.push(a.email),this.selectedAttendee=null)},removeAttendee(e){this.formData.attendees.splice(e,1)},addEmailDirectly(){if(this.selectedAttendee&&"string"===typeof this.selectedAttendee){const e=this.selectedAttendee.trim(),a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;a.test(e)&&!this.formData.attendees.includes(e)&&(this.formData.attendees.push(e),this.selectedAttendee=null)}},isValidEmail(e){if(!e)return!1;const a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return a.test(e.trim())},addNewEmail(){const e=this.newEmail.trim();this.isValidEmail(e)&&!this.formData.attendees.includes(e)&&(this.formData.attendees.push(e),this.newEmail="")},addSelectedAttendees(){this.selectedAttendees.forEach(e=>{this.formData.attendees.includes(e)||this.formData.attendees.push(e)}),this.selectedAttendees=[]},async loadTasks(){try{const e=await this.$http.get("/api/tasks"),a=e.data.filter(e=>"completed"!==e.status);this.tasks=a.map(e=>({...e,display:`${e.task_name} ${e.so_number?`(SO: ${e.so_number})`:""}`}))}catch(e){console.error(e)}},handleFileUpload(e){const a=Array.from(e.target.files);this.formData.files=[...this.formData.files,...a]},removeFile(e){this.formData.files.splice(e,1)},async uploadFiles(){if(0===this.formData.files.length)return[];const e=new FormData;this.formData.files.forEach(a=>{e.append("files",a)});try{const a=await this.$http.post("/api/files/upload",e,{headers:{"Content-Type":"multipart/form-data"}});return a.data.files||[]}catch(a){return[]}},onTaskChange(){},async submitForm(){if(this.formData.taskId)if(this.formData.workStatus)if(this.formData.startTime&&this.formData.endTime&&new Date(this.formData.endTime)<=new Date(this.formData.startTime))this.$toast.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô",life:3e3});else try{const e=await this.uploadFiles(),a={task_id:this.formData.taskId,work_date:this.formatDate(this.formData.workDate),start_time:this.formatTime(this.formData.startTime),end_time:this.formatTime(this.formData.endTime),total_hours:this.calculateTotalHours(),work_status:this.formData.workStatus,location:this.formData.location,work_description:this.formData.workDescription,files:e,user_id:localStorage.getItem("soc_user_id"),submitted_at:(new Date).toISOString(),create_calendar_event:this.formData.createCalendarEvent,attendees:this.formData.attendees,create_teams_meeting:this.formData.createTeamsMeeting,event_details:this.formData.eventDetails};await this.$http.post("/api/daily-work",a),this.$toast.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3}),window.dispatchEvent(new CustomEvent("taskUpdated")),window.dispatchEvent(new CustomEvent("taskStatusChanged")),this.$emit("submit-work"),this.resetForm()}catch(e){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á",life:3e3})}else this.$toast.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",detail:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô",life:3e3});else this.$toast.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô",life:3e3})},calculateTotalHours(){if(this.formData.startTime&&this.formData.endTime){const e=new Date(this.formData.startTime),a=new Date(this.formData.endTime);return Math.max(0,(a-e)/36e5)}return 0},formatDate(e){return e?e.toISOString().split("T")[0]:null},formatTime(e){return e?e.toTimeString().split(" ")[0]:null},resetForm(){this.formData={taskId:null,workDate:new Date,startTime:new Date,endTime:null,workStatus:null,location:"",workDescription:"",files:[]};const e=document.getElementById("fileUpload");e&&(e.value="")},loadStatusOptions(){this.$http.get("/api/settings/statuses").then(e=>{this.statusOptions=e.data}).catch(e=>{console.error(e),this.statusOptions=[{label:"‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå",value:"completed",icon:"emoji:‚úÖ"},{label:"üîÑ ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",value:"in_progress",icon:"emoji:üîÑ"},{label:"‚è≥ ‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• / ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ / ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå",value:"pending",icon:"emoji:‚è≥"}]})},getStatusIcon(e){const a=this.statusOptions.find(a=>a.value===e);return a?a.icon:null},getStatusLabel(e){const a=this.statusOptions.find(a=>a.value===e);return a?a.label:e},getStatusLabelOnly(e){const a=this.statusOptions.find(a=>a.value===e);return a?a.label:e},getStatusColor(e){const a=this.statusOptions.find(a=>a.value===e);return a?.color||"#6c757d"},handleStatusesUpdate(){this.loadStatusOptions()}}};const No=(0,$.A)(Oo,[["render",jo],["__scopeId","data-v-5a72d831"]]);var Ko=No;const Mo={class:"search-box mb-3"},Ho={key:0,class:"empty-state"},Po={class:"employee-info"},Qo={class:"employee-name"},qo={class:"position-text"},Yo={class:"task-info"},zo={class:"task-name"},Go={key:0,class:"so-number"},Jo={class:"badge-container"},Zo={class:"badge-container"},ei={key:0,class:"action-buttons"},ai={key:1,class:"disabled-text"},ti={key:0,class:"attachments-info"},li={key:1,class:"no-files"},si={class:"dialog-header"},oi={class:"dialog-body"},ii={class:"work-description"},ri={key:0,class:"files-list"},ni={class:"file-info"},di={class:"file-name"},ci={key:1,class:"no-files-dialog"},ui={class:"form-grid"},pi={class:"input-group"},mi={class:"input-group"},vi={class:"input-group"},hi={class:"input-group"},ki={key:0},gi={key:1},bi={class:"input-group full-width"},fi={class:"input-group full-width"},yi={class:"input-group full-width"},wi={class:"file-upload-section"},Li={key:0,class:"existing-files"},Fi={class:"file-name"},Di={key:1,class:"new-files"},Ci={class:"file-name"},_i={class:"form-actions"};function Ai(e,a,t,o,i,r){const n=(0,s.g2)("InputIcon"),d=(0,s.g2)("InputText"),u=(0,s.g2)("IconField"),p=(0,s.g2)("Badge"),m=(0,s.g2)("Column"),v=(0,s.g2)("Button"),h=(0,s.g2)("DataTable"),k=(0,s.g2)("Card"),g=(0,s.g2)("Dialog"),b=(0,s.g2)("Calendar"),f=(0,s.g2)("Dropdown"),y=(0,s.g2)("Textarea"),w=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(k,{class:"history-card"},{content:(0,s.k6)(()=>[(0,s.Lk)("div",Mo,[(0,s.bF)(u,{iconPosition:"left"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{class:"pi pi-search"}),(0,s.bF)(d,{modelValue:i.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>i.searchQuery=e),placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...",class:"w-full"},null,8,["modelValue"])]),_:1})]),0===r.filteredRecords.length?((0,s.uX)(),(0,s.CE)("div",Ho,[a[16]||(a[16]=(0,s.Lk)("i",{class:"pi pi-calendar-clock",style:{"font-size":"4rem",color:"#ccc"}},null,-1)),(0,s.Lk)("p",null,(0,c.v_)(i.searchQuery?"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤":"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏á‡∏≤‡∏ô"),1)])):((0,s.uX)(),(0,s.Wv)(h,{key:1,value:r.filteredRecords,paginator:!0,rows:10,rowsPerPageOptions:[5,10,20],responsiveLayout:"scroll",class:"history-table",stripedRows:""},{default:(0,s.k6)(()=>[(0,s.bF)(m,{field:"id",header:"ID",sortable:!0,style:{width:"80px","text-align":"center"}},{body:(0,s.k6)(e=>[(0,s.bF)(p,{value:e.data.id,severity:"info"},null,8,["value"])]),_:1}),(0,s.bF)(m,{field:"work_date",header:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏á‡∏≤‡∏ô",sortable:!0},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(r.formatDate(e.data.work_date)),1)]),_:1}),(0,s.bF)(m,{field:"start_time",header:"‡πÄ‡∏ß‡∏•‡∏≤",style:{"min-width":"120px"}},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(r.formatTime(e.data.start_time))+" - "+(0,c.v_)(r.formatTime(e.data.end_time)),1)]),_:1}),(0,s.bF)(m,{field:"employee_name",header:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•",sortable:!0,style:{"min-width":"150px"}},{body:(0,s.k6)(e=>[(0,s.Lk)("div",Po,[(0,s.Lk)("div",Qo,(0,c.v_)(e.data.employee_name||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"),1)])]),_:1}),(0,s.bF)(m,{field:"employee_position",header:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",sortable:!0,class:"hide-mobile"},{body:(0,s.k6)(e=>[(0,s.Lk)("span",qo,(0,c.v_)(e.data.employee_position||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"),1)]),_:1}),(0,s.bF)(m,{field:"task_name",header:"‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£",sortable:!0},{body:(0,s.k6)(e=>[(0,s.Lk)("div",Yo,[(0,s.Lk)("div",zo,(0,c.v_)(e.data.task_name||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô"),1),e.data.so_number?((0,s.uX)(),(0,s.CE)("div",Go,"SO: "+(0,c.v_)(e.data.so_number),1)):(0,s.Q3)("",!0)])]),_:1}),(0,s.bF)(m,{field:"work_status",header:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô",sortable:!0,style:{"text-align":"center","min-width":"140px"}},{body:(0,s.k6)(e=>[(0,s.Lk)("div",Jo,[(0,s.bF)(p,{value:r.getStatusLabel(e.data.work_status),style:(0,c.Tr)({backgroundColor:r.getStatusColor(e.data.work_status),color:"#fff"})},null,8,["value","style"])])]),_:1}),(0,s.bF)(m,{field:"location",header:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà",class:"hide-mobile"}),(0,s.bF)(m,{field:"category",header:"‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏á‡∏≤‡∏ô",sortable:!0,style:{"text-align":"center","min-width":"100px"}},{body:(0,s.k6)(e=>[(0,s.Lk)("div",Zo,[(0,s.bF)(p,{value:r.getCategoryLabel(e.data.category),style:(0,c.Tr)({backgroundColor:r.getCategoryColor(e.data.category),color:"#fff"})},null,8,["value","style"])])]),_:1}),(0,s.bF)(m,{header:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô",class:"hide-mobile"},{body:(0,s.k6)(e=>[(0,s.bF)(v,{label:"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î",icon:"pi pi-info-circle",size:"small",severity:"info",outlined:"",onClick:a=>r.showDetails(e.data)},null,8,["onClick"])]),_:1}),(0,s.bF)(m,{header:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£",style:{width:"80px"}},{body:(0,s.k6)(e=>[e.data?((0,s.uX)(),(0,s.CE)("div",ei,[r.isEditDisabled(e.data)?((0,s.uX)(),(0,s.CE)("span",ai,"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ")):(0,s.bo)(((0,s.uX)(),(0,s.Wv)(v,{key:0,icon:"pi pi-pencil",size:"small",severity:"warning",outlined:"",onClick:a=>r.editRecord(e.data)},null,8,["onClick"])),[[w,"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"]])])):(0,s.Q3)("",!0)]),_:1}),(0,s.bF)(m,{header:"‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö",style:{width:"80px"}},{body:(0,s.k6)(e=>[r.hasFiles(e.data)?((0,s.uX)(),(0,s.CE)("div",ti,[(0,s.bo)((0,s.bF)(v,{icon:"pi pi-paperclip",size:"small",severity:"info",outlined:"",onClick:a=>r.downloadFiles(e.data)},null,8,["onClick"]),[[w,`${e.data.files.length} ‡πÑ‡∏ü‡∏•‡πå`]])])):((0,s.uX)(),(0,s.CE)("span",li,"-"))]),_:1})]),_:1},8,["value"]))]),_:1}),i.detailDialog?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"dialog-overlay",onClick:a[3]||(a[3]=e=>i.detailDialog=!1)},[(0,s.Lk)("div",{class:"dialog-content",onClick:a[2]||(a[2]=(0,l.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",si,[a[17]||(a[17]=(0,s.Lk)("h3",null,"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô",-1)),(0,s.Lk)("button",{class:"dialog-close",onClick:a[1]||(a[1]=e=>i.detailDialog=!1)},"√ó")]),(0,s.Lk)("div",oi,[(0,s.Lk)("div",ii,(0,c.v_)(i.selectedRecord?.work_description||"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"),1)])])])):(0,s.Q3)("",!0),(0,s.bF)(g,{visible:i.filesDialog,"onUpdate:visible":a[4]||(a[4]=e=>i.filesDialog=e),modal:"",header:"‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö",style:{width:"50rem"}},{default:(0,s.k6)(()=>[i.selectedRecordFiles&&i.selectedRecordFiles.length>0?((0,s.uX)(),(0,s.CE)("div",ri,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.selectedRecordFiles,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"file-item"},[(0,s.Lk)("div",ni,[a[18]||(a[18]=(0,s.Lk)("i",{class:"pi pi-file"},null,-1)),(0,s.Lk)("span",di,(0,c.v_)(e),1)]),(0,s.bo)((0,s.bF)(v,{icon:"pi pi-download",size:"small",severity:"success",outlined:"",onClick:a=>r.downloadFile(e)},null,8,["onClick"]),[[w,"‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î"]])]))),128))])):((0,s.uX)(),(0,s.CE)("div",ci,[...a[19]||(a[19]=[(0,s.Lk)("p",null,"‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö",-1)])]))]),_:1},8,["visible"]),(0,s.bF)(g,{visible:i.editDialog,"onUpdate:visible":a[15]||(a[15]=e=>i.editDialog=e),modal:"",header:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô",style:{width:"50rem"},position:"center",draggable:!1},{default:(0,s.k6)(()=>[(0,s.Lk)("form",{onSubmit:a[14]||(a[14]=(0,l.D$)((...e)=>r.updateRecord&&r.updateRecord(...e),["prevent"])),class:"edit-form"},[(0,s.Lk)("div",ui,[(0,s.Lk)("div",pi,[a[20]||(a[20]=(0,s.Lk)("label",{class:"input-label"},"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏á‡∏≤‡∏ô *",-1)),(0,s.bF)(b,{modelValue:i.editFormData.work_date,"onUpdate:modelValue":a[5]||(a[5]=e=>i.editFormData.work_date=e),dateFormat:"dd/mm/yy",class:"corporate-input",required:""},null,8,["modelValue"])]),(0,s.Lk)("div",mi,[a[21]||(a[21]=(0,s.Lk)("label",{class:"input-label"},"‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô *",-1)),(0,s.bF)(b,{modelValue:i.editFormData.start_time,"onUpdate:modelValue":a[6]||(a[6]=e=>i.editFormData.start_time=e),timeOnly:"",hourFormat:"24",class:"corporate-input",required:""},null,8,["modelValue"])]),(0,s.Lk)("div",vi,[a[22]||(a[22]=(0,s.Lk)("label",{class:"input-label"},"‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏á‡∏≤‡∏ô *",-1)),(0,s.bF)(b,{modelValue:i.editFormData.end_time,"onUpdate:modelValue":a[7]||(a[7]=e=>i.editFormData.end_time=e),timeOnly:"",hourFormat:"24",class:"corporate-input",required:""},null,8,["modelValue"])]),(0,s.Lk)("div",hi,[a[23]||(a[23]=(0,s.Lk)("label",{class:"input-label"},"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô *",-1)),(0,s.bF)(f,{modelValue:i.editFormData.work_status,"onUpdate:modelValue":a[8]||(a[8]=e=>i.editFormData.work_status=e),options:i.statusOptions,optionLabel:"label",optionValue:"value",class:"corporate-dropdown",required:""},{value:(0,s.k6)(e=>[e.value?((0,s.uX)(),(0,s.CE)("span",ki,(0,c.v_)(r.getStatusLabelFromOptions(e.value)),1)):((0,s.uX)(),(0,s.CE)("span",gi,"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"))]),option:(0,s.k6)(e=>[(0,s.Lk)("span",null,(0,c.v_)(e.option.label),1)]),_:1},8,["modelValue","options"])]),(0,s.Lk)("div",bi,[a[24]||(a[24]=(0,s.Lk)("label",{class:"input-label"},"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà *",-1)),(0,s.bF)(d,{modelValue:i.editFormData.location,"onUpdate:modelValue":a[9]||(a[9]=e=>i.editFormData.location=e),required:"",class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",fi,[a[25]||(a[25]=(0,s.Lk)("label",{class:"input-label"},"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô *",-1)),(0,s.bF)(y,{modelValue:i.editFormData.work_description,"onUpdate:modelValue":a[10]||(a[10]=e=>i.editFormData.work_description=e),rows:"4",required:"",class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",yi,[a[30]||(a[30]=(0,s.Lk)("label",{class:"input-label"},"‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö",-1)),(0,s.Lk)("div",wi,[(0,s.Lk)("input",{type:"file",ref:"editFileInput",onChange:a[11]||(a[11]=(...e)=>r.handleEditFileUpload&&r.handleEditFileUpload(...e)),accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",multiple:"",class:"file-input",style:{display:"none"}},null,544),(0,s.bF)(v,{type:"button",label:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå",icon:"pi pi-upload",severity:"secondary",outlined:"",onClick:a[12]||(a[12]=a=>e.$refs.editFileInput.click())})]),i.editFormData.existingFiles?.length>0?((0,s.uX)(),(0,s.CE)("div",Li,[a[27]||(a[27]=(0,s.Lk)("h4",null,"‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°:",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.editFormData.existingFiles,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"file-item"},[a[26]||(a[26]=(0,s.Lk)("i",{class:"pi pi-file"},null,-1)),(0,s.Lk)("span",Fi,(0,c.v_)(e),1),(0,s.bF)(v,{icon:"pi pi-times",size:"small",severity:"danger",text:"",onClick:e=>r.removeExistingFile(t)},null,8,["onClick"])]))),128))])):(0,s.Q3)("",!0),i.editFormData.newFiles?.length>0?((0,s.uX)(),(0,s.CE)("div",Di,[a[29]||(a[29]=(0,s.Lk)("h4",null,"‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà:",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.editFormData.newFiles,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"file-item"},[a[28]||(a[28]=(0,s.Lk)("i",{class:"pi pi-file"},null,-1)),(0,s.Lk)("span",Ci,(0,c.v_)(e.name),1),(0,s.bF)(v,{icon:"pi pi-times",size:"small",severity:"danger",text:"",onClick:e=>r.removeNewFile(t)},null,8,["onClick"])]))),128))])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",_i,[(0,s.bF)(v,{type:"button",label:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",severity:"secondary",outlined:"",onClick:a[13]||(a[13]=e=>i.editDialog=!1)}),(0,s.bF)(v,{type:"submit",label:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å",severity:"success"})])],32)]),_:1},8,["visible"])],64)}var Ei={name:"DailyWorkList",emits:["refresh-data"],props:{records:{type:Array,default:()=>[]}},created(){this.$http=p.A.create({baseURL:""}),this.records&&0!==this.records.length||this.loadWorkRecords()},mounted(){this.loadStatusOptions(),this.loadCategoryOptions(),setInterval(()=>{this.currentTime=new Date,this.$forceUpdate()},1e3),window.addEventListener("taskUpdated",()=>{this.$emit("refresh-data")}),window.addEventListener("statusesUpdated",()=>{this.loadStatusOptions()}),window.addEventListener("categoriesUpdated",()=>{this.loadCategoryOptions()})},beforeUnmount(){window.removeEventListener("taskUpdated",()=>{this.$emit("refresh-data")})},computed:{workRecords(){return this.records&&this.records.length>0?this.records:this.localRecords},filteredRecords(){const e=this.workRecords||[];if(!this.searchQuery)return e;const a=this.searchQuery.toLowerCase().trim();return e.filter(e=>{const t=this.formatDate(e.work_date),l=`${this.formatTime(e.start_time)} - ${this.formatTime(e.end_time)}`,s={id:e.id||"",employee_name:e.employee_name||"",employee_position:e.employee_position||"",task_name:e.task_name||"",so_number:e.so_number||"",work_status:e.work_status||"",location:e.location||"",category:e.category||"",work_description:e.work_description||"",work_date:t,start_time:e.start_time||"",end_time:e.end_time||"",start_time_short:this.formatTime(e.start_time),end_time_short:this.formatTime(e.end_time),time_range:l};return Object.values(s).some(e=>{if(null===e||void 0===e)return!1;const t=String(e).toLowerCase();return t.includes(a)||t.replace(/\s/g,"").includes(a.replace(/\s/g,""))})})}},data(){return{searchQuery:"",localRecords:[],detailDialog:!1,selectedRecord:null,filesDialog:!1,selectedRecordFiles:[],editDialog:!1,editFormData:{id:null,work_date:null,start_time:null,end_time:null,work_status:null,location:"",work_description:"",existingFiles:[],newFiles:[]},statusOptions:[],categoryOptions:[]}},methods:{loadStatusOptions(){this.$http.get("/api/settings/statuses").then(e=>{this.statusOptions=e.data.map(e=>({label:e.label,value:e.value,color:e.color}))}).catch(e=>{console.error("Error loading statuses:",e),this.statusOptions=[{label:"‚è≥ ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",value:"pending",color:"#f59e0b"},{label:"üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",value:"in_progress",color:"#3b82f6"},{label:"‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô",value:"completed",color:"#10b981"},{label:"‚è∏Ô∏è ‡∏£‡∏∞‡∏á‡∏±‡∏ö",value:"on_hold",color:"#6c757d"}]})},loadCategoryOptions(){this.$http.get("/api/settings/categories").then(e=>{this.categoryOptions=e.data}).catch(e=>{console.error("Error loading categories:",e),this.categoryOptions=[]})},isEditDisabled(e){if(!e||!e.work_date)return!0;const a=new Date(e.work_date),t=new Date(a);t.setDate(t.getDate()+1),t.setHours(8,0,0,0);const l=new Date;return l>t},async loadWorkRecords(){try{const e=await this.$http.get("/api/daily-work");this.localRecords=e.data||[],0===this.localRecords.length&&this.$toast.add({severity:"info",summary:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",detail:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô",life:3e3})}catch(e){this.localRecords=[],this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ",life:5e3})}},formatDate(e){if(!e)return"-";try{const a=new Date(e),t=String(a.getDate()).padStart(2,"0"),l=String(a.getMonth()+1).padStart(2,"0"),s=a.getFullYear();return`${t}/${l}/${s}`}catch(a){return e}},formatTime(e){return e?e.substring(0,5):"-"},formatDateForAPI(e){if(!e||isNaN(e.getTime()))return null;const a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");if(isNaN(a)||isNaN(t)||isNaN(l))return null;const s=`${a}-${t}-${l}`;return s},formatTimeForAPI(e){return e?e.toTimeString().split(" ")[0]:null},getStatusLabel(e){const a={completed:"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå",in_progress:"‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",pending:"‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• / ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ / ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå"},t=a[e]||e;return t.replace(/[\u{1F000}-\u{1FFFF}]|[\u{2600}-\u{27BF}]|[\u{2300}-\u{23FF}]|[\u{2B50}]|[\u{203C}-\u{3299}]/gu,"").trim()},getStatusLabelFromOptions(e){const a=this.statusOptions.find(a=>a.value===e);return a&&a.label?a.label.replace(/[\u{1F000}-\u{1FFFF}]|[\u{2600}-\u{27BF}]|[\u{2300}-\u{23FF}]|[\u{2B50}]|[\u{203C}-\u{3299}]/gu,"").trim():e},getStatusColor(e){const a=this.statusOptions.find(a=>a.value===e);return a?.color||"#6c757d"},getCategoryLabel(e){const a=this.categoryOptions.find(a=>a.value===e);return a&&a.label?a.label.replace(/[\u{1F000}-\u{1FFFF}]|[\u{2600}-\u{27BF}]|[\u{2300}-\u{23FF}]|[\u{2B50}]|[\u{203C}-\u{3299}]/gu,"").trim():e||"‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ"},getCategoryColor(e){const a=this.categoryOptions.find(a=>a.value===e);return a?.color||"#6c757d"},getCategorySeverity(){return"contrast"},hasFiles(e){return e.files&&Array.isArray(e.files)&&e.files.length>0},downloadFiles(e){this.hasFiles(e)&&(this.selectedRecordFiles=e.files,this.filesDialog=!0)},downloadFile(e){const a=document.createElement("a");a.href=`/api/files/download/${e}`,a.download=e,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)},editRecord(e){let a=new Date;if(e.work_date){const t=e.work_date.split("T")[0],[l,s,o]=t.split("-").map(Number);a=new Date(l,s-1,o),a.setDate(a.getDate()+1)}this.editFormData={id:e.id,work_date:a,start_time:this.parseTime(e.start_time),end_time:this.parseTime(e.end_time),work_status:e.work_status,location:e.location||"",work_description:e.work_description||"",existingFiles:[...e.files||[]],newFiles:[]},this.editDialog=!0},parseTime(e){if(!e)return null;const[a,t,l]=e.split(":"),s=new Date;return s.setHours(parseInt(a),parseInt(t),parseInt(l||0)),s},handleEditFileUpload(e){const a=Array.from(e.target.files);this.editFormData.newFiles=[...this.editFormData.newFiles,...a]},removeExistingFile(e){this.editFormData.existingFiles.splice(e,1)},removeNewFile(e){this.editFormData.newFiles.splice(e,1)},async uploadNewFiles(){if(0===this.editFormData.newFiles.length)return[];const e=new FormData;this.editFormData.newFiles.forEach(a=>{e.append("files",a)});try{const a=await this.$http.post("/api/files/upload",e,{headers:{"Content-Type":"multipart/form-data"}});return a.data.files||[]}catch(a){return[]}},async updateRecord(){try{if(!this.editFormData.work_date||isNaN(this.editFormData.work_date.getTime()))return void this.$toast.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏°‡πà",life:3e3});if(this.editFormData.start_time&&this.editFormData.end_time&&new Date(this.editFormData.end_time)<=new Date(this.editFormData.start_time))return void this.$toast.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô",life:3e3});const e=await this.uploadNewFiles(),a=[...this.editFormData.existingFiles,...e],t=this.formatDateForAPI(this.editFormData.work_date);if(!t)return void this.$toast.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏õ‡∏•‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏°‡πà",life:3e3});const l={work_date:t,start_time:this.formatTimeForAPI(this.editFormData.start_time),end_time:this.formatTimeForAPI(this.editFormData.end_time),work_status:this.editFormData.work_status,location:this.editFormData.location,work_description:this.editFormData.work_description,files:a};await this.$http.put(`/api/daily-work/${this.editFormData.id}`,l),this.$toast.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3}),this.editDialog=!1,await this.loadWorkRecords(),this.$emit("record-updated"),window.dispatchEvent(new CustomEvent("workRecordUpdated")),window.dispatchEvent(new CustomEvent("taskStatusChanged"))}catch(e){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:e.response?.data?.error||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ",life:5e3})}},showDetails(e){this.selectedRecord=e,this.detailDialog=!0},truncateText(e,a){return e?e.length<=a?e:e.substring(0,a)+"...":"-"},async refreshData(){await this.loadWorkRecords()},validateRecord(e){const a=["id","work_date","work_status"],t=a.filter(a=>!e[a]);return!(t.length>0)}}};const Ri=(0,$.A)(Ei,[["render",Ai],["__scopeId","data-v-f943812c"]]);var xi=Ri,Ti={name:"DailyWork",components:{DailyWorkForm:Ko,DailyWorkList:xi},data(){return{currentTime:new Date,workRecords:[],loading:!1,showWorkDialog:!1,checkInterval:null,allCompleteNotificationSent:!1}},computed:{currentDateTime(){return this.currentTime.toLocaleString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}},methods:{async checkMissingWorkNotification(){const e=new Date,a=e.getHours(),t=e.getMinutes();if(a>9||9===a&&t>=30)try{const e=await p.A.post("/api/daily-work/check-missing");e.data.message.includes("Missing work")?this.allCompleteNotificationSent=!1:e.data.message.includes("All complete")&&!this.allCompleteNotificationSent&&(this.allCompleteNotificationSent=!0,localStorage.setItem("allCompleteNotificationSent","true"))}catch(l){console.error(l)}},initializeNotificationCheck(){const e=(new Date).toISOString().split("T")[0],a=localStorage.getItem("lastWorkCheckDate");a!==e?(this.allCompleteNotificationSent=!1,localStorage.setItem("lastWorkCheckDate",e),localStorage.removeItem("allCompleteNotificationSent")):this.allCompleteNotificationSent="true"===localStorage.getItem("allCompleteNotificationSent"),this.checkInterval=setInterval(()=>{this.checkMissingWorkNotification()},6e4),this.checkMissingWorkNotification()},showWorkForm(){this.showWorkDialog=!0},async loadWorkRecords(){this.loading=!0;try{const e=await p.A.get("/api/daily-work");this.workRecords=e.data}catch(e){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ",life:3e3})}finally{this.loading=!1}},handleWorkSubmit(){this.loadWorkRecords(),this.showWorkDialog=!1},handleWorkRecordUpdate(){this.loadWorkRecords()}},created(){this.loadWorkRecords()},mounted(){setInterval(()=>{this.currentTime=new Date},1e3),window.addEventListener("workRecordUpdated",this.handleWorkRecordUpdate),window.addEventListener("taskUpdated",this.handleWorkRecordUpdate),this.initializeNotificationCheck()},beforeUnmount(){window.removeEventListener("workRecordUpdated",this.handleWorkRecordUpdate),window.removeEventListener("taskUpdated",this.handleWorkRecordUpdate),this.checkInterval&&clearInterval(this.checkInterval)}};const Ii=(0,$.A)(Ti,[["render",lo],["__scopeId","data-v-645f89c3"]]);var Ui=Ii;const Vi={class:"projects-container"},Si={class:"main-content"},$i={class:"tab-action-buttons"};function Xi(e,a,t,l,o,i){const r=(0,s.g2)("Toast"),n=(0,s.g2)("Card"),d=(0,s.g2)("Button"),c=(0,s.g2)("TaskList"),u=(0,s.g2)("AddTaskForm"),p=(0,s.g2)("Dialog");return(0,s.uX)(),(0,s.CE)("div",Vi,[(0,s.bF)(r),(0,s.bF)(n,{class:"header-card"},{header:(0,s.k6)(()=>[...a[3]||(a[3]=[(0,s.Lk)("div",{class:"main-header"},[(0,s.Lk)("h1",null,[(0,s.Lk)("i",{class:"pi pi-briefcase"}),(0,s.eW)(" ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£")])],-1)])]),_:1}),(0,s.Lk)("div",Si,[(0,s.Lk)("div",$i,[(0,s.bF)(d,{onClick:a[0]||(a[0]=e=>o.showTaskDialog=!0),class:"task-btn",icon:"pi pi-plus-circle",raised:""},{default:(0,s.k6)(()=>[...a[4]||(a[4]=[(0,s.Lk)("span",{class:"btn-text"},"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô",-1)])]),_:1})]),(0,s.bF)(c,{ref:"taskList"},null,512)]),(0,s.bF)(p,{visible:o.showTaskDialog,"onUpdate:visible":a[2]||(a[2]=e=>o.showTaskDialog=e),modal:"",header:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô",style:{width:"90vw",height:"80vh"},draggable:!1},{default:(0,s.k6)(()=>[(0,s.bF)(u,{onTaskAdded:i.handleTaskAdded,onCloseForm:a[1]||(a[1]=e=>o.showTaskDialog=!1)},null,8,["onTaskAdded"])]),_:1},8,["visible"])])}const ji={class:"form-grid"},Wi={class:"input-group"},Bi={class:"input-group"},Oi={class:"input-group"},Ni={class:"input-group"},Ki={class:"input-group"},Mi={class:"input-group"},Hi={class:"input-group"},Pi={key:0},Qi={key:1},qi={class:"input-group full-width"},Yi={class:"input-group full-width"},zi={class:"file-upload-wrapper"},Gi={key:0,class:"file-list"},Ji={class:"file-name"},Zi={class:"form-actions"};function er(e,a,t,o,i,r){const n=(0,s.g2)("InputText"),d=(0,s.g2)("Calendar"),u=(0,s.g2)("Dropdown"),p=(0,s.g2)("Textarea"),m=(0,s.g2)("Button"),v=(0,s.g2)("Card");return(0,s.uX)(),(0,s.Wv)(v,{class:"form-card"},{content:(0,s.k6)(()=>[(0,s.Lk)("form",{onSubmit:a[10]||(a[10]=(0,l.D$)((...e)=>r.submitForm&&r.submitForm(...e),["prevent"])),class:"add-task-form"},[(0,s.Lk)("div",ji,[(0,s.Lk)("div",Wi,[a[11]||(a[11]=(0,s.Lk)("label",{for:"taskName",class:"input-label"},"‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô / ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ *",-1)),(0,s.bF)(n,{id:"taskName",modelValue:i.formData.taskName,"onUpdate:modelValue":a[0]||(a[0]=e=>i.formData.taskName=e),required:"",class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",Bi,[a[12]||(a[12]=(0,s.Lk)("label",{for:"soNumber",class:"input-label"},"‡πÄ‡∏•‡∏Ç SO (Project)",-1)),(0,s.bF)(n,{id:"soNumber",modelValue:i.formData.soNumber,"onUpdate:modelValue":a[1]||(a[1]=e=>i.formData.soNumber=e),class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",Oi,[a[13]||(a[13]=(0,s.Lk)("label",{for:"contractNumber",class:"input-label"},"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏ç‡∏ç‡∏≤",-1)),(0,s.bF)(n,{id:"contractNumber",modelValue:i.formData.contractNumber,"onUpdate:modelValue":a[2]||(a[2]=e=>i.formData.contractNumber=e),class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",Ni,[a[14]||(a[14]=(0,s.Lk)("label",{for:"saleOwner",class:"input-label"},"Sale ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô",-1)),(0,s.bF)(n,{id:"saleOwner",modelValue:i.formData.saleOwner,"onUpdate:modelValue":a[3]||(a[3]=e=>i.formData.saleOwner=e),class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",Ki,[a[15]||(a[15]=(0,s.Lk)("label",{for:"projectStartDate",class:"input-label"},"‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£",-1)),(0,s.bF)(d,{id:"projectStartDate",modelValue:i.formData.projectStartDate,"onUpdate:modelValue":a[4]||(a[4]=e=>i.formData.projectStartDate=e),dateFormat:"dd/mm/yy",class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",Mi,[a[16]||(a[16]=(0,s.Lk)("label",{for:"projectEndDate",class:"input-label"},"‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£",-1)),(0,s.bF)(d,{id:"projectEndDate",modelValue:i.formData.projectEndDate,"onUpdate:modelValue":a[5]||(a[5]=e=>i.formData.projectEndDate=e),dateFormat:"dd/mm/yy",class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",Hi,[a[17]||(a[17]=(0,s.Lk)("label",{for:"category",class:"input-label"},"‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏á‡∏≤‡∏ô *",-1)),(0,s.bF)(u,{id:"category",modelValue:i.formData.category,"onUpdate:modelValue":a[6]||(a[6]=e=>i.formData.category=e),options:i.categoryOptions,optionLabel:"label",optionValue:"value",placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏á‡∏≤‡∏ô",class:"corporate-input category-dropdown",required:""},{value:(0,s.k6)(e=>[e.value?((0,s.uX)(),(0,s.CE)("span",Pi,(0,c.v_)(r.getCategoryLabel(e.value)),1)):((0,s.uX)(),(0,s.CE)("span",Qi,"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏á‡∏≤‡∏ô"))]),option:(0,s.k6)(e=>[(0,s.Lk)("span",null,(0,c.v_)(e.option.label),1)]),_:1},8,["modelValue","options"])]),(0,s.Lk)("div",qi,[a[18]||(a[18]=(0,s.Lk)("label",{for:"description",class:"input-label"},"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô",-1)),(0,s.bF)(p,{id:"description",modelValue:i.formData.description,"onUpdate:modelValue":a[7]||(a[7]=e=>i.formData.description=e),rows:"3",class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",Yi,[a[20]||(a[20]=(0,s.Lk)("label",{class:"input-label"},"‡πÅ‡∏ô‡∏ö‡πÑ‡∏ü‡∏•‡πå (‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û, ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£)",-1)),(0,s.Lk)("div",zi,[(0,s.Lk)("input",{ref:"fileInput",onChange:a[8]||(a[8]=(...e)=>r.handleFileUpload&&r.handleFileUpload(...e)),type:"file",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",multiple:"",class:"file-input",id:"fileUpload"},null,544),(0,s.bF)(m,{type:"button",label:i.formData.files?.length>0?`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ${i.formData.files.length} ‡πÑ‡∏ü‡∏•‡πå`:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå",icon:"pi pi-upload",severity:"secondary",outlined:"",onClick:a[9]||(a[9]=a=>e.$refs.fileInput.click())},null,8,["label"])]),i.formData.files?.length>0?((0,s.uX)(),(0,s.CE)("div",Gi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.formData.files,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"file-item"},[a[19]||(a[19]=(0,s.Lk)("i",{class:"pi pi-file"},null,-1)),(0,s.Lk)("span",Ji,(0,c.v_)(e.name),1),(0,s.bF)(m,{icon:"pi pi-times",size:"small",severity:"danger",text:"",onClick:e=>r.removeFile(t)},null,8,["onClick"])]))),128))])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Zi,[(0,s.bF)(m,{type:"button",label:"‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",icon:"pi pi-refresh",severity:"secondary",outlined:"",onClick:r.resetForm},null,8,["onClick"]),(0,s.bF)(m,{type:"submit",label:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô",icon:"pi pi-plus",severity:"success"})])],32)]),_:1})}var ar={name:"AddTaskForm",created(){this.$http=p.A.create({baseURL:""})},data(){return{formData:{taskName:"",soNumber:"",contractNumber:"",saleOwner:"",projectStartDate:null,projectEndDate:null,description:"",category:"‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",files:[]},categoryOptions:[]}},mounted(){this.loadCategories()},methods:{loadCategories(){this.$http.get("/api/settings/categories").then(e=>{this.categoryOptions=e.data}).catch(e=>{console.error(e),this.categoryOptions=[{label:"üíº ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",value:"‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",icon:"emoji:üíº"},{label:"üíª ‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö",value:"‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö",icon:"emoji:üíª"},{label:"üîß ‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤",value:"‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤",icon:"emoji:üîß"}]})},getDefaultIcon(e){const a={"‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ":"pi pi-briefcase","‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö":"pi pi-code","‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤":"pi pi-wrench","‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°":"pi pi-users","‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°":"pi pi-book","‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢":"pi pi-search","‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£":"pi pi-file-edit","‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤":"pi pi-user-plus"};return a[e]||"pi pi-briefcase"},getCategoryIcon(e){const a=this.categoryOptions.find(a=>a.value===e);return a?a.icon:"pi pi-briefcase"},getCategoryLabel(e){const a=this.categoryOptions.find(a=>a.value===e);return a?a.label:e},handleFileUpload(e){const a=Array.from(e.target.files);this.formData.files=[...this.formData.files,...a]},removeFile(e){this.formData.files.splice(e,1)},async uploadFiles(){if(0===this.formData.files.length)return[];const e=new FormData;this.formData.files.forEach(a=>{e.append("files",a)});try{const a=await this.$http.post("/api/files/upload",e,{headers:{"Content-Type":"multipart/form-data"}});return a.data.files||[]}catch(a){return[]}},async submitForm(){try{const e=await this.uploadFiles(),a={task_name:this.formData.taskName,so_number:this.formData.soNumber,contract_number:this.formData.contractNumber,sale_owner:this.formData.saleOwner,project_start_date:this.formData.projectStartDate,project_end_date:this.formData.projectEndDate,description:this.formData.description,category:this.formData.category,files:e};await this.$http.post("/api/tasks",a),this.$toast.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3}),this.$emit("task-added"),window.dispatchEvent(new CustomEvent("taskUpdated")),this.resetForm()}catch(e){const a=e.response?.data?.error||e.message||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ";this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:a,life:5e3})}},resetForm(){this.formData={taskName:"",soNumber:"",contractNumber:"",saleOwner:"",projectStartDate:null,projectEndDate:null,description:"",category:"‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",files:[]};const e=document.getElementById("fileUpload");e&&(e.value="")}}};const tr=(0,$.A)(ar,[["render",er],["__scopeId","data-v-2039b6f2"]]);var lr=tr;const sr={class:"search-box mb-3"},or={key:0,class:"empty-state"},ir={style:{"text-align":"center"}},rr={class:"task-name"},nr={key:0,class:"so-number"},dr={key:1,class:"text-muted"},cr={key:0,class:"sale-info"},ur={key:1,class:"text-muted"},pr={class:"action-buttons"},mr={class:"badge-container"},vr={key:0,class:"attachments-info"},hr={key:1,class:"no-files"},kr={class:"dialog-header"},gr={class:"dialog-body"},br={class:"work-description"},fr={key:0,class:"files-list"},yr={class:"file-info"},wr={class:"file-name"},Lr={key:1,class:"no-files"},Fr={key:0,class:"loading-state"},Dr={key:1,class:"empty-works"},Cr={key:2,class:"works-container"},_r={class:"works-summary"},Ar={class:"summary-item"},Er={class:"summary-item"},Rr={class:"works-filters"},xr={class:"filter-group"},Tr={class:"filter-group"},Ir={class:"works-table-wrapper"},Ur={class:"works-table"},Vr={class:"text-center"},Sr={class:"text-center"},$r={class:"text-center"},Xr={class:"text-center"},jr={key:1},Wr={key:0,class:"files-list"},Br={class:"file-info"},Or={class:"file-name"},Nr={class:"form-grid"},Kr={class:"input-group"},Mr={class:"input-group"},Hr={class:"input-group"},Pr={class:"input-group"},Qr={class:"input-group"},qr={key:0},Yr={class:"input-group"},zr={key:0},Gr={class:"input-group full-width"},Jr={class:"input-group full-width"},Zr={class:"file-upload-section"},en={key:0,class:"existing-files"},an={class:"file-name"},tn={key:1,class:"new-files"},ln={class:"file-name"},sn={class:"form-actions"};function on(e,a,t,o,i,r){const n=(0,s.g2)("InputIcon"),d=(0,s.g2)("InputText"),u=(0,s.g2)("IconField"),p=(0,s.g2)("Badge"),m=(0,s.g2)("Column"),v=(0,s.g2)("Button"),h=(0,s.g2)("DataTable"),k=(0,s.g2)("Card"),g=(0,s.g2)("Dialog"),b=(0,s.g2)("Dropdown"),f=(0,s.g2)("Textarea"),y=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(k,{class:"history-card"},{content:(0,s.k6)(()=>[(0,s.Lk)("div",sr,[(0,s.bF)(u,{iconPosition:"left"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{class:"pi pi-search"}),(0,s.bF)(d,{modelValue:i.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>i.searchQuery=e),placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...",class:"w-full"},null,8,["modelValue"])]),_:1})]),0===r.filteredTasks.length?((0,s.uX)(),(0,s.CE)("div",or,[a[22]||(a[22]=(0,s.Lk)("i",{class:"pi pi-briefcase",style:{"font-size":"4rem",color:"#ccc"}},null,-1)),(0,s.Lk)("p",null,(0,c.v_)(i.searchQuery?"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤":"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ß‡πâ"),1)])):i.categories.length>0?((0,s.uX)(),(0,s.Wv)(h,{key:1,value:r.filteredTasks,paginator:!0,rows:10,rowsPerPageOptions:[5,10,20],responsiveLayout:"scroll",class:"history-table",stripedRows:""},{default:(0,s.k6)(()=>[(0,s.bF)(m,{field:"id",header:"‡∏£‡∏´‡∏±‡∏™‡∏á‡∏≤‡∏ô",sortable:!0},{body:(0,s.k6)(e=>[(0,s.Lk)("div",ir,[(0,s.bF)(p,{value:e.data.id,class:"custom-id-badge"},null,8,["value"])])]),_:1}),(0,s.bF)(m,{field:"task_name",header:"‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£",sortable:!0,style:{"min-width":"150px","max-width":"250px"}},{body:(0,s.k6)(e=>[(0,s.Lk)("div",rr,(0,c.v_)(e.data.task_name),1)]),_:1}),(0,s.bF)(m,{field:"so_number",header:"‡πÄ‡∏•‡∏Ç SO",class:"hide-mobile"},{body:(0,s.k6)(e=>[e.data.so_number?((0,s.uX)(),(0,s.CE)("div",nr,(0,c.v_)(e.data.so_number),1)):((0,s.uX)(),(0,s.CE)("span",dr,"-"))]),_:1}),(0,s.bF)(m,{field:"contract_number",header:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏ç‡∏ç‡∏≤",class:"hide-mobile"},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(e.data.contract_number||"-"),1)]),_:1}),(0,s.bF)(m,{field:"sale_owner",header:"Sale ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô",class:"hide-mobile"},{body:(0,s.k6)(e=>[e.data.sale_owner?((0,s.uX)(),(0,s.CE)("div",cr,[a[23]||(a[23]=(0,s.Lk)("i",{class:"pi pi-user"},null,-1)),(0,s.eW)(" "+(0,c.v_)(e.data.sale_owner),1)])):((0,s.uX)(),(0,s.CE)("span",ur,"-"))]),_:1}),(0,s.bF)(m,{field:"category",header:"‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà",sortable:!0,style:{"min-width":"120px","text-align":"center"}},{body:(0,s.k6)(e=>[(0,s.bF)(p,{value:r.getCategoryLabel(e.data.category),style:(0,c.Tr)({backgroundColor:r.getCategoryColor(e.data.category),color:"#fff",fontWeight:"bold"}),class:"category-badge"},null,8,["value","style"])]),_:1}),(0,s.bF)(m,{field:"created_at",header:"‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£",sortable:!0},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(r.formatDate(e.data.created_at)),1)]),_:1}),(0,s.bF)(m,{field:"project_end_date",header:"‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£",sortable:!0,class:"hide-mobile"},{body:(0,s.k6)(e=>[(0,s.eW)((0,c.v_)(e.data.project_end_date?r.formatDate(e.data.project_end_date):"-"),1)]),_:1}),(0,s.bF)(m,{header:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î",class:"hide-mobile"},{body:(0,s.k6)(e=>[(0,s.bF)(v,{label:"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î",icon:"pi pi-info-circle",size:"small",severity:"info",outlined:"",onClick:a=>r.showTaskDetails(e.data),disabled:!e.data.description},null,8,["onClick","disabled"])]),_:1}),(0,s.bF)(m,{header:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£",style:{width:"150px"}},{body:(0,s.k6)(e=>[(0,s.Lk)("div",pr,[(0,s.bo)((0,s.bF)(v,{icon:"pi pi-eye",size:"small",severity:"info",outlined:"",onClick:a=>r.viewTaskWorks(e.data)},null,8,["onClick"]),[[y,"‡∏î‡∏π‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô"]]),(0,s.bo)((0,s.bF)(v,{icon:"pi pi-pencil",size:"small",severity:"warning",outlined:"",onClick:a=>r.editTask(e.data)},null,8,["onClick"]),[[y,"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"]])])]),_:1}),(0,s.bF)(m,{header:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞",style:{"text-align":"center","min-width":"140px"}},{body:(0,s.k6)(e=>[(0,s.Lk)("div",mr,[(0,s.bF)(p,{value:r.getStatusLabel(e.data.status),style:(0,c.Tr)({backgroundColor:r.getStatusColor(e.data.status),color:"#fff",fontWeight:"bold"})},null,8,["value","style"])])]),_:1}),(0,s.bF)(m,{header:"‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö",style:{width:"80px"}},{body:(0,s.k6)(e=>[r.hasFiles(e.data)?((0,s.uX)(),(0,s.CE)("div",vr,[(0,s.bo)((0,s.bF)(v,{icon:"pi pi-paperclip",size:"small",severity:"info",outlined:"",onClick:a=>r.downloadTaskFiles(e.data)},null,8,["onClick"]),[[y,`${e.data.files.length} ‡πÑ‡∏ü‡∏•‡πå`]])])):((0,s.uX)(),(0,s.CE)("span",hr,"-"))]),_:1})]),_:1},8,["value"])):(0,s.Q3)("",!0)]),_:1}),i.detailDialog?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"dialog-overlay",onClick:a[3]||(a[3]=e=>i.detailDialog=!1)},[(0,s.Lk)("div",{class:"dialog-content",onClick:a[2]||(a[2]=(0,l.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",kr,[a[24]||(a[24]=(0,s.Lk)("h3",null,"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô",-1)),(0,s.Lk)("button",{class:"dialog-close",onClick:a[1]||(a[1]=e=>i.detailDialog=!1)},"√ó")]),(0,s.Lk)("div",gr,[(0,s.Lk)("div",br,(0,c.v_)(i.selectedTask?.description||"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"),1)])])])):(0,s.Q3)("",!0),(0,s.bF)(g,{visible:i.filesDialog,"onUpdate:visible":a[4]||(a[4]=e=>i.filesDialog=e),modal:"",header:"‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö",style:{width:"50rem"}},{default:(0,s.k6)(()=>[i.selectedTaskFiles&&i.selectedTaskFiles.length>0?((0,s.uX)(),(0,s.CE)("div",fr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.selectedTaskFiles,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"file-item"},[(0,s.Lk)("div",yr,[a[25]||(a[25]=(0,s.Lk)("i",{class:"pi pi-file"},null,-1)),(0,s.Lk)("span",wr,(0,c.v_)(e),1)]),(0,s.bo)((0,s.bF)(v,{icon:"pi pi-download",size:"small",severity:"success",outlined:"",onClick:a=>r.downloadFile(e)},null,8,["onClick"]),[[y,"‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î"]])]))),128))])):((0,s.uX)(),(0,s.CE)("div",Lr,[...a[26]||(a[26]=[(0,s.Lk)("p",null,"‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö",-1)])]))]),_:1},8,["visible"]),(0,s.bF)(g,{visible:i.taskWorksDialog,"onUpdate:visible":a[8]||(a[8]=e=>i.taskWorksDialog=e),modal:"",header:`‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£: ${i.selectedTask?.task_name||""}`,style:{width:"90vw",maxWidth:"1200px"},draggable:!1,position:"center"},{footer:(0,s.k6)(()=>[(0,s.bF)(v,{label:"‡∏õ‡∏¥‡∏î",icon:"pi pi-times",onClick:a[7]||(a[7]=e=>i.taskWorksDialog=!1)})]),default:(0,s.k6)(()=>[i.loadingWorks?((0,s.uX)(),(0,s.CE)("div",Fr,[...a[27]||(a[27]=[(0,s.Lk)("i",{class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},null,-1),(0,s.Lk)("p",null,"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...",-1)])])):0===i.taskWorks.length?((0,s.uX)(),(0,s.CE)("div",Dr,[...a[28]||(a[28]=[(0,s.Lk)("i",{class:"pi pi-inbox",style:{"font-size":"3rem",color:"#ccc"}},null,-1),(0,s.Lk)("p",null,"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ",-1)])])):((0,s.uX)(),(0,s.CE)("div",Cr,[(0,s.Lk)("div",_r,[(0,s.Lk)("div",Ar,[a[31]||(a[31]=(0,s.Lk)("i",{class:"pi pi-calendar"},null,-1)),(0,s.Lk)("span",null,[a[29]||(a[29]=(0,s.eW)("‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ",-1)),(0,s.Lk)("strong",null,(0,c.v_)(i.taskWorks.length),1),a[30]||(a[30]=(0,s.eW)(" ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",-1))])]),(0,s.Lk)("div",Er,[a[34]||(a[34]=(0,s.Lk)("i",{class:"pi pi-clock"},null,-1)),(0,s.Lk)("span",null,[a[32]||(a[32]=(0,s.eW)("‡∏£‡∏ß‡∏°: ",-1)),(0,s.Lk)("strong",null,(0,c.v_)(r.getTotalHours()),1),a[33]||(a[33]=(0,s.eW)(" ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á",-1))])])]),(0,s.Lk)("div",Rr,[(0,s.Lk)("div",xr,[a[35]||(a[35]=(0,s.Lk)("label",null,"‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:",-1)),(0,s.bF)(b,{modelValue:i.workStatusFilter,"onUpdate:modelValue":a[5]||(a[5]=e=>i.workStatusFilter=e),options:i.workStatusFilterOptions,optionLabel:"label",optionValue:"value",placeholder:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",class:"filter-dropdown"},null,8,["modelValue","options"])]),(0,s.Lk)("div",Tr,[a[36]||(a[36]=(0,s.Lk)("label",null,"‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°:",-1)),(0,s.bF)(b,{modelValue:i.workSortBy,"onUpdate:modelValue":a[6]||(a[6]=e=>i.workSortBy=e),options:i.workSortOptions,optionLabel:"label",optionValue:"value",class:"filter-dropdown"},null,8,["modelValue","options"])])]),(0,s.Lk)("div",Ir,[(0,s.Lk)("table",Ur,[a[37]||(a[37]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"ID"),(0,s.Lk)("th",null,"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"),(0,s.Lk)("th",null,"‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"),(0,s.Lk)("th",null,"‡πÄ‡∏ß‡∏•‡∏≤"),(0,s.Lk)("th",null,"‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á"),(0,s.Lk)("th",null,"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"),(0,s.Lk)("th",null,"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà"),(0,s.Lk)("th",null,"‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.filteredAndSortedWorks,e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",Vr,[(0,s.bF)(p,{value:e.id,severity:"info"},null,8,["value"])]),(0,s.Lk)("td",null,(0,c.v_)(r.formatDate(e.work_date)),1),(0,s.Lk)("td",null,(0,c.v_)(e.employee_name||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"),1),(0,s.Lk)("td",null,(0,c.v_)(e.start_time)+" - "+(0,c.v_)(e.end_time),1),(0,s.Lk)("td",Sr,(0,c.v_)(parseFloat(e.total_hours||0).toFixed(1))+" ‡∏ä‡∏°.",1),(0,s.Lk)("td",$r,[(0,s.bF)(p,{value:r.getStatusLabel(e.work_status),style:(0,c.Tr)({backgroundColor:r.getStatusColor(e.work_status),color:"#fff",fontWeight:"bold"})},null,8,["value","style"])]),(0,s.Lk)("td",null,(0,c.v_)(e.location||"-"),1),(0,s.Lk)("td",Xr,[e.files&&e.files.length>0?(0,s.bo)(((0,s.uX)(),(0,s.Wv)(v,{key:0,icon:"pi pi-paperclip",label:e.files.length.toString(),size:"small",severity:"success",outlined:"",onClick:a=>r.showWorkFiles(e)},null,8,["label","onClick"])),[[y,`${e.files.length} ‡πÑ‡∏ü‡∏•‡πå`]]):((0,s.uX)(),(0,s.CE)("span",jr,"-"))])]))),128))])])])]))]),_:1},8,["visible","header"]),(0,s.bF)(g,{visible:i.workFilesDialog,"onUpdate:visible":a[9]||(a[9]=e=>i.workFilesDialog=e),modal:"",header:"‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö",style:{width:"500px"},draggable:!1},{default:(0,s.k6)(()=>[i.selectedWorkFiles&&i.selectedWorkFiles.length>0?((0,s.uX)(),(0,s.CE)("div",Wr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.selectedWorkFiles,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"file-item"},[(0,s.Lk)("div",Br,[a[38]||(a[38]=(0,s.Lk)("i",{class:"pi pi-file"},null,-1)),(0,s.Lk)("span",Or,(0,c.v_)(e),1)]),(0,s.bo)((0,s.bF)(v,{icon:"pi pi-download",size:"small",severity:"success",outlined:"",onClick:a=>r.downloadWorkFile(e)},null,8,["onClick"]),[[y,"‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î"]])]))),128))])):(0,s.Q3)("",!0)]),_:1},8,["visible"]),(0,s.bF)(g,{visible:i.editDialog,"onUpdate:visible":a[21]||(a[21]=e=>i.editDialog=e),modal:"",header:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô",style:{width:"50rem"},draggable:!1,position:"center"},{default:(0,s.k6)(()=>[(0,s.Lk)("form",{onSubmit:a[20]||(a[20]=(0,l.D$)((...e)=>r.updateTask&&r.updateTask(...e),["prevent"])),class:"edit-form"},[(0,s.Lk)("div",Nr,[(0,s.Lk)("div",Kr,[a[39]||(a[39]=(0,s.Lk)("label",{class:"input-label"},"‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô *",-1)),(0,s.bF)(d,{modelValue:i.editFormData.task_name,"onUpdate:modelValue":a[10]||(a[10]=e=>i.editFormData.task_name=e),required:"",class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",Mr,[a[40]||(a[40]=(0,s.Lk)("label",{class:"input-label"},"SO Number",-1)),(0,s.bF)(d,{modelValue:i.editFormData.so_number,"onUpdate:modelValue":a[11]||(a[11]=e=>i.editFormData.so_number=e),class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",Hr,[a[41]||(a[41]=(0,s.Lk)("label",{class:"input-label"},"Contract Number",-1)),(0,s.bF)(d,{modelValue:i.editFormData.contract_number,"onUpdate:modelValue":a[12]||(a[12]=e=>i.editFormData.contract_number=e),class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",Pr,[a[42]||(a[42]=(0,s.Lk)("label",{class:"input-label"},"Sale Owner",-1)),(0,s.bF)(d,{modelValue:i.editFormData.sale_owner,"onUpdate:modelValue":a[13]||(a[13]=e=>i.editFormData.sale_owner=e),class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",Qr,[a[43]||(a[43]=(0,s.Lk)("label",{class:"input-label"},"‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏á‡∏≤‡∏ô *",-1)),(0,s.bF)(b,{modelValue:i.editFormData.category,"onUpdate:modelValue":a[14]||(a[14]=e=>i.editFormData.category=e),options:i.categories,optionLabel:"label",optionValue:"value",placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏á‡∏≤‡∏ô",class:"corporate-input",required:""},{value:(0,s.k6)(e=>[e.value?((0,s.uX)(),(0,s.CE)("span",qr,(0,c.v_)(r.getCategoryLabel(e.value)),1)):(0,s.Q3)("",!0)]),option:(0,s.k6)(e=>[(0,s.Lk)("span",null,(0,c.v_)(e.option.label),1)]),_:1},8,["modelValue","options"])]),(0,s.Lk)("div",Yr,[a[44]||(a[44]=(0,s.Lk)("label",{class:"input-label"},"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô",-1)),(0,s.bF)(b,{modelValue:i.editFormData.status,"onUpdate:modelValue":a[15]||(a[15]=e=>i.editFormData.status=e),options:i.workStatuses,optionLabel:"label",optionValue:"value",placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô",class:"corporate-input"},{value:(0,s.k6)(e=>[e.value?((0,s.uX)(),(0,s.CE)("span",zr,(0,c.v_)(r.getStatusLabel(e.value)),1)):(0,s.Q3)("",!0)]),option:(0,s.k6)(e=>[(0,s.Lk)("span",null,(0,c.v_)(e.option.label),1)]),_:1},8,["modelValue","options"])]),(0,s.Lk)("div",Gr,[a[45]||(a[45]=(0,s.Lk)("label",{class:"input-label"},"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î",-1)),(0,s.bF)(f,{modelValue:i.editFormData.description,"onUpdate:modelValue":a[16]||(a[16]=e=>i.editFormData.description=e),rows:"4",class:"corporate-input"},null,8,["modelValue"])]),(0,s.Lk)("div",Jr,[a[50]||(a[50]=(0,s.Lk)("label",{class:"input-label"},"‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö",-1)),(0,s.Lk)("div",Zr,[(0,s.Lk)("input",{type:"file",ref:"editFileInput",onChange:a[17]||(a[17]=(...e)=>r.handleEditFileUpload&&r.handleEditFileUpload(...e)),accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",multiple:"",class:"file-input",style:{display:"none"}},null,544),(0,s.bF)(v,{type:"button",label:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå",icon:"pi pi-upload",severity:"secondary",outlined:"",onClick:a[18]||(a[18]=a=>e.$refs.editFileInput.click())})]),i.editFormData.existingFiles?.length>0?((0,s.uX)(),(0,s.CE)("div",en,[a[47]||(a[47]=(0,s.Lk)("h4",null,"‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°:",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.editFormData.existingFiles,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"file-item"},[a[46]||(a[46]=(0,s.Lk)("i",{class:"pi pi-file"},null,-1)),(0,s.Lk)("span",an,(0,c.v_)(e),1),(0,s.bF)(v,{icon:"pi pi-times",size:"small",severity:"danger",text:"",onClick:e=>r.removeExistingFile(t)},null,8,["onClick"])]))),128))])):(0,s.Q3)("",!0),i.editFormData.newFiles?.length>0?((0,s.uX)(),(0,s.CE)("div",tn,[a[49]||(a[49]=(0,s.Lk)("h4",null,"‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà:",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.editFormData.newFiles,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"file-item"},[a[48]||(a[48]=(0,s.Lk)("i",{class:"pi pi-file"},null,-1)),(0,s.Lk)("span",ln,(0,c.v_)(e.name),1),(0,s.bF)(v,{icon:"pi pi-times",size:"small",severity:"danger",text:"",onClick:e=>r.removeNewFile(t)},null,8,["onClick"])]))),128))])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",sn,[(0,s.bF)(v,{type:"button",label:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",severity:"secondary",outlined:"",onClick:a[19]||(a[19]=e=>i.editDialog=!1)}),(0,s.bF)(v,{type:"submit",label:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å",severity:"success"})])],32)]),_:1},8,["visible"])],64)}var rn={name:"TaskList",created(){this.$http=p.A.create({baseURL:""})},async mounted(){window.addEventListener("taskUpdated",this.handleTaskUpdate),window.addEventListener("workRecordUpdated",this.handleTaskUpdate),window.addEventListener("taskStatusChanged",this.handleTaskUpdate),window.addEventListener("categoriesUpdated",this.handleCategoriesUpdate),window.addEventListener("statusesUpdated",this.handleStatusesUpdate),await this.loadCategoriesFromStorage(),await this.loadStatusesFromStorage(),this.loadTasks()},beforeUnmount(){window.removeEventListener("taskUpdated",this.handleTaskUpdate),window.removeEventListener("workRecordUpdated",this.handleTaskUpdate),window.removeEventListener("taskStatusChanged",this.handleTaskUpdate),window.removeEventListener("categoriesUpdated",this.handleCategoriesUpdate),window.removeEventListener("statusesUpdated",this.handleStatusesUpdate)},data(){return{searchQuery:"",tasks:[],detailDialog:!1,selectedTask:null,filesDialog:!1,selectedTaskFiles:[],editDialog:!1,taskWorksDialog:!1,taskWorks:[],loadingWorks:!1,workFilesDialog:!1,selectedWorkFiles:[],workStatusFilter:null,workSortBy:"date_desc",workStatusFilterOptions:[{label:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",value:null},{label:"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå",value:"completed"},{label:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",value:"in_progress"},{label:"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",value:"pending"},{label:"‡∏£‡∏∞‡∏á‡∏±‡∏ö",value:"on_hold"}],workSortOptions:[{label:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î",value:"date_desc"},{label:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î",value:"date_asc"},{label:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞",value:"status"}],editFormData:{id:null,task_name:"",so_number:"",contract_number:"",sale_owner:"",description:"",category:"‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",existingFiles:[],newFiles:[]},categoryOptions:[{label:"‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",value:"‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ"},{label:"‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö",value:"‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö"},{label:"‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤",value:"‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤"},{label:"‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°",value:"‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°"},{label:"‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°",value:"‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°"},{label:"‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢",value:"‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢"},{label:"‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",value:"‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"},{label:"‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",value:"‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}],categories:[],workStatuses:[]}},computed:{filteredTasks(){const e=this.tasks||[];if(!this.searchQuery)return e;const a=this.searchQuery.toLowerCase().trim();return e.filter(e=>{const t={id:e.id||"",task_name:e.task_name||"",so_number:e.so_number||"",contract_number:e.contract_number||"",sale_owner:e.sale_owner||"",description:e.description||"",category:e.category||"",status:e.status||"",created_by:e.created_by||""};return Object.values(t).some(e=>{if(null===e||void 0===e)return!1;const t=String(e).toLowerCase();return t.includes(a)||t.replace(/\s/g,"").includes(a.replace(/\s/g,""))})})},filteredAndSortedWorks(){let e=[...this.taskWorks];if(this.workStatusFilter&&(e=e.filter(e=>e.work_status===this.workStatusFilter)),"date_desc"===this.workSortBy)e.sort((e,a)=>new Date(a.work_date)-new Date(e.work_date));else if("date_asc"===this.workSortBy)e.sort((e,a)=>new Date(e.work_date)-new Date(a.work_date));else if("status"===this.workSortBy){const a={completed:1,in_progress:2,pending:3,on_hold:4};e.sort((e,t)=>(a[e.work_status]||5)-(a[t.work_status]||5))}return e}},methods:{async loadCategoriesFromStorage(){try{const e=await this.$http.get("/api/settings/categories");this.categories=e.data}catch(e){console.error("Error loading categories:",e),this.categories=[{label:"üíº ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",value:"‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",icon:"emoji:üíº",color:"#6366f1"},{label:"üíª ‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤",value:"‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤",icon:"emoji:üíª",color:"#14b8a6"},{label:"üîß ‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤",value:"‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤",icon:"emoji:üîß",color:"#f97316"}]}},async loadStatusesFromStorage(){try{const e=await this.$http.get("/api/settings/statuses");this.workStatuses=e.data}catch(e){console.error("Error loading statuses:",e),this.workStatuses=[{label:"‚è≥ ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",value:"pending",icon:"emoji:‚è≥",color:"#f59e0b"},{label:"üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",value:"in_progress",icon:"emoji:üîÑ",color:"#3b82f6"},{label:"‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô",value:"completed",icon:"emoji:‚úÖ",color:"#10b981"},{label:"‚è∏Ô∏è ‡∏£‡∏∞‡∏á‡∏±‡∏ö",value:"on_hold",icon:"emoji:‚è∏Ô∏è",color:"#6c757d"}]}},getCategoryIcon(e){const a=this.categories.find(a=>a.value===e);return a?a.icon:"pi pi-tag"},getCategoryLabel(e){const a=this.categories.find(a=>a.value===e);return a&&a.label?a.label.replace(/[\u{1F000}-\u{1FFFF}]|[\u{2600}-\u{27BF}]|[\u{2300}-\u{23FF}]|[\u{2B50}]|[\u{203C}-\u{3299}]/gu,"").trim():e},getCategoryColor(e){if(!this.categories||0===this.categories.length)return"#6c757d";const a=this.categories.find(a=>a.value===e);return a&&a.color?a.color:"#6c757d"},getStatusIcon(e){const a=this.workStatuses.find(a=>a.value===e);return a?a.icon:"pi pi-circle"},getStatusLabel(e){const a=this.workStatuses.find(a=>a.value===e);return a&&a.label?a.label.replace(/[\u{1F000}-\u{1FFFF}]|[\u{2600}-\u{27BF}]|[\u{2300}-\u{23FF}]|[\u{2B50}]|[\u{203C}-\u{3299}]/gu,"").trim():e},getStatusColor(e){const a=this.workStatuses.find(a=>a.value===e);return a?.color||"#6c757d"},async loadTasks(){try{const e=await this.$http.get("/api/tasks");this.tasks=e.data.data||e.data||[]}catch(e){this.tasks=[],this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ",life:5e3})}},formatDate(e){if(!e)return"-";try{return new Date(e).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})}catch(a){return e}},showTaskDetails(e){this.selectedTask=e,this.detailDialog=!0},hasFiles(e){return e.files&&Array.isArray(e.files)&&e.files.length>0},downloadTaskFiles(e){this.hasFiles(e)&&(this.selectedTaskFiles=e.files,this.filesDialog=!0)},downloadFile(e){const a=document.createElement("a");a.href=`/api/files/download/${e}`,a.download=e,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)},editTask(e){this.editFormData={id:e.id,task_name:e.task_name,so_number:e.so_number||"",contract_number:e.contract_number||"",sale_owner:e.sale_owner||"",description:e.description||"",category:e.category||"‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",status:e.status||"pending",existingFiles:[...e.files||[]],newFiles:[]},this.editDialog=!0},handleEditFileUpload(e){const a=Array.from(e.target.files);this.editFormData.newFiles=[...this.editFormData.newFiles,...a]},removeExistingFile(e){this.editFormData.existingFiles.splice(e,1)},removeNewFile(e){this.editFormData.newFiles.splice(e,1)},async uploadNewFiles(){if(0===this.editFormData.newFiles.length)return[];const e=new FormData;this.editFormData.newFiles.forEach(a=>{e.append("files",a)});try{const a=await this.$http.post("/api/files/upload",e,{headers:{"Content-Type":"multipart/form-data"}});return a.data.files||[]}catch(a){return[]}},async updateTask(){try{const e=await this.uploadNewFiles(),a=[...this.editFormData.existingFiles,...e],t={...this.editFormData,files:a};delete t.existingFiles,delete t.newFiles,await this.$http.put(`/api/tasks/${this.editFormData.id}`,t),this.$toast.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3}),this.editDialog=!1,await this.loadTasks(),window.dispatchEvent(new CustomEvent("taskUpdated"))}catch(e){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:e.response?.data?.error||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ",life:5e3})}},handleTaskUpdate(){this.loadTasks()},handleCategoriesUpdate(){this.loadCategoriesFromStorage()},handleStatusesUpdate(){this.loadStatusesFromStorage()},async refreshData(){await this.loadTasks()},async viewTaskWorks(e){this.selectedTask=e,this.taskWorks=[],this.loadingWorks=!0,this.taskWorksDialog=!0,this.workStatusFilter=null,this.workSortBy="date_desc";try{const a=await this.$http.get(`/api/daily-work?task_id=${e.id}`);this.taskWorks=a.data||[]}catch(a){this.$toast.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡πÑ‡∏î‡πâ",life:3e3}),this.taskWorks=[]}finally{this.loadingWorks=!1}},formatDateTime(e){try{return new Date(e).toLocaleString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(a){return e}},getTotalHours(){if(!this.taskWorks||0===this.taskWorks.length)return"0.0";const e=this.taskWorks.reduce((e,a)=>e+(parseFloat(a.total_hours)||0),0);return e.toFixed(1)},showWorkFiles(e){this.selectedWorkFiles=e.files||[],this.workFilesDialog=!0},downloadWorkFile(e){const a=document.createElement("a");a.href=`/api/files/download/${e}`,a.download=e,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)}}};const nn=(0,$.A)(rn,[["render",on],["__scopeId","data-v-64cbc350"]]);var dn=nn,cn={name:"ProjectsView",components:{AddTaskForm:lr,TaskList:dn},data(){return{showTaskDialog:!1}},methods:{handleTaskAdded(){this.showTaskDialog=!1,this.$refs.taskList&&this.$refs.taskList.loadTasks()}}};const un=(0,$.A)(cn,[["render",Xi],["__scopeId","data-v-18c86d53"]]);var pn=un;const mn={class:"management-container"},vn={class:"management-grid"},hn={class:"card-content"},kn={class:"card-header"},gn={class:"card-content"},bn={class:"card-header"},fn={class:"card-content"},yn={class:"card-header"},wn={class:"card-content"},Ln={class:"card-header"},Fn={class:"card-content"},Dn={class:"card-header"},Cn={class:"card-content"},_n={class:"card-header"},An={class:"card-content"},En={class:"card-header"},Rn={class:"card-content"},xn={class:"card-header"};var Tn={__name:"ManagementView",setup(e){const a=(0,K.rd)(),t=(0,q.d)(),{loadPermissions:l,hasAccess:o}=k();(0,s.sV)(()=>{l()});const i=e=>{const l=localStorage.getItem("soc_role");if("admin"===l||"superadmin"===l)switch(e){case"users":a.push("/management/users");break;case"leave-management":a.push("/management/leave");break;case"task-management":a.push("/management/tasks");break;case"settings":a.push("/management/settings");break;case"car-management":case"departments":case"reports":case"backup":t.add({severity:"info",summary:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤",detail:"‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤",life:3e3});break;default:t.add({severity:"info",summary:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤",detail:"‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤",life:3e3})}else t.add({severity:"error",summary:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á",detail:"‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ",life:3e3})};return(e,a)=>{const t=(0,s.g2)("Toast"),l=(0,s.g2)("Card"),r=(0,s.g2)("Badge");return(0,s.uX)(),(0,s.CE)("div",mn,[(0,s.bF)(t),(0,s.bF)(l,{class:"header-card mb-4"},{content:(0,s.k6)(()=>[...a[8]||(a[8]=[(0,s.Lk)("div",{class:"header-content"},[(0,s.Lk)("div",{class:"header-left"},[(0,s.Lk)("div",{class:"header-title"},[(0,s.Lk)("i",{class:"pi pi-cog header-icon"}),(0,s.Lk)("h1",null,"‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£")])])],-1)])]),_:1}),(0,s.Lk)("div",vn,[(0,d.R1)(o)("/management/users")?((0,s.uX)(),(0,s.Wv)(l,{key:0,class:"management-card",onClick:a[0]||(a[0]=e=>i("users"))},{content:(0,s.k6)(()=>[(0,s.Lk)("div",hn,[(0,s.Lk)("div",kn,[a[9]||(a[9]=(0,s.Lk)("i",{class:"pi pi-users card-icon"},null,-1)),(0,s.bF)(r,{value:"Active",severity:"success",class:"status-badge"})]),a[10]||(a[10]=(0,s.Lk)("h3",null,"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô",-1)),a[11]||(a[11]=(0,s.Lk)("p",null,"‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏•‡∏ö ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå",-1)),a[12]||(a[12]=(0,s.Lk)("div",{class:"card-footer"},[(0,s.Lk)("i",{class:"pi pi-arrow-right"})],-1))])]),_:1})):(0,s.Q3)("",!0),(0,d.R1)(o)("/management/leave")?((0,s.uX)(),(0,s.Wv)(l,{key:1,class:"management-card",onClick:a[1]||(a[1]=e=>i("leave-management"))},{content:(0,s.k6)(()=>[(0,s.Lk)("div",gn,[(0,s.Lk)("div",bn,[a[13]||(a[13]=(0,s.Lk)("i",{class:"pi pi-calendar-times card-icon"},null,-1)),(0,s.bF)(r,{value:"Active",severity:"success",class:"status-badge"})]),a[14]||(a[14]=(0,s.Lk)("h3",null,"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡∏á‡∏≤‡∏ô",-1)),a[15]||(a[15]=(0,s.Lk)("p",null,"‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏•‡∏≤ ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô",-1)),a[16]||(a[16]=(0,s.Lk)("div",{class:"card-footer"},[(0,s.Lk)("i",{class:"pi pi-arrow-right"})],-1))])]),_:1})):(0,s.Q3)("",!0),(0,s.bF)(l,{class:"management-card",onClick:a[2]||(a[2]=e=>i("car-management"))},{content:(0,s.k6)(()=>[(0,s.Lk)("div",fn,[(0,s.Lk)("div",yn,[a[17]||(a[17]=(0,s.Lk)("i",{class:"pi pi-car card-icon"},null,-1)),(0,s.bF)(r,{value:"Coming Soon",severity:"warning",class:"status-badge"})]),a[18]||(a[18]=(0,s.Lk)("h3",null,"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå",-1)),a[19]||(a[19]=(0,s.Lk)("p",null,"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏ñ ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤",-1)),a[20]||(a[20]=(0,s.Lk)("div",{class:"card-footer"},[(0,s.Lk)("i",{class:"pi pi-arrow-right"})],-1))])]),_:1}),(0,d.R1)(o)("/management/tasks")?((0,s.uX)(),(0,s.Wv)(l,{key:2,class:"management-card",onClick:a[3]||(a[3]=e=>i("task-management"))},{content:(0,s.k6)(()=>[(0,s.Lk)("div",wn,[(0,s.Lk)("div",Ln,[a[21]||(a[21]=(0,s.Lk)("i",{class:"pi pi-briefcase card-icon"},null,-1)),(0,s.bF)(r,{value:"Active",severity:"success",class:"status-badge"})]),a[22]||(a[22]=(0,s.Lk)("h3",null,"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô",-1)),a[23]||(a[23]=(0,s.Lk)("p",null,"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô ‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏•",-1)),a[24]||(a[24]=(0,s.Lk)("div",{class:"card-footer"},[(0,s.Lk)("i",{class:"pi pi-arrow-right"})],-1))])]),_:1})):(0,s.Q3)("",!0),(0,s.bF)(l,{class:"management-card",onClick:a[4]||(a[4]=e=>i("departments"))},{content:(0,s.k6)(()=>[(0,s.Lk)("div",Fn,[(0,s.Lk)("div",Dn,[a[25]||(a[25]=(0,s.Lk)("i",{class:"pi pi-building card-icon"},null,-1)),(0,s.bF)(r,{value:"Coming Soon",severity:"warning",class:"status-badge"})]),a[26]||(a[26]=(0,s.Lk)("h3",null,"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ú‡∏ô‡∏Å",-1)),a[27]||(a[27]=(0,s.Lk)("p",null,"‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡πÅ‡∏ú‡∏ô‡∏Å‡πÅ‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏á‡∏≤‡∏ô",-1)),a[28]||(a[28]=(0,s.Lk)("div",{class:"card-footer"},[(0,s.Lk)("i",{class:"pi pi-arrow-right"})],-1))])]),_:1}),(0,s.bF)(l,{class:"management-card",onClick:a[5]||(a[5]=e=>i("reports"))},{content:(0,s.k6)(()=>[(0,s.Lk)("div",Cn,[(0,s.Lk)("div",_n,[a[29]||(a[29]=(0,s.Lk)("i",{class:"pi pi-chart-bar card-icon"},null,-1)),(0,s.bF)(r,{value:"Coming Soon",severity:"warning",class:"status-badge"})]),a[30]||(a[30]=(0,s.Lk)("h3",null,"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô",-1)),a[31]||(a[31]=(0,s.Lk)("p",null,"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û",-1)),a[32]||(a[32]=(0,s.Lk)("div",{class:"card-footer"},[(0,s.Lk)("i",{class:"pi pi-arrow-right"})],-1))])]),_:1}),(0,d.R1)(o)("/management/settings")?((0,s.uX)(),(0,s.Wv)(l,{key:3,class:"management-card",onClick:a[6]||(a[6]=e=>i("settings"))},{content:(0,s.k6)(()=>[(0,s.Lk)("div",An,[(0,s.Lk)("div",En,[a[33]||(a[33]=(0,s.Lk)("i",{class:"pi pi-cog card-icon"},null,-1)),(0,s.bF)(r,{value:"Active",severity:"success",class:"status-badge"})]),a[34]||(a[34]=(0,s.Lk)("h3",null,"‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö",-1)),a[35]||(a[35]=(0,s.Lk)("p",null,"‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",-1)),a[36]||(a[36]=(0,s.Lk)("div",{class:"card-footer"},[(0,s.Lk)("i",{class:"pi pi-arrow-right"})],-1))])]),_:1})):(0,s.Q3)("",!0),(0,s.bF)(l,{class:"management-card",onClick:a[7]||(a[7]=e=>i("backup"))},{content:(0,s.k6)(()=>[(0,s.Lk)("div",Rn,[(0,s.Lk)("div",xn,[a[37]||(a[37]=(0,s.Lk)("i",{class:"pi pi-database card-icon"},null,-1)),(0,s.bF)(r,{value:"Coming Soon",severity:"warning",class:"status-badge"})]),a[38]||(a[38]=(0,s.Lk)("h3",null,"‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",-1)),a[39]||(a[39]=(0,s.Lk)("p",null,"‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö",-1)),a[40]||(a[40]=(0,s.Lk)("div",{class:"card-footer"},[(0,s.Lk)("i",{class:"pi pi-arrow-right"})],-1))])]),_:1})])])}}};const In=(0,$.A)(Tn,[["__scopeId","data-v-fe50e38e"]]);var Un=In,Vn=t(7422);const Sn={class:"user-management"},$n={class:"header-content"},Xn={class:"header-left"},jn={class:"header-stats"},Wn={class:"user-count"},Bn={class:"filter-content"},On={class:"search-wrapper"},Nn={class:"filter-actions"},Kn={class:"user-info"},Mn={class:"user-name"},Hn={class:"user-username"},Pn={class:"email-wrapper"},Qn={class:"position-info"},qn={class:"position"},Yn={class:"department"},zn={class:"action-buttons"},Gn={class:"user-form"},Jn={class:"form-row"},Zn={class:"field"},ed={key:0,class:"field"},ad={class:"password-wrapper"},td={class:"form-row"},ld={class:"field"},sd={class:"field"},od={class:"field"},id={class:"form-row"},rd={class:"field"},nd={class:"field"},dd={class:"form-row"},cd={class:"field"},ud={class:"role-input-group"},pd={class:"field"},md={class:"dialog-footer"};var vd={__name:"UserManagement",setup(e){const a=(0,q.d)(),t=(0,d.KR)([]),l=(0,d.KR)(!1),o=(0,d.KR)(!1),i=(0,d.KR)(!1),r=(0,d.KR)(!1),n=(0,d.KR)(!1),u=(0,d.KR)(""),m=(0,d.KR)({firstname:"",lastname:"",username:"",password:"",email:"",position:"",department:"",role:"user",is_active:!0}),v=(0,d.KR)([{label:"User",value:"user"},{label:"Admin",value:"admin"},{label:"HR",value:"hr"}]),h=[{label:"Active",value:!0},{label:"Inactive",value:!1}],k=(0,d.KR)({global:{value:null,matchMode:Vn.Rn.CONTAINS}}),g=()=>{const e=u.value.trim().toLowerCase();e&&!v.value.find(a=>a.value===e)&&(v.value.push({label:e.charAt(0).toUpperCase()+e.slice(1),value:e}),m.value.role=e,u.value="",a.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:`‡πÄ‡∏û‡∏¥‡πà‡∏° role "${e}" ‡πÅ‡∏•‡πâ‡∏ß`,life:2e3}))},b=e=>{switch(e){case"admin":return"danger";case"hr":return"warning";default:return"info"}},f=async()=>{l.value=!0;try{const e=await p.A.get("/api/users");t.value=e.data.map(e=>({...e,statusText:"active"===e.status?"Active":"Inactive"}))}catch(e){a.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ",life:3e3})}finally{l.value=!1}},y=()=>{F(),r.value=!1,i.value=!0},w=async()=>{o.value=!0;try{const e={...m.value};r.value&&delete e.password,r.value?await p.A.put(`/api/users/${m.value.id}`,e):await p.A.post("/api/users",e),a.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:r.value?"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢":"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",life:3e3}),i.value=!1,F(),f()}catch(e){a.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:e.response?.data?.error||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ",life:3e3})}finally{o.value=!1}},L=e=>{m.value={...e},r.value=!0,i.value=!0},F=()=>{m.value={firstname:"",lastname:"",username:"",password:"",email:"",position:"",department:"",role:"user",is_active:!0},r.value=!1},D=()=>{i.value=!1,n.value=!1,F()};return(0,s.sV)(()=>{f()}),(e,a)=>{const d=(0,s.g2)("Toast"),p=(0,s.g2)("Button"),f=(0,s.g2)("Card"),F=(0,s.g2)("InputIcon"),C=(0,s.g2)("InputText"),_=(0,s.g2)("IconField"),A=(0,s.g2)("Badge"),E=(0,s.g2)("Column"),R=(0,s.g2)("DataTable"),x=(0,s.g2)("Dropdown"),T=(0,s.g2)("Dialog"),I=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)("div",Sn,[(0,s.bF)(d),(0,s.bF)(f,{class:"header-card mb-4"},{content:(0,s.k6)(()=>[(0,s.Lk)("div",$n,[(0,s.Lk)("div",Xn,[(0,s.bF)(p,{icon:"pi pi-arrow-left",onClick:a[0]||(a[0]=a=>e.$router.go(-1)),text:"",class:"back-btn"}),a[15]||(a[15]=(0,s.Lk)("div",{class:"header-title"},[(0,s.Lk)("i",{class:"pi pi-users header-icon"}),(0,s.Lk)("h1",null,"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô")],-1))]),(0,s.Lk)("div",jn,[(0,s.Lk)("div",Wn," ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: "+(0,c.v_)(t.value.length),1)])])]),_:1}),(0,s.bF)(f,{class:"filter-card mb-4"},{content:(0,s.k6)(()=>[(0,s.Lk)("div",Bn,[(0,s.Lk)("div",On,[(0,s.bF)(_,{iconPosition:"left"},{default:(0,s.k6)(()=>[(0,s.bF)(F,{class:"pi pi-search"}),(0,s.bF)(C,{modelValue:k.value["global"].value,"onUpdate:modelValue":a[1]||(a[1]=e=>k.value["global"].value=e),placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ...",class:"search-input"},null,8,["modelValue"])]),_:1})]),(0,s.Lk)("div",Nn,[(0,s.bF)(p,{label:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ",icon:"pi pi-plus",onClick:y,class:"add-btn"})])])]),_:1}),(0,s.bF)(f,{class:"table-card"},{content:(0,s.k6)(()=>[(0,s.bF)(R,{value:t.value,loading:l.value,paginator:"",rows:10,globalFilterFields:["firstname","lastname","username","email","employee_id","position","department","statusText"],filters:k.value,"onUpdate:filters":a[2]||(a[2]=e=>k.value=e),filterDisplay:"menu",rowsPerPageOptions:[5,10,20,50],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} ‡∏ñ‡∏∂‡∏á {last} ‡∏à‡∏≤‡∏Å {totalRecords} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",class:"responsive-table"},{default:(0,s.k6)(()=>[(0,s.bF)(E,{field:"employee_id",header:"‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô",class:"employee-id-col"},{body:(0,s.k6)(e=>[(0,s.bF)(A,{value:e.data.employee_id,severity:"info"},null,8,["value"])]),_:1}),(0,s.bF)(E,{field:"firstname",header:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•",class:"name-col"},{body:(0,s.k6)(e=>[(0,s.Lk)("div",Kn,[(0,s.Lk)("div",Mn,(0,c.v_)(e.data.firstname)+" "+(0,c.v_)(e.data.lastname),1),(0,s.Lk)("div",Hn,"@"+(0,c.v_)(e.data.username),1)])]),_:1}),(0,s.bF)(E,{field:"email",header:"Email",class:"email-col"},{body:(0,s.k6)(e=>[(0,s.Lk)("div",Pn,[a[16]||(a[16]=(0,s.Lk)("i",{class:"pi pi-envelope email-icon"},null,-1)),(0,s.eW)(" "+(0,c.v_)(e.data.email),1)])]),_:1}),(0,s.bF)(E,{field:"position",header:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",class:"position-col"},{body:(0,s.k6)(e=>[(0,s.Lk)("div",Qn,[(0,s.Lk)("div",qn,(0,c.v_)(e.data.position||"-"),1),(0,s.Lk)("div",Yn,(0,c.v_)(e.data.department||"-"),1)])]),_:1}),(0,s.bF)(E,{field:"role",header:"Role",class:"role-col"},{body:(0,s.k6)(e=>[(0,s.bF)(A,{value:e.data.role,severity:b(e.data.role)},null,8,["value","severity"])]),_:1}),(0,s.bF)(E,{field:"is_active",header:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞",class:"status-col"},{body:(0,s.k6)(e=>[(0,s.bF)(A,{value:e.data.is_active?"Active":"Inactive",severity:e.data.is_active?"success":"danger"},null,8,["value","severity"])]),_:1}),(0,s.bF)(E,{header:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£",class:"action-col"},{body:(0,s.k6)(e=>[(0,s.Lk)("div",zn,[(0,s.bo)((0,s.bF)(p,{icon:"pi pi-pencil",size:"small",severity:"info",onClick:a=>L(e.data)},null,8,["onClick"]),[[I,"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"]])])]),_:1})]),_:1},8,["value","loading","filters"])]),_:1}),(0,s.bF)(T,{visible:i.value,"onUpdate:visible":a[14]||(a[14]=e=>i.value=e),header:r.value?"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô":"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô",modal:"",style:{width:"90vw",maxWidth:"600px"},class:"user-dialog",draggable:!1,resizable:!1,position:"center"},{footer:(0,s.k6)(()=>[(0,s.Lk)("div",md,[(0,s.bF)(p,{label:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",onClick:D,text:""}),(0,s.bF)(p,{label:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å",onClick:w,loading:o.value},null,8,["loading"])])]),default:(0,s.k6)(()=>[(0,s.Lk)("div",Gn,[(0,s.Lk)("div",Jn,[(0,s.Lk)("div",Zn,[a[17]||(a[17]=(0,s.Lk)("label",null,"Username *",-1)),(0,s.bF)(C,{modelValue:m.value.username,"onUpdate:modelValue":a[3]||(a[3]=e=>m.value.username=e),required:""},null,8,["modelValue"])]),r.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",ed,[a[18]||(a[18]=(0,s.Lk)("label",null,"Password *",-1)),(0,s.Lk)("div",ad,[(0,s.bF)(C,{modelValue:m.value.password,"onUpdate:modelValue":a[4]||(a[4]=e=>m.value.password=e),type:n.value?"text":"password",required:"",placeholder:"‡∏Å‡∏£‡∏≠‡∏Å password"},null,8,["modelValue","type"]),(0,s.bF)(p,{icon:n.value?"pi pi-eye-slash":"pi pi-eye",onClick:a[5]||(a[5]=e=>n.value=!n.value),text:"",size:"small",class:"password-toggle"},null,8,["icon"])])]))]),(0,s.Lk)("div",td,[(0,s.Lk)("div",ld,[a[19]||(a[19]=(0,s.Lk)("label",null,"‡∏ä‡∏∑‡πà‡∏≠ *",-1)),(0,s.bF)(C,{modelValue:m.value.firstname,"onUpdate:modelValue":a[6]||(a[6]=e=>m.value.firstname=e),required:""},null,8,["modelValue"])]),(0,s.Lk)("div",sd,[a[20]||(a[20]=(0,s.Lk)("label",null,"‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *",-1)),(0,s.bF)(C,{modelValue:m.value.lastname,"onUpdate:modelValue":a[7]||(a[7]=e=>m.value.lastname=e),required:""},null,8,["modelValue"])])]),(0,s.Lk)("div",od,[a[21]||(a[21]=(0,s.Lk)("label",null,"Email *",-1)),(0,s.bF)(C,{modelValue:m.value.email,"onUpdate:modelValue":a[8]||(a[8]=e=>m.value.email=e),type:"email",required:""},null,8,["modelValue"])]),(0,s.Lk)("div",id,[(0,s.Lk)("div",rd,[a[22]||(a[22]=(0,s.Lk)("label",null,"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",-1)),(0,s.bF)(C,{modelValue:m.value.position,"onUpdate:modelValue":a[9]||(a[9]=e=>m.value.position=e)},null,8,["modelValue"])]),(0,s.Lk)("div",nd,[a[23]||(a[23]=(0,s.Lk)("label",null,"‡πÅ‡∏ú‡∏ô‡∏Å",-1)),(0,s.bF)(C,{modelValue:m.value.department,"onUpdate:modelValue":a[10]||(a[10]=e=>m.value.department=e)},null,8,["modelValue"])])]),(0,s.Lk)("div",dd,[(0,s.Lk)("div",cd,[a[24]||(a[24]=(0,s.Lk)("label",null,"Role *",-1)),(0,s.Lk)("div",ud,[(0,s.bF)(x,{modelValue:m.value.role,"onUpdate:modelValue":a[11]||(a[11]=e=>m.value.role=e),options:v.value,optionLabel:"label",optionValue:"value",placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å role",class:"role-dropdown"},null,8,["modelValue","options"]),(0,s.bF)(C,{modelValue:u.value,"onUpdate:modelValue":a[12]||(a[12]=e=>u.value=e),placeholder:"‡∏û‡∏¥‡∏°‡∏û‡πå role ‡πÉ‡∏´‡∏°‡πà",class:"new-role-input"},null,8,["modelValue"]),(0,s.bo)((0,s.bF)(p,{icon:"pi pi-plus",onClick:g,disabled:!u.value,severity:"success",class:"add-role-btn"},null,8,["disabled"]),[[I,"‡πÄ‡∏û‡∏¥‡πà‡∏° role ‡πÉ‡∏´‡∏°‡πà"]])])]),(0,s.Lk)("div",pd,[a[25]||(a[25]=(0,s.Lk)("label",null,"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞",-1)),(0,s.bF)(x,{modelValue:m.value.is_active,"onUpdate:modelValue":a[13]||(a[13]=e=>m.value.is_active=e),options:h,optionLabel:"label",optionValue:"value"},null,8,["modelValue"])])])])]),_:1},8,["visible","header"])])}}};const hd=(0,$.A)(vd,[["__scopeId","data-v-dada2bc8"]]);var kd=hd;const gd={class:"task-management"},bd={class:"header-content"},fd={class:"header-left"},yd={class:"header-stats"},wd={class:"task-count"},Ld={class:"action-grid"},Fd={class:"action-content"},Dd={class:"action-stats"},Cd={class:"stat-number"},_d={class:"action-content"},Ad={class:"action-stats"},Ed={class:"stat-number"},Rd={class:"dialog-content"},xd={class:"add-section mb-4"},Td={class:"flex flex-column gap-3"},Id={class:"flex gap-2"},Ud={key:0,class:"icon-display"},Vd={key:1},Sd={key:0,class:"color-preview"},$d={class:"list-section"},Xd={class:"category-list"},jd={class:"category-info"},Wd={class:"item-actions"},Bd={class:"dialog-content"},Od={class:"add-section mb-4"},Nd={class:"flex flex-column gap-3"},Kd={class:"flex gap-2"},Md={key:0,class:"icon-display"},Hd={key:1},Pd={class:"icon-option"},Qd={key:0,class:"color-preview"},qd={class:"list-section"},Yd={class:"status-list"},zd={class:"status-info"},Gd={class:"item-actions"};var Jd={__name:"TaskManagement",setup(e){const a=(0,q.d)(),t=p.A.create({baseURL:"http://localhost:3001"}),l=(0,d.KR)(!1),o=(0,d.KR)(!1),i=(0,d.KR)(""),r=(0,d.KR)(""),n=(0,d.KR)(null),u=(0,d.KR)(null),m=(0,d.KR)([]),v=(0,d.KR)([]),h=(0,d.KR)([{label:"üíº ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",value:"emoji:üíº",color:"#6366f1"},{label:"üíª ‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤",value:"emoji:üíª",color:"#14b8a6"},{label:"üîß ‡∏á‡∏≤‡∏ô‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤",value:"emoji:üîß",color:"#f97316"},{label:"üë• ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡∏°",value:"emoji:üë•",color:"#a855f7"},{label:"üìö ‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢",value:"emoji:üìö",color:"#06b6d4"},{label:"üîç ‡∏á‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",value:"emoji:üîç",color:"#84cc16"},{label:"üìù ‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",value:"emoji:üìù",color:"#d946ef"},{label:"üë§ ‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",value:"emoji:üë§",color:"#0ea5e9"},{label:"üí∞ ‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô",value:"emoji:üí∞",color:"#22c55e"},{label:"üì¢ ‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå",value:"emoji:üì¢",color:"#eab308"},{label:"üè† ‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô",value:"emoji:üè†",color:"#64748b"},{label:"üöó ‡∏á‡∏≤‡∏ô‡∏Ç‡∏ô‡∏™‡πà‡∏á",value:"emoji:üöó",color:"#78716c"},{label:"üì± ‡∏á‡∏≤‡∏ô‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•",value:"emoji:üì±",color:"#0891b2"},{label:"üéØ ‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢",value:"emoji:üéØ",color:"#6366f1"},{label:"üìä ‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô",value:"emoji:üìä",color:"#14b8a6"},{label:"üé® ‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö",value:"emoji:üé®",color:"#f97316"},{label:"üîí ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢",value:"emoji:üîí",color:"#a855f7"},{label:"üåê ‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå",value:"emoji:üåê",color:"#06b6d4"},{label:"üìà ‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå",value:"emoji:üìà",color:"#84cc16"},{label:"üèÜ ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©",value:"emoji:üèÜ",color:"#d946ef"}]),k=(0,d.KR)([{label:"‚è≥ ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",value:"emoji:‚è≥",color:"#f59e0b"},{label:"üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",value:"emoji:üîÑ",color:"#3b82f6"},{label:"‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô",value:"emoji:‚úÖ",color:"#10b981"},{label:"‚è∏Ô∏è ‡∏£‡∏∞‡∏á‡∏±‡∏ö",value:"emoji:‚è∏Ô∏è",color:"#6c757d"},{label:"‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",value:"emoji:‚ùå",color:"#ef4444"},{label:"‚ö†Ô∏è ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô",value:"emoji:‚ö†Ô∏è",color:"#f97316"},{label:"üìù ‡∏£‡πà‡∏≤‡∏á",value:"emoji:üìù",color:"#84cc16"},{label:"üöÄ ‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô",value:"emoji:üöÄ",color:"#ec4899"},{label:"üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢",value:"emoji:üéØ",color:"#8b5cf6"},{label:"üí° ‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢",value:"emoji:üí°",color:"#eab308"},{label:"üî• ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç",value:"emoji:üî•",color:"#dc2626"},{label:"‚ö° ‡∏î‡πà‡∏ß‡∏ô‡∏°‡∏≤‡∏Å",value:"emoji:‚ö°",color:"#f43f5e"},{label:"üåü ‡∏û‡∏¥‡πÄ‡∏®‡∏©",value:"emoji:üåü",color:"#a855f7"},{label:"üéâ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",value:"emoji:üéâ",color:"#22c55e"},{label:"üèÅ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå",value:"emoji:üèÅ",color:"#14b8a6"},{label:"üîî ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô",value:"emoji:üîî",color:"#06b6d4"},{label:"üìå ‡∏õ‡∏±‡∏Å‡∏´‡∏°‡∏∏‡∏î",value:"emoji:üìå",color:"#0ea5e9"},{label:"üí§ ‡∏û‡∏±‡∏Å‡∏á‡∏≤‡∏ô",value:"emoji:üí§",color:"#64748b"},{label:"ü§î ‡∏£‡∏≠‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤",value:"emoji:ü§î",color:"#78716c"},{label:"üîí ‡∏•‡πá‡∏≠‡∏Ñ",value:"emoji:üîí",color:"#0891b2"}]),g=async()=>{try{await t.put("/api/settings/categories/update-labels");const e=await t.get("/api/settings/categories");m.value=e.data}catch(e){console.error(e)}},b=async()=>{try{await t.put("/api/settings/statuses/update-colors");const e=await t.get("/api/settings/statuses");v.value=e.data}catch(e){console.error(e)}},f=async()=>{if(i.value.trim()&&n.value)try{const e=n.value.value.replace("emoji:","");await t.post("/api/settings/categories",{label:`${e} ${i.value.trim()}`,value:i.value.trim().toLowerCase().replace(/\s+/g,"_"),icon:n.value.value,color:n.value.color}),i.value="",n.value=null,await g(),window.dispatchEvent(new CustomEvent("categoriesUpdated")),a.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",life:3e3})}catch(e){a.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:e.response?.data?.error||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÑ‡∏î‡πâ",life:3e3})}},y=async e=>{try{await t.delete(`/api/settings/categories/${e}`),await g(),window.dispatchEvent(new CustomEvent("categoriesUpdated")),a.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏•‡∏ö‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",life:3e3})}catch(l){a.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÑ‡∏î‡πâ",life:3e3})}},w=async e=>{if(e>0){const a=m.value[e];m.value[e]=m.value[e-1],m.value[e-1]=a,await t.put("/api/settings/categories/reorder",{categories:m.value}),window.dispatchEvent(new CustomEvent("categoriesUpdated"))}},L=async e=>{if(e<m.value.length-1){const a=m.value[e];m.value[e]=m.value[e+1],m.value[e+1]=a,await t.put("/api/settings/categories/reorder",{categories:m.value}),window.dispatchEvent(new CustomEvent("categoriesUpdated"))}},F=async()=>{if(r.value.trim()&&u.value)try{const e=u.value.value.replace("emoji:","");await t.post("/api/settings/statuses",{label:`${e} ${r.value.trim()}`,value:r.value.trim().toLowerCase().replace(/\s+/g,"_"),icon:u.value.value,color:u.value.color}),r.value="",u.value=null,await b(),window.dispatchEvent(new CustomEvent("statusesUpdated")),a.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",life:3e3})}catch(e){a.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:e.response?.data?.error||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏î‡πâ",life:3e3})}},D=async e=>{try{await t.delete(`/api/settings/statuses/${e}`),await b(),window.dispatchEvent(new CustomEvent("statusesUpdated")),a.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏•‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",life:3e3})}catch(l){a.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏î‡πâ",life:3e3})}},C=async e=>{if(e>0){const a=v.value[e];v.value[e]=v.value[e-1],v.value[e-1]=a,await t.put("/api/settings/statuses/reorder",{statuses:v.value}),window.dispatchEvent(new CustomEvent("statusesUpdated"))}},_=async e=>{if(e<v.value.length-1){const a=v.value[e];v.value[e]=v.value[e+1],v.value[e+1]=a,await t.put("/api/settings/statuses/reorder",{statuses:v.value}),window.dispatchEvent(new CustomEvent("statusesUpdated"))}},A=()=>{l.value=!1,i.value="",n.value=null},E=()=>{o.value=!1,r.value="",u.value=""};return(0,s.sV)(()=>{g(),b()}),(e,a)=>{const t=(0,s.g2)("Toast"),d=(0,s.g2)("Button"),p=(0,s.g2)("Card"),g=(0,s.g2)("InputText"),b=(0,s.g2)("Badge"),R=(0,s.g2)("Dropdown"),x=(0,s.g2)("Dialog"),T=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)("div",gd,[(0,s.bF)(t),(0,s.bF)(p,{class:"header-card mb-4"},{content:(0,s.k6)(()=>[(0,s.Lk)("div",bd,[(0,s.Lk)("div",fd,[(0,s.bF)(d,{icon:"pi pi-arrow-left",onClick:a[0]||(a[0]=a=>e.$router.go(-1)),text:"",class:"back-btn"}),a[11]||(a[11]=(0,s.Lk)("div",{class:"header-title"},[(0,s.Lk)("i",{class:"pi pi-briefcase header-icon"}),(0,s.Lk)("h1",null,"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô")],-1))]),(0,s.Lk)("div",yd,[(0,s.Lk)("div",wd," ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà: "+(0,c.v_)(m.value.length)+" | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: "+(0,c.v_)(v.value.length),1)])])]),_:1}),(0,s.Lk)("div",Ld,[(0,s.bF)(p,{class:"action-card",onClick:a[1]||(a[1]=a=>e.$router.push("/management/projects"))},{content:(0,s.k6)(()=>[...a[12]||(a[12]=[(0,s.Lk)("div",{class:"action-content"},[(0,s.Lk)("div",{class:"action-header"},[(0,s.Lk)("i",{class:"pi pi-folder action-icon"}),(0,s.Lk)("h3",null,"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô")]),(0,s.Lk)("p",null,"‡∏î‡∏π‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"),(0,s.Lk)("div",{class:"action-stats"},[(0,s.Lk)("span",{class:"stat-label"},"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î")])],-1)])]),_:1}),(0,s.bF)(p,{class:"action-card",onClick:a[2]||(a[2]=a=>e.$router.push("/management/daily-work"))},{content:(0,s.k6)(()=>[...a[13]||(a[13]=[(0,s.Lk)("div",{class:"action-content"},[(0,s.Lk)("div",{class:"action-header"},[(0,s.Lk)("i",{class:"pi pi-calendar action-icon"}),(0,s.Lk)("h3",null,"‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô")]),(0,s.Lk)("p",null,"‡∏î‡∏π‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô"),(0,s.Lk)("div",{class:"action-stats"},[(0,s.Lk)("span",{class:"stat-label"},"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î")])],-1)])]),_:1}),(0,s.bF)(p,{class:"action-card",onClick:a[3]||(a[3]=e=>l.value=!0)},{content:(0,s.k6)(()=>[(0,s.Lk)("div",Fd,[a[15]||(a[15]=(0,s.Lk)("div",{class:"action-header"},[(0,s.Lk)("i",{class:"pi pi-tags action-icon"}),(0,s.Lk)("h3",null,"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏á‡∏≤‡∏ô")],-1)),a[16]||(a[16]=(0,s.Lk)("p",null,"‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏ö‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏á‡∏≤‡∏ô",-1)),(0,s.Lk)("div",Dd,[(0,s.Lk)("span",Cd,(0,c.v_)(m.value.length),1),a[14]||(a[14]=(0,s.Lk)("span",{class:"stat-label"},"‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà",-1))])])]),_:1}),(0,s.bF)(p,{class:"action-card",onClick:a[4]||(a[4]=e=>o.value=!0)},{content:(0,s.k6)(()=>[(0,s.Lk)("div",_d,[a[18]||(a[18]=(0,s.Lk)("div",{class:"action-header"},[(0,s.Lk)("i",{class:"pi pi-flag action-icon"}),(0,s.Lk)("h3",null,"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô")],-1)),a[19]||(a[19]=(0,s.Lk)("p",null,"‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô",-1)),(0,s.Lk)("div",Ad,[(0,s.Lk)("span",Ed,(0,c.v_)(v.value.length),1),a[17]||(a[17]=(0,s.Lk)("span",{class:"stat-label"},"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞",-1))])])]),_:1})]),(0,s.bF)(x,{visible:l.value,"onUpdate:visible":a[7]||(a[7]=e=>l.value=e),header:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏á‡∏≤‡∏ô",style:{width:"600px"},modal:"",draggable:!1,position:"center"},{footer:(0,s.k6)(()=>[(0,s.bF)(d,{label:"‡∏õ‡∏¥‡∏î",onClick:A})]),default:(0,s.k6)(()=>[(0,s.Lk)("div",Rd,[(0,s.Lk)("div",xd,[(0,s.Lk)("div",Td,[(0,s.Lk)("div",Id,[(0,s.bF)(g,{modelValue:i.value,"onUpdate:modelValue":a[5]||(a[5]=e=>i.value=e),placeholder:"‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡∏°‡πà",class:"flex-1"},null,8,["modelValue"]),(0,s.bF)(R,{modelValue:n.value,"onUpdate:modelValue":a[6]||(a[6]=e=>n.value=e),options:h.value,optionLabel:"label",placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ‡πÅ‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà",class:"icon-dropdown",style:{"min-width":"200px"}},{value:(0,s.k6)(e=>[e.value?((0,s.uX)(),(0,s.CE)("div",Ud,[(0,s.bF)(b,{value:e.value.label,style:(0,c.Tr)({backgroundColor:e.value.color,color:"#fff"})},null,8,["value","style"])])):((0,s.uX)(),(0,s.CE)("span",Vd,"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ‡πÅ‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà"))]),option:(0,s.k6)(e=>[(0,s.bF)(b,{value:e.option.label,style:(0,c.Tr)({backgroundColor:e.option.color,color:"#fff"})},null,8,["value","style"])]),_:1},8,["modelValue","options"]),(0,s.bF)(d,{icon:"pi pi-plus",onClick:f,disabled:!i.value.trim()||!n.value},null,8,["disabled"])]),n.value?((0,s.uX)(),(0,s.CE)("div",Sd,[a[20]||(a[20]=(0,s.Lk)("span",null,"‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:",-1)),(0,s.bF)(b,{value:i.value||"‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡∏°‡πà",style:(0,c.Tr)({backgroundColor:n.value.color,color:"#fff"})},null,8,["value","style"])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",$d,[a[21]||(a[21]=(0,s.Lk)("h4",null,"‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà",-1)),(0,s.Lk)("div",Xd,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.value,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:e.value,class:"category-item"},[(0,s.Lk)("div",jd,[(0,s.bF)(b,{value:e.label,style:(0,c.Tr)({backgroundColor:e.color||"#6c757d",color:"#fff"})},null,8,["value","style"])]),(0,s.Lk)("div",Wd,[(0,s.bo)((0,s.bF)(d,{icon:"pi pi-arrow-up",class:"p-button-text p-button-sm",onClick:e=>w(a),disabled:0===a},null,8,["onClick","disabled"]),[[T,"‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô"]]),(0,s.bo)((0,s.bF)(d,{icon:"pi pi-arrow-down",class:"p-button-text p-button-sm",onClick:e=>L(a),disabled:a===m.value.length-1},null,8,["onClick","disabled"]),[[T,"‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏á"]]),(0,s.bo)((0,s.bF)(d,{icon:"pi pi-trash",class:"p-button-text p-button-danger p-button-sm",onClick:a=>y(e.value)},null,8,["onClick"]),[[T,"‡∏•‡∏ö"]])])]))),128))])])])]),_:1},8,["visible"]),(0,s.bF)(x,{visible:o.value,"onUpdate:visible":a[10]||(a[10]=e=>o.value=e),header:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô",style:{width:"600px"},modal:"",draggable:!1,position:"center"},{footer:(0,s.k6)(()=>[(0,s.bF)(d,{label:"‡∏õ‡∏¥‡∏î",onClick:E})]),default:(0,s.k6)(()=>[(0,s.Lk)("div",Bd,[(0,s.Lk)("div",Od,[(0,s.Lk)("div",Nd,[(0,s.Lk)("div",Kd,[(0,s.bF)(g,{modelValue:r.value,"onUpdate:modelValue":a[8]||(a[8]=e=>r.value=e),placeholder:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏´‡∏°‡πà",class:"flex-1"},null,8,["modelValue"]),(0,s.bF)(R,{modelValue:u.value,"onUpdate:modelValue":a[9]||(a[9]=e=>u.value=e),options:k.value,optionLabel:"label",placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô",class:"icon-dropdown",style:{"min-width":"200px"}},{value:(0,s.k6)(e=>[e.value?((0,s.uX)(),(0,s.CE)("div",Md,[(0,s.bF)(b,{value:e.value.label,style:(0,c.Tr)({backgroundColor:e.value.color,color:"#fff"})},null,8,["value","style"])])):((0,s.uX)(),(0,s.CE)("span",Hd,"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô"))]),option:(0,s.k6)(e=>[(0,s.Lk)("div",Pd,[(0,s.bF)(b,{value:e.option.label,style:(0,c.Tr)({backgroundColor:e.option.color,color:"#fff"})},null,8,["value","style"])])]),_:1},8,["modelValue","options"]),(0,s.bF)(d,{icon:"pi pi-plus",onClick:F,disabled:!r.value.trim()||!u.value},null,8,["disabled"])]),u.value?((0,s.uX)(),(0,s.CE)("div",Qd,[a[22]||(a[22]=(0,s.Lk)("span",null,"‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:",-1)),(0,s.bF)(b,{value:r.value||"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏´‡∏°‡πà",style:(0,c.Tr)({backgroundColor:u.value.color,color:"#fff"})},null,8,["value","style"])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",qd,[a[23]||(a[23]=(0,s.Lk)("h4",null,"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà",-1)),(0,s.Lk)("div",Yd,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.value,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:e.value,class:"status-item"},[(0,s.Lk)("div",zd,[(0,s.bF)(b,{value:e.label,style:(0,c.Tr)({backgroundColor:e.color||"#6c757d",color:"#fff"})},null,8,["value","style"])]),(0,s.Lk)("div",Gd,[(0,s.bo)((0,s.bF)(d,{icon:"pi pi-arrow-up",class:"p-button-text p-button-sm",onClick:e=>C(a),disabled:0===a},null,8,["onClick","disabled"]),[[T,"‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô"]]),(0,s.bo)((0,s.bF)(d,{icon:"pi pi-arrow-down",class:"p-button-text p-button-sm",onClick:e=>_(a),disabled:a===v.value.length-1},null,8,["onClick","disabled"]),[[T,"‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏á"]]),(0,s.bo)((0,s.bF)(d,{icon:"pi pi-trash",class:"p-button-text p-button-danger p-button-sm",onClick:a=>D(e.value)},null,8,["onClick"]),[[T,"‡∏•‡∏ö"]])])]))),128))])])])]),_:1},8,["visible"])])}}};const Zd=(0,$.A)(Jd,[["__scopeId","data-v-3c751aca"]]);var ec=Zd;const ac={class:"projects-view"},tc={class:"header-content"};function lc(e,a){const t=(0,s.g2)("Button"),l=(0,s.g2)("Card");return(0,s.uX)(),(0,s.CE)("div",ac,[(0,s.bF)(l,{class:"header-card mb-4"},{content:(0,s.k6)(()=>[(0,s.Lk)("div",tc,[(0,s.bF)(t,{icon:"pi pi-arrow-left",onClick:a[0]||(a[0]=a=>e.$router.go(-1)),text:"",class:"back-btn"}),a[1]||(a[1]=(0,s.Lk)("div",{class:"header-title"},[(0,s.Lk)("i",{class:"pi pi-folder header-icon"}),(0,s.Lk)("h1",null,"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô")],-1))])]),_:1}),(0,s.bF)(l,null,{content:(0,s.k6)(()=>[...a[2]||(a[2]=[(0,s.Lk)("div",{class:"empty-state"},[(0,s.Lk)("i",{class:"pi pi-folder-open empty-icon"}),(0,s.Lk)("h3",null,"‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤"),(0,s.Lk)("p",null,"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î")],-1)])]),_:1})])}const sc={},oc=(0,$.A)(sc,[["render",lc],["__scopeId","data-v-284d84de"]]);var ic=oc;const rc={class:"daily-work-management"},nc={class:"header-content"};function dc(e,a){const t=(0,s.g2)("Button"),l=(0,s.g2)("Card");return(0,s.uX)(),(0,s.CE)("div",rc,[(0,s.bF)(l,{class:"header-card mb-4"},{content:(0,s.k6)(()=>[(0,s.Lk)("div",nc,[(0,s.bF)(t,{icon:"pi pi-arrow-left",onClick:a[0]||(a[0]=a=>e.$router.go(-1)),text:"",class:"back-btn"}),a[1]||(a[1]=(0,s.Lk)("div",{class:"header-title"},[(0,s.Lk)("i",{class:"pi pi-calendar header-icon"}),(0,s.Lk)("h1",null,"‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô")],-1))])]),_:1}),(0,s.bF)(l,null,{content:(0,s.k6)(()=>[...a[2]||(a[2]=[(0,s.Lk)("div",{class:"empty-state"},[(0,s.Lk)("i",{class:"pi pi-calendar-plus empty-icon"}),(0,s.Lk)("h3",null,"‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤"),(0,s.Lk)("p",null,"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î")],-1)])]),_:1})])}const cc={},uc=(0,$.A)(cc,[["render",dc],["__scopeId","data-v-b19648c6"]]);var pc=uc;const mc={class:"settings-container"},vc={class:"header-content"},hc={class:"settings-grid"},kc={class:"card-content"},gc={class:"card-header"},bc={class:"card-content"},fc={class:"card-header"},yc={class:"card-content"},wc={class:"card-header"},Lc={class:"card-content"},Fc={class:"card-header"};var Dc={__name:"SystemSettings",setup(e){const a=(0,K.rd)(),t=(0,q.d)(),l=e=>{"role-permissions"===e&&a.push("/management/settings/role-permissions")},o=()=>{t.add({severity:"info",summary:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤",detail:"‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤",life:3e3})};return(e,a)=>{const t=(0,s.g2)("Toast"),i=(0,s.g2)("Button"),r=(0,s.g2)("Card"),n=(0,s.g2)("Badge");return(0,s.uX)(),(0,s.CE)("div",mc,[(0,s.bF)(t),(0,s.bF)(r,{class:"header-card mb-4"},{content:(0,s.k6)(()=>[(0,s.Lk)("div",vc,[(0,s.bF)(i,{icon:"pi pi-arrow-left",text:"",rounded:"",onClick:a[0]||(a[0]=a=>e.$router.push("/management")),class:"back-btn"}),a[2]||(a[2]=(0,s.Lk)("div",{class:"header-title"},[(0,s.Lk)("i",{class:"pi pi-cog"}),(0,s.Lk)("h1",null,"‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö")],-1))])]),_:1}),(0,s.Lk)("div",hc,[(0,s.bF)(r,{class:"setting-card",onClick:a[1]||(a[1]=e=>l("role-permissions"))},{content:(0,s.k6)(()=>[(0,s.Lk)("div",kc,[(0,s.Lk)("div",gc,[a[3]||(a[3]=(0,s.Lk)("i",{class:"pi pi-shield card-icon"},null,-1)),(0,s.bF)(n,{value:"Active",severity:"success"})]),a[4]||(a[4]=(0,s.Lk)("h3",null,"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á",-1)),a[5]||(a[5]=(0,s.Lk)("p",null,"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏ï‡∏≤‡∏° Role",-1)),a[6]||(a[6]=(0,s.Lk)("div",{class:"card-footer"},[(0,s.Lk)("i",{class:"pi pi-arrow-right"})],-1))])]),_:1}),(0,s.bF)(r,{class:"setting-card",onClick:o},{content:(0,s.k6)(()=>[(0,s.Lk)("div",bc,[(0,s.Lk)("div",fc,[a[7]||(a[7]=(0,s.Lk)("i",{class:"pi pi-bell card-icon"},null,-1)),(0,s.bF)(n,{value:"Coming Soon",severity:"warning"})]),a[8]||(a[8]=(0,s.Lk)("h3",null,"‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô",-1)),a[9]||(a[9]=(0,s.Lk)("p",null,"‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô Email ‡πÅ‡∏•‡∏∞ Line",-1)),a[10]||(a[10]=(0,s.Lk)("div",{class:"card-footer"},[(0,s.Lk)("i",{class:"pi pi-arrow-right"})],-1))])]),_:1}),(0,s.bF)(r,{class:"setting-card",onClick:o},{content:(0,s.k6)(()=>[(0,s.Lk)("div",yc,[(0,s.Lk)("div",wc,[a[11]||(a[11]=(0,s.Lk)("i",{class:"pi pi-sliders-h card-icon"},null,-1)),(0,s.bF)(n,{value:"Coming Soon",severity:"warning"})]),a[12]||(a[12]=(0,s.Lk)("h3",null,"‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏ô‡∏ü‡∏¥‡∏Å‡∏£‡∏∞‡∏ö‡∏ö",-1)),a[13]||(a[13]=(0,s.Lk)("p",null,"‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠",-1)),a[14]||(a[14]=(0,s.Lk)("div",{class:"card-footer"},[(0,s.Lk)("i",{class:"pi pi-arrow-right"})],-1))])]),_:1}),(0,s.bF)(r,{class:"setting-card",onClick:o},{content:(0,s.k6)(()=>[(0,s.Lk)("div",Lc,[(0,s.Lk)("div",Fc,[a[15]||(a[15]=(0,s.Lk)("i",{class:"pi pi-save card-icon"},null,-1)),(0,s.bF)(n,{value:"Coming Soon",severity:"warning"})]),a[16]||(a[16]=(0,s.Lk)("h3",null,"‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",-1)),a[17]||(a[17]=(0,s.Lk)("p",null,"‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",-1)),a[18]||(a[18]=(0,s.Lk)("div",{class:"card-footer"},[(0,s.Lk)("i",{class:"pi pi-arrow-right"})],-1))])]),_:1})])])}}};const Cc=(0,$.A)(Dc,[["__scopeId","data-v-22a1e104"]]);var _c=Cc;const Ac={class:"permissions-container"},Ec={class:"header-content"},Rc={class:"role-selector"},xc={class:"table-header"},Tc=["onDblclick"],Ic={key:0},Uc=["onDblclick"],Vc=["onDblclick"],Sc={style:{"margin-left":"0.5rem","font-size":"0.85rem",color:"#6c757d"}},$c={key:1,class:"action-bar"},Xc={class:"add-permission-form"},jc={class:"field"},Wc={class:"field"},Bc={class:"field"},Oc={class:"field"};var Nc={__name:"RolePermissions",setup(e){const a=(0,q.d)(),t=(0,xe.S)(),o=(0,d.KR)(null),i=(0,d.KR)(!1),r=(0,d.KR)([]),n=(0,d.KR)(null),u=(0,d.KR)(!1),m=(0,d.KR)({name:"",path:"",icon:"pi pi-circle",hasAccess:!0}),v=(0,d.KR)([{id:1,name:"‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô",path:"/daily_work",icon:"pi pi-home",hasAccess:!1},{id:2,name:"‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£",path:"/projects",icon:"pi pi-briefcase",hasAccess:!1},{id:3,name:"‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå",path:"/profile",icon:"pi pi-user",hasAccess:!1},{id:4,name:"‡∏à‡∏≠‡∏á‡∏£‡∏ñ",path:"/car_booking",icon:"pi pi-car",hasAccess:!1},{id:5,name:"‡∏•‡∏≤‡∏á‡∏≤‡∏ô",path:"/leave_work",icon:"pi pi-calendar-times",hasAccess:!1},{id:6,name:"‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏•‡∏≤‡∏á‡∏≤‡∏ô",path:"/leave_work/approve",icon:"pi pi-check-circle",hasAccess:!1},{id:7,name:"‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£",path:"/management",icon:"pi pi-cog",hasAccess:!1},{id:8,name:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô",path:"/management/users",icon:"pi pi-users",hasAccess:!1},{id:9,name:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô",path:"/management/tasks",icon:"pi pi-briefcase",hasAccess:!1},{id:10,name:"‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö",path:"/management/settings",icon:"pi pi-cog",hasAccess:!1},{id:11,name:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå",path:"/management/settings/role-permissions",icon:"pi pi-shield",hasAccess:!1}]);(0,s.sV)(async()=>{await h()});const h=async()=>{try{const e=await p.A.get("/api/users/roles",{});r.value=e.data.roles.map(e=>({label:e.charAt(0).toUpperCase()+e.slice(1),value:e}))}catch(e){console.error("Error loading roles:",e),r.value=[{label:"Superadmin",value:"superadmin"},{label:"Admin",value:"admin"},{label:"Manager",value:"manager"},{label:"User",value:"user"}]}};(0,s.wB)(o,async e=>{e&&await k(e)});const k=async e=>{try{const a=await p.A.get(`/api/role-permissions/${e}`,{});a.data.permissions&&v.value.forEach(e=>{const t=a.data.permissions.find(a=>a.page_path===e.path);e.hasAccess=!!t&&t.has_access})}catch(a){g(e)}},g=e=>{v.value.forEach(a=>{a.hasAccess="superadmin"===e||("admin"===e?!a.path.includes("role-permissions"):"manager"===e?!["/management/users","/management/settings"].some(e=>a.path.includes(e)):["/daily_work","/profile","/car_booking","/leave_work"].includes(a.path))})},b=(e,a)=>{n.value={...e},"name"===a&&(e.editingName=!0),"path"===a&&(e.editingPath=!0),"icon"===a&&(e.editingIcon=!0)},f=(e,l)=>{const s=n.value[l],o=e[l];s!==o&&t.require({message:`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô ${"name"===l?"‡∏ä‡∏∑‡πà‡∏≠":"path"===l?"Path":"Icon"} ‡∏à‡∏≤‡∏Å "${s}" ‡πÄ‡∏õ‡πá‡∏ô "${o}" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`,header:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",icon:"pi pi-exclamation-triangle",acceptLabel:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",rejectLabel:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",blockScroll:!0,draggable:!1,accept:()=>{a.add({severity:"success",summary:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á",life:3e3})},reject:()=>{e[l]=s}}),e.editingName=!1,e.editingPath=!1,e.editingIcon=!1},y=()=>{t.require({message:`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Role "${o.value}" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`,header:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å",icon:"pi pi-save",acceptLabel:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å",rejectLabel:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",blockScroll:!0,draggable:!1,accept:()=>{L()}})},w=()=>{if(!m.value.name||!m.value.path)return void a.add({severity:"warn",summary:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",detail:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡∏∞ Path",life:3e3});const e=Math.max(...v.value.map(e=>e.id))+1;v.value.push({id:e,name:m.value.name,path:m.value.path,icon:m.value.icon||"pi pi-circle",hasAccess:m.value.hasAccess}),a.add({severity:"success",summary:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á",life:3e3}),u.value=!1,m.value={name:"",path:"",icon:"pi pi-circle",hasAccess:!0}},L=async()=>{i.value=!0;try{const e=v.value.map(e=>({role:o.value,page_path:e.path,page_name:e.name,page_icon:e.icon,has_access:e.hasAccess}));await p.A.post("/api/role-permissions",{permissions:e}),a.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3}),setTimeout(()=>{window.location.reload()},1e3)}catch(e){a.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÑ‡∏î‡πâ",life:3e3})}finally{i.value=!1}};return(e,a)=>{const t=(0,s.g2)("Toast"),n=(0,s.g2)("Button"),d=(0,s.g2)("Card"),p=(0,s.g2)("Dropdown"),h=(0,s.g2)("InputText"),k=(0,s.g2)("Column"),g=(0,s.g2)("InputSwitch"),L=(0,s.g2)("DataTable"),F=(0,s.g2)("Dialog");return(0,s.uX)(),(0,s.CE)("div",Ac,[(0,s.bF)(t),(0,s.bF)(d,{class:"header-card mb-4"},{content:(0,s.k6)(()=>[(0,s.Lk)("div",Ec,[(0,s.bF)(n,{icon:"pi pi-arrow-left",text:"",rounded:"",onClick:a[0]||(a[0]=a=>e.$router.push("/management/settings")),class:"back-btn"}),a[9]||(a[9]=(0,s.Lk)("div",{class:"header-title"},[(0,s.Lk)("i",{class:"pi pi-shield"}),(0,s.Lk)("h1",null,"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á")],-1))])]),_:1}),(0,s.bF)(d,{class:"mb-4"},{content:(0,s.k6)(()=>[(0,s.Lk)("div",Rc,[a[10]||(a[10]=(0,s.Lk)("label",null,"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Role:",-1)),(0,s.bF)(p,{modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value=e),options:r.value,optionLabel:"label",optionValue:"value",placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Role",class:"w-full md:w-14rem"},null,8,["modelValue","options"])])]),_:1}),o.value?((0,s.uX)(),(0,s.Wv)(d,{key:0},{content:(0,s.k6)(()=>[(0,s.Lk)("div",xc,[(0,s.bF)(n,{label:"‡πÄ‡∏û‡∏¥‡πà‡∏° Permission",icon:"pi pi-plus",onClick:a[2]||(a[2]=e=>u.value=!0),severity:"success",size:"small"})]),(0,s.bF)(L,{value:v.value,class:"p-datatable-sm",stripedRows:""},{default:(0,s.k6)(()=>[(0,s.bF)(k,{field:"name",header:"‡∏´‡∏ô‡πâ‡∏≤ (Double-click ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç)",style:{"min-width":"200px"}},{body:(0,s.k6)(({data:e})=>[(0,s.Lk)("div",{class:"page-info",onDblclick:a=>b(e,"name")},[(0,s.Lk)("i",{class:(0,c.C4)([e.icon,"page-icon"])},null,2),e.editingName?((0,s.uX)(),(0,s.Wv)(h,{key:1,modelValue:e.name,"onUpdate:modelValue":a=>e.name=a,onBlur:a=>f(e,"name"),onKeyup:(0,l.jR)(a=>f(e,"name"),["enter"]),autofocus:""},null,8,["modelValue","onUpdate:modelValue","onBlur","onKeyup"])):((0,s.uX)(),(0,s.CE)("span",Ic,(0,c.v_)(e.name),1))],40,Tc)]),_:1}),(0,s.bF)(k,{field:"path",header:"Path (Double-click ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç)",style:{"min-width":"200px"}},{body:(0,s.k6)(({data:e})=>[e.editingPath?((0,s.uX)(),(0,s.Wv)(h,{key:1,modelValue:e.path,"onUpdate:modelValue":a=>e.path=a,onBlur:a=>f(e,"path"),onKeyup:(0,l.jR)(a=>f(e,"path"),["enter"]),autofocus:""},null,8,["modelValue","onUpdate:modelValue","onBlur","onKeyup"])):((0,s.uX)(),(0,s.CE)("code",{key:0,onDblclick:a=>b(e,"path")},(0,c.v_)(e.path),41,Uc))]),_:1}),(0,s.bF)(k,{field:"icon",header:"Icon (Double-click ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç)",style:{"min-width":"150px"}},{body:(0,s.k6)(({data:e})=>[e.editingIcon?((0,s.uX)(),(0,s.Wv)(h,{key:1,modelValue:e.icon,"onUpdate:modelValue":a=>e.icon=a,placeholder:"pi pi-home",onBlur:a=>f(e,"icon"),onKeyup:(0,l.jR)(a=>f(e,"icon"),["enter"]),autofocus:""},null,8,["modelValue","onUpdate:modelValue","onBlur","onKeyup"])):((0,s.uX)(),(0,s.CE)("div",{key:0,onDblclick:a=>b(e,"icon")},[(0,s.Lk)("i",{class:(0,c.C4)(e.icon),style:{"font-size":"1.2rem",color:"#4A90E2"}},null,2),(0,s.Lk)("span",Sc,(0,c.v_)(e.icon),1)],40,Vc))]),_:1}),(0,s.bF)(k,{header:"‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á",style:{width:"150px"}},{body:(0,s.k6)(({data:e})=>[(0,s.bF)(g,{modelValue:e.hasAccess,"onUpdate:modelValue":a=>e.hasAccess=a},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["value"])]),_:1})):(0,s.Q3)("",!0),o.value?((0,s.uX)(),(0,s.CE)("div",$c,[(0,s.bF)(n,{label:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á",icon:"pi pi-save",onClick:y,loading:i.value},null,8,["loading"])])):(0,s.Q3)("",!0),(0,s.bF)(F,{visible:u.value,"onUpdate:visible":a[8]||(a[8]=e=>u.value=e),header:"‡πÄ‡∏û‡∏¥‡πà‡∏° Permission ‡πÉ‡∏´‡∏°‡πà",modal:!0,draggable:!1,style:{width:"500px"}},{footer:(0,s.k6)(()=>[(0,s.bF)(n,{label:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",icon:"pi pi-times",onClick:a[7]||(a[7]=e=>u.value=!1),severity:"secondary"}),(0,s.bF)(n,{label:"‡πÄ‡∏û‡∏¥‡πà‡∏°",icon:"pi pi-check",onClick:w})]),default:(0,s.k6)(()=>[(0,s.Lk)("div",Xc,[(0,s.Lk)("div",jc,[a[11]||(a[11]=(0,s.Lk)("label",null,"‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤",-1)),(0,s.bF)(h,{modelValue:m.value.name,"onUpdate:modelValue":a[3]||(a[3]=e=>m.value.name=e),placeholder:"‡πÄ‡∏ä‡πà‡∏ô: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",class:"w-full"},null,8,["modelValue"])]),(0,s.Lk)("div",Wc,[a[12]||(a[12]=(0,s.Lk)("label",null,"Path",-1)),(0,s.bF)(h,{modelValue:m.value.path,"onUpdate:modelValue":a[4]||(a[4]=e=>m.value.path=e),placeholder:"‡πÄ‡∏ä‡πà‡∏ô: /management/products",class:"w-full"},null,8,["modelValue"])]),(0,s.Lk)("div",Bc,[a[13]||(a[13]=(0,s.Lk)("label",null,"Icon",-1)),(0,s.bF)(h,{modelValue:m.value.icon,"onUpdate:modelValue":a[5]||(a[5]=e=>m.value.icon=e),placeholder:"‡πÄ‡∏ä‡πà‡∏ô: pi pi-box",class:"w-full"},null,8,["modelValue"])]),(0,s.Lk)("div",Oc,[a[14]||(a[14]=(0,s.Lk)("label",null,"‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á",-1)),(0,s.bF)(g,{modelValue:m.value.hasAccess,"onUpdate:modelValue":a[6]||(a[6]=e=>m.value.hasAccess=e)},null,8,["modelValue"])])])]),_:1},8,["visible"])])}}};const Kc=(0,$.A)(Nc,[["__scopeId","data-v-84146ed6"]]);var Mc=Kc,Hc=t(558),Pc=t(3045);const Qc={class:"leave-management-container"},qc={class:"header-content"},Yc={class:"table-header"},zc={class:"filters-section"},Gc={class:"table-wrapper"},Jc={class:"leave-type-header"},Zc={class:"quota-cell"},eu={class:"quota-row"},au={class:"quota-value"},tu={class:"remaining"},lu={class:"leave-type-form"},su={class:"field"},ou={class:"field"},iu={key:0,class:"edit-quota-form"},ru={class:"user-info"},nu={class:"field"},du={class:"field"},cu={class:"field-hint"},uu={class:"field"},pu={class:"field-hint"};var mu={__name:"LeaveManagement",setup(e){const a=(0,q.d)(),t=(0,xe.S)(),l=(0,d.KR)([]),o=(0,d.KR)([]),i=(0,d.KR)(!1),r=(0,d.KR)(!1),n=(0,d.KR)(!1),u=(0,d.KR)(!1),m=(0,d.KR)(""),v=(0,d.KR)(0),h=(0,d.KR)(""),k=(0,d.KR)(null),g=(0,d.KR)(null),b=(0,d.KR)([]),f=(0,d.KR)([]),y=(0,d.KR)(null),w=(0,d.KR)(null),L=(0,d.KR)(0),F=(0,d.KR)(0),D=(0,d.KR)(0),C=(0,d.KR)(0),_=(0,s.EW)(()=>{let e=l.value;if(h.value){const a=h.value.toLowerCase();e=e.filter(e=>e.firstname?.toLowerCase().includes(a)||e.lastname?.toLowerCase().includes(a)||e.department?.toLowerCase().includes(a)||e.position?.toLowerCase().includes(a))}return k.value&&(e=e.filter(e=>e.department===k.value)),g.value&&(e=e.filter(e=>e.position===g.value)),e});(0,s.sV)(()=>{A(),E()});const A=async()=>{try{const e=await p.A.get("/api/leave/leave-types");o.value=e.data}catch(e){console.error("Error loading leave types:",e)}},E=async()=>{try{const e=await p.A.get("/api/users");l.value=await Promise.all(e.data.map(async e=>{try{const a=await p.A.get(`/api/leave/quota/${e.id}`),t=a.data,l={...e};for(const[e,s]of Object.entries(t))l[`${e}_quota`]=s?.quota||0,l[`${e}_used`]=s?.usedDays||0,l[`${e}_remaining`]=s?.remainingDays||0;return l}catch(a){return console.error(`Error loading quota for user ${e.id}:`,a),{...e}}})),R()}catch(e){a.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ",life:3e3})}},R=()=>{const e=[...new Set(l.value.map(e=>e.department).filter(Boolean))];b.value=e.map(e=>({label:e,value:e}));const a=[...new Set(l.value.map(e=>e.position).filter(Boolean))];f.value=a.map(e=>({label:e,value:e}))},x=(e,a)=>{y.value=e,w.value=a,L.value=e[`${a.value}_quota`]||0,F.value=e[`${a.value}_remaining`]||0,D.value=L.value,C.value=F.value,r.value=!0},T=()=>{r.value=!1,y.value=null,w.value=null,L.value=0,F.value=0,D.value=0,C.value=0},I=async()=>{if(D.value!==L.value||C.value!==F.value)if(C.value>D.value)a.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",life:3e3});else{u.value=!0;try{await p.A.put(`/api/leave/quota/${y.value.id}/${w.value.value}`,{quota:D.value,remaining:C.value}),a.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3}),T(),await E()}catch(e){console.error("Save quota error:",e),a.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:e.response?.data?.error||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡πÑ‡∏î‡πâ",life:3e3})}finally{u.value=!1}}else a.add({severity:"info",summary:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á",detail:"‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á",life:3e3})},U=()=>{i.value=!1,m.value="",v.value=0},V=async()=>{if(m.value.trim()){n.value=!0;try{await p.A.post("/api/leave/leave-types",{name:m.value.trim(),default_quota:v.value}),a.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3}),U(),await A(),await E()}catch(e){console.error("Add leave type error:",e),a.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:e.response?.data?.error||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡πÑ‡∏î‡πâ",life:3e3})}finally{n.value=!1}}else a.add({severity:"error",summary:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤",life:3e3})},S=e=>{t.require({message:`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤ "${e.label}" ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n\n‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏î‡πâ‡∏ß‡∏¢`,header:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö",icon:"pi pi-exclamation-triangle",acceptLabel:"‡∏•‡∏ö",rejectLabel:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",acceptClass:"p-button-danger",accept:()=>{$(e.value)}})},$=async e=>{try{await p.A.delete(`/api/leave/leave-types/${encodeURIComponent(e)}`),a.add({severity:"success",summary:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",detail:"‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",life:3e3}),await A(),await E()}catch(t){console.error("Delete leave type error:",t),a.add({severity:"error",summary:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",detail:t.response?.data?.error||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡πÑ‡∏î‡πâ",life:3e3})}};return(e,a)=>{const t=(0,s.g2)("Toast"),l=(0,s.g2)("Button"),p=(0,s.g2)("Card"),A=(0,s.g2)("InputIcon"),E=(0,s.g2)("InputText"),R=(0,s.g2)("IconField"),$=(0,s.g2)("Dropdown"),X=(0,s.g2)("Column"),j=(0,s.g2)("Badge"),W=(0,s.g2)("DataTable"),B=(0,s.g2)("Dialog");return(0,s.uX)(),(0,s.CE)("div",Qc,[(0,s.bF)(t),(0,s.bF)(p,{class:"header-card mb-4"},{content:(0,s.k6)(()=>[(0,s.Lk)("div",qc,[(0,s.bF)(l,{icon:"pi pi-arrow-left",text:"",rounded:"",onClick:a[0]||(a[0]=a=>e.$router.push("/management")),class:"back-btn"}),a[11]||(a[11]=(0,s.Lk)("div",{class:"header-title"},[(0,s.Lk)("i",{class:"pi pi-calendar-times"}),(0,s.Lk)("h1",null,"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡∏á‡∏≤‡∏ô")],-1))])]),_:1}),(0,s.bF)(p,null,{content:(0,s.k6)(()=>[(0,s.Lk)("div",Yc,[a[12]||(a[12]=(0,s.Lk)("h3",null,"‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡∏Ç‡∏≠‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô",-1)),(0,s.bF)(l,{label:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤",icon:"pi pi-plus",onClick:a[1]||(a[1]=e=>i.value=!0)})]),(0,s.Lk)("div",zc,[(0,s.bF)(R,{iconPosition:"left",class:"search-field"},{default:(0,s.k6)(()=>[(0,s.bF)(A,{class:"pi pi-search"}),(0,s.bF)(E,{modelValue:h.value,"onUpdate:modelValue":a[2]||(a[2]=e=>h.value=e),placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠, ‡πÅ‡∏ú‡∏ô‡∏Å, ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á...",class:"w-full"},null,8,["modelValue"])]),_:1}),(0,s.bF)($,{modelValue:k.value,"onUpdate:modelValue":a[3]||(a[3]=e=>k.value=e),options:b.value,optionLabel:"label",optionValue:"value",placeholder:"‡∏ó‡∏∏‡∏Å‡πÅ‡∏ú‡∏ô‡∏Å",class:"filter-dropdown",showClear:""},null,8,["modelValue","options"]),(0,s.bF)($,{modelValue:g.value,"onUpdate:modelValue":a[4]||(a[4]=e=>g.value=e),options:f.value,optionLabel:"label",optionValue:"value",placeholder:"‡∏ó‡∏∏‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",class:"filter-dropdown",showClear:""},null,8,["modelValue","options"])]),(0,s.Lk)("div",Gc,[(0,s.bF)(W,{value:_.value,paginator:!0,rows:10,stripedRows:"",class:"p-datatable-sm",scrollable:"",scrollHeight:"600px"},{default:(0,s.k6)(()=>[(0,s.bF)(X,{field:"firstname",header:"‡∏ä‡∏∑‡πà‡∏≠",sortable:!0,frozen:"",style:{"min-width":"150px"}},{body:(0,s.k6)(({data:e})=>[(0,s.eW)((0,c.v_)(e.firstname)+" "+(0,c.v_)(e.lastname),1)]),_:1}),(0,s.bF)(X,{field:"department",header:"‡πÅ‡∏ú‡∏ô‡∏Å",sortable:!0,frozen:"",style:{"min-width":"120px"}}),(0,s.bF)(X,{field:"position",header:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",sortable:!0,frozen:"",style:{"min-width":"120px"}}),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.value,e=>((0,s.uX)(),(0,s.Wv)(X,{key:e.value,style:{"min-width":"150px"}},{header:(0,s.k6)(()=>[(0,s.Lk)("div",Jc,[(0,s.bF)(j,{value:e.label,style:(0,c.Tr)({backgroundColor:e.color,color:"#fff",fontWeight:"bold"})},null,8,["value","style"]),(0,s.bF)(l,{icon:"pi pi-trash",size:"small",text:"",severity:"danger",onClick:a=>S(e)},null,8,["onClick"])])]),body:(0,s.k6)(({data:t})=>[(0,s.Lk)("div",Zc,[(0,s.Lk)("div",eu,[a[13]||(a[13]=(0,s.Lk)("small",null,"‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤:",-1)),(0,s.Lk)("span",au,(0,c.v_)(t[`${e.value}_quota`]||0)+" ‡∏ß‡∏±‡∏ô",1),(0,s.bF)(l,{icon:"pi pi-pencil",size:"small",text:"",onClick:a=>x(t,e)},null,8,["onClick"])]),(0,s.Lk)("small",tu,"‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: "+(0,c.v_)(t[`${e.value}_remaining`]||0)+" ‡∏ß‡∏±‡∏ô",1)])]),_:2},1024))),128))]),_:1},8,["value"])])]),_:1}),(0,s.bF)(B,{visible:i.value,"onUpdate:visible":a[7]||(a[7]=e=>i.value=e),header:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡πÉ‡∏´‡∏°‡πà",modal:!0,draggable:!1,style:{width:"400px"}},{footer:(0,s.k6)(()=>[(0,s.bF)(l,{label:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",icon:"pi pi-times",onClick:U,severity:"secondary"}),(0,s.bF)(l,{label:"‡πÄ‡∏û‡∏¥‡πà‡∏°",icon:"pi pi-check",onClick:V,loading:n.value},null,8,["loading"])]),default:(0,s.k6)(()=>[(0,s.Lk)("div",lu,[(0,s.Lk)("div",su,[a[14]||(a[14]=(0,s.Lk)("label",null,"‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤ *",-1)),(0,s.bF)(E,{modelValue:m.value,"onUpdate:modelValue":a[5]||(a[5]=e=>m.value=e),placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏≤‡∏ö‡∏ß‡∏ä, ‡∏•‡∏≤‡∏≠‡∏∏‡∏õ‡∏™‡∏°‡∏ö‡∏ó",class:"w-full"},null,8,["modelValue"])]),(0,s.Lk)("div",ou,[a[15]||(a[15]=(0,s.Lk)("label",null,"‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏ß‡∏±‡∏ô/‡∏õ‡∏µ) *",-1)),(0,s.bF)((0,d.R1)(Hc.A),{modelValue:v.value,"onUpdate:modelValue":a[6]||(a[6]=e=>v.value=e),min:0,max:365,showButtons:"",class:"w-full"},null,8,["modelValue"])])])]),_:1},8,["visible"]),(0,s.bF)(B,{visible:r.value,"onUpdate:visible":a[10]||(a[10]=e=>r.value=e),header:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏•‡∏≤",modal:!0,draggable:!1,style:{width:"450px"}},{footer:(0,s.k6)(()=>[(0,s.bF)(l,{label:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",icon:"pi pi-times",onClick:T,severity:"secondary"}),(0,s.bF)(l,{label:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å",icon:"pi pi-check",onClick:I,loading:u.value},null,8,["loading"])]),default:(0,s.k6)(()=>[y.value?((0,s.uX)(),(0,s.CE)("div",iu,[(0,s.Lk)("div",ru,[a[16]||(a[16]=(0,s.Lk)("i",{class:"pi pi-user"},null,-1)),(0,s.Lk)("div",null,[(0,s.Lk)("h4",null,(0,c.v_)(y.value.firstname)+" "+(0,c.v_)(y.value.lastname),1),(0,s.Lk)("small",null,(0,c.v_)(y.value.department)+" - "+(0,c.v_)(y.value.position),1)])]),(0,s.bF)((0,d.R1)(Pc.A)),(0,s.Lk)("div",nu,[a[17]||(a[17]=(0,s.Lk)("label",null,"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏•‡∏≤",-1)),(0,s.bF)(j,{value:w.value?.label,style:(0,c.Tr)({backgroundColor:w.value?.color,color:"#fff"})},null,8,["value","style"])]),(0,s.Lk)("div",du,[a[18]||(a[18]=(0,s.Lk)("label",null,"‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ß‡∏±‡∏ô/‡∏õ‡∏µ) *",-1)),(0,s.bF)((0,d.R1)(Hc.A),{modelValue:D.value,"onUpdate:modelValue":a[8]||(a[8]=e=>D.value=e),min:0,max:365,showButtons:"",class:"w-full",suffix:" ‡∏ß‡∏±‡∏ô"},null,8,["modelValue"]),(0,s.Lk)("small",cu,"‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: "+(0,c.v_)(L.value)+" ‡∏ß‡∏±‡∏ô",1)]),(0,s.Lk)("div",uu,[a[19]||(a[19]=(0,s.Lk)("label",null,"‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (‡∏ß‡∏±‡∏ô) *",-1)),(0,s.bF)((0,d.R1)(Hc.A),{modelValue:C.value,"onUpdate:modelValue":a[9]||(a[9]=e=>C.value=e),min:0,max:D.value,showButtons:"",class:"w-full",suffix:" ‡∏ß‡∏±‡∏ô"},null,8,["modelValue","max"]),(0,s.Lk)("small",pu,"‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: "+(0,c.v_)(F.value)+" ‡∏ß‡∏±‡∏ô",1)])])):(0,s.Q3)("",!0)]),_:1},8,["visible"])])}}};const vu=(0,$.A)(mu,[["__scopeId","data-v-7dd481f9"]]);var hu=vu;const ku=[{path:"/",name:"",redirect:"daily_work"},{path:"/login",name:"login",component:de,meta:{title:"‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ - Gent-CEM"}},{path:"/profile",name:"profile",component:ze,meta:{requiresAuth:!0,title:"‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå - Gent-CEM"}},{path:"/two-authentication",name:"two-authentication",component:Ae,meta:{title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô 2 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô - Gent-CEM"}},{path:"/car_booking",name:"car booking",component:ml,meta:{requiresAuth:!0,title:"‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡πÄ‡∏à‡πâ‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏ñ - Gent-CEM"}},{path:"/leave_work",name:"leave work",component:Zs,meta:{requiresAuth:!0,title:"‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏•‡∏≤‡∏á‡∏≤‡∏ô - Gent-CEM"}},{path:"/daily_work",name:"daily work",component:Ui,meta:{requiresAuth:!0,title:"‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô - Gent-CEM"}},{path:"/projects",name:"projects-main",component:pn,meta:{requiresAuth:!0,title:"‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ - Gent-CEM"}},{path:"/management",name:"management",component:Un,meta:{requiresAuth:!0,title:"‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ - Gent-CEM"}},{path:"/management/users",name:"user-management",component:kd,meta:{requiresAuth:!0,title:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô - Gent-CEM"}},{path:"/management/tasks",name:"task-management",component:ec,meta:{requiresAuth:!0,title:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô - Gent-CEM"}},{path:"/management/projects",name:"management-projects",component:ic,meta:{requiresAuth:!0,title:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô - Gent-CEM"}},{path:"/management/daily-work",name:"daily-work-management",component:pc,meta:{requiresAuth:!0,title:"‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô - Gent-CEM"}},{path:"/management/settings",name:"system-settings",component:_c,meta:{requiresAuth:!0,title:"‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö - Gent-CEM"}},{path:"/management/settings/role-permissions",name:"role-permissions",component:Mc,meta:{requiresAuth:!0,title:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á - Gent-CEM"}},{path:"/management/leave",name:"leave-management",component:hu,meta:{requiresAuth:!0,title:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡∏á‡∏≤‡∏ô - Gent-CEM"}},{path:"/:pathMatch(.*)*",redirect:()=>"/daily_work"}],gu=(0,K.aE)({mode:"history",history:(0,K.LA)("/"),routes:ku});gu.beforeEach(async(e,a,t)=>{const l=localStorage.getItem("soc_user_id"),s=localStorage.getItem("soc_role");if(e.meta.requiresAuth){if(!l)return void t("/login");if(s&&"/profile"!==e.path&&"/login"!==e.path&&"/two-authentication"!==e.path){const{loadPermissions:l,canAccessRoute:s,permissionsLoaded:o}=k();if(o.value||await l(),!s(e.path))return void(a.path&&a.path!==e.path?t(a.path):t("/daily_work"))}t()}else t()});var bu=gu,fu=t(6278),yu=(0,fu.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}}),wu=t(1656),Lu=t(634),Fu=t(888),Du=t(1081),Cu=t(1959),_u=t(4878),Au=t(2835),Eu=t(8749),Ru=t(1637),xu=t(8934),Tu=t(9512),Iu=t(74),Uu=t(4471),Vu=t(6710),Su=t(449),$u=t(1268),Xu=t(7492),ju=t(2327),Wu=t(4199),Bu=t(6159),Ou=t(3901);p.A.defaults.baseURL="http://localhost:3001",p.A.defaults.withCredentials=!0,p.A.interceptors.response.use(e=>e,e=>(401===e.response?.status&&e.response?.data?.expired&&(localStorage.clear(),window.location.href="/login"),Promise.reject(e))),window.axios=p.A;const Nu="Vue SOC Application";bu.afterEach(e=>{(0,s.dY)(()=>{document.title=e.meta.title||Nu})});const Ku=(0,l.Ef)(N);Ku.use(yu),Ku.use(bu),Ku.use(wu.Ay,{ripple:!0}),Ku.component("Button",Bo.A),Ku.component("Card",Du.A),Ku.component("Calendar",Cu.A),Ku.component("Chart",_u.A),Ku.component("Column",Au.A),Ku.component("DataTable",Eu.A),Ku.component("Dialog",Ru.A),Ku.component("Divider",Pc.A),Ku.component("Dropdown",rl.A),Ku.component("FloatLabel",xu.A),Ku.component("IconField",Tu.A),Ku.component("InputIcon",Uu.A),Ku.component("Badge",Vu.A),Ku.component("ConfirmPopup",Su.A),Ku.component("ConfirmDialog",m.A),Ku.component("InputText",M.A),Ku.component("InputSwitch",Iu.A),Ku.component("AutoComplete",il.A),Ku.component("OverlayPanel",$u.A),Ku.component("ScrollPanel",Xu.A),Ku.component("Toast",Re.A),Ku.component("TabView",ju.A),Ku.component("TabPanel",Wu.A),Ku.component("Textarea",Bu.A),Ku.directive("Tooltip",Ou.A),Ku.use(Lu.A),Ku.use(Fu.A),Ku.mount("#app")}},a={};function t(l){var s=a[l];if(void 0!==s)return s.exports;var o=a[l]={exports:{}};return e[l](o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(a,l,s,o){if(!l){var i=1/0;for(c=0;c<e.length;c++){l=e[c][0],s=e[c][1],o=e[c][2];for(var r=!0,n=0;n<l.length;n++)(!1&o||i>=o)&&Object.keys(t.O).every(function(e){return t.O[e](l[n])})?l.splice(n--,1):(r=!1,o<i&&(i=o));if(r){e.splice(c--,1);var d=s();void 0!==d&&(a=d)}}return a}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[l,s,o]}}(),function(){t.d=function(e,a){for(var l in a)t.o(a,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce(function(a,l){return t.f[l](e,a),a},[]))}}(),function(){t.u=function(e){return"js/"+e+".e9c7f431.js"}}(),function(){t.miniCssF=function(e){}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={},a="gent-cem:";t.l=function(l,s,o,i){if(e[l])e[l].push(s);else{var r,n;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==l||u.getAttribute("data-webpack")==a+o){r=u;break}}r||(n=!0,r=document.createElement("script"),r.charset="utf-8",t.nc&&r.setAttribute("nonce",t.nc),r.setAttribute("data-webpack",a+o),r.src=l),e[l]=[s];var p=function(a,t){r.onerror=r.onload=null,clearTimeout(m);var s=e[l];if(delete e[l],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach(function(e){return e(t)}),a)return a(t)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),n&&document.head.appendChild(r)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={524:0};t.f.j=function(a,l){var s=t.o(e,a)?e[a]:void 0;if(0!==s)if(s)l.push(s[2]);else{var o=new Promise(function(t,l){s=e[a]=[t,l]});l.push(s[2]=o);var i=t.p+t.u(a),r=new Error,n=function(l){if(t.o(e,a)&&(s=e[a],0!==s&&(e[a]=void 0),s)){var o=l&&("load"===l.type?"missing":l.type),i=l&&l.target&&l.target.src;r.message="Loading chunk "+a+" failed.\n("+o+": "+i+")",r.name="ChunkLoadError",r.type=o,r.request=i,s[1](r)}};t.l(i,n,"chunk-"+a,a)}},t.O.j=function(a){return 0===e[a]};var a=function(a,l){var s,o,i=l[0],r=l[1],n=l[2],d=0;if(i.some(function(a){return 0!==e[a]})){for(s in r)t.o(r,s)&&(t.m[s]=r[s]);if(n)var c=n(t)}for(a&&a(l);d<i.length;d++)o=i[d],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(c)},l=self["webpackChunkgent_cem"]=self["webpackChunkgent_cem"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))}();var l=t.O(void 0,[504],function(){return t(1305)});l=t.O(l)})();
//# sourceMappingURL=app.5b0530f6.js.map